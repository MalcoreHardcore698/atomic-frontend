(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[7],{LSTS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=a("q1tI"),o=l(i),r=l(a("17x9"));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.scrollListener=a.scrollListener.bind(a),a.eventListenerOptions=a.eventListenerOptions.bind(a),a.mousewheelListener=a.mousewheelListener.bind(a),a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(a){}return e}},{key:"eventListenerOptions",value:function(){var e=this.props.useCapture;return this.isPassiveSupported()&&(e={useCapture:this.props.useCapture,passive:!0}),e}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,a=this.getParentElement(e),n=void 0;if(this.props.useWindow){var i=document.documentElement||document.body.parentNode||document.body,o=void 0!==t.pageYOffset?t.pageYOffset:i.scrollTop;n=this.props.isReverse?o:this.calculateOffset(e,o)}else n=this.props.isReverse?a.scrollTop:e.scrollHeight-a.scrollTop-a.clientHeight;n<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=a.scrollHeight,this.beforeScrollTop=a.scrollTop,"function"===typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),a=t.children,n=t.element,i=t.hasMore,r=(t.initialLoad,t.isReverse),l=t.loader,s=(t.loadMore,t.pageStart,t.ref),c=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));c.ref=function(t){e.scrollComponent=t,s&&s(t)};var d=[a];return i&&(l?r?d.unshift(l):d.push(l):this.defaultLoader&&(r?d.unshift(this.defaultLoader):d.push(this.defaultLoader))),o.default.createElement(n,c,d)}}]),t}(i.Component);s.propTypes={children:r.default.node.isRequired,element:r.default.node,hasMore:r.default.bool,initialLoad:r.default.bool,isReverse:r.default.bool,loader:r.default.node,loadMore:r.default.func.isRequired,pageStart:r.default.number,ref:r.default.func,getScrollParent:r.default.func,threshold:r.default.number,useCapture:r.default.bool,useWindow:r.default.bool},s.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=s,e.exports=t.default},OqOz:function(e,t,a){"use strict";a.d(t,"a",(function(){return L}));var n=a("q1tI"),i=a.n(n),o=a("/MKj"),r=a("7Cbv"),l=a("8CDE"),s=a("p9yE"),c=a("vOnD"),d=a("VX74"),u=a("EJJs"),p=a("ZwIX"),h=a("auMy"),m=a("586Q"),f=a("VP1n"),g=a("RotF"),v=a.n(g),b=a("20a2");Object(c.d)(l.a).withConfig({displayName:"List__Wrap",componentId:"sc-1jo6mxw-0"})([""]),Object(c.d)(p.a).withConfig({displayName:"List__CenterAlert",componentId:"sc-1jo6mxw-1"})(["width:100%;text-align:center;"]);var E=({type:e,query:t,template:a,variables:r,component:l,limit:s=6,startOffset:c=6,setCheckedList:p,onChecked:g,onClick:E,onEdit:y,onDelete:w})=>{const x=Object(b.useRouter)(),O=Object(o.c)((e=>e.root.displayMethod)),k=Object(n.useMemo)((()=>{var e;return Number(null===(e=x.query)||void 0===e?void 0:e.page)||1}),[x]),[C,j]=Object(n.useState)(c+1),[S,L]=Object(n.useState)([]),[_,T]=Object(n.useState)(!1),{data:P,loading:M,refetch:I}=Object(d.useQuery)(t,{variables:{...r,offset:0,limit:s}}),R=Object(n.useCallback)((()=>"grid"===O?i.a.createElement(m.b,null,(S||[]).map((e=>i.a.createElement(f.a,{key:e.id||e.email},l(e))))):i.a.createElement(u.b,{data:S,template:a,onChecked:g,onClick:E,onEdit:y,onDelete:w})),[S,O,g,E,y,w]);return Object(n.useEffect)((()=>{if(!M&&P){const t=P[e];t.length>0&&L((e=>[...e,...t])),0===t.length&&T(!0)}}),[P,M,T]),Object(n.useEffect)((()=>{(null===S||void 0===S?void 0:S.length)>0&&p&&p(S)}),[S,p]),i.a.createElement(v.a,{pageStart:k||0,loadMore:async()=>{const t={...r,offset:C,limit:s};if(I){0===(await I(t)).data[e].length&&T(!0),j((e=>e+s))}},hasMore:!_,loader:i.a.createElement(m.d,{key:"loader"},i.a.createElement(h.a,null))},R())},y=a("RoTl"),w=a("coMr"),x=a("xAqQ"),O=a("Sza6"),k=a("Ztxg"),C=a("9Xo6");const j=e=>{var t;return"ADMIN"!==(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toUpperCase())},S=({item:e,query:t,component:a,entityMultiText:r,entitySingleText:s,onSubmit:c})=>{const d=Object(n.useMemo)((()=>Array.isArray(e)),[e]),u=Object(o.b)(),p=a;return i.a.createElement(x.a,{mutation:t,appearance:"clear",onCancel:()=>u(Object(k.a)(null)),onSubmit:async(t,a)=>{try{await a({variables:{id:d?e.map((e=>e.id)):[e.id]}}),u(Object(C.c)({type:"success",message:d?`${r} \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u044b`:`${s} \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d`}))}catch(n){n&&u(Object(C.c)({type:"error",message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}))}finally{u(Object(k.a)(null)),c&&c()}}},d?i.a.createElement(l.a,null,e.map((e=>i.a.createElement(p,{key:e.id,item:e})))):i.a.createElement(p,{item:e}))},L=({item:e,checked:t,appearance:a,component:n,withoutChecked:o,onChecked:r,onLink:l,onEdit:s,onDelete:c})=>i.a.cloneElement(n,{checked:t,appearance:a,onChecked:!o&&(t=>r({...e,checked:t})),onLink:l&&(()=>l(e)),onEdit:s&&(()=>s(e)),onDelete:c&&(()=>c(e))}),_=({render:e,title:t,icon:a,field:c,filters:d,options:u,template:p,limit:h=6,startOffset:m=6,buttonCreateText:f,getType:g,getQuery:v,deleteQuery:b,deleteEntityMultiText:x,deleteEntitySingleText:C,onLink:_,onEdit:T,onCreate:P,emptyMessage:M,withoutChecked:I})=>{const{displayMethod:R,visibleFilters:N}=Object(o.c)((e=>({displayMethod:e.root.displayMethod,visibleFilters:e.root.visibleFilters}))),D=Object(o.b)(),[q,W]=Object(n.useState)(!1),[V,A]=Object(n.useState)([]),[Q,z]=Object(n.useState)("list"),H=Object(n.useCallback)((e=>{var t;return null===(t=V.find((t=>t[c]===e[c])))||void 0===t?void 0:t.checked}),[V]),U=e=>{A((t=>{const a=t=>t[c]===e[c];return t.find(a)?t.map((t=>a(t)?{...e,checked:!t.checked}:{...t,checked:q||t.checked})):[...t,{...e,checked:!0}]})),W(!1)},F=()=>{const e=!q;A((t=>t.map((t=>({...t,checked:!!j(t)&&e}))))),W(e)},B=t=>D(Object(k.a)({icon:"delete",color:"red",title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",content:i.a.createElement(S,{item:t,query:b,component:t=>i.a.cloneElement(e(t.item),{appearance:"clear"}),entityMultiText:x,entitySingleText:C,onSubmit:()=>z(Object(r.a)())})}));return Object(n.useEffect)((()=>{const e=V.reduce(((e,t)=>e+(t.checked?1:0)),0);V.length>0&&e===V.length&&W(!0)}),[V]),i.a.createElement(s.a,{title:t},i.a.createElement(l.a,null,i.a.createElement(w.b,{title:t,icon:a,checked:q,defaultDisplayMethod:R,defaultVisibleFilters:N,buttonDeleteDisabled:!V.find((e=>e.checked)),buttonCreateText:f,onCreate:P,onChecked:()=>"grid"===R&&F&&F(),onChangeVisibleFilter:()=>D(Object(O.u)(!N)),onChangeDisplayMethod:e=>D(Object(O.l)(e.value)),onDeleteAll:()=>B(V.filter((e=>e.checked))),withoutFooter:"list"===R,withFilters:d&&u}),(d||u)&&i.a.createElement(y.a,{isOpen:N,filters:d,options:u}),i.a.createElement(E,{key:Q,limit:h,type:g,query:v,template:p,startOffset:m,setCheckedList:A,component:t=>i.a.createElement(L,{item:t,component:e(t),checked:j(t)&&(q||H(t)),onChecked:U,onLink:e=>_(e),onEdit:e=>T(e),onDelete:B,withoutChecked:I}),emptyMessage:M,onChecked:U,onClick:e=>_(e),onEdit:e=>T(e),onDelete:B})))};_.defaultProps={field:"id"};t.b=_},RotF:function(e,t,a){e.exports=a("LSTS")},p9yE:function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),o=a("g4pe"),r=a.n(o),l=a("YFqc"),s=a.n(l),c=a("20a2"),d=a("vOnD"),u=a("VX74"),p=a("/MKj"),h=a("nShV"),m=a("N0uN"),f=a("t7jn"),g=a("VWQm"),v=a("auMy"),b=a("8CDE"),E=a("ZeZO"),y=a("V0nP"),w=a("feIE"),x=a("wOhW"),O=a("ApjV"),k=a("586Q"),C=a("ThpJ"),j=a("RKiZ"),S=a("7sPp"),L=a("QUga"),_=a("hfch"),T=a("NWnW");const P="rgba(255, 255, 255, 25%)",M=Object(d.d)(h.b).withConfig({displayName:"SideBar__Wrap",componentId:"sc-158a552-0"})(["--padding-offset:15px;display:flex;flex-direction:column;width:240px;height:100vh;background:var(--admin-color-accent);color:white;overflow:hidden;overflow-y:auto;@media only screen and (max-width:996px){width:62px;}"]),I=Object(d.d)(h.b).withConfig({displayName:"SideBar__Profile",componentId:"sc-158a552-1"})(["padding:var(--default-gap) var(--default-gap) 5px var(--default-gap);@media only screen and (max-width:996px){padding:var(--default-gap) var(--default-gap) 0 var(--default-gap);","{max-width:var(--input-height-s);max-height:var(--input-height-s);min-width:var(--input-height-s);min-height:var(--input-height-s);width:var(--input-height-s);height:var(--input-height-s);}}"],C.a),R=Object(d.d)(b.a).withConfig({displayName:"SideBar__Info",componentId:"sc-158a552-2"})(["grid-gap:0;"]),N=Object(d.d)(S.a).withConfig({displayName:"SideBar__Name",componentId:"sc-158a552-3"})(["font-size:var(--font-h4);font-weight:var(--font-weight-medium);"]),D=Object(d.d)(L.b).withConfig({displayName:"SideBar__Role",componentId:"sc-158a552-4"})(["color:",";"],P),q=d.d.div.withConfig({displayName:"SideBar__Strip",componentId:"sc-158a552-5"})(["display:flex;justify-content:space-between;align-items:center;padding:5px var(--default-gap);a{position:relative;padding:0 15px;transition:background 150ms ease;&.active,&:hover{background:#10151c;}}@media only screen and (max-width:480px){padding:5px 0;}"]),W=Object(d.d)(h.b).withConfig({displayName:"SideBar__Label",componentId:"sc-158a552-6"})(["align-items:center;"]),V=Object(d.d)(w.a).withConfig({displayName:"SideBar__LabelIcon",componentId:"sc-158a552-7"})(["width:var(--input-height-s);height:var(--input-height-s);background:var(--admin-color-accent-dim);border-radius:var(--surface-border-radius);"," @media only screen and (max-width:480px){background:var(--default-color-accent-dim);"," svg{path{stroke:var(--default-color-accent);","}}}"],(({active:e})=>e&&Object(d.c)(["background:white;"])),(({active:e})=>e&&Object(d.c)(["background:var(--default-color-accent);"])),(({active:e})=>e&&Object(d.c)(["stroke:white;"]))),A=Object(d.d)(L.b).withConfig({displayName:"SideBar__LabelText",componentId:"sc-158a552-8"})(["color:",";font-weight:var(--font-weight-medium);",""],P,(({active:e})=>e&&Object(d.c)(["color:white;"]))),Q=({active:e,icon:t,text:a,count:n})=>i.a.createElement(q,null,i.a.createElement(W,null,i.a.createElement(V,{icon:t,size:"xs",stroke:e?"var(--default-color-accent)":P,active:e}),i.a.createElement(A,{active:e},a)),n&&i.a.createElement(_.a,{count:n,size:"xs",style:e?{}:{background:P,borderColor:"transparent",color:"var(--admin-color-accent)"}})),z=({user:e,link:t,links:a,...n})=>i.a.createElement(M,n,i.a.createElement(I,null,i.a.createElement(C.b,{src:e.avatar,alt:"Avatar",size:"m"}),i.a.createElement(R,null,i.a.createElement(N,null,e.name),i.a.createElement(D,null,Object(T.g)(e.role)))),i.a.createElement(j.a,{style:{background:"var(--admin-color-accent-dim)",margin:"10px 0"}}),a&&a.length>0&&a.map(((e,a)=>i.a.createElement(i.a.Fragment,{key:a},e.divide&&i.a.createElement(j.a,{style:{background:"var(--admin-color-accent-dim)",margin:"10px 0"}}),i.a.createElement(t,{href:e.path},e.component)))));z.defaultProps={link:({children:e,...t})=>i.a.createElement("a",t,e)};var H=z,U=a("h4VS"),F=a("QclZ"),B=a("ZwIX"),G=i.a.createElement;function J(){var e=Object(U.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n  flex-grow: 1;\n"]);return J=function(){return e},e}function Z(){var e=Object(U.a)(["\n  padding: var(--default-gap);\n"]);return Z=function(){return e},e}var K=Object(d.d)(b.a)(Z()),Y=d.d.div(J()),X=function(e){var t=e.result,a=e.search,o=e.loading,r=e.entities,l=e.initialEntity,s=e.appearance,c=e.style,d=e.className,u=e.onChange,p=e.onSubmit,h=Object(n.useState)(l),m=h[0],g=h[1],b=Object(n.useRef)(null);return Object(n.useEffect)((function(){u&&u(m)}),[m,u]),G(K,{style:c,className:d,appearance:s},G(F.a,{appearance:"ghost",defaultValue:m,placeholder:"\u0413\u0434\u0435 \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043a\u0430\u0442\u044c?",label:"\u0417\u043e\u043d\u0430 \u043f\u043e\u0438\u0441\u043a\u0430",options:r,onChange:function(e){g(e),null!==b&&void 0!==b&&b.current&&(b.current.value="",p&&p(""))},isLoading:o,isSearchable:!0,isClearable:!0}),!o&&m&&G(i.a.Fragment,null,G(f.a,{ref:b,appearance:"ghost",placeholder:"\u041f\u043e\u0438\u0441\u043a",defaultValue:a,onSubmit:p}),(null===t||void 0===t?void 0:t.length)>0?t.map((function(e){return m.render&&G(i.a.Fragment,{key:e.id||e.email},m.render(e))})):G(B.a,{style:{width:"100%",textAlign:"center",flexGrow:1}},"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")),o&&G(Y,null,G(v.a,null)))};X.defaultProps={appearance:"clear"};var $=X,ee=a("OqOz"),te=a("qOKH");const ae=Object(n.memo)((({data:e,loading:t,search:a,entity:n,entities:o,onChange:r,onSubmit:l})=>{const s=Object(p.b)(),c=()=>s(Object(te.a)(null));return i.a.createElement($,{search:a,loading:t,initialEntity:n,result:a&&e&&n&&e[null===n||void 0===n?void 0:n.value],entities:(o||[]).map((e=>({...e,render:t=>i.a.createElement(ee.a,{key:t.id||t.email,item:t,appearance:"clear",component:e.render(t),onLink:c,onEdit:c,onDelete:c,withoutChecked:!0})}))),onSubmit:l,onChange:r})}));var ne=Object(n.memo)((({search:e,entity:t,entities:a,setSearch:n,onHide:o,onChange:r})=>{const[l,{data:s,loading:c,refetch:d}]=t?Object(u.useLazyQuery)(t.query):[null,{data:null,loading:!1,refetch:null}];return i.a.createElement(ae,{data:s,entity:t,search:e,loading:c,entities:a,onHide:o,onChange:r,onSubmit:e=>{const t={search:e};n&&n(e),e&&(d&&d(t),l&&l({variables:t}))}})})),ie=a("TsNn"),oe=a("yEVw"),re=a("UwjQ"),le=a("1zqG"),se=a("4nJQ"),ce=a("4NP5"),de=a("u2Cb");const ue=[{value:"getUsers",label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",singlePath:"user",originPath:"users",query:de.a.GET_USERS,deleteQuery:de.a.DELETE_USER,deleteEntityMultiText:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",deleteEntitySingleText:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",render:e=>i.a.createElement(ie.a,{user:e})},{value:"getCategories",label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",singlePath:"category",originPath:"categories",query:de.a.GET_CATEGORIES,deleteQuery:de.a.DELETE_CATEGORY,deleteEntityMultiText:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",deleteEntitySingleText:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",render:e=>i.a.createElement(oe.a,{category:e})},{value:"getArticles",label:"\u0421\u0442\u0430\u0442\u044c\u0438",singlePath:"article",originPath:"articles",query:de.a.GET_ARTICLES,deleteQuery:de.a.DELETE_ARTICLE,deleteEntityMultiText:"\u0421\u0442\u0430\u0442\u044c\u0438",deleteEntitySingleText:"\u0421\u0442\u0430\u0442\u044c\u044f",render:e=>i.a.createElement(re.b,{article:e})},{value:"getProjects",label:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b",singlePath:"project",originPath:"projects",query:de.a.GET_PROJECTS,deleteQuery:de.a.DELETE_PROJECT,deleteEntityMultiText:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u044b",deleteEntitySingleText:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442",render:e=>i.a.createElement(le.c,{project:e,preview:!0})},{value:"getTickets",label:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f",singlePath:"ticket",originPath:"tickets",query:de.a.GET_TICKETS,deleteQuery:de.a.DELETE_TICKET,deleteEntityMultiText:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f",deleteEntitySingleText:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435",render:e=>i.a.createElement(se.a,{ticket:e})},{value:"getRoles",label:"\u0420\u043e\u043b\u0438",singlePath:"role",originPath:"roles",query:de.a.GET_ROLES,deleteQuery:de.a.DELETE_ROLE,deleteEntityMultiText:"\u0420\u043e\u043b\u0438",deleteEntitySingleText:"\u0420\u043e\u043b\u044c",render:e=>i.a.createElement(ce.a,{role:e})}];var pe=({onJump:e,onHide:t})=>{const[a,o]=Object(n.useState)(null),[r,l]=Object(n.useState)(null);return i.a.createElement(ne,{search:r,entity:a,entities:ue,setSearch:l,onChange:o,onJump:e,onHide:t})},he=a("+EEm"),me=a("8ihE"),fe=a("rOcY");var ge=e=>{const t=t=>e.find((e=>e===t)),a=[{path:"/",component:i.a.createElement(Q,{icon:"activity",text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}],n=t("VIEW_USER"),o=t("VIEW_CATEGORY"),r=t("VIEW_ARTICLE"),l=t("VIEW_PROJECT"),s=t("VIEW_TICKET"),c=t("VIEW_ROLE"),d=t("VIEW_USER");return n&&a.push({path:"/users",component:i.a.createElement(Q,{icon:"user2",text:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})}),o&&a.push({path:"/categories",component:i.a.createElement(Q,{icon:"folder",text:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})}),r&&a.push({path:"/articles",component:i.a.createElement(Q,{icon:"document",text:"\u0421\u0442\u0430\u0442\u044c\u0438"})}),l&&a.push({path:"/projects",component:i.a.createElement(Q,{icon:"work",text:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b"})}),s&&a.push({path:"/tickets",component:i.a.createElement(Q,{icon:"ticket",text:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"})}),c&&a.push({divide:!0,path:"/roles",component:i.a.createElement(Q,{icon:"lock",text:"\u0420\u043e\u043b\u0438"})}),d&&a.push({path:"/settings",component:i.a.createElement(Q,{icon:"setting",text:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})}),a};const ve=d.d.main.withConfig({displayName:"dashboard__Main",componentId:"sc-9r28sr-0"})(["display:flex;grid-gap:var(--default-gap);width:100%;"]),be=d.d.header.withConfig({displayName:"dashboard__Header",componentId:"sc-9r28sr-1"})(["position:fixed;top:0;left:0;z-index:var(--z-15);display:flex;grid-gap:var(--default-gap);background:var(--surface-background);border:var(--surface-border);box-shadow:var(--surface-shadow);padding:var(--default-gap);width:100%;flex-grow:100;"]),Ee=Object(d.d)(H).withConfig({displayName:"dashboard__SideBar",componentId:"sc-9r28sr-2"})(["position:fixed;top:70px;left:0;height:calc(100vh - 70px);z-index:var(--z-12);@media only screen and (max-width:480px){display:none;}"]),ye=Object(d.d)(E.a).withConfig({displayName:"dashboard__MenuButton",componentId:"sc-9r28sr-3"})(["display:none;@media only screen and (max-width:768px){display:flex;justify-content:center;align-items:center;}"]),we=Object(d.d)(h.b).withConfig({displayName:"dashboard__LogoZone",componentId:"sc-9r28sr-4"})(["justify-content:space-between;@media only screen and (max-width:996px){width:auto;}"]),xe=d.d.div.withConfig({displayName:"dashboard__Logotype",componentId:"sc-9r28sr-5"})(["display:flex;justify-content:flex-start;align-items:center;img{height:30px;object-fit:contain;}@media only screen and (max-width:996px){min-width:auto;}@media only screen and (max-width:480px){display:none;}"]),Oe=Object(d.d)(m.a).withConfig({displayName:"dashboard__Content",componentId:"sc-9r28sr-6"})(["padding:70px 15px 15px 255px;flex-grow:1;@media only screen and (max-width:996px){padding:70px 15px 15px 80px;}@media only screen and (max-width:480px){padding:70px 15px 15px 15px;}"]);t.a=({children:e,title:t="\u041f\u0430\u043d\u0435\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"})=>{var a,o;const l=Object(O.b)(),d=Object(c.useRouter)(),{root:h,user:m}=Object(p.c)((e=>e)),[E,{data:C,loading:j}]=Object(u.useLazyQuery)(de.a.GET_USER),S=Object(p.b)();return Object(n.useEffect)((()=>{localStorage.getItem(fe.a.get("secret"))?E():d.push("/")}),[]),Object(n.useEffect)((()=>{if(C&&C.getUser){var e;(null===(e=C.getUser.role)||void 0===e?void 0:e.permissions.find((e=>"ACCESS_DASHBOARD"===e)))?S(Object(me.b)(C.getUser)):d.push("/")}}),[C,S]),j||!m.authenticated?i.a.createElement(k.a,null,i.a.createElement(v.a,null)):i.a.createElement(x.a,null,i.a.createElement(r.a,null,i.a.createElement("meta",{name:"keywords",content:"next,javascript,nextjs,react"}),i.a.createElement("meta",{name:"description",content:h.settings.meta.description}),i.a.createElement("title",null,t)),i.a.createElement(be,null,i.a.createElement(ye,{kind:"icon",appearance:"clear",onClick:l(he.e,{links:ge((null===m||void 0===m?void 0:m.role.permissions)||[]).map(((e,t)=>({id:t,text:e.component,onClick:()=>d.push(`/dashboard${e.path}`)})))})},i.a.createElement(w.a,{icon:"menu"})),i.a.createElement(we,null,i.a.createElement(g.b,{text:h.settings.meta.description,offset:{bottom:5},place:"bottom",maxWidth:256,multiline:!0},i.a.createElement(xe,null,i.a.createElement(s.a,{href:"/"},i.a.createElement("a",null,i.a.createElement(y.a,{src:null===(a=h.settings.general.logotype)||void 0===a?void 0:a.path,alt:"Logotype"})))))),i.a.createElement(f.a,{appearance:"ghost",onClick:()=>S(Object(te.a)([{path:"/",title:"\u041f\u043e\u0438\u0441\u043a",component:({jump:e,close:t})=>i.a.createElement(pe,{onJump:e,onHide:t})}],"l")),disable:!0})),i.a.createElement(ve,null,i.a.createElement(Ee,{user:{name:m.name,role:m.role.name,avatar:(null===m||void 0===m||null===(o=m.avatar)||void 0===o?void 0:o.path)||"/images/avatar-default.png"},link:s.a,links:ge((null===m||void 0===m?void 0:m.role.permissions)||[]).map(((e,t)=>{const a=`/dashboard${e.path.length>1?e.path:""}`;return{...e,path:a,component:i.a.createElement("a",{key:t,className:d.pathname===a?"active":""},i.a.cloneElement(e.component,{active:d.pathname===a}))}}))}),i.a.createElement(Oe,null,i.a.createElement(b.a,null,e))))}}}]);