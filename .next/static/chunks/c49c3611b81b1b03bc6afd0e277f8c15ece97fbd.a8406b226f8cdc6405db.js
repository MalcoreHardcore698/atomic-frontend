(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{"/y2W":function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),c=a("VX74"),l=a("/MKj"),r=a("20a2"),o=a("vOnD"),d=a("nShV"),s=a("7BXr"),p=a("ZwIX"),m=a("auMy"),u=a("RKiZ"),h=a("ZeZO"),b=a("EJJs"),g=a("586Q"),f=a("VP1n");const E=o.d.div.withConfig({displayName:"List__Wrap",componentId:"sc-1jo6mxw-0"})(["width:100%;","{width:calc(100vw - 280px);}"],b.b),y=(Object(o.d)(p.a).withConfig({displayName:"List__CenterAlert",componentId:"sc-1jo6mxw-1"})(["width:100%;text-align:center;"]),()=>i.a.createElement(g.d,{key:"loader"},i.a.createElement(m.a,null))),x=({type:e,search:t,refetch:a,loading:c,template:o,component:p,variables:m,limit:x=6,emptyMessage:v,initialList:w,initialDisplayMethod:k,setCheckedList:O,gridOptions:j,withoutMore:C,onChecked:_,onClick:T,onEdit:I,onDelete:S})=>{var N;const D=Object(r.useRouter)(),M=Object(l.c)((e=>e.root.displayMethod)),[z,L]=Object(n.useState)(w||[]),[A,V]=Object(n.useState)(Number(null===(N=D.query)||void 0===N?void 0:N.page)||1),[P,q]=Object(n.useState)(!1),[R,F]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{(null===z||void 0===z?void 0:z.length)>0&&O&&O(z)}),[z,O]),i.a.createElement(E,null,"grid"===(k||M)&&i.a.createElement(s.a,j,z.map((e=>i.a.createElement(f.a,{key:e.id||e.email},p(e))))),"list"===(k||M)&&i.a.createElement(b.c,{data:z,template:o,onChecked:_,onClick:T,onEdit:I,onDelete:S}),(c||P)&&!C&&i.a.createElement(y,null),!c&&!P&&0===z.length&&i.a.createElement(g.a,null,v),z.length>0&&!R&&!c&&!C&&i.a.createElement(i.a.Fragment,null,i.a.createElement(u.a,null),i.a.createElement(d.b,{style:{justifyContent:"center"}},i.a.createElement(h.a,{type:"button",disabled:P,style:{width:245},onClick:async()=>{if(!R&&!c&&a){q(!0);const n=await a({...m,offset:x*A,search:t,limit:x});if(null!==n&&void 0!==n&&n.data){const t=n.data[e];0===t.length&&F(!0),t.length>0&&L((e=>[...e,...t])),V((e=>e+1))}q(!1)}}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0435"))))},v=({type:e,query:t,limit:a,template:n,component:r,variables:o,startOffset:d,emptyMessage:s,initialDisplayMethod:p,setCheckedList:m,withoutSearch:u,withoutMore:h,gridOptions:b,onChecked:g,onDelete:f,onClick:E,onEdit:v})=>{const w=Object(l.c)((e=>u?"":e.root.search)),{data:k,loading:O,refetch:j}=Object(c.useQuery)(t,{variables:{...o,offset:d,search:w,limit:a}});return O?i.a.createElement(y,null):i.a.createElement(x,{type:e,limit:a,query:t,search:w,refetch:j,template:n,component:r,emptyMessage:s,initialList:e&&k&&k[e],initialDisplayMethod:p,setCheckedList:m,withoutMore:h,gridOptions:b,onChecked:g,onDelete:f,onClick:E,onEdit:v})};v.defaultProps={startOffset:0},t.a=v},EJJs:function(e,t,a){"use strict";a.d(t,"b",(function(){return g})),a.d(t,"a",(function(){return O}));var n=a("q1tI"),i=a.n(n),c=a("vOnD"),l=a("7Cbv"),r=a("nShV"),o=a("8CDE"),d=a("feIE"),s=a("ZeZO"),p=a("OXt0"),m=a("DTT8"),u=a("79b8"),h=a("VWQm"),b=a("vJvq");const g=Object(c.d)(o.a).withConfig({displayName:"Table__Wrap",componentId:"gzldu8-0"})([""]),f=Object(c.d)(r.b).withConfig({displayName:"Table__Manage",componentId:"gzldu8-1"})(["display:grid;grid-template-columns:36px 1fr 70px;",""],(({checkable:e})=>e&&Object(c.c)(["grid-template-columns:1fr 40px;"]))),E=Object(c.d)(p.b).withConfig({displayName:"Table__Headers",componentId:"gzldu8-2"})([""," ",""],(({width:e})=>e&&Object(c.c)(["span{width:",";}"],e)),(({first:e,width:t})=>e&&t&&Object(c.c)(["span:first-child{width:calc("," + 45px);}"],t))),y=(Object(c.d)(r.b).withConfig({displayName:"Table__Header",componentId:"gzldu8-3"})(["display:flex;justify-content:flex-start;align-items:center;width:100%;height:30px;color:#959595;&:last-child{justify-content:flex-end;}"]),Object(c.d)(r.b).withConfig({displayName:"Table__Track",componentId:"gzldu8-4"})(["transition:opacity 150ms ease;",""],(({checked:e})=>e&&Object(c.c)(["opacity:0.45;"])))),x=Object(c.d)(r.b).withConfig({displayName:"Table__Content",componentId:"gzldu8-5"})(["padding:5px 15px;width:calc(100% - 85px);"," "," "," "," & > label{display:flex;justify-content:center;align-items:center;width:calc(var(--input-height-m) - 15px);margin-left:5px;& > span{margin:0;}}"],(({checkable:e})=>e&&Object(c.c)(["width:100%;"])),(({editable:e})=>e&&Object(c.c)(["width:calc(100% - 55px);"])),(({appearance:e})=>"default"===e&&Object(c.c)(["border:1px solid var(--surface-border);background:var(--surface-background);box-shadow:1px solid var(--surface-shadow);border-radius:var(--surface-border-radius);"])),(({appearance:e})=>"clear"===e&&Object(c.c)(["border:none;background:none;box-shadow:none;border-radius:0;"]))),v=Object(c.d)(r.b).withConfig({displayName:"Table__Container",componentId:"gzldu8-6"})(["width:100%;",""],(({onClick:e})=>e&&Object(c.c)(["cursor:pointer;"]))),w=Object(c.d)(o.a).withConfig({displayName:"Table__Actions",componentId:"gzldu8-7"})(["justify-content:center;align-items:center;width:70px;padding:5px;grid-gap:5px;button{width:100%;flex-grow:1;}","{width:100%;}"," "," "," ",""],h.a,(({checkable:e})=>e&&Object(c.c)(["width:40px;"])),(({horizontal:e})=>e&&Object(c.c)(["flex-direction:row;"])),(({appearance:e})=>"default"===e&&Object(c.c)(["border:1px solid var(--surface-border);background:var(--surface-background);box-shadow:1px solid var(--surface-shadow);border-radius:var(--surface-border-radius);"])),(({appearance:e})=>"clear"===e&&Object(c.c)(["border:none;background:none;box-shadow:none;border-radius:0;padding:0;"]))),k=Object(c.d)(b.b).withConfig({displayName:"Table__FieldsPopper",componentId:"gzldu8-8"})(["display:flex;align-items:center;& > div{display:flex;}"]),O=Object(c.d)(m.d).withConfig({displayName:"Table__Cell",componentId:"gzldu8-9"})(["align-items:center;flex-grow:1;width:",";overflow:hidden;& > div{width:100%;}h4{font-size:var(--font-size-m);font-weight:var(--font-weight-bold);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}"],(({width:e})=>e)),j=Object(c.d)(o.a).withConfig({displayName:"Table__HeaderList",componentId:"gzldu8-10"})(["border:1px solid var(--surface-border);background:var(--surface-background);box-shadow:var(--surface-shadow);border-radius:var(--surface-border-radius);padding:10px;grid-gap:10px;"]),C=Object(c.d)(h.b).withConfig({displayName:"Table__CheckboxTooltip",componentId:"gzldu8-11"})(["display:flex;justify-content:flex-end;align-items:center;"]),_=e=>{var t;return"ADMIN"===(null===(t=e.name)||void 0===t?void 0:t.toUpperCase())},T=({data:e,template:t,className:a,style:c,appearance:r,onClick:o,onChecked:p,onDelete:m,onEdit:b})=>{const[O,T]=Object(n.useState)(!1),[I,S]=Object(n.useState)((e||[]).map((e=>({...e,id:e.id||Object(l.a)(),checked:!1})))),N=Object(n.useMemo)((()=>!I.find((e=>e.checked))),[I]),D=`${Math.floor(100/t.length)}%`,M=Object(n.useMemo)((()=>(t||[]).map((e=>({value:Object(l.a)(),label:e.header,tooltip:e.tooltip||`\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \xab${e.header}\xbb`,visible:!e.hidden})))),[]);return Object(n.useEffect)((()=>{const e=I.reduce(((e,t)=>e+(t.checked?1:0)),0);I.length>0&&e===I.length&&T(!0)}),[I]),i.a.createElement(g,{className:a,style:c},i.a.createElement(f,{checkable:!p},p&&i.a.createElement(C,{text:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u0432\u0441\u0435",self:!0},i.a.createElement(u.a,{size:"s",checked:O,onChange:()=>{const e=!O;S((t=>t.map((t=>({...t,checked:!_(t)&&e}))))),T(e)}})),i.a.createElement(E,{defaultValue:M[0],options:M.filter((e=>e.visible)),first:p,stretch:!0}),i.a.createElement(w,{appearance:r,checkable:!p,horizontal:!0},m&&i.a.createElement(h.b,{text:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0433\u043e",place:"left"},i.a.createElement(s.a,{size:"xs",kind:"icon",appearance:N?"ghost":"red",disabled:N,onClick:()=>m(I.filter((e=>e.checked)))},i.a.createElement(d.a,{icon:"delete",size:"xs",stroke:N?"var(--ghost-color-text)":"white"}))),i.a.createElement(k,{place:"left",offset:{bottom:80},body:i.a.createElement(j,null,M.map(((e,t)=>i.a.createElement(u.a,{key:t,size:"s",label:e.label,checked:e.visible})))),appearance:"clear"},i.a.createElement(h.b,{text:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u0435\u0439",place:"left"},i.a.createElement(s.a,{size:"xs",kind:"icon"},i.a.createElement(d.a,{icon:"show",size:"xs",stroke:"white"})))))),I.map(((e,a)=>i.a.createElement(y,{key:a,checked:e.checked},i.a.createElement(x,{appearance:r,checkable:!p,editable:!p&&b},p&&i.a.createElement(C,{text:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",self:!0},i.a.createElement(u.a,{size:"s",checked:!_(e)&&(O||e.checked),onChange:!_(e)&&(()=>(e=>{S((t=>{const a=t=>t.id===e.id;return t.find(a)?t.map((t=>a(t)?{...e,checked:!t.checked}:{...t,checked:O||t.checked})):[...t,{...e,checked:!0}]})),T(!1)})(e))})),i.a.createElement(v,{onClick:()=>o(e)},t.map(((t,a)=>M[a].visible?i.a.cloneElement(t.content(e),{key:a,label:t.header,width:(null===t||void 0===t?void 0:t.width)||D}):null)))),(b||m)&&i.a.createElement(w,{appearance:r,checkable:!p},b&&i.a.createElement(h.b,{text:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",place:"left"},i.a.createElement(s.a,{size:"xs",kind:"icon",disabled:_(e)||e.checked,onClick:()=>b(e)},i.a.createElement(d.a,{icon:"edit",size:"xs",stroke:"white",fill:_(e)||e.checked?"var(--ghost-color-text)":"var(--default-color-accent)"}))),m&&i.a.createElement(h.b,{text:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",place:"left"},i.a.createElement(s.a,{size:"xs",kind:"icon",appearance:"red",disabled:_(e)||e.checked,onClick:()=>m(e)},i.a.createElement(d.a,{icon:"delete",size:"xs",stroke:"white",fill:_(e)||e.checked?"var(--ghost-color-text)":"var(--default-color-red)"}))))))))};T.defaultProps={appearance:"default"},t.c=T},OqOz:function(e,t,a){"use strict";a.d(t,"a",(function(){return x}));var n=a("q1tI"),i=a.n(n),c=a("/MKj"),l=a("7Cbv"),r=a("8CDE"),o=a("7BXr"),d=a("p9yE"),s=a("/y2W"),p=a("RoTl"),m=a("coMr"),u=a("xAqQ"),h=a("Sza6"),b=a("Ztxg"),g=a("9Xo6"),f=a("NWnW");const E=e=>{var t;return"ADMIN"!==(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toUpperCase())},y=({item:e,query:t,component:a,entityMultiText:l,entitySingleText:r,onSubmit:d})=>{const s=Object(n.useMemo)((()=>Array.isArray(e)),[e]),p=Object(c.b)(),m=a;return i.a.createElement(u.a,{mutation:t,appearance:"clear",onCancel:()=>p(Object(b.a)(null)),onSubmit:async(t,a)=>{try{await a({variables:{id:s?e.map((e=>e.id)):[e.id]}}),p(Object(g.c)({type:"success",message:s?`${l} \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u044b`:`${r} \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d`}))}catch(n){n&&p(Object(g.c)({type:"error",message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}))}finally{p(Object(b.a)(null)),d&&d()}}},s?i.a.createElement(o.a,{length:"auto-fit"},e.map((e=>i.a.createElement(m,{key:e.id,item:e})))):i.a.createElement(m,{item:e}))},x=({item:e,checked:t,appearance:a,component:n,withoutActions:c,withoutChecked:l,onChecked:r,onLink:o,onEdit:d,onDelete:s})=>i.a.cloneElement(n,{checked:t,appearance:a,onLink:o&&(()=>o(e)),onEdit:!c&&d&&(()=>d(e)),onChecked:!l&&r&&(t=>r({...e,checked:t})),onDelete:!c&&s&&(()=>s(e))}),v=({render:e,title:t,icon:a,field:o,filters:u,options:g,template:v,limit:w=6,startOffset:k=6,buttonCreateText:O,getType:j,getQuery:C,entityType:_,deleteQuery:T,deleteEntityMultiText:I,deleteEntitySingleText:S,onLink:N,onEdit:D,onCreate:M,emptyMessage:z,withoutChecked:L})=>{const{displayMethod:A,visibleFilters:V}=Object(c.c)((e=>({displayMethod:e.root.displayMethod,visibleFilters:e.root.visibleFilters}))),{isAccessibleForView:P,isAccessibleForAdd:q,isAccessibleForEdit:R,isAccessibleForDelete:F}=((e="")=>{const t=Object(c.c)((e=>e.user)),a=Object(n.useCallback)((a=>Object(f.i)(t,`${a}_${e}`.toUpperCase())),[t,e]);return{isAccessibleForView:Object(n.useMemo)((()=>a("view")),[a]),isAccessibleForAdd:Object(n.useMemo)((()=>a("add")),[a]),isAccessibleForEdit:Object(n.useMemo)((()=>a("edit")),[a]),isAccessibleForDelete:Object(n.useMemo)((()=>a("delete")),[a]),getAccess:a}})(_),B=Object(c.b)(),[W,Q]=Object(n.useState)(!1),[H,Z]=Object(n.useState)([]),[G,U]=Object(n.useState)("list"),J=Object(n.useCallback)((e=>{var t;return null===(t=H.find((t=>t[o]===e[o])))||void 0===t?void 0:t.checked}),[H]),K=()=>U(Object(l.a)()),X=e=>{Z((t=>{const a=t=>t[o]===e[o];return t.find(a)?t.map((t=>a(t)?{...e,checked:!t.checked}:{...t,checked:W||t.checked})):[...t,{...e,checked:!0}]})),Q(!1)},$=()=>{const e=!W;Z((t=>t.map((t=>({...t,checked:!!E(t)&&e}))))),Q(e)},Y=t=>B(Object(b.a)({icon:"delete",color:"red",title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",content:i.a.createElement(y,{item:t,query:T,component:t=>i.a.cloneElement(e(t.item),{appearance:"clear",onEdit:null,onDelete:null}),entityMultiText:I,entitySingleText:S,onSubmit:()=>U(Object(l.a)())})}));return Object(n.useEffect)((()=>{const e=H.reduce(((e,t)=>e+(t.checked?1:0)),0);H.length>0&&e===H.length&&Q(!0)}),[H]),i.a.createElement(d.a,{title:t},i.a.createElement(r.a,null,i.a.createElement(m.b,{title:t,icon:a,checked:W,defaultDisplayMethod:A,defaultVisibleFilters:V,buttonDeleteDisabled:!H.find((e=>e.checked)),buttonCreateText:O,onCreate:q&&(()=>M&&M(K)),onChecked:F&&(()=>"grid"===A&&$&&$()),onChangeVisibleFilter:()=>B(Object(h.t)(!V)),onChangeDisplayMethod:e=>B(Object(h.l)(e.value)),onDeleteAll:F&&(()=>Y(H.filter((e=>e.checked)))),withoutFooter:!F||"list"===A,withFilters:u&&g}),(u||g)&&i.a.createElement(p.a,{isOpen:V,filters:u,options:g}),i.a.createElement(s.a,{key:G,limit:w,type:j,query:C,template:v,startOffset:k,emptyMessage:z,setCheckedList:Z,component:t=>i.a.createElement(x,{item:t,component:e(t),withoutChecked:!F&&L,withoutActions:!R&&!F,checked:E(t)&&(W||J(t)),onLink:N&&P&&(e=>N(e)),onEdit:D&&R&&(e=>D(e,K)),onChecked:F&&X,onDelete:F&&Y}),onClick:N&&P&&(e=>N(e)),onEdit:D&&R&&(e=>D(e,K)),onChecked:F&&X,onDelete:F&&Y})))};v.defaultProps={field:"id"};t.b=v},RoTl:function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),c=a("vOnD"),l=a("8CDE"),r=a("nShV"),o=a("OXt0"),d=a("RKiZ"),s=a("hYBG");const p=Object(c.d)(l.a).withConfig({displayName:"FilterBar__Wrap",componentId:"sc-1lvfs1u-0"})(["display:flex;width:100%;&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;transition:opacity 100ms,blur 100ms;}&.fade-exit{opacity:1;}&.fade-exit-active{opacity:0;transition:opacity 100ms,blur 100ms;}"]),m=Object(c.d)(r.b).withConfig({displayName:"FilterBar__List",componentId:"sc-1lvfs1u-1"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(256px,1fr));@media only screen and (max-width:480px){grid-gap:var(--default-gap);}"]),u=({isOpen:e=!0,filters:t,options:a,duration:n})=>i.a.createElement(s.a,{in:e,animation:"fade",timeout:n},i.a.createElement(p,null,i.a.createElement(d.a,{clear:!0}),t&&t.length>0&&i.a.createElement(m,null,t.map((e=>e))),a&&a.length>0&&i.a.createElement(r.b,null,i.a.createElement(o.b,{defaultValue:a[0],options:a,stretch:!0})),i.a.createElement(d.a,{clear:!0})));u.defaultProps={duration:150},t.a=u},VP1n:function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),c=a("UUyv");t.a=Object(c.trackWindowScroll)((({children:e})=>i.a.createElement(c.LazyLoadComponent,null,e)))},coMr:function(e,t,a){"use strict";a.d(t,"a",(function(){return E}));var n=a("q1tI"),i=a.n(n),c=a("vOnD"),l=a("nShV"),r=a("8CDE"),o=a("ZeZO"),d=a("feIE"),s=a("OXt0"),p=a("DTT8"),m=a("79b8"),u=a("RKiZ"),h=a("VWQm");const b=Object(c.d)(r.a).withConfig({displayName:"HandleBar__Wrap",componentId:"phr6ix-0"})([""]),g=Object(c.d)(l.b).withConfig({displayName:"HandleBar__Header",componentId:"phr6ix-1"})(["justify-content:space-between;grid-gap:var(--default-gap);flex-wrap:wrap;"]),f=Object(c.d)(l.b).withConfig({displayName:"HandleBar__ActionGroup",componentId:"phr6ix-2"})(["justify-content:flex-end;@media only screen and (max-width:996px){width:100%;","{width:auto;}}@media only screen and (max-width:480px){flex-wrap:wrap;grid-gap:var(--default-gap);","{flex-direction:row;flex-grow:1;}","{button{width:100%;height:100%;}}}"],s.a,s.a,h.a),E=Object(c.d)(o.a).withConfig({displayName:"HandleBar__CreateButton",componentId:"phr6ix-3"})(["display:flex;justify-content:center;align-items:center;grid-gap:10px;span{white-space:nowrap;}@media only screen and (max-width:996px){width:100%;}"]),y=Object(c.d)(l.b).withConfig({displayName:"HandleBar__Footer",componentId:"phr6ix-4"})(["justify-content:space-between;@media only screen and (max-width:480px){flex-direction:column;align-items:end;grid-gap:var(--default-gap);}"]),x=Object(c.d)(o.a).withConfig({displayName:"HandleBar__DeleteButton",componentId:"phr6ix-5"})(["color:var(--default-color-red);background:none;border:none;&:hover{background:none;border:none;color:var(--default-color-red);}",""],(({disabled:e})=>e&&Object(c.c)(["color:var(--ghost-color-text);&:hover{color:var(--ghost-color-text);}"]))),v=[{label:i.a.createElement(d.a,{icon:"menu"}),value:"list",tooltip:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u043e\u043c"},{label:i.a.createElement(d.a,{icon:"category"}),value:"grid",tooltip:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0441\u0435\u0442\u043a\u043e\u0439"}],w=({icon:e,title:t,buttonCreateText:a,buttonDeleteDisabled:c,defaultDisplayMethod:l,defaultVisibleFilters:r,withoutFooter:w,withFilters:k,checked:O,onCreate:j,onChecked:C,onDeleteAll:_,onChangeDisplayMethod:T,onChangeVisibleFilter:I})=>{const[S,N]=Object(n.useState)(O),[D,M]=Object(n.useState)(r),[z,L]=Object(n.useState)(v.find((e=>e.value===l)));return Object(n.useEffect)((()=>{N(O)}),[O]),i.a.createElement(b,null,i.a.createElement(g,null,i.a.createElement(p.d,{icon:e,text:t}),i.a.createElement(f,null,j&&i.a.createElement(E,{type:"button",onClick:j},i.a.createElement("span",null,a),i.a.createElement(d.a,{icon:"add",stroke:"white"})),k&&i.a.createElement(h.b,{text:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432"},i.a.createElement(o.a,{type:"button",kind:"icon",onClick:()=>{M(!D),I&&I()},revert:!D},i.a.createElement(d.a,{icon:"filter2",stroke:D?"white":"var(--default-color-accent)"}))),i.a.createElement(s.b,{defaultValue:z||v[1],options:v,onChange:e=>(e=>{L(e),T&&T(e)})(e)}))),i.a.createElement(u.a,{clear:!0}),!w&&i.a.createElement(y,null,i.a.createElement(m.a,{label:"\u0412\u044b\u0434\u0435\u043b\u0438\u0442\u044c \u0432\u0441\u0435",checked:S,onChange:e=>{const t=e.target.checked;N(t),C&&C(t)}}),i.a.createElement(x,{appearance:"clear",disabled:c,onClick:_},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0435")))};w.defaultProps={buttonCreateText:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",buttonDeleteDisabled:!0},t.b=w},p9yE:function(e,t,a){"use strict";var n=a("q1tI"),i=a.n(n),c=a("g4pe"),l=a.n(c),r=a("YFqc"),o=a.n(r),d=a("20a2"),s=a("vOnD"),p=a("VX74"),m=a("/MKj"),u=a("nShV"),h=a("N0uN"),b=a("t7jn"),g=a("VWQm"),f=a("auMy"),E=a("8CDE"),y=a("ZeZO"),x=a("V0nP"),v=a("feIE"),w=a("wOhW"),k=a("ApjV"),O=a("586Q"),j=a("ThpJ"),C=a("RKiZ"),_=a("7sPp"),T=a("QUga"),I=a("hfch"),S=a("NWnW");const N="rgba(255, 255, 255, 25%)",D=Object(s.d)(u.b).withConfig({displayName:"SideBar__Wrap",componentId:"sc-158a552-0"})(["--padding-offset:15px;display:flex;flex-direction:column;width:240px;height:100vh;background:var(--admin-color-accent);color:white;overflow:hidden;overflow-y:auto;@media only screen and (max-width:996px){width:62px;}"]),M=Object(s.d)(u.b).withConfig({displayName:"SideBar__Profile",componentId:"sc-158a552-1"})(["padding:var(--default-gap) var(--default-gap) 5px var(--default-gap);@media only screen and (max-width:996px){padding:var(--default-gap) var(--default-gap) 0 var(--default-gap);","{max-width:var(--input-height-s);max-height:var(--input-height-s);min-width:var(--input-height-s);min-height:var(--input-height-s);width:var(--input-height-s);height:var(--input-height-s);}}"],j.a),z=Object(s.d)(E.a).withConfig({displayName:"SideBar__Info",componentId:"sc-158a552-2"})(["grid-gap:0;"]),L=Object(s.d)(_.a).withConfig({displayName:"SideBar__Name",componentId:"sc-158a552-3"})(["font-size:var(--font-h4);font-weight:var(--font-weight-medium);"]),A=Object(s.d)(T.b).withConfig({displayName:"SideBar__Role",componentId:"sc-158a552-4"})(["color:",";"],N),V=s.d.div.withConfig({displayName:"SideBar__Strip",componentId:"sc-158a552-5"})(["display:flex;justify-content:space-between;align-items:center;padding:5px var(--default-gap);a{position:relative;padding:0 15px;transition:background 150ms ease;&.active,&:hover{background:#10151c;}}@media only screen and (max-width:480px){padding:5px 0;}"]),P=Object(s.d)(u.b).withConfig({displayName:"SideBar__Label",componentId:"sc-158a552-6"})(["align-items:center;"]),q=Object(s.d)(v.a).withConfig({displayName:"SideBar__LabelIcon",componentId:"sc-158a552-7"})(["width:var(--input-height-s);height:var(--input-height-s);background:var(--admin-color-accent-dim);border-radius:var(--surface-border-radius);"," @media only screen and (max-width:480px){background:var(--default-color-accent-dim);"," svg{path{stroke:var(--default-color-accent);","}}}"],(({active:e})=>e&&Object(s.c)(["background:white;"])),(({active:e})=>e&&Object(s.c)(["background:var(--default-color-accent);"])),(({active:e})=>e&&Object(s.c)(["stroke:white;"]))),R=Object(s.d)(T.b).withConfig({displayName:"SideBar__LabelText",componentId:"sc-158a552-8"})(["color:",";font-weight:var(--font-weight-medium);",""],N,(({active:e})=>e&&Object(s.c)(["color:white;"]))),F=({active:e,icon:t,text:a,count:n})=>i.a.createElement(V,null,i.a.createElement(P,null,i.a.createElement(q,{icon:t,size:"xs",stroke:e?"var(--default-color-accent)":N,active:e}),i.a.createElement(R,{active:e},a)),n&&i.a.createElement(I.a,{count:n,size:"xs",style:e?{}:{background:N,borderColor:"transparent",color:"var(--admin-color-accent)"}})),B=({user:e,link:t,links:a,...n})=>i.a.createElement(D,n,i.a.createElement(M,null,i.a.createElement(j.b,{src:e.avatar,alt:"Avatar",size:"m"}),i.a.createElement(z,null,i.a.createElement(L,null,e.name),i.a.createElement(A,null,Object(S.g)(e.role)))),i.a.createElement(C.a,{style:{background:"var(--admin-color-accent-dim)",margin:"10px 0"}}),a&&a.length>0&&a.map(((e,a)=>i.a.createElement(i.a.Fragment,{key:a},e.divide&&i.a.createElement(C.a,{style:{background:"var(--admin-color-accent-dim)",margin:"10px 0"}}),i.a.createElement(t,{href:e.path},e.component)))));B.defaultProps={link:({children:e,...t})=>i.a.createElement("a",t,e)};var W=B,Q=a("QclZ"),H=a("ZwIX");const Z=Object(s.d)(E.a).withConfig({displayName:"GlobalSearch__Wrap",componentId:"sc-1i2qzsl-0"})(["padding:var(--default-gap);"]),G=s.d.div.withConfig({displayName:"GlobalSearch__Loader",componentId:"sc-1i2qzsl-1"})(["display:flex;justify-content:center;align-items:center;width:100%;height:100%;flex-grow:1;"]),U=({result:e,search:t,loading:a,entities:c,initialEntity:l,appearance:r,style:o,className:d,onChange:s,onSubmit:p})=>{const[m,u]=Object(n.useState)(l),h=Object(n.useRef)(null);return Object(n.useEffect)((()=>{s&&s(m)}),[m,s]),i.a.createElement(Z,{style:o,className:d,appearance:r},i.a.createElement(Q.a,{appearance:"ghost",defaultValue:m,placeholder:"\u0413\u0434\u0435 \u0431\u0443\u0434\u0435\u043c \u0438\u0441\u043a\u0430\u0442\u044c?",label:"\u0417\u043e\u043d\u0430 \u043f\u043e\u0438\u0441\u043a\u0430",options:c,onChange:e=>{u(e),null!==h&&void 0!==h&&h.current&&(h.current.value="",p&&p(""))},isLoading:a,isSearchable:!0,isClearable:!0}),!a&&m&&i.a.createElement(i.a.Fragment,null,i.a.createElement(b.a,{ref:h,appearance:"ghost",placeholder:"\u041f\u043e\u0438\u0441\u043a",defaultValue:t,onSubmit:p}),(null===e||void 0===e?void 0:e.length)>0?e.map((e=>m.render&&i.a.createElement(i.a.Fragment,{key:e.id||e.email},m.render(e)))):i.a.createElement(H.a,{style:{width:"100%",textAlign:"center",flexGrow:1}},"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")),a&&i.a.createElement(G,null,i.a.createElement(f.a,null)))};U.defaultProps={appearance:"clear"};var J=U,K=a("OqOz"),X=a("qOKH");const $=Object(n.memo)((({data:e,loading:t,search:a,entity:n,entities:c,onChange:l,onSubmit:r})=>{const o=Object(m.b)(),d=()=>o(Object(X.a)(null));return i.a.createElement(J,{search:a,loading:t,initialEntity:n,result:a&&e&&n&&e[null===n||void 0===n?void 0:n.value],entities:(c||[]).map((e=>({...e,render:t=>i.a.createElement(K.a,{key:t.id||t.email,item:t,appearance:"clear",component:e.render(t),onLink:d,onEdit:d,onDelete:d,withoutChecked:!0})}))),onSubmit:r,onChange:l})}));var Y=Object(n.memo)((({search:e,entity:t,entities:a,setSearch:n,onHide:c,onChange:l})=>{const[r,{data:o,loading:d,refetch:s}]=t?Object(p.useLazyQuery)(t.query):[null,{data:null,loading:!1,refetch:null}];return i.a.createElement($,{data:o,entity:t,search:e,loading:d,entities:a,onHide:c,onChange:l,onSubmit:e=>{const t={search:e};n&&n(e),e&&(s&&s(t),r&&r({variables:t}))}})})),ee=a("TsNn"),te=a("yEVw"),ae=a("UwjQ"),ne=a("1zqG"),ie=a("4nJQ"),ce=a("4NP5"),le=a("u2Cb");const re=[{value:"getUsers",label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",singlePath:"user",originPath:"users",query:le.a.GET_USERS,deleteQuery:le.a.DELETE_USER,deleteEntityMultiText:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",deleteEntitySingleText:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",render:e=>i.a.createElement(ee.a,{user:e})},{value:"getCategories",label:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",singlePath:"category",originPath:"categories",query:le.a.GET_CATEGORIES,deleteQuery:le.a.DELETE_CATEGORY,deleteEntityMultiText:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",deleteEntitySingleText:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",render:e=>i.a.createElement(te.a,{category:e})},{value:"getArticles",label:"\u0421\u0442\u0430\u0442\u044c\u0438",singlePath:"article",originPath:"articles",query:le.a.GET_ARTICLES,deleteQuery:le.a.DELETE_ARTICLE,deleteEntityMultiText:"\u0421\u0442\u0430\u0442\u044c\u0438",deleteEntitySingleText:"\u0421\u0442\u0430\u0442\u044c\u044f",render:e=>i.a.createElement(ae.a,{article:e})},{value:"getProjects",label:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b",singlePath:"project",originPath:"projects",query:le.a.GET_PROJECTS,deleteQuery:le.a.DELETE_PROJECT,deleteEntityMultiText:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u044b",deleteEntitySingleText:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442",render:e=>i.a.createElement(ne.c,{project:e,preview:!0})},{value:"getTickets",label:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f",singlePath:"ticket",originPath:"tickets",query:le.a.GET_TICKETS,deleteQuery:le.a.DELETE_TICKET,deleteEntityMultiText:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f",deleteEntitySingleText:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435",render:e=>i.a.createElement(ie.a,{ticket:e})},{value:"getRoles",label:"\u0420\u043e\u043b\u0438",singlePath:"role",originPath:"roles",query:le.a.GET_ROLES,deleteQuery:le.a.DELETE_ROLE,deleteEntityMultiText:"\u0420\u043e\u043b\u0438",deleteEntitySingleText:"\u0420\u043e\u043b\u044c",render:e=>i.a.createElement(ce.a,{role:e})}];var oe=({onJump:e,onHide:t})=>{const[a,c]=Object(n.useState)(null),[l,r]=Object(n.useState)(null);return i.a.createElement(Y,{search:l,entity:a,entities:re,setSearch:r,onChange:c,onJump:e,onHide:t})},de=a("+EEm"),se=a("8ihE"),pe=a("rOcY");var me=e=>{const t=t=>e.find((e=>e===t)),a=[{path:"/",component:i.a.createElement(F,{icon:"activity",text:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}],n=t("VIEW_USER"),c=t("VIEW_CATEGORY"),l=t("VIEW_ARTICLE"),r=t("VIEW_PROJECT"),o=t("VIEW_TICKET"),d=t("VIEW_ROLE"),s=t("VIEW_USER");return n&&a.push({path:"/users",component:i.a.createElement(F,{icon:"user2",text:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"})}),c&&a.push({path:"/categories",component:i.a.createElement(F,{icon:"folder",text:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"})}),l&&a.push({path:"/articles",component:i.a.createElement(F,{icon:"document",text:"\u0421\u0442\u0430\u0442\u044c\u0438"})}),r&&a.push({path:"/projects",component:i.a.createElement(F,{icon:"work",text:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b"})}),o&&a.push({path:"/tickets",component:i.a.createElement(F,{icon:"ticket",text:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f"})}),d&&a.push({divide:!0,path:"/roles",component:i.a.createElement(F,{icon:"lock",text:"\u0420\u043e\u043b\u0438"})}),s&&a.push({path:"/settings",component:i.a.createElement(F,{icon:"setting",text:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"})}),a};const ue=s.d.main.withConfig({displayName:"dashboard__Main",componentId:"sc-9r28sr-0"})(["display:flex;grid-gap:var(--default-gap);width:100%;"]),he=s.d.header.withConfig({displayName:"dashboard__Header",componentId:"sc-9r28sr-1"})(["position:fixed;top:0;left:0;z-index:var(--z-15);display:flex;grid-gap:var(--default-gap);background:var(--surface-background);border:var(--surface-border);box-shadow:var(--surface-shadow);padding:var(--default-gap);width:100%;flex-grow:100;"]),be=Object(s.d)(W).withConfig({displayName:"dashboard__SideBar",componentId:"sc-9r28sr-2"})(["position:fixed;top:70px;left:0;height:calc(100vh - 70px);z-index:var(--z-12);@media only screen and (max-width:480px){display:none;}"]),ge=Object(s.d)(y.a).withConfig({displayName:"dashboard__MenuButton",componentId:"sc-9r28sr-3"})(["display:none;@media only screen and (max-width:768px){display:flex;justify-content:center;align-items:center;}"]),fe=Object(s.d)(u.b).withConfig({displayName:"dashboard__LogoZone",componentId:"sc-9r28sr-4"})(["justify-content:space-between;@media only screen and (max-width:996px){width:auto;}"]),Ee=s.d.div.withConfig({displayName:"dashboard__Logotype",componentId:"sc-9r28sr-5"})(["display:flex;justify-content:flex-start;align-items:center;img{height:30px;object-fit:contain;}@media only screen and (max-width:996px){min-width:auto;}@media only screen and (max-width:480px){display:none;}"]),ye=Object(s.d)(h.a).withConfig({displayName:"dashboard__Content",componentId:"sc-9r28sr-6"})(["padding:70px 15px 15px 255px;flex-grow:1;@media only screen and (max-width:996px){padding:70px 15px 15px 80px;}@media only screen and (max-width:480px){padding:70px 15px 15px 15px;}"]);t.a=({children:e,title:t="\u041f\u0430\u043d\u0435\u043b\u044c \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f"})=>{var a,c;const r=Object(k.b)(),s=Object(d.useRouter)(),{root:u,user:h}=Object(m.c)((e=>e)),[y,{data:j,loading:C}]=Object(p.useLazyQuery)(le.a.GET_USER),_=Object(m.b)();return Object(n.useEffect)((()=>{localStorage.getItem(pe.a.get("secret"))?y():s.push("/")}),[]),Object(n.useEffect)((()=>{if(j&&j.getUser){var e;(null===(e=j.getUser.role)||void 0===e?void 0:e.permissions.find((e=>"ACCESS_DASHBOARD"===e)))?_(Object(se.c)(j.getUser)):s.push("/")}}),[j,_]),C||!h.authenticated?i.a.createElement(O.b,null,i.a.createElement(f.a,null)):i.a.createElement(w.a,null,i.a.createElement(l.a,null,i.a.createElement("meta",{name:"keywords",content:"next,javascript,nextjs,react"}),i.a.createElement("meta",{name:"description",content:u.settings.meta.description}),i.a.createElement("title",null,t)),i.a.createElement(he,null,i.a.createElement(ge,{kind:"icon",appearance:"clear",onClick:r(de.e,{links:me((null===h||void 0===h?void 0:h.role.permissions)||[]).map(((e,t)=>({id:t,text:e.component,onClick:()=>s.push(`/dashboard${e.path}`)})))})},i.a.createElement(v.a,{icon:"menu"})),i.a.createElement(fe,null,i.a.createElement(g.b,{text:u.settings.meta.description,offset:{bottom:5},place:"bottom",maxWidth:256,multiline:!0},i.a.createElement(Ee,null,i.a.createElement(o.a,{href:"/"},i.a.createElement("a",null,i.a.createElement(x.a,{src:null===(a=u.settings.general.logotype)||void 0===a?void 0:a.path,alt:"Logotype"})))))),i.a.createElement(b.a,{appearance:"ghost",onClick:()=>_(Object(X.a)([{path:"/",title:"\u041f\u043e\u0438\u0441\u043a",component:({jump:e,close:t})=>i.a.createElement(oe,{onJump:e,onHide:t})}],"l")),disable:!0})),i.a.createElement(ue,null,i.a.createElement(be,{user:{name:h.name,role:h.role.name,avatar:(null===h||void 0===h||null===(c=h.avatar)||void 0===c?void 0:c.path)||"/images/avatar-default.png"},link:o.a,links:me((null===h||void 0===h?void 0:h.role.permissions)||[]).map(((e,t)=>{const a=`/dashboard${e.path.length>1?e.path:""}`;return{...e,path:a,component:i.a.createElement("a",{key:t,className:s.pathname===a?"active":""},i.a.cloneElement(e.component,{active:s.pathname===a}))}}))}),i.a.createElement(ye,null,i.a.createElement(E.a,null,e))))}}}]);