(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{UwjQ:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),c=a("vOnD"),i=a("nShV"),o=a("8CDE"),l=a("7sPp"),u=a("aBfq"),d=a("h4VS"),s=a("QUga"),p=a("ZeZO"),b=a("feIE"),m=r.a.createElement;function g(){var e=Object(d.a)(["\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n"]);return g=function(){return e},e}var f=Object(c.c)(i.b)(g()),v=function(e){var t=e.text,a=e.withText,n=e.withButton,r=e.onClick;return m(f,{onClick:r},a&&m(s.b,{style:{color:"var(--default-color-accent)"}},t),n&&m(p.a,{kind:"icon"},m(b.a,{icon:"arrowRight",stroke:"white"})))};v.defaultProps={text:"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435",withText:!0};var h=v,j=a("V0nP"),y=a("79b8"),O=a("VWQm");const w=Object(c.c)(i.b).withConfig({displayName:"ArticleCard__Wrap",componentId:"sc-17tznl7-0"})(["display:grid;grid-template-columns:1fr 2fr;padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);height:min-content;& > span{display:flex;}"," "," "," "," @media only screen and (max-width:480px){display:flex;flex-direction:column;grid-gap:var(--default-gap);}"],(({layout:e})=>"column"===e&&Object(c.b)(["display:flex;flex-wrap:wrap;grid-gap:var(--default-gap);"])),(({appearance:e})=>"default"===e&&Object(c.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(c.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(c.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),E=Object(c.c)(j.a).withConfig({displayName:"ArticleCard__Poster",componentId:"sc-17tznl7-1"})(["object-fit:cover;width:100%;height:100%;border-radius:var(--surface-border-radius);border:1px solid var(--ghost-color-background);",""],(({layout:e})=>"column"===e&&Object(c.b)(["height:128px;"]))),k=Object(c.c)(i.b).withConfig({displayName:"ArticleCard__Header",componentId:"sc-17tznl7-2"})(["justify-content:space-between;align-items:center;"]),x=Object(c.c)(i.b).withConfig({displayName:"ArticleCard__Actions",componentId:"sc-17tznl7-3"})(["grid-gap:5px;height:100%;"]),C=Object(c.c)(l.a).withConfig({displayName:"ArticleCard__Name",componentId:"sc-17tznl7-4"})(["transition:opacity 150ms ease;",""],(({onClick:e})=>e&&Object(c.b)(["cursor:pointer;&:hover{opacity:0.45;}"]))),A=Object(c.c)((({content:e,className:t})=>r.a.createElement("div",{className:t,dangerouslySetInnerHTML:{__html:e}}))).withConfig({displayName:"ArticleCard__ShortText",componentId:"sc-17tznl7-5"})(["display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;p{font-size:var(--font-size-m);font-weight:var(--font-weight-regular);color:var(--default-color-text);strong,b,i{font-style:normal;font-weight:inherit;}}"]),S=({layout:e,article:t,preview:a,appearance:n,onLink:c,onChecked:i,onEdit:l,onDelete:d})=>{var s,m;return r.a.createElement(w,{appearance:n,layout:e},t.preview&&r.a.createElement(E,{src:null===(s=t.preview)||void 0===s?void 0:s.path,alt:t.title,effect:"opacity",layout:e}),r.a.createElement(o.a,{style:{gridGap:5,width:"100%",gridColumn:!t.preview&&"1 / 3"}},r.a.createElement(k,null,r.a.createElement(u.a,{date:null===t||void 0===t?void 0:t.createdAt,category:null===t||void 0===t||null===(m=t.category)||void 0===m?void 0:m.name,short:!0}),(i||l||d)&&r.a.createElement(x,null,d&&r.a.createElement(O.b,{text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e"},r.a.createElement(p.a,{kind:"icon",size:"xs",appearance:"red",onClick:d},r.a.createElement(b.a,{icon:"delete",size:"xs",stroke:"white"}))),l&&r.a.createElement(O.b,{text:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e"},r.a.createElement(p.a,{kind:"icon",size:"xs",onClick:l},r.a.createElement(b.a,{icon:"edit",size:"xs",stroke:"white"}))),i&&r.a.createElement(O.b,{text:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e",self:!0},r.a.createElement(y.a,null)))),r.a.createElement(C,{tag:"h4",onClick:c},t.title),t.body&&r.a.createElement(A,{content:t.body}),!a&&r.a.createElement(h,{onClick:c,withButton:!0})))};S.defaultProps={appearance:"default"};t.a=S},owvJ:function(e,t,a){"use strict";a.d(t,"d",(function(){return Me})),a.d(t,"a",(function(){return Te})),a.d(t,"c",(function(){return Qe})),a.d(t,"b",(function(){return De}));var n=a("q1tI"),r=a.n(n),c=a("vOnD"),i=a("NKCw"),o=a("/MKj"),l=a("VX74"),u=a("nShV"),d=a("8CDE"),s=a("7sPp"),p=a("Gliw"),b=a("ZeZO"),m=a("QclZ"),g=a("QWIf"),f=a("kJLk"),v=a("ZwIX"),h=a("h4VS"),j=a("ThpJ"),y=a("QUga"),O=a("+nv6"),w=a("feIE"),E=a("VWQm"),k=a("79b8"),x=a("3jgA"),C=r.a.createElement;function A(){var e=Object(h.a)(["\n  &:hover {\n    svg {\n      path,\n      circle {\n        stroke: var(--default-color-accent);\n      }\n    }\n  }\n"]);return A=function(){return e},e}function S(){var e=Object(h.a)(["\n  span {\n    color: var(--default-color-text);\n    transition: color 150ms ease;\n  }\n\n  &:hover {\n    span {\n      color: var(--default-color-accent);\n    }\n  }\n"]);return S=function(){return e},e}function _(){var e=Object(h.a)(["\n  align-items: center;\n  grid-gap: 0;\n"]);return _=function(){return e},e}function z(){var e=Object(h.a)(["\n  color: var(--default-color-accent);\n  font-size: var(--font-size-s);\n  font-weight: var(--font-weight-regular);\n"]);return z=function(){return e},e}function N(){var e=Object(h.a)(["\n  font-size: var(--font-size-s);\n  color: var(--default-color-text);\n"]);return N=function(){return e},e}function V(){var e=Object(h.a)(["\n  font-size: var(--font-size-s);\n  color: var(--default-color-text);\n"]);return V=function(){return e},e}function L(){var e=Object(h.a)(["\n  position: absolute;\n  top: 0;\n  right: 0;\n  grid-gap: 10px;\n"]);return L=function(){return e},e}function I(){var e=Object(h.a)(["\n  justify-content: space-between;\n  align-items: center;\n"]);return I=function(){return e},e}function M(){var e=Object(h.a)(["\n  grid-gap: 5px;\n"]);return M=function(){return e},e}function T(){var e=Object(h.a)(["\n  grid-gap: 0;\n  width: 100%;\n"]);return T=function(){return e},e}function Q(){var e=Object(h.a)(["\n  color: black;\n"]);return Q=function(){return e},e}function D(){var e=Object(h.a)(["\n  height: 128px;\n"]);return D=function(){return e},e}function P(){var e=Object(h.a)(["\n      cursor: pointer;\n\n      &:hover {\n        opacity: 0.65;\n      }\n    "]);return P=function(){return e},e}function R(){var e=Object(h.a)(["\n      display: flex;\n      align-items: center;\n      grid-gap: 10px;\n      margin-bottom: 5px;\n    "]);return R=function(){return e},e}function q(){var e=Object(h.a)(["\n  font-weight: var(--font-weight-medium);\n  color: var(--default-color-accent);\n  transition: opacity 150ms ease;\n\n  ","\n\n  ","\n"]);return q=function(){return e},e}function G(){var e=Object(h.a)(["\n  width: var(--input-height-xs);\n  height: var(--input-height-xs);\n  min-width: var(--input-height-xs);\n  min-height: var(--input-height-xs);\n  border-radius: var(--surface-border-radius);\n"]);return G=function(){return e},e}function W(){var e=Object(h.a)(["\n      opacity: 0.45;\n    "]);return W=function(){return e},e}function Z(){var e=Object(h.a)(["\n  position: relative;\n  margin: 0;\n  padding: 0;\n\n  ","\n"]);return Z=function(){return e},e}var U=Object(c.c)(u.b)(Z(),(function(e){return e.checked&&Object(c.b)(W())})),B=Object(c.c)(j.b)(G()),F=Object(c.c)(y.b)(q(),(function(e){return e.compact&&Object(c.b)(R())}),(function(e){return e.onClick&&Object(c.b)(P())})),K=Object(c.c)(x.a)(D()),J=Object(c.c)(y.b)(Q()),H=Object(c.c)(d.a)(T()),X=Object(c.c)(u.b)(M()),$=Object(c.c)(u.b)(I()),Y=Object(c.c)(u.b)(L()),ee=Object(c.c)(O.a)(V()),te=Object(c.c)(O.a)(N()),ae=Object(c.c)(b.a)(z()),ne=Object(c.c)(u.b)(_()),re=Object(c.c)(b.a)(S()),ce=Object(c.c)(b.a)(A()),ie=function(e){var t,a,c,i,o=e.user,l=e.message,u=e.likes,d=e.time,s=e.className,p=e.style,m=e.compact,g=e.isLiked,f=e.isUpdated,v=e.isChecked,h=e.onLink,y=e.onReply,O=e.onChecked,x=e.onShowLikes,A=e.onDelete,S=e.onEdit,_=e.onLike,z=Object(n.useState)(f?d:null),N=z[0],V=z[1],L=Object(n.useState)(v),I=L[0],M=L[1],T=Object(n.useState)(u),Q=T[0],D=T[1],P=Object(n.useState)(!1),R=P[0],q=P[1],G=Object(n.useState)(g),W=G[0],Z=G[1],ie=Object(n.useMemo)((function(){return W?"var(--default-color-accent)":"var(--default-color-text)"}),[W]),oe=Object(n.useMemo)((function(){return 1===Q?"\u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0443":"\u043b\u044e\u0434\u044f\u043c"}),[Q]),le=Object(n.useState)(l),ue=le[0],de=le[1],se=Object(n.useRef)(null),pe=function(){return q((function(e){return!e}))};return C(U,{checked:I,style:p,className:s},!m&&C(j.b,{src:null!==(t=null===o||void 0===o||null===(a=o.avatar)||void 0===a?void 0:a.path)&&void 0!==t?t:""}),C(H,null,C(F,{compact:m,onClick:h},m&&C(B,{src:null!==(c=null===o||void 0===o||null===(i=o.avatar)||void 0===i?void 0:i.path)&&void 0!==c?c:""}),o.name),R?C(K,{ref:se,defaultValue:ue,appearance:"ghost"}):C(J,null,ue),m&&S&&A&&C(Y,null,R?C(r.a.Fragment,null,C(E.b,{text:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",self:!0},C(b.a,{kind:"icon",size:"xs",disabled:I,appearance:"green",onClick:function(){var e,t=null===se||void 0===se||null===(e=se.current)||void 0===e?void 0:e.value;t&&(S&&S(t),V(new Date),de(t)),pe()}},C(w.a,{icon:"check",size:"xs",stroke:"white"}))),C(E.b,{text:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",self:!0},C(b.a,{kind:"icon",size:"xs",disabled:I,appearance:"red",onClick:pe},C(w.a,{icon:"closeSquare",size:"xs",stroke:"white"})))):C(r.a.Fragment,null,C(E.b,{text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"},C(b.a,{kind:"icon",size:"xs",disabled:I,appearance:"red",onClick:A},C(w.a,{icon:"delete",size:"xs",stroke:"white"}))),C(E.b,{text:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"},C(b.a,{kind:"icon",size:"xs",disabled:I,onClick:pe},C(w.a,{icon:"edit",size:"xs",stroke:"white"}))),C(E.b,{text:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",self:!0},C(k.a,{checked:I,onChange:function(e){var t=e.target.checked;O&&O(t),M(t)}})))),C($,null,C(X,null,N?C(ee,null,"\u041e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e"," ",new Date(N).toLocaleString("ru-RU",{day:"numeric",month:"long",year:"numeric"})):C(te,{text:d}),y&&C(ae,{appearance:"clear",onClick:y},"\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c")),C(ne,null,Q>0&&C(E.b,{text:"".concat(Q," ").concat(oe," \u044d\u0442\u043e \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f")},C(re,{type:"button",onClick:x,appearance:"clear",size:"xs"},C("span",{style:{color:ie}},Q))),C(E.b,{text:"\u041c\u043d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f"},C(ce,{type:"button",onClick:function(){var e=!W;_&&_(e),D((function(t){return t+(e?1:-1)})),Z(e)},appearance:"clear",size:"xs"},C(w.a,{icon:"heart",size:"xs",stroke:ie,fill:W?"var(--default-color-accent)":"none"})))))))},oe=a("RKiZ"),le=a("auMy"),ue=a("NWnW"),de=a("qoM+"),se=a("586Q"),pe=a("u2Cb"),be=a("rOcY");const me=Object(c.c)(u.b).withConfig({displayName:"FormArticle__Header",componentId:"sc-1ftxonu-0"})(["justify-content:space-between;@media only screen and (max-width:480px){flex-direction:column;align-items:end;grid-gap:var(--default-gap);}"]),ge=({article:e,setValue:t})=>{const[a,c]=Object(n.useState)([]),i=Object(o.c)((e=>e.user)),[u,p]=Object(n.useState)(!1),{data:m,loading:g}=Object(l.useQuery)(pe.a.GET_COMMENTS,{variables:{id:e}});return Object(n.useEffect)((()=>{e&&!g&&m&&c(m.getComments.map((e=>({...e,checked:!1}))))}),[e,m,g]),Object(n.useEffect)((()=>{t("comments",a)}),[a]),e&&0!==a.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(oe.a,{clear:!0}),r.a.createElement(s.a,{tag:"h4"},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"),r.a.createElement(me,null,r.a.createElement(k.a,{label:"\u0412\u044b\u0434\u0435\u043b\u0438\u0442\u044c \u0432\u0441\u0435",checked:u,onChange:e=>{p(e.target.checked),c((e=>e.map((e=>({...e,checked:!e.checked})))))}}),r.a.createElement(b.a,{style:{color:"var(--default-color-red)"},appearance:"clear",onClick:()=>{c((e=>e.filter((e=>!e.checked))))}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0435")),r.a.createElement(d.a,{style:{gridGap:5}},a.map((e=>{var t;return r.a.createElement(ie,{key:`${e.id}_${e.checked}`,user:e.author,message:e.text,likes:null===(t=e.likes)||void 0===t?void 0:t.length,time:e.createdAt!==e.updatedAt?e.updatedAt:e.createdAt,isLiked:e.likes.find((e=>e.email===i.email)),isChecked:e.checked,isUpdated:e.createdAt!==e.updatedAt,onChecked:t=>((e,t)=>{c((a=>a.map((a=>a.id===e.id?{...a,checked:t}:a))))})(e,t),onEdit:t=>((e,t)=>{c((a=>a.map((a=>a.id===e.id?{...a,updatedAt:new Date,text:t}:a))))})(e,t),onDelete:()=>{return t=e,void c((e=>e.filter((e=>e.id!==t.id))));var t},compact:!0})})))):null};var fe=({article:e,categories:t,statuses:a,mutation:n,appearance:c,className:o,canEditStatus:h,onSubmit:j})=>{const{data:y,loading:O,error:w}=e?Object(l.useQuery)(pe.a.GET_ARTICLE,{variables:{id:e}}):{data:{getArticle:{}},loading:!1,error:!1};return r.a.createElement(de.b,{className:o,appearance:c,mutation:n,onSubmit:j},(({register:n,loading:c,errors:o,control:l,getValues:j,setValue:E})=>{var k,x,C,A,S;return!O&&y?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,null,r.a.createElement(s.a,{tag:"h4"},"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435"),o&&o.preview&&r.a.createElement(v.a,{style:{width:"100%"},appearance:"error"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043f\u0440\u0435\u0432\u044c\u044e"),r.a.createElement(i.a,{name:"preview",control:l,rules:{required:!0},defaultValue:(null===(k=y.getArticle)||void 0===k?void 0:k.preview)||null,render:({value:e,onChange:t})=>r.a.createElement(f.b,{accept:"image/*",defaultValue:e,onChange:t,placeholder:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u044e\u0434\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043f\u0440\u0435\u0432\u044c\u044e",tooltip:"\u0420\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435: 960x480px. \u0414\u043e\u043f\u0443\u0441\u0442\u0438\u043c\u044b\u0435 \u0444\u043e\u0440\u043c\u0430\u0442\u044b: jpeg, jpg, png. \u041c\u0430\u043a\u0441. \u0440\u0430\u0437\u043c\u0435\u0440: 15 MB"})}),o&&o.title&&r.a.createElement(v.a,{style:{width:"100%"},appearance:"error"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441\u0442\u0430\u0442\u044c\u0438"),r.a.createElement(p.a,{type:"text",name:"title",ref:n({required:!0}),defaultValue:j("title")||(null===(x=y.getArticle)||void 0===x?void 0:x.title),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",appearance:"ghost",disabled:c}),r.a.createElement(i.a,{name:"category",control:l,defaultValue:null!==(C=y.getArticle)&&void 0!==C&&C.category?{value:y.getArticle.category.id,label:Object(ue.c)(y.getArticle.category.name)}:null,render:({value:e,onChange:a})=>r.a.createElement(m.a,{appearance:"ghost",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0430\u0437\u0434\u0435\u043b",options:t.filter((e=>"DIVISION"===e.type)).map((e=>({value:e.id,label:Object(ue.c)(e.name)}))),onChange:a,defaultValue:e,isLoading:c,isClearable:!0})}),o&&o.body&&r.a.createElement(v.a,{style:{width:"100%"},appearance:"error"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438"),r.a.createElement(i.a,{name:"body",control:l,defaultValue:j("body")||(null===(A=y.getArticle)||void 0===A?void 0:A.body)||null,rules:{required:!0},render:({value:e,onChange:t})=>r.a.createElement(g.a,{apiKey:be.a.get("tiny-key"),appearance:"ghost",defaultValue:e,onChange:t})}),r.a.createElement(ge,{article:e,setValue:E}),h&&r.a.createElement(oe.a,{clear:!0}),h&&r.a.createElement(i.a,{name:"status",control:l,defaultValue:null!==(S=y.getArticle)&&void 0!==S&&S.status?{value:y.getArticle.status,label:Object(ue.f)(y.getArticle.status)}:null,render:({value:e,onChange:t})=>r.a.createElement(m.a,{appearance:"ghost",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441",options:a.map((e=>({value:e,label:Object(ue.f)(e)}))),onChange:t,defaultValue:e,menuPlacement:"top",isLoading:c,isClearable:!0})})),r.a.createElement(oe.a,{clear:!0}),r.a.createElement(u.b,null,r.a.createElement(b.a,{style:{flexGrow:1},type:"submit",disabled:c},e?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))):w?r.a.createElement(v.a,{appearance:"error",style:{width:"100%",textAlign:"center"}},"\u0423\u043f\u0441! \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0441\u0442\u0430\u0442\u044c\u0435"):r.a.createElement(se.c,null,r.a.createElement(le.a,null))}))},ve=a("xAqQ"),he=a("UwjQ"),je=a("V0nP"),ye=a("aBfq"),Oe=a("ji1G");const we=Object(c.c)(d.a).withConfig({displayName:"Comments__Wrap",componentId:"sc-6rcmxi-0"})(["flex-grow:1;"]),Ee=Object(c.c)(v.a).withConfig({displayName:"Comments__CentralAlert",componentId:"sc-6rcmxi-1"})(["display:flex;justify-content:center;align-items:center;text-align:center;width:100%;flex-grow:1;"]),ke=({comments:e,loading:t,appearance:a,onLink:c,onReply:i,onLike:l,onAttach:d,onSubmit:s})=>{const m=Object(o.c)((e=>e.user)),[g,f]=Object(n.useState)(""),v=Object(n.useRef)(null);return r.a.createElement(we,null,e&&e.length>0?e.map((e=>{var t;return r.a.createElement(ie,{key:e.id,user:e.author,message:e.text,likes:null===(t=e.likes)||void 0===t?void 0:t.length,time:e.time,isLiked:e.likes.find((e=>e.email===m.email)),onLink:c,onReply:i,onLike:t=>l(e.id,t)})})):r.a.createElement(Ee,null,"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043f\u0435\u0440\u0432\u044b\u043c"),r.a.createElement(u.b,null,r.a.createElement(b.a,{kind:"icon",disabled:t||!e,onSubmit:d},r.a.createElement(w.a,{icon:"attach",stroke:"white"})),r.a.createElement(p.a,{name:"text",ref:v,placeholder:"\u041e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439...",disabled:t&&!e,appearance:a,onChange:e=>{var t;return f((null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||"")},onKeyDown:e=>{13===e.keyCode&&(s(g),v.current.value="")},tabIndex:-1}),r.a.createElement(b.a,{kind:"icon",onClick:()=>{s(g),v.current.value=""}},r.a.createElement(w.a,{icon:"send",stroke:"white"}))))};ke.defaultProps={appearance:"default"};var xe=ke;const Ce=Object(c.c)(d.a).withConfig({displayName:"ArticleView__Wrap",componentId:"sc-12lysue-0"})(["flex-grow:1;"," "," ",""],(({appearance:e})=>"default"===e&&Object(c.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(c.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(c.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),Ae=Object(c.c)(je.a).withConfig({displayName:"ArticleView__Poster",componentId:"sc-12lysue-1"})(["object-fit:cover;width:100%;height:512px;border-radius:var(--surface-border-radius);@media only screen and (max-width:480px){height:256px;}"]),Se=Object(c.c)(d.a).withConfig({displayName:"ArticleView__Content",componentId:"sc-12lysue-2"})(["grid-gap:0;"]),_e=({article:e,appearance:t,className:a,style:c,onLink:i,onCommentLink:o,onCommentReply:u})=>{var d;const[p,b]=Object(n.useState)([]),{data:m,loading:g,error:f}=Object(l.useQuery)(pe.a.GET_ARTICLE,{variables:{id:e}}),{data:h,loading:j,error:y}=Object(l.useQuery)(pe.a.GET_COMMENTS,{variables:{id:e}}),[O,{data:w,loading:E,error:k}]=Object(l.useMutation)(pe.a.SEND_COMMENT),[x]=Object(l.useMutation)(pe.a.LIKE_COMMENT);return Object(n.useEffect)((()=>{!j&&h&&b(h.getComments)}),[h,j]),Object(n.useEffect)((()=>{!E&&w&&b(w.sendComment)}),[w,E]),r.a.createElement(Ce,{className:a,style:c,appearance:t},!g&&m?r.a.createElement(r.a.Fragment,null,m.getArticle.preview&&r.a.createElement(Ae,{src:m.getArticle.preview.path}),r.a.createElement(Se,null,r.a.createElement(ye.a,{date:m.getArticle.createdAt,category:null===(d=m.getArticle.category)||void 0===d?void 0:d.name}),r.a.createElement(s.a,{tag:"h3",onClick:i,style:{marginTop:-5,marginBottom:5}},m.getArticle.title),m.getArticle.body&&r.a.createElement(Oe.a,{content:m.getArticle.body})),r.a.createElement(oe.a,{clear:!0}),r.a.createElement(s.a,{tag:"h4"},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"),r.a.createElement(xe,{comments:p,appearance:"ghost",error:y||k,loading:j||E,onLink:o,onReply:u,onLike:(e,t)=>x({variables:{comment:e,liked:t}}),onSubmit:e=>O({variables:{article:m.getArticle.id,text:e}})})):f?r.a.createElement(v.a,{appearance:"error",style:{width:"100%",textAlign:"center"}},"\u0423\u043f\u0441! \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0441\u0442\u0430\u0442\u044c\u0435"):r.a.createElement(se.c,null,r.a.createElement(le.a,null)))};_e.defaultProps={appearance:"default"};var ze=_e,Ne=a("j8/+"),Ve=a("Ztxg"),Le=a("9Xo6"),Ie=a("rP4V");function Me(e,t){const{id:a,auth:n}=t;e(Object(Ve.a)({icon:"document",title:"\u0421\u0442\u0430\u0442\u044c\u044f",content:r.a.createElement(ze,{article:a,appearance:"clear",onCommentLink:t=>Object(Ie.i)(e,{email:t,auth:n})})}))}function Te(e,t){const{categories:a,statuses:n,canEditStatus:c,mutation:i}=t;e(Object(Ve.a)({icon:"document",title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438",content:r.a.createElement(fe,{mutation:i,categories:a,statuses:n,appearance:"clear",canEditStatus:c,onSubmit:async(t,a)=>{try{var n,r,c,i;const o=await a({variables:{input:{title:t.title,body:t.body,preview:null===(n=t.preview)||void 0===n?void 0:n.file,previewSize:null===(r=t.preview)||void 0===r?void 0:r.file.size,category:null===(c=t.category)||void 0===c?void 0:c.value,status:null===(i=t.status)||void 0===i?void 0:i.value}}});e(Object(Ne.a)(o.data.createArticle)),e(Object(Ve.a)(null)),e(Object(Le.c)({type:"success",message:"\u0421\u0442\u0430\u0442\u044c\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430"}))}catch(o){e(Object(Ve.a)(null)),e(Object(Le.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e"}))}}})}))}function Qe(e,t){const{id:a,auth:n,categories:c,statuses:i,canEditStatus:o,mutation:l}=t;e(Object(Ve.a)({icon:"document",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438",content:r.a.createElement(fe,{article:a,mutation:l,categories:c,statuses:i,appearance:"clear",canEditStatus:o,onSubmit:async(t,n)=>{try{var r,c,i,o,l;const u=await n({variables:{id:a,input:{title:t.title,body:t.body,preview:null===(r=t.preview)||void 0===r?void 0:r.file,previewSize:null===(c=t.preview)||void 0===c||null===(i=c.file)||void 0===i?void 0:i.size,category:null===(o=t.category)||void 0===o?void 0:o.value,status:null===(l=t.status)||void 0===l?void 0:l.value}}});e(Object(Ne.a)(u.data.updateArticle)),e(Object(Le.c)({type:"success",message:"\u0421\u0442\u0430\u0442\u044c\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430"}))}catch(u){e(Object(Le.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e"}))}finally{e(Object(Ve.a)(null))}},onCommentLink:t=>Object(Ie.i)(e,{email:t,auth:n})})}))}function De(e,t){const{id:a,article:n,auth:c,mutation:i}=t;e(Object(Ve.a)({icon:"delete",color:"red",title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0441\u0442\u0430\u0442\u044c\u0438",content:r.a.createElement(ve.a,{mutation:i,appearance:"clear",onCancel:()=>e(Object(Ve.a)(null)),onSubmit:async(t,n)=>{try{const t=await n({variables:{id:a}});e(Object(Ne.a)(t.data.deleteArticle)),e(Object(Le.c)({type:"success",message:"\u0421\u0442\u0430\u0442\u044c\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"}))}catch(r){e(Object(Le.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u044c\u044e"}))}finally{e(Object(Ve.a)(null))}}},r.a.createElement(he.a,{article:n,appearance:"clear",onLink:()=>Me(e,{id:n.id}),onCommentLink:t=>Object(Ie.i)(e,{email:t,auth:c})}))}))}}}]);