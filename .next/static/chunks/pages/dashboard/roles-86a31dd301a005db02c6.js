_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{"17Xh":function(e,a,t){"use strict";t.r(a),t.d(a,"__N_SSP",(function(){return te}));var n=t("q1tI"),r=t.n(n),o=t("/MKj"),c=t("7BXr"),l=t("ZwIX"),i=t("wZgm"),s=t("QclZ"),d=t("EJJs"),p=t("e3uv"),u=t("ApjV"),m=t("p9yE"),b=t("coMr"),g=t("RoTl"),f=t("vOnD"),h=t("nShV"),E=t("8CDE"),v=t("aBfq"),O=t("RKiZ"),j=t("JyfY"),w=t("ZeZO"),y=t("feIE"),k=t("79b8"),C=t("7sPp"),_=t("VWQm"),x=t("NWnW");const N=Object(f.c)(E.a).withConfig({displayName:"RoleCard__Wrap",componentId:"sc-1nltqyr-0"})(["grid-gap:var(--default-gap);height:100%;"," "," ",""],(({appearance:e})=>"default"===e&&Object(f.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(f.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(f.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),R=Object(f.c)(h.b).withConfig({displayName:"RoleCard__Header",componentId:"sc-1nltqyr-1"})(["justify-content:space-between;align-items:center;"]),S=Object(f.c)(C.a).withConfig({displayName:"RoleCard__Name",componentId:"sc-1nltqyr-2"})(["transition:opacity 150ms ease;",""],(({onClick:e})=>e&&Object(f.b)(["cursor:pointer;&:hover{opacity:0.45;}"]))),P=Object(f.c)(h.b).withConfig({displayName:"RoleCard__Actions",componentId:"sc-1nltqyr-3"})(["grid-gap:5px;"]),q=Object(f.c)(h.b).withConfig({displayName:"RoleCard__Permissions",componentId:"sc-1nltqyr-4"})(["flex-wrap:wrap;grid-gap:10px;"]),D=({role:e,style:a,appearance:t,className:n,limitPermissions:o,onLink:c,onChecked:i,onEdit:s,onDelete:d})=>{const p=e.permissions.slice(0,o),u=e.permissions.length-o;return r.a.createElement(N,{className:n,style:a,appearance:t},r.a.createElement(E.a,{style:{gridGap:5}},r.a.createElement(R,null,r.a.createElement(v.a,{date:e.createdAt}),i&&s&&d&&r.a.createElement(P,null,r.a.createElement(_.b,{text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u043e\u043b\u044c"},r.a.createElement(w.a,{kind:"icon",size:"xs",appearance:"red",onClick:d},r.a.createElement(y.a,{icon:"delete",size:"xs",stroke:"white"}))),r.a.createElement(_.b,{text:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u043e\u043b\u044c"},r.a.createElement(w.a,{kind:"icon",size:"xs",onClick:s},r.a.createElement(y.a,{icon:"edit",size:"xs",stroke:"white"}))),r.a.createElement(_.b,{text:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u0440\u043e\u043b\u044c",self:!0},r.a.createElement(k.a,null)))),r.a.createElement(S,{tag:"h4",onClick:c},Object(x.e)(e.name))),r.a.createElement(O.a,{clear:!0}),e&&e.permissions.length>0?r.a.createElement(q,null,p.map((e=>r.a.createElement(j.a,{key:e,color:"ghost",appearance:"outlined"},Object(x.d)(e)))),u>0&&r.a.createElement(j.a,{color:"ghost",appearance:"outlined"},"+",u)):r.a.createElement(l.a,null,"\u041f\u0440\u0438\u0432\u0435\u043b\u0435\u0433\u0438\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"))};D.defaultProps={appearance:"default",limitPermissions:5};var I=D,V=t("VP1n"),A=t("07fs"),L=t("Gliw"),T=t("qoM+");var X=({role:e,permissions:a,mutation:t,appearance:o,className:c,onSubmit:i})=>{var d;const[p,u]=Object(n.useState)(!1),[m,b]=Object(n.useState)((null===e||void 0===e||null===(d=e.permissions)||void 0===d?void 0:d.map((e=>({value:e,label:Object(x.d)(e)}))))||null),[g,f]=Object(n.useState)(!0);return r.a.createElement(T.b,{className:c,appearance:o,mutation:t,onSubmit:(e,a)=>{(null===m||void 0===m?void 0:m.length)>0?i({...e,permissions:m},a):u(!0)}},(({register:t,loading:n,errors:o,getValues:c})=>r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,null,r.a.createElement(C.a,{tag:"h4"},"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435"),o&&o.name&&r.a.createElement(l.a,{style:{width:"100%"},appearance:"error"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0438 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b"),r.a.createElement(L.a,{type:"text",name:"name",ref:t({required:!0,pattern:/[A-Za-z]/}),onChange:a=>{a.target.value===(null===e||void 0===e?void 0:e.name)?f(!0):f(!1)},defaultValue:(null===e||void 0===e?void 0:e.name)||c("name"),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",appearance:"ghost",disabled:n}),p&&r.a.createElement(l.a,{style:{width:"100%"},appearance:"error"},"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u044d\u043b\u0435\u043c\u0435\u043d\u0442"),r.a.createElement(s.a,{name:"permissions",appearance:"ghost",defaultValue:m,onChange:a=>{var t;b(a),u(!1),a.value.length===(null===e||void 0===e||null===(t=e.permissions)||void 0===t?void 0:t.length)?f(!0):f(!1)},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u0438\u0432\u0435\u043b\u0435\u0433\u0438\u0438",options:Object(x.a)(a).map((e=>({...e,label:Object(x.d)(e.label)}))),isLoading:n,isClearable:!0,isMulti:!0})),r.a.createElement(h.b,null,r.a.createElement(w.a,{style:{flexGrow:1},type:"submit",disabled:g||n},e?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))},Z=t("xAqQ"),J=t("7Cbv");const M=Object(f.c)(E.a).withConfig({displayName:"RoleView__Wrap",componentId:"sc-3s69fr-0"})(["grid-gap:var(--default-gap);height:max-content;"," "," ",""],(({appearance:e})=>"default"===e&&Object(f.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(f.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(f.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),z=Object(f.c)(h.b).withConfig({displayName:"RoleView__Permissions",componentId:"sc-3s69fr-1"})(["flex-wrap:wrap;grid-gap:10px;"]),G=({role:e,appearance:a,className:t,style:n})=>r.a.createElement(M,{className:t,style:n,appearance:a},r.a.createElement(E.a,{style:{gridGap:0}},r.a.createElement(v.a,{date:e.createdAt}),r.a.createElement(C.a,{tag:"h4"},Object(x.e)(e.name))),r.a.createElement(O.a,{clear:!0}),e&&e.permissions.length>0?r.a.createElement(z,null,e.permissions.map((e=>r.a.createElement(j.a,{key:Object(J.a)(),color:"ghost",appearance:"outlined"},Object(x.d)(e))))):r.a.createElement(l.a,null,"\u041f\u0440\u0438\u0432\u0435\u043b\u0435\u0433\u0438\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"));G.defaultProps={appearance:"default"};var W=G,U=t("j8/+"),F=t("Ztxg"),Q=t("9Xo6");function B(e,a){const{role:t}=a;e(Object(F.a)({icon:"lock",title:"\u0420\u043e\u043b\u044c",content:r.a.createElement(W,{role:t,appearance:"clear"})}))}function K(e,a){const{permissions:t,mutation:n}=a;e(Object(F.a)({icon:"lock",title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0438",content:r.a.createElement(X,{mutation:n,permissions:t,appearance:"clear",onSubmit:async(a,t)=>{try{const n=await t({variables:{input:{name:a.name,permissions:a.permissions.map((e=>e.value))}}});e(Object(U.a)(n.data.createRole)),e(Object(F.a)(null)),e(Object(Q.c)({type:"success",message:"\u0420\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430"}))}catch(n){e(Object(F.a)(null)),e(Object(Q.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u043e\u043b\u044c"}))}}})}))}function H(e,a){const{role:t,permissions:n,mutation:o}=a;e(Object(F.a)({icon:"lock",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0438",content:r.a.createElement(X,{role:t,mutation:o,permissions:n,appearance:"clear",onSubmit:async(a,n)=>{try{const r=await n({variables:{id:t.id,input:{name:a.name,permissions:a.permissions.map((e=>e.value))}}});e(Object(U.a)(r.data.updateRole)),e(Object(F.a)(null)),e(Object(Q.c)({type:"success",message:"\u0420\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430"}))}catch(r){e(Object(F.a)(null)),e(Object(Q.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u043e\u043b\u044c"}))}}})}))}function Y(e,a){const{role:t,mutation:n}=a;e(Object(F.a)({icon:"delete",color:"red",title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0440\u043e\u043b\u0438",content:r.a.createElement(Z.a,{mutation:n,appearance:"clear",onCancel:()=>e(Object(F.a)(null)),onSubmit:async(a,n)=>{try{const a=await n({variables:{id:t.id}});e(Object(U.a)(a.data.deleteRole)),e(Object(Q.c)({type:"success",message:"\u0420\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"}))}catch(r){e(Object(Q.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u043e\u043b\u044c"}))}finally{e(Object(F.a)(null))}}},r.a.createElement(W,{role:t,appearance:"clear"}))}))}var $=t("wha1"),ee=t("u2Cb");const ae="\u0420\u043e\u043b\u0438";var te=!0;a.default=({store:e,permissions:a})=>{const t=Object(u.b)(),f=Object(o.c)((e=>e.documents)),h=Object(o.b)(),[E,v]=Object(n.useState)(),[O,j]=Object(n.useState)(),[w,y]=Object(n.useState)(!1),[k,C]=Object(n.useState)("grid"),_=Object(n.useMemo)((()=>f||e.roles),[f,e]);return Object(n.useEffect)((()=>{h(Object(U.a)(null))}),[]),r.a.createElement(m.a,{title:ae},r.a.createElement(b.a,{icon:"lock",title:ae,buttonCreateText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u043e\u043b\u044c",onCreate:t(K,{permissions:a,mutation:ee.a.CREATE_ROLE}),onChangeVisibleFilter:()=>y(!w),onChangeDisplayMethod:e=>C(e.value)}),r.a.createElement(g.a,{isOpen:w,filters:[r.a.createElement(i.a,{key:0,value:E,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",onChange:v,withNavigate:!0}),r.a.createElement(s.a,{key:1,options:$.a,placeholder:"\u0420\u0430\u0437\u0434\u0435\u043b",selected:O,onChange:e=>j(e)})],options:"list"===k?[]:p.a.role.map(((e,a)=>({label:e.header,value:a})))}),0===_.length&&r.a.createElement(l.a,{style:{width:"100%",textAlign:"center"}},"\u0420\u043e\u043b\u0435\u0439 \u043d\u0435\u0442"),"list"===k&&r.a.createElement(d.b,{data:_,template:p.a.role,onChecked:()=>{},onClick:e=>t(B,{id:e.id,role:e})(),onDelete:e=>t(Y,{id:e.id,role:e,mutation:ee.a.DELETE_ROLE})(),onEdit:e=>t(H,{id:e.id,role:e,permissions:a,mutation:ee.a.UPDATE_ROLE})(),style:{overflowX:"auto",width:"calc(100vw - 290px)"}}),"grid"===k&&r.a.createElement(c.a,null,_.map((e=>r.a.createElement(A.a,{key:e.id},r.a.createElement(V.a,null,r.a.createElement(I,{role:e,onChecked:()=>{},onLink:t(B,{id:e.id,role:e}),onDelete:t(Y,{id:e.id,role:e,mutation:ee.a.DELETE_ROLE}),onEdit:t(H,{id:e.id,role:e,permissions:a,mutation:ee.a.UPDATE_ROLE})})))))))}},"98EU":function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/roles",function(){return t("17Xh")}])},vJvq:function(e,a,t){"use strict";t.d(a,"a",(function(){return f}));var n=t("wx14"),r=t("Ff2n"),o=t("h4VS"),c=t("q1tI"),l=t.n(c),i=t("vOnD"),s=t("cpGi"),d=t("7Cbv"),p=l.a.createElement;function u(){var e=Object(o.a)(["\n      width: "," !important;\n    "]);return u=function(){return e},e}function m(){var e=Object(o.a)(["\n      padding: 0 !important;\n      border: none !important;\n      box-shadow: var(--default-shadow) !important;\n    "]);return m=function(){return e},e}function b(){var e=Object(o.a)(["\n  padding: var(--default-gap) !important;\n  border: 1px solid var(--surface-border) !important;\n  background: var(--surface-background) !important;\n  box-shadow: var(--default-shadow) !important;\n  border-radius: var(--surface-border-radius) !important;\n  border: none !important;\n  pointer-events: initial !important;\n\n  ","\n\n  &.show {\n    opacity: 1 !important;\n  }\n\n  &::after {\n    display: none !important;\n  }\n\n  ","\n"]);return b=function(){return e},e}function g(){var e=Object(o.a)(["\n  position: relative;\n  display: inline-flex;\n"]);return g=function(){return e},e}var f=i.c.div(g()),h=Object(i.c)(s.a)(b(),(function(e){return"clear"===e.appearance&&Object(i.b)(m())}),(function(e){var a=e.width;return a&&Object(i.b)(u(),a||"auto")})),E=function(e){var a=e.body,t=e.appearance,o=e.children,c=e.width,l=Object(r.a)(e,["body","appearance","children","width"]),i="popper-".concat(Object(d.a)());return p(f,null,p("div",{"data-event":"click focus","data-for":i,"data-tip":!0},o),p(h,Object(n.a)({},l,{id:i,width:c,globalEventOff:"click",appearance:t}),a))};E.defaultProps={place:"top",effect:"solid",appearance:"default"},a.b=E},wha1:function(e,a,t){"use strict";t.d(a,"e",(function(){return n})),t.d(a,"d",(function(){return r})),t.d(a,"b",(function(){return o})),t.d(a,"c",(function(){return c})),t.d(a,"a",(function(){return l}));const n=[{label:"\u041e \u0440\u0435\u0441\u0443\u0440\u0441\u0435",path:"/about"},{label:"\u041b\u044e\u0434\u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u0430",path:"/creators"},{label:"\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430",path:"/support"},{label:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a",path:"/guide"}],r=["/images/socials/gmail.png","/images/socials/vk.png","/images/socials/facebook.png"],o=[{label:"\u0433. \u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0431\u0443\u0440\u0433, \u0443\u043b. \u0414\u0435\u043a\u0430\u0431\u0440\u0438\u0441\u0442\u043e\u0432 20\u0430, \u043e\u0444. 302",icon:"location"},{label:"+7 (499) 222-54-86",icon:"call"},{label:"info@mail.ru",icon:"message"}],c=[{label:"\u041c\u043e\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u044b",value:"/projects"},{label:"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",value:"/liked"},{label:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435",value:"/feed"}],l=[{value:0,label:"\u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e"},{value:1,label:"\u0420\u0435\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f"},{value:2,label:"\u041a\u0430\u043f\u0438\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u043c\u043e\u043d\u0442"},{value:3,label:"\u0426\u0438\u0444\u0440\u043e\u0432\u0430\u044f \u0441\u0440\u0435\u0434\u0430"}]}},[["98EU",0,2,1,3,4,5,7,8]]]);