_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[23],{"/ZbR":function(e,a,t){"use strict";t.r(a),t.d(a,"__N_SSP",(function(){return te}));var n=t("q1tI"),r=t.n(n),c=t("/MKj"),o=t("7BXr"),i=t("ZwIX"),l=t("wZgm"),d=t("EJJs"),s=t("e3uv"),p=t("ApjV"),u=t("p9yE"),b=t("coMr"),m=t("RoTl"),g=t("vOnD"),y=t("nShV"),f=t("8CDE"),h=t("7sPp"),v=t("QUga"),E=t("V0nP"),O=t("aBfq"),j=t("ZeZO"),w=t("feIE"),C=t("79b8"),_=t("VWQm"),k=t("NWnW");const x=Object(g.c)(f.a).withConfig({displayName:"CategoryCard__Wrap",componentId:"sc-10psc0b-0"})(["height:100%;"," "," ",""],(({appearance:e})=>"default"===e&&Object(g.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(g.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(g.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),N=(Object(g.c)(E.a).withConfig({displayName:"CategoryCard__Poster",componentId:"sc-10psc0b-1"})(["object-fit:cover;width:100%;height:512px;border-radius:var(--surface-border-radius);"]),Object(g.c)(y.b).withConfig({displayName:"CategoryCard__Header",componentId:"sc-10psc0b-2"})(["justify-content:space-between;align-items:center;"])),I=Object(g.c)(y.b).withConfig({displayName:"CategoryCard__Actions",componentId:"sc-10psc0b-3"})(["grid-gap:5px;height:100%;"]),S=Object(g.c)(f.a).withConfig({displayName:"CategoryCard__Content",componentId:"sc-10psc0b-4"})(["grid-gap:0;"]),T=Object(g.c)(h.a).withConfig({displayName:"CategoryCard__Name",componentId:"sc-10psc0b-5"})(["transition:opacity 150ms ease;",""],(({onClick:e})=>e&&Object(g.b)(["cursor:pointer;&:hover{opacity:0.45;}"]))),V=({category:e,appearance:a,className:t,style:n,onLink:c,onChecked:o,onDelete:i,onEdit:l})=>r.a.createElement(x,{className:t,style:n,appearance:a},r.a.createElement(S,null,r.a.createElement(N,null,r.a.createElement(O.a,{date:e.createdAt,category:Object(k.c)(e.type)}),o&&l&&i&&r.a.createElement(I,null,r.a.createElement(_.b,{text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"},r.a.createElement(j.a,{kind:"icon",size:"xs",appearance:"red",onClick:i},r.a.createElement(w.a,{icon:"delete",size:"xs",stroke:"white"}))),r.a.createElement(_.b,{text:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"},r.a.createElement(j.a,{kind:"icon",size:"xs",onClick:l},r.a.createElement(w.a,{icon:"edit",size:"xs",stroke:"white"}))),r.a.createElement(_.b,{text:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",self:!0},r.a.createElement(C.a,null)))),r.a.createElement(T,{tag:"h4",onClick:c},e.name),r.a.createElement(v.b,null,e.description)));V.defaultProps={appearance:"default"};var A=V,P=t("VP1n"),D=t("07fs"),R=t("Gliw"),q=t("QclZ"),G=t("3jgA"),Z=t("qoM+");const z=({category:e,categoryTypes:a,mutation:t,appearance:c,className:o,onSubmit:l})=>{const[d,s]=Object(n.useState)(!1),[p,u]=Object(n.useState)(e&&e.type&&{value:e.type,label:Object(k.c)(e.type)}||null),[b,m]=Object(n.useState)(!0);return r.a.createElement(Z.b,{className:o,appearance:c,mutation:t,onSubmit:(e,a)=>{p?l({...e,type:p},a):s(!0)}},(({register:t,loading:n,errors:c,getValues:o})=>r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(h.a,{tag:"h4"},"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435"),c&&c.name&&r.a.createElement(i.a,{style:{width:"100%"},appearance:"error"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),r.a.createElement(R.a,{type:"text",name:"name",ref:t({required:!0}),onChange:a=>{a.target.value===(null===e||void 0===e?void 0:e.name)?m(!0):m(!1)},defaultValue:(null===e||void 0===e?void 0:e.name)||o("name"),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",appearance:"ghost",disabled:n}),d&&r.a.createElement(i.a,{style:{width:"100%"},appearance:"error"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),r.a.createElement(q.a,{name:"type",appearance:"ghost",defaultValue:p,onChange:a=>{u(a),s(!1),a.value===(null===e||void 0===e?void 0:e.type)?m(!0):m(!1)},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f",options:a.map((e=>({value:e,label:Object(k.c)(e)}))),isLoading:n,isClearable:!0}),r.a.createElement(G.a,{name:"description",ref:t(),onChange:a=>{a.target.value===(null===e||void 0===e?void 0:e.description)?m(!0):m(!1)},defaultValue:(null===e||void 0===e?void 0:e.description)||o("description"),placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",appearance:"ghost",disabled:n})),r.a.createElement(y.b,null,r.a.createElement(j.a,{style:{flexGrow:1},type:"submit",disabled:b||n},e?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))};z.defaultProps={create:!0};var L=z,W=t("xAqQ");const X=Object(g.c)(f.a).withConfig({displayName:"CategoryView__Wrap",componentId:"sc-1leuzf2-0"})([""," "," ",""],(({appearance:e})=>"default"===e&&Object(g.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(g.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(g.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),J=(Object(g.c)(E.a).withConfig({displayName:"CategoryView__Poster",componentId:"sc-1leuzf2-1"})(["object-fit:cover;width:100%;height:512px;border-radius:var(--surface-border-radius);"]),Object(g.c)(f.a).withConfig({displayName:"CategoryView__Content",componentId:"sc-1leuzf2-2"})(["grid-gap:0;"])),M=({category:e,appearance:a,className:t,style:n})=>r.a.createElement(X,{className:t,style:n,appearance:a},r.a.createElement(J,null,r.a.createElement(O.a,{date:e.createdAt,category:Object(k.c)(e.type)}),r.a.createElement(h.a,{tag:"h4"},e.name),r.a.createElement(v.b,null,e.description)));M.defaultProps={appearance:"default"};var Y=M,F=t("j8/+"),Q=t("Ztxg"),U=t("9Xo6");function B(e,a){const{category:t}=a;e(Object(Q.a)({icon:"folder",title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",content:r.a.createElement(Y,{category:t,appearance:"clear"})}))}function H(e,a){const{types:t,mutation:n}=a;e(Object(Q.a)({icon:"folder",title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",content:r.a.createElement(L,{mutation:n,categoryTypes:t,appearance:"clear",onSubmit:async(a,t)=>{try{const n=await t({variables:{input:{name:a.name,type:a.type.value,description:a.description}}});e(Object(F.a)(n.data.createCategory)),e(Object(Q.a)(null)),e(Object(U.c)({type:"success",message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430"}))}catch(n){e(Object(Q.a)(null)),e(Object(U.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}))}}})}))}function K(e,a){const{category:t,types:n,mutation:c}=a;e(Object(Q.a)({icon:"folder",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",content:r.a.createElement(L,{category:t,mutation:c,categoryTypes:n,appearance:"clear",onSubmit:async(a,n)=>{try{const r=await n({variables:{id:t.id,input:{name:a.name,type:a.type.value,description:a.description}}});e(Object(F.a)(r.data.updateCategory)),e(Object(Q.a)(null)),e(Object(U.c)({type:"success",message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430"}))}catch(r){e(Object(Q.a)(null)),e(Object(U.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}))}}})}))}function $(e,a){const{category:t,mutation:n}=a;e(Object(Q.a)({icon:"delete",color:"red",title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",content:r.a.createElement(W.a,{mutation:n,appearance:"clear",onCancel:()=>e(Object(Q.a)(null)),onSubmit:async(a,n)=>{try{const a=await n({variables:{id:t.id}});e(Object(F.a)(a.data.deleteCategory)),e(Object(U.c)({type:"success",message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"}))}catch(r){e(Object(U.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}))}finally{e(Object(Q.a)(null))}}},r.a.createElement(Y,{category:t,appearance:"clear"}))}))}var ee=t("u2Cb");const ae="\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438";var te=!0;a.default=({store:e,types:a})=>{const t=Object(p.b)(),g=Object(c.c)((e=>e.documents)),y=Object(c.b)(),[f,h]=Object(n.useState)(),[v,E]=Object(n.useState)(),[O,j]=Object(n.useState)(!1),[w,C]=Object(n.useState)("grid"),_=Object(n.useMemo)((()=>g||e.categories),[g,e]);return Object(n.useEffect)((()=>{y(Object(F.a)(null))}),[]),r.a.createElement(u.a,{title:ae},r.a.createElement(b.a,{icon:"folder",title:ae,buttonCreateText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",onCreate:t(H,{types:a,mutation:ee.a.CREATE_CATEGORY}),onChangeVisibleFilter:()=>j(!O),onChangeDisplayMethod:e=>C(e.value)}),r.a.createElement(m.a,{isOpen:O,filters:[r.a.createElement(l.a,{key:0,value:f,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",onChange:h,withNavigate:!0}),r.a.createElement(l.a,{key:0,value:v,placeholder:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",onChange:E,withNavigate:!0})],options:"list"===w?[]:s.a.category.map(((e,a)=>({label:e.header,value:a})))}),0===_.length&&r.a.createElement(i.a,{style:{width:"100%",textAlign:"center"}},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0435\u0442"),"list"===w&&r.a.createElement(d.b,{data:_,template:s.a.category,onChecked:()=>{},onClick:e=>t(B,{id:e.id,category:e})(),onDelete:e=>t($,{id:e.id,category:e,mutation:ee.a.DELETE_CATEGORY})(),onEdit:e=>t(K,{id:e.id,category:e,types:a,mutation:ee.a.UPDATE_CATEGORY})(),style:{overflowX:"auto",width:"calc(100vw - 290px)"}}),"grid"===w&&r.a.createElement(o.a,null,_.map((e=>r.a.createElement(D.a,{key:e.id},r.a.createElement(P.a,null,r.a.createElement(A,{category:e,onChecked:()=>{},onLink:t(B,{id:e.id,category:e}),onDelete:t($,{id:e.id,category:e,mutation:ee.a.DELETE_CATEGORY}),onEdit:t(K,{id:e.id,category:e,types:a,mutation:ee.a.UPDATE_CATEGORY})})))))))}},"07fs":function(e,a,t){"use strict";var n=t("q1tI"),r=t.n(n),c=t("vOnD");const o=c.c.div.withConfig({displayName:"FadeLoad__Wrap",componentId:"sc-1rdnrub-0"})(["opacity:0;transition:opacity 100ms ease;",""],(({isVisible:e})=>e&&Object(c.b)(["opacity:1;"])));a.a=({children:e})=>{const[a,t]=Object(n.useState)(!0),c=Object(n.useRef)();return Object(n.useEffect)((()=>{const e=new IntersectionObserver((e=>{e.forEach((e=>t(e.isIntersecting)))}));return e.observe(c.current),()=>e.unobserve(c.current)}),[]),r.a.createElement(o,{isVisible:a,ref:c},e)}},C1nt:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/categories",function(){return t("/ZbR")}])},vJvq:function(e,a,t){"use strict";t.d(a,"a",(function(){return y}));var n=t("wx14"),r=t("Ff2n"),c=t("h4VS"),o=t("q1tI"),i=t.n(o),l=t("vOnD"),d=t("cpGi"),s=t("7Cbv"),p=i.a.createElement;function u(){var e=Object(c.a)(["\n      width: "," !important;\n    "]);return u=function(){return e},e}function b(){var e=Object(c.a)(["\n      padding: 0 !important;\n      border: none !important;\n      box-shadow: var(--default-shadow) !important;\n    "]);return b=function(){return e},e}function m(){var e=Object(c.a)(["\n  padding: var(--default-gap) !important;\n  border: 1px solid var(--surface-border) !important;\n  background: var(--surface-background) !important;\n  box-shadow: var(--default-shadow) !important;\n  border-radius: var(--surface-border-radius) !important;\n  border: none !important;\n  pointer-events: initial !important;\n\n  ","\n\n  &.show {\n    opacity: 1 !important;\n  }\n\n  &::after {\n    display: none !important;\n  }\n\n  ","\n"]);return m=function(){return e},e}function g(){var e=Object(c.a)(["\n  position: relative;\n  display: inline-flex;\n"]);return g=function(){return e},e}var y=l.c.div(g()),f=Object(l.c)(d.a)(m(),(function(e){return"clear"===e.appearance&&Object(l.b)(b())}),(function(e){var a=e.width;return a&&Object(l.b)(u(),a||"auto")})),h=function(e){var a=e.body,t=e.appearance,c=e.children,o=e.width,i=Object(r.a)(e,["body","appearance","children","width"]),l="popper-".concat(Object(s.a)());return p(y,null,p("div",{"data-event":"click focus","data-for":l,"data-tip":!0},c),p(f,Object(n.a)({},i,{id:l,width:o,globalEventOff:"click",appearance:t}),a))};h.defaultProps={place:"top",effect:"solid",appearance:"default"},a.b=h}},[["C1nt",0,2,1,3,4,5,7,8]]]);