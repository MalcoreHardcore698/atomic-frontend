_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[29],{"HL7+":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/users",function(){return a("jNog")}])},QX5T:function(e,t,a){"use strict";var n=a("q1tI"),o=a.n(n),l=a("vOnD"),s=a("VX74"),r=a("7Cbv"),i=a("8CDE"),c=a("ZwIX"),u=a("wZgm"),d=a("auMy"),E=a("QclZ");const m=(e,t=0)=>{const[a,o]=Object(n.useState)(!1),l=()=>{const e=document.documentElement.scrollHeight-t,n=window.innerHeight,l=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;a||n+l>=e||o(!0)};return Object(n.useEffect)((()=>{a&&e()}),[a]),Object(n.useEffect)((()=>(window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l))),[]),[a,o]};var h=a("X+Rt"),b=a("p9yE"),p=a("RoTl"),f=a("EYtC"),_=a("coMr"),S=a("586Q");const C=Object(l.c)(i.a).withConfig({displayName:"content__Wrap",componentId:"sc-1afm75p-0"})(["margin-top:120px;margin-bottom:80px;"," @media only screen and (max-width:480px){margin-top:0;}"],(({clear:e})=>e&&Object(l.b)(["margin:0;"])));t.a=({title:e,store:t,query:a,handle:l,filters:i,options:T,research:v,scaffold:w,dashboard:O,variables:g={},limit:j=6,startOffset:A=6,bottomScrollOffset:y=450,children:D})=>{const R=O?b.a:h.a,[U,M]=Object(n.useState)(),[N,H]=Object(n.useState)(),[L,P]=Object(n.useState)(null),[x,k]=Object(n.useState)(!1),[G,X]=Object(n.useState)(A),[q,I]=Object(n.useState)((null===t||void 0===t?void 0:t.documents)||[]),[Q,{data:J,loading:V,error:K,refetch:Z}]=Object(s.useLazyQuery)(a),[z,{data:F,loading:Y,error:B,refetch:W}]=Object(s.useLazyQuery)(a),[$,ee]=m((async()=>{const e={...g,offset:G,limit:j};L?await Z(g):W?await W(e):await z({variables:e}),X((e=>e+j)),ee(!1)}),y),te=e=>{if(I([]),e)P(e),X(A),Q({variables:{...g,search:e,offset:0,limit:A}});else{const e={...g,offset:0,limit:j};P(null),X(0),W?W(e):z({variables:e})}};return Object(n.useEffect)((()=>{v&&te(v)}),[v]),Object(n.useEffect)((()=>{const e=!L&&!Y&&F||L&&!V&&J;e&&I((t=>[...t,...e[Object.keys(e)[0]]]))}),[L,Y,V,F,J]),o.a.createElement(R,{title:e,scaffold:w},o.a.createElement(C,{clear:w||O},!w&&!O&&o.a.createElement(f.a,{onChangeFilter:()=>k(!x),onSubmit:te}),O&&l&&o.a.createElement(_.a,{title:e,icon:l.icon,buttonCreateText:l.buttonCreateText,onCreate:l.onCreate,onChangeVisibleFilter:()=>k(!x),onChangeDisplayMethod:l.onChangeDisplayMethod}),(i||T)&&o.a.createElement(p.a,{isOpen:x,filters:i.map((e=>{switch(e.type){case"DATEPICKER":return o.a.createElement(u.a,{key:Object(r.a)(),value:U,placeholder:e.placeholder||"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",onChange:M,withNavigate:!0});case"SELECT":return o.a.createElement(E.a,{key:Object(r.a)(),options:e.options,placeholder:e.placeholder||"\u0420\u0430\u0437\u0434\u0435\u043b",selected:N,onChange:e=>H(e)});default:return null}})),options:T}),o.a.createElement(D,{documents:q}),L&&!V&&0===q.length&&o.a.createElement(c.a,{style:{width:"100%",textAlign:"center"}},"\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),(L&&K||!L&&B)&&o.a.createElement(c.a,{appearance:"error",style:{width:"100%",textAlign:"center"}},"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"),(!B&&Y||L&&!K&&V||$)&&o.a.createElement(S.d,null,o.a.createElement(d.a,null)),!L&&!Y&&!V&&!K&&0===q.length&&o.a.createElement(c.a,{style:{width:"100%",textAlign:"center"}},"\u0414\u0430\u043d\u043d\u044b\u0445 \u043d\u0435\u0442")))}},jNog:function(e,t,a){"use strict";a.r(t),a.d(t,"__N_SSP",(function(){return p}));var n=a("q1tI"),o=a.n(n),l=a("/MKj"),s=a("7BXr"),r=a("EJJs"),i=a("e3uv"),c=a("ApjV"),u=a("QX5T"),d=a("TsNn"),E=a("rP4V"),m=a("j8/+"),h=a("+EEm"),b=a("u2Cb");var p=!0;t.default=({store:e})=>{const t=Object(c.b)(),{user:a,documents:p}=Object(l.c)((e=>({user:e.user,documents:e.documents}))),f=Object(l.b)(),[_,S]=Object(n.useState)("grid"),C=Object(n.useMemo)((()=>a&&"ADMIN"===a.role.name),[a]),T=Object(n.useMemo)((()=>e.roles),[e]);return Object(n.useEffect)((()=>{f(Object(m.a)(null))}),[]),o.a.createElement(u.a,{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",filters:[{type:"DATEPICKER",placeholder:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0430\u0440\u0446\u0438\u0438"},{type:"SELECT",placeholder:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",options:[]}],options:[{label:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",value:"company"},{label:"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438",value:"members"},{label:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0430\u0440\u0446\u0438\u0438",value:"createdAt"}],handle:{icon:"user2",buttonCreateText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",onCreate:t(E.d,{roles:T,canEditRole:C,mutation:b.a.CREATE_USER}),onChangeDisplayMethod:e=>S(e.value)},limit:12,startOffset:12,bottomScrollOffset:0,query:b.a.GET_USERS,store:{documents:p||e.users},dashboard:!0},(({documents:e})=>"list"===_?o.a.createElement(r.b,{data:e,template:i.a.user,onChecked:()=>{},onClick:e=>{const n=e.name===a.name;return t(E.i,{id:e.email,auth:null===a||void 0===a?void 0:a.email,owned:n,queries:{userChats:b.a.GET_USER_CHATS,chat:b.a.GET_CHAT},mutations:{addUserChat:b.a.ADD_USER_CHAT,sendMessage:b.a.SEND_MESSAGE}})()},onDelete:e=>t(E.e,{id:e.email,user:e,auth:null===a||void 0===a?void 0:a.email,mutation:b.a.DELETE_USER})(),onEdit:e=>t(E.f,{user:e.email,auth:null===a||void 0===a?void 0:a.email,roles:T,canEditRole:C,mutations:{update:b.a.UPDATE_USER,del:b.a.DELETE_USER,changePassword:b.a.UPDATE_USER}})(),style:{overflowX:"auto",width:"calc(100vw - 290px)"}}):o.a.createElement(s.a,null,e.map((e=>{const n=e.name===a.name;return o.a.createElement(d.a,{key:e.email,user:e,onChecked:()=>{},onChat:a.email&&t(h.a,{id:e.email,auth:null===a||void 0===a?void 0:a.email,queries:{userChats:b.a.GET_USER_CHATS,chat:b.a.GET_CHAT},mutations:{addUserChat:b.a.ADD_USER_CHAT,sendMessage:b.a.SEND_MESSAGE}}),onLink:t(E.i,{id:e.email,auth:null===a||void 0===a?void 0:a.email,owned:n,queries:{userChats:b.a.GET_USER_CHATS,chat:b.a.GET_CHAT},mutations:{addUserChat:b.a.ADD_USER_CHAT,sendMessage:b.a.SEND_MESSAGE}}),onAboutMore:t(E.a,{user:e}),onDelete:t(E.e,{id:e.email,user:e,auth:null===a||void 0===a?void 0:a.email,mutation:b.a.DELETE_USER}),onEdit:t(E.f,{user:e.email,auth:null===a||void 0===a?void 0:a.email,roles:T,canEditRole:C,mutations:{update:b.a.UPDATE_USER,del:b.a.DELETE_USER,changePassword:b.a.UPDATE_USER}}),preview:!0})})))))}}},[["HL7+",0,2,1,3,4,5,6,7,8]]]);