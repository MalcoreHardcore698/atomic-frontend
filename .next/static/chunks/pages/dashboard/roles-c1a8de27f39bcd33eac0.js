_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[24],{"17Xh":function(e,a,t){"use strict";t.r(a),t.d(a,"__N_SSP",(function(){return ee}));var n=t("q1tI"),r=t.n(n),l=t("/MKj"),o=t("7BXr"),c=t("ZwIX"),i=t("wZgm"),s=t("QclZ"),d=t("EJJs"),p=t("e3uv"),u=t("ApjV"),m=t("p9yE"),b=t("coMr"),g=t("RoTl"),E=t("vOnD"),h=t("nShV"),f=t("8CDE"),O=t("aBfq"),v=t("RKiZ"),j=t("JyfY"),w=t("ZeZO"),y=t("feIE"),k=t("79b8"),C=t("7sPp"),_=t("VWQm"),x=t("ObTy");const N=Object(E.c)(f.a).withConfig({displayName:"RoleCard__Wrap",componentId:"sc-1nltqyr-0"})(["grid-gap:var(--default-gap);height:100%;"," "," ",""],(({appearance:e})=>"default"===e&&Object(E.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(E.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(E.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),R=Object(E.c)(h.b).withConfig({displayName:"RoleCard__Header",componentId:"sc-1nltqyr-1"})(["justify-content:space-between;align-items:center;"]),S=Object(E.c)(C.a).withConfig({displayName:"RoleCard__Name",componentId:"sc-1nltqyr-2"})(["transition:opacity 150ms ease;",""],(({onClick:e})=>e&&Object(E.b)(["cursor:pointer;&:hover{opacity:0.45;}"]))),P=Object(E.c)(h.b).withConfig({displayName:"RoleCard__Actions",componentId:"sc-1nltqyr-3"})(["grid-gap:5px;"]),q=Object(E.c)(h.b).withConfig({displayName:"RoleCard__Permissions",componentId:"sc-1nltqyr-4"})(["flex-wrap:wrap;grid-gap:10px;"]),A=({role:e,style:a,appearance:t,className:n,limitPermissions:l,onLink:o,onChecked:i,onEdit:s,onDelete:d})=>{const p=e.permissions.slice(0,l),u=e.permissions.length-l;return r.a.createElement(N,{className:n,style:a,appearance:t},r.a.createElement(f.a,{style:{gridGap:5}},r.a.createElement(R,null,r.a.createElement(O.a,{date:e.createdAt}),i&&s&&d&&r.a.createElement(P,null,r.a.createElement(_.b,{text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u043e\u043b\u044c"},r.a.createElement(w.a,{kind:"icon",size:"xs",appearance:"red",onClick:d},r.a.createElement(y.a,{icon:"delete",size:"xs",stroke:"white"}))),r.a.createElement(_.b,{text:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u043e\u043b\u044c"},r.a.createElement(w.a,{kind:"icon",size:"xs",onClick:s},r.a.createElement(y.a,{icon:"edit",size:"xs",stroke:"white"}))),r.a.createElement(_.b,{text:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u0440\u043e\u043b\u044c",self:!0},r.a.createElement(k.a,null)))),r.a.createElement(S,{tag:"h4",onClick:o},Object(x.e)(e.name))),r.a.createElement(v.a,{clear:!0}),e&&e.permissions.length>0?r.a.createElement(q,null,p.map((e=>r.a.createElement(j.a,{key:e,color:"ghost",appearance:"outlined"},Object(x.d)(e)))),u>0&&r.a.createElement(j.a,{color:"ghost",appearance:"outlined"},"+",u)):r.a.createElement(c.a,null,"\u041f\u0440\u0438\u0432\u0435\u043b\u0435\u0433\u0438\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"))};A.defaultProps={appearance:"default",limitPermissions:5};var D=A,I=t("Gliw"),L=t("qoM+");var T=({role:e,permissions:a,mutation:t,appearance:l,className:o,onSubmit:i})=>{var d;const[p,u]=Object(n.useState)(!1),[m,b]=Object(n.useState)((null===e||void 0===e||null===(d=e.permissions)||void 0===d?void 0:d.map((e=>({value:e,label:Object(x.d)(e)}))))||null),[g,E]=Object(n.useState)(!0);return r.a.createElement(L.b,{className:o,appearance:l,mutation:t,onSubmit:(e,a)=>{(null===m||void 0===m?void 0:m.length)>0?i({...e,permissions:m},a):u(!0)}},(({register:t,loading:n,errors:l,getValues:o})=>r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,null,r.a.createElement(C.a,{tag:"h4"},"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435"),l&&l.name&&r.a.createElement(c.a,{style:{width:"100%"},appearance:"error"},"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0438 \u0434\u043e\u043b\u0436\u043d\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0441\u0438\u043c\u0432\u043e\u043b\u044b"),r.a.createElement(I.a,{type:"text",name:"name",ref:t({required:!0,pattern:/[A-Za-z]/}),onChange:a=>{a.target.value===(null===e||void 0===e?void 0:e.name)?E(!0):E(!1)},defaultValue:(null===e||void 0===e?void 0:e.name)||o("name"),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",appearance:"ghost",disabled:n}),p&&r.a.createElement(c.a,{style:{width:"100%"},appearance:"error"},"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0438\u0432\u0438\u043b\u0435\u0433\u0438\u0439 \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0445\u043e\u0442\u044f \u0431\u044b \u043e\u0434\u0438\u043d \u044d\u043b\u0435\u043c\u0435\u043d\u0442"),r.a.createElement(s.a,{name:"permissions",appearance:"ghost",defaultValue:m,onChange:a=>{var t;b(a),u(!1),a.value.length===(null===e||void 0===e||null===(t=e.permissions)||void 0===t?void 0:t.length)?E(!0):E(!1)},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u0438\u0432\u0435\u043b\u0435\u0433\u0438\u0438",options:Object(x.a)(a).map((e=>({...e,label:Object(x.d)(e.label)}))),isLoading:n,isClearable:!0,isMulti:!0})),r.a.createElement(h.b,null,r.a.createElement(w.a,{style:{flexGrow:1},type:"submit",disabled:g||n},!e&&"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",e&&"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))))},V=t("xAqQ"),X=t("7Cbv");const Z=Object(E.c)(f.a).withConfig({displayName:"RoleView__Wrap",componentId:"sc-3s69fr-0"})(["grid-gap:var(--default-gap);height:max-content;"," "," ",""],(({appearance:e})=>"default"===e&&Object(E.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(E.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(E.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),M=Object(E.c)(h.b).withConfig({displayName:"RoleView__Permissions",componentId:"sc-3s69fr-1"})(["flex-wrap:wrap;grid-gap:10px;"]),z=({role:e,appearance:a,className:t,style:n})=>r.a.createElement(Z,{className:t,style:n,appearance:a},r.a.createElement(f.a,{style:{gridGap:0}},r.a.createElement(O.a,{date:e.createdAt}),r.a.createElement(C.a,{tag:"h4"},Object(x.e)(e.name))),r.a.createElement(v.a,{clear:!0}),e&&e.permissions.length>0?r.a.createElement(M,null,e.permissions.map((e=>r.a.createElement(j.a,{key:Object(X.a)(),color:"ghost",appearance:"outlined"},Object(x.d)(e))))):r.a.createElement(c.a,null,"\u041f\u0440\u0438\u0432\u0435\u043b\u0435\u0433\u0438\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442"));z.defaultProps={appearance:"default"};var J=z,G=t("j8/+"),U=t("Ztxg"),Q=t("9Xo6");function W(e,a){const{role:t}=a;e(Object(U.a)({icon:"lock",title:"\u0420\u043e\u043b\u044c",content:r.a.createElement(J,{role:t,appearance:"clear"})}))}function B(e,a){const{permissions:t,mutation:n}=a;e(Object(U.a)({icon:"lock",title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0438",content:r.a.createElement(T,{mutation:n,permissions:t,appearance:"clear",onSubmit:async(a,t)=>{try{const n=await t({variables:{input:{name:a.name,permissions:a.permissions.map((e=>e.value))}}});e(Object(G.a)(n.data.createRole)),e(Object(U.a)(null)),e(Object(Q.c)({type:"success",message:"\u0420\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430"}))}catch(n){e(Object(U.a)(null)),e(Object(Q.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u043e\u043b\u044c"}))}}})}))}function F(e,a){const{role:t,permissions:n,mutation:l}=a;e(Object(U.a)({icon:"lock",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u043e\u043b\u0438",content:r.a.createElement(T,{role:t,mutation:l,permissions:n,appearance:"clear",onSubmit:async(a,n)=>{try{const r=await n({variables:{id:t.id,input:{name:a.name,permissions:a.permissions.map((e=>e.value))}}});e(Object(G.a)(r.data.updateRole)),e(Object(U.a)(null)),e(Object(Q.c)({type:"success",message:"\u0420\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430"}))}catch(r){e(Object(U.a)(null)),e(Object(Q.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0440\u043e\u043b\u044c"}))}}})}))}function K(e,a){const{role:t,mutation:n}=a;e(Object(U.a)({icon:"delete",color:"red",title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0440\u043e\u043b\u0438",content:r.a.createElement(V.a,{mutation:n,appearance:"clear",onCancel:()=>e(Object(U.a)(null)),onSubmit:async(a,n)=>{try{const a=await n({variables:{id:t.id}});e(Object(G.a)(a.data.deleteRole)),e(Object(Q.c)({type:"success",message:"\u0420\u043e\u043b\u044c \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"}))}catch(r){e(Object(Q.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u043e\u043b\u044c"}))}finally{e(Object(U.a)(null))}}},r.a.createElement(J,{role:t,appearance:"clear"}))}))}var H=t("wha1"),Y=t("u2Cb");const $="\u0420\u043e\u043b\u0438";var ee=!0;a.default=({store:e,permissions:a})=>{const t=Object(u.a)(),E=Object(l.c)((e=>e.documents)),h=Object(l.b)(),[f,O]=Object(n.useState)(),[v,j]=Object(n.useState)(),[w,y]=Object(n.useState)(!1),[k,C]=Object(n.useState)("grid"),_=Object(n.useMemo)((()=>E||e.roles),[E,e]);return Object(n.useEffect)((()=>{h(Object(G.a)(null))}),[]),r.a.createElement(m.a,{title:$},r.a.createElement(b.a,{icon:"lock",title:$,buttonCreateText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u043e\u043b\u044c",onCreate:t(B,{permissions:a,mutation:Y.a.CREATE_ROLE}),onChangeVisibleFilter:()=>y(!w),onChangeDisplayMethod:e=>C(e.value)}),r.a.createElement(g.a,{isOpen:w,filters:[r.a.createElement(i.a,{key:0,value:f,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",onChange:O,withNavigate:!0}),r.a.createElement(s.a,{key:1,options:H.a,placeholder:"\u0420\u0430\u0437\u0434\u0435\u043b",selected:v,onChange:e=>j(e)})],options:"list"===k?[]:p.a.role.map(((e,a)=>({label:e.header,value:a})))}),0===_.length&&r.a.createElement(c.a,{style:{width:"100%",textAlign:"center"}},"\u0420\u043e\u043b\u0435\u0439 \u043d\u0435\u0442"),"list"===k&&r.a.createElement(d.b,{data:_,template:p.a.role,onChecked:()=>{},onClick:e=>t(W,{id:e.id,role:e})(),onDelete:e=>t(K,{id:e.id,role:e,mutation:Y.a.DELETE_ROLE})(),onEdit:e=>t(F,{id:e.id,role:e,permissions:a,mutation:Y.a.UPDATE_ROLE})(),style:{overflowX:"auto",width:"calc(100vw - 290px)"}}),"grid"===k&&r.a.createElement(o.a,null,_.map((e=>r.a.createElement(D,{key:e.id,role:e,onChecked:()=>{},onLink:t(W,{id:e.id,role:e}),onDelete:t(K,{id:e.id,role:e,mutation:Y.a.DELETE_ROLE}),onEdit:t(F,{id:e.id,role:e,permissions:a,mutation:Y.a.UPDATE_ROLE})})))))}},"98EU":function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/roles",function(){return t("17Xh")}])},wha1:function(e,a,t){"use strict";t.d(a,"f",(function(){return n})),t.d(a,"e",(function(){return r})),t.d(a,"b",(function(){return l})),t.d(a,"d",(function(){return o})),t.d(a,"a",(function(){return c})),t.d(a,"c",(function(){return i}));const n=[{label:"\u041e \u0440\u0435\u0441\u0443\u0440\u0441\u0435",path:"/about"},{label:"\u041b\u044e\u0434\u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u0430",path:"/creators"},{label:"\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430",path:"/support"},{label:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a",path:"/guide"}],r=["/images/socials/gmail.png","/images/socials/vk.png","/images/socials/facebook.png"],l=[{label:"\u0433. \u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0431\u0443\u0440\u0433, \u0443\u043b. \u0414\u0435\u043a\u0430\u0431\u0440\u0438\u0441\u0442\u043e\u0432 20\u0430, \u043e\u0444. 302",icon:"location"},{label:"+7 (499) 222-54-86",icon:"call"},{label:"info@mail.ru",icon:"message"}],o=[{label:"\u041c\u043e\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u044b",value:"/projects"},{label:"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",value:"/liked"},{label:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435",value:"/feed"}],c=[{value:0,label:"\u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e"},{value:1,label:"\u0420\u0435\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f"},{value:2,label:"\u041a\u0430\u043f\u0438\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u043c\u043e\u043d\u0442"},{value:3,label:"\u0426\u0438\u0444\u0440\u043e\u0432\u0430\u044f \u0441\u0440\u0435\u0434\u0430"}],i=[{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433",value:"rating"},{label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0438",value:"followers"},{label:"\u0414\u0430\u0442\u0430",value:"date"}]}},[["98EU",0,2,1,3,4,5,7]]]);