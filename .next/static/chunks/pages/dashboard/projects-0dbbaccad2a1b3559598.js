_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[23],{"07fs":function(e,t,a){"use strict";var n=a("q1tI"),o=a.n(n),c=a("vOnD");const r=c.d.div.withConfig({displayName:"FadeLoad__Wrap",componentId:"sc-1rdnrub-0"})(["opacity:0;transition:opacity 100ms ease;",""],(({isVisible:e})=>e&&Object(c.c)(["opacity:1;"])));t.a=({children:e})=>{const[t,a]=Object(n.useState)(!0),c=Object(n.useRef)();return Object(n.useEffect)((()=>{const e=new IntersectionObserver((e=>{e.forEach((e=>a(e.isIntersecting)))}));return e.observe(c.current),()=>e.unobserve(c.current)}),[]),o.a.createElement(r,{isVisible:t,ref:c},e)}},"0RHc":function(e,t,a){"use strict";a.r(t),a.d(t,"__N_SSP",(function(){return C}));var n=a("q1tI"),o=a.n(n),c=a("/MKj"),r=a("7BXr"),i=a("EJJs"),s=a("e3uv"),l=a("ApjV"),u=a("lphG"),d=a("QX5T"),m=a("1zqG"),E=a("VP1n"),b=a("07fs"),p=a("IxyI"),f=a("j8/+"),h=a("NWnW"),j=a("8ihE"),O=a("rP4V"),v=a("u2Cb");var C=!0;t.default=({store:e})=>{const t=Object(l.b)(),a=Object(u.a)(),{user:C,documents:S}=Object(c.c)((e=>({user:e.user,documents:e.documents}))),y=Object(c.b)(),[g,_]=Object(n.useState)("grid"),w=Object(n.useMemo)((()=>C&&"ADMIN"===C.role.name),[C]);return Object(n.useEffect)((()=>{y(Object(f.a)(null))}),[]),o.a.createElement(d.a,{title:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b",filters:[{type:"DATEPICKER"},{type:"SELECT",options:null===e||void 0===e?void 0:e.categories.map((e=>({value:e.id,label:Object(h.e)(e.name)})))}],options:[{label:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",value:"company"},{label:"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438",value:"members"},{label:"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",value:"createdAt"}],handle:{icon:"work",buttonCreateText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",onCreate:t(p.b,{companies:e.companies,categories:e.categories,statuses:e.statuses,canEditStatus:w,mutation:v.a.CREATE_PROJECT,query:v.a.GET_USERS}),onChangeDisplayMethod:e=>_(e.value)},limit:12,startOffset:12,bottomScrollOffset:0,query:v.a.GET_PROJECTS,variables:{status:"PUBLISHED"},store:{documents:S||e.projects},dashboard:!0},(({documents:n})=>"list"===g?o.a.createElement(i.b,{data:n,template:s.a.project,onChecked:()=>{},onClick:e=>t(p.e,{id:e.id,auth:C})(),onDelete:e=>t(p.c,{id:e.id,project:e,auth:C,mutation:v.a.DELETE_PROJECT})(),onEdit:n=>t(p.d,{id:n.id,companies:e.companies,categories:e.categories,statuses:e.statuses,canEditStatus:w,mutation:v.a.UPDATE_PROJECT,query:v.a.GET_USERS,onCompanyInputChange:a(v.a.GET_USERS,{account:"ENTITY"})})(),style:{overflowX:"auto",width:"calc(100vw - 290px)"}}):o.a.createElement(r.a,null,n.map((n=>{var c;return o.a.createElement(b.a,{key:n.id},o.a.createElement(E.a,null,o.a.createElement(m.c,{project:n,onChecked:()=>{},onScreenshotClick:(e,a)=>t(p.g,{screenshots:[n.preview,...n.screenshots],key:a})(),onLink:t(p.e,{id:n.id,auth:null===C||void 0===C?void 0:C.email,added:!(null===C||void 0===C||null===(c=C.folders)||void 0===c||!c.find((e=>!(null===e||void 0===e||!e.projects.find((e=>e===n.id)))))),liked:!!(n.rating||[]).find((e=>e.email===(null===C||void 0===C?void 0:C.email))),onLike:C.email&&a(v.a.LIKE_PROJECT,{id:n.id},(e=>y(Object(j.e)(e.data.likeProject)))),onAdd:C.email&&t(p.a,{id:n.id,folders:null===C||void 0===C?void 0:C.folders,mutations:{addProject:v.a.ADD_USER_PROJECT,createFolder:v.a.ADD_USER_FOLDER},callback:e=>{const t={...e,projects:[...e.projects,n.id]};y(Object(j.c)(t))}})}),onAboutMore:t(O.a,{user:n}),onDelete:t(p.c,{id:n.id,project:n,auth:C,mutation:v.a.DELETE_PROJECT}),onEdit:t(p.d,{id:n.id,companies:e.companies,categories:e.categories,statuses:e.statuses,canEditStatus:w,mutation:v.a.UPDATE_PROJECT,query:v.a.GET_USERS,onCompanyInputChange:a(v.a.GET_USERS,{account:"ENTITY"})}),withSocials:!0,preview:!0})))})))))}},EYtC:function(e,t,a){"use strict";var n=a("q1tI"),o=a.n(n),c=a("vOnD"),r=a("nShV"),i=a("ZeZO"),s=a("feIE"),l=a("t7jn"),u=a("coMr");const d=Object(c.d)(r.b).withConfig({displayName:"SearchBar__Wrap",componentId:"sc-1ruwjhl-0"})(["width:100%;"]),m=Object(c.d)(l.a).withConfig({displayName:"SearchBar__WrapSearchField",componentId:"sc-1ruwjhl-1"})(["flex-grow:100;"]),E=Object(c.d)(i.a).withConfig({displayName:"SearchBar__WrapButton",componentId:"sc-1ruwjhl-2"})(["background:var(--default-color-accent-dim);border:none;&:hover{svg{path,circle{stroke:white;}}}",""],(({visibleFilter:e})=>e&&Object(c.c)(["background:var(--default-color-accent);"])));t.a=({appearance:e,buttonCreateText:t,onCreate:a,onChangeFilter:c,onSubmit:r})=>{const[i,l]=Object(n.useState)(!1);return o.a.createElement(d,null,o.a.createElement(m,{appearance:e,placeholder:"\u041f\u043e\u0438\u0441\u043a",onSubmit:r}),o.a.createElement(E,{type:"button",kind:"icon",onClick:()=>{l(!i),c&&c(!i)},visibleFilter:i},o.a.createElement(s.a,{icon:"filter2",stroke:i?"white":"var(--default-color-accent)"})),a&&o.a.createElement(u.a,{type:"button",onClick:a},o.a.createElement("span",null,t),o.a.createElement(s.a,{type:"button",icon:"add",stroke:"white"})))}},QX5T:function(e,t,a){"use strict";var n=a("q1tI"),o=a.n(n),c=a("20a2"),r=a("vOnD"),i=a("VX74"),s=a("RotF"),l=a.n(s),u=a("7Cbv"),d=a("8CDE"),m=a("wZgm"),E=a("auMy"),b=a("QclZ"),p=a("X+Rt"),f=a("p9yE"),h=a("RoTl"),j=a("EYtC"),O=a("coMr"),v=a("586Q"),C=a("/MKj");const S=Object(r.d)(d.a).withConfig({displayName:"content__Wrap",componentId:"sc-1afm75p-0"})(["margin-top:120px;margin-bottom:80px;"," @media only screen and (max-width:480px){margin-top:0;}"],(({clear:e})=>e&&Object(r.c)(["margin:0;"])));t.a=({title:e,store:t,query:a,handle:r,filters:s,options:d,scaffold:y,dashboard:g,variables:_={},limit:w=6,startOffset:T=6,initialize:k,children:R})=>{const I=Object(c.useRouter)(),D=Object(C.c)((e=>e.root.search)),P=g?f.a:p.a,[N,M]=Object(n.useState)(),[A,J]=Object(n.useState)(),[L,q]=Object(n.useState)(null),[x,F]=Object(n.useState)(!1),[U,G]=Object(n.useState)(T+1),[V,X]=Object(n.useState)((null===t||void 0===t?void 0:t.documents)||[]),[W,B]=Object(n.useState)(!1),Q=Object(n.useMemo)((()=>{var e;return Number(null===(e=I.query)||void 0===e?void 0:e.page)||1}),[I]),[K,{data:z,loading:Y,refetch:Z}]=Object(i.useLazyQuery)(a),[H,{data:$,loading:ee,refetch:te}]=Object(i.useLazyQuery)(a),ae=e=>{if(X([]),e)q(e),K({variables:{..._,search:e,offset:0,limit:T*Q}});else{const e={..._,offset:0,limit:w};q(null),te?te(e):H({variables:e})}G(0)};return Object(n.useEffect)((()=>{k&&H({variables:{offset:U,limit:w}})}),[k]),Object(n.useEffect)((()=>{D&&ae(D)}),[D]),Object(n.useEffect)((()=>{const e=!L&&!ee&&$||L&&!Y&&z;if(e){const t=e[Object.keys(e)[0]];t.length>0&&X((e=>[...e,...t])),0===t.length&&B(!0)}}),[L,ee,Y,$,z,B]),o.a.createElement(P,{title:e,scaffold:y},o.a.createElement(S,{clear:y||g},!y&&!g&&o.a.createElement(j.a,{onChangeFilter:()=>F(!x),onSubmit:ae}),g&&r&&o.a.createElement(O.b,{title:e,icon:r.icon,buttonCreateText:r.buttonCreateText,onCreate:r.onCreate,onChangeVisibleFilter:()=>F(!x),onChangeDisplayMethod:r.onChangeDisplayMethod}),(s||d)&&o.a.createElement(h.a,{isOpen:x,filters:s.map((e=>{switch(e.type){case"DATEPICKER":return o.a.createElement(m.a,{key:Object(u.a)(),value:N,placeholder:e.placeholder||"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",onChange:M,withNavigate:!0});case"SELECT":return o.a.createElement(b.a,{key:Object(u.a)(),options:e.options,placeholder:e.placeholder||"\u0420\u0430\u0437\u0434\u0435\u043b",selected:A,onChange:e=>J(e)});default:return null}})),options:d}),o.a.createElement(l.a,{pageStart:Q||0,loadMore:async e=>{const t={..._,offset:U,limit:w};L&&Z?await Z(_):te?(await te(t),G(w*e+T+1)):await H({variables:t})},hasMore:!W,loader:o.a.createElement(v.d,{key:"loader"},o.a.createElement(E.a,null))},"function"===typeof R?o.a.createElement(R,{documents:V}):R)))}},e0St:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/projects",function(){return a("0RHc")}])}},[["e0St",0,2,1,3,4,5,6,7,8]]]);