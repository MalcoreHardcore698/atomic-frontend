_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[28],{"07fs":function(e,t,o){"use strict";var a=o("q1tI"),n=o.n(a),r=o("vOnD");const s=r.d.div.withConfig({displayName:"FadeLoad__Wrap",componentId:"sc-1rdnrub-0"})(["opacity:0;transition:opacity 100ms ease;",""],(({isVisible:e})=>e&&Object(r.c)(["opacity:1;"])));t.a=({children:e})=>{const[t,o]=Object(a.useState)(!0),r=Object(a.useRef)();return Object(a.useEffect)((()=>{const e=new IntersectionObserver((e=>{e.forEach((e=>o(e.isIntersecting)))}));return e.observe(r.current),()=>e.unobserve(r.current)}),[]),n.a.createElement(s,{isVisible:t,ref:r},e)}},EYtC:function(e,t,o){"use strict";var a=o("q1tI"),n=o.n(a),r=o("vOnD"),s=o("nShV"),i=o("ZeZO"),l=o("feIE"),u=o("t7jn");const c=Object(r.d)(s.b).withConfig({displayName:"SearchBar__Wrap",componentId:"sc-1ruwjhl-0"})(["width:100%;"]),d=Object(r.d)(u.a).withConfig({displayName:"SearchBar__WrapSearchField",componentId:"sc-1ruwjhl-1"})(["flex-grow:100;"]),p=Object(r.d)(i.a).withConfig({displayName:"SearchBar__WrapButton",componentId:"sc-1ruwjhl-2"})(["background:var(--default-color-accent-dim);border:none;&:hover{svg{path,circle{stroke:white;}}}",""],(({visibleFilter:e})=>e&&Object(r.c)(["background:var(--default-color-accent);"])));t.a=({appearance:e,onChangeFilter:t,onSubmit:o})=>{const[r,s]=Object(a.useState)(!1);return n.a.createElement(c,null,n.a.createElement(d,{appearance:e,placeholder:"\u041f\u043e\u0438\u0441\u043a",onSubmit:o}),n.a.createElement(p,{type:"button",kind:"icon",onClick:()=>{s(!r),t&&t(!r)},visibleFilter:r},n.a.createElement(l.a,{icon:"filter2",stroke:r?"white":"var(--default-color-accent)"})))}},"HL7+":function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/users",function(){return o("jNog")}])},LSTS:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,o,a){return o&&e(t.prototype,o),a&&e(t,a),t}}(),n=o("q1tI"),r=i(n),s=i(o("17x9"));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.scrollListener=o.scrollListener.bind(o),o.eventListenerOptions=o.eventListenerOptions.bind(o),o.mousewheelListener=o.mousewheelListener.bind(o),o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(o){}return e}},{key:"eventListenerOptions",value:function(){var e=this.props.useCapture;return this.isPassiveSupported()&&(e={useCapture:this.props.useCapture,passive:!0}),e}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,o=this.getParentElement(e),a=void 0;if(this.props.useWindow){var n=document.documentElement||document.body.parentNode||document.body,r=void 0!==t.pageYOffset?t.pageYOffset:n.scrollTop;a=this.props.isReverse?r:this.calculateOffset(e,r)}else a=this.props.isReverse?o.scrollTop:e.scrollHeight-o.scrollTop-o.clientHeight;a<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=o.scrollHeight,this.beforeScrollTop=o.scrollTop,"function"===typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),o=t.children,a=t.element,n=t.hasMore,s=(t.initialLoad,t.isReverse),i=t.loader,l=(t.loadMore,t.pageStart,t.ref),u=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var o={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(o[a]=e[a]);return o}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));u.ref=function(t){e.scrollComponent=t,l&&l(t)};var c=[o];return n&&(i?s?c.unshift(i):c.push(i):this.defaultLoader&&(s?c.unshift(this.defaultLoader):c.push(this.defaultLoader))),r.default.createElement(a,u,c)}}]),t}(n.Component);l.propTypes={children:s.default.node.isRequired,element:s.default.node,hasMore:s.default.bool,initialLoad:s.default.bool,isReverse:s.default.bool,loader:s.default.node,loadMore:s.default.func.isRequired,pageStart:s.default.number,ref:s.default.func,getScrollParent:s.default.func,threshold:s.default.number,useCapture:s.default.bool,useWindow:s.default.bool},l.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=l,e.exports=t.default},QX5T:function(e,t,o){"use strict";var a=o("q1tI"),n=o.n(a),r=o("20a2"),s=o("vOnD"),i=o("VX74"),l=o("RotF"),u=o.n(l),c=o("7Cbv"),d=o("8CDE"),p=o("wZgm"),h=o("auMy"),f=o("QclZ"),m=o("X+Rt"),v=o("p9yE"),E=o("RoTl"),b=o("EYtC"),S=o("coMr"),w=o("586Q"),y=o("/MKj");const g=Object(s.d)(d.a).withConfig({displayName:"content__Wrap",componentId:"sc-1afm75p-0"})(["margin-top:120px;margin-bottom:80px;"," @media only screen and (max-width:480px){margin-top:0;}"],(({clear:e})=>e&&Object(s.c)(["margin:0;"])));t.a=({title:e,store:t,query:o,handle:s,filters:l,options:d,scaffold:C,dashboard:O,variables:_={},limit:L=6,startOffset:j=6,initialize:T,children:P})=>{const M=Object(r.useRouter)(),R=Object(y.c)((e=>e.root.search)),k=O?v.a:m.a,[D,A]=Object(a.useState)(),[U,N]=Object(a.useState)(),[H,I]=Object(a.useState)(null),[x,W]=Object(a.useState)(!1),[q,G]=Object(a.useState)(j+1),[F,V]=Object(a.useState)((null===t||void 0===t?void 0:t.documents)||[]),[X,Q]=Object(a.useState)(!1),z=Object(a.useMemo)((()=>{var e;return Number(null===(e=M.query)||void 0===e?void 0:e.page)||1}),[M]),[B,{data:Y,loading:J,refetch:K}]=Object(i.useLazyQuery)(o),[Z,{data:$,loading:ee,refetch:te}]=Object(i.useLazyQuery)(o),oe=e=>{if(V([]),e)I(e),B({variables:{..._,search:e,offset:0,limit:j*z}});else{const e={..._,offset:0,limit:L};I(null),te?te(e):Z({variables:e})}G(0)};return Object(a.useEffect)((()=>{T&&Z({variables:{offset:q,limit:L}})}),[T]),Object(a.useEffect)((()=>{R&&oe(R)}),[R]),Object(a.useEffect)((()=>{const e=!H&&!ee&&$||H&&!J&&Y;if(e){const t=e[Object.keys(e)[0]];t.length>0&&V((e=>[...e,...t])),0===t.length&&Q(!0)}}),[H,ee,J,$,Y,Q]),n.a.createElement(k,{title:e,scaffold:C},n.a.createElement(g,{clear:C||O},!C&&!O&&n.a.createElement(b.a,{onChangeFilter:()=>W(!x),onSubmit:oe}),O&&s&&n.a.createElement(S.a,{title:e,icon:s.icon,buttonCreateText:s.buttonCreateText,onCreate:s.onCreate,onChangeVisibleFilter:()=>W(!x),onChangeDisplayMethod:s.onChangeDisplayMethod}),(l||d)&&n.a.createElement(E.a,{isOpen:x,filters:l.map((e=>{switch(e.type){case"DATEPICKER":return n.a.createElement(p.a,{key:Object(c.a)(),value:D,placeholder:e.placeholder||"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",onChange:A,withNavigate:!0});case"SELECT":return n.a.createElement(f.a,{key:Object(c.a)(),options:e.options,placeholder:e.placeholder||"\u0420\u0430\u0437\u0434\u0435\u043b",selected:U,onChange:e=>N(e)});default:return null}})),options:d}),n.a.createElement(u.a,{pageStart:z||0,loadMore:async e=>{const t={..._,offset:q,limit:L};H&&K?await K(_):te?(await te(t),G(L*e+j+1)):await Z({variables:t})},hasMore:!X,loader:n.a.createElement(w.d,{key:"loader"},n.a.createElement(h.a,null))},"function"===typeof P?n.a.createElement(P,{documents:F}):P)))}},RotF:function(e,t,o){e.exports=o("LSTS")},jNog:function(e,t,o){"use strict";o.r(t),o.d(t,"__N_SSP",(function(){return b}));var a=o("q1tI"),n=o.n(a),r=o("/MKj"),s=o("7BXr"),i=o("EJJs"),l=o("e3uv"),u=o("ApjV"),c=o("QX5T"),d=o("TsNn"),p=o("VP1n"),h=o("07fs"),f=o("rP4V"),m=o("j8/+"),v=o("+EEm"),E=o("u2Cb");var b=!0;t.default=({store:e})=>{const t=Object(u.b)(),{user:o,documents:b}=Object(r.c)((e=>({user:e.user,documents:e.documents}))),S=Object(r.b)(),[w,y]=Object(a.useState)("grid"),g=Object(a.useMemo)((()=>o&&"ADMIN"===o.role.name),[o]),C=Object(a.useMemo)((()=>e.roles),[e]);return Object(a.useEffect)((()=>{S(Object(m.a)(null))}),[]),n.a.createElement(c.a,{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438",filters:[{type:"DATEPICKER",placeholder:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0430\u0440\u0446\u0438\u0438"},{type:"SELECT",placeholder:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",options:[]}],options:[{label:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",value:"company"},{label:"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438",value:"members"},{label:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0430\u0440\u0446\u0438\u0438",value:"createdAt"}],handle:{icon:"user2",buttonCreateText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",onCreate:t(f.d,{roles:C,canEditRole:g,mutation:E.a.CREATE_USER}),onChangeDisplayMethod:e=>y(e.value)},limit:12,startOffset:12,bottomScrollOffset:0,query:E.a.GET_USERS,store:{documents:b||e.users},dashboard:!0},(({documents:e})=>"list"===w?n.a.createElement(i.b,{data:e,template:l.a.user,onChecked:()=>{},onClick:e=>{const a=e.name===o.name;return t(f.i,{id:e.email,auth:null===o||void 0===o?void 0:o.email,owned:a,queries:{userChats:E.a.GET_USER_CHATS,chat:E.a.GET_CHAT},mutations:{addUserChat:E.a.ADD_USER_CHAT,sendMessage:E.a.SEND_MESSAGE}})()},onDelete:e=>t(f.e,{id:e.email,user:e,auth:null===o||void 0===o?void 0:o.email,mutation:E.a.DELETE_USER})(),onEdit:e=>t(f.f,{user:e.email,auth:null===o||void 0===o?void 0:o.email,roles:C,canEditRole:g,mutations:{update:E.a.UPDATE_USER,del:E.a.DELETE_USER,changePassword:E.a.UPDATE_USER}})(),style:{overflowX:"auto",width:"calc(100vw - 290px)"}}):n.a.createElement(s.a,null,e.map((e=>{const a=e.name===o.name;return n.a.createElement(h.a,{key:e.email},n.a.createElement(p.a,null,n.a.createElement(d.a,{user:e,onChecked:()=>{},onChat:o.email&&t(v.a,{id:e.email,auth:null===o||void 0===o?void 0:o.email,queries:{userChats:E.a.GET_USER_CHATS,chat:E.a.GET_CHAT},mutations:{addUserChat:E.a.ADD_USER_CHAT,sendMessage:E.a.SEND_MESSAGE}}),onLink:t(f.i,{id:e.email,auth:null===o||void 0===o?void 0:o.email,owned:a,queries:{userChats:E.a.GET_USER_CHATS,chat:E.a.GET_CHAT},mutations:{addUserChat:E.a.ADD_USER_CHAT,sendMessage:E.a.SEND_MESSAGE}}),onAboutMore:t(f.a,{user:e}),onDelete:t(f.e,{id:e.email,user:e,auth:null===o||void 0===o?void 0:o.email,mutation:E.a.DELETE_USER}),onEdit:t(f.f,{user:e.email,auth:null===o||void 0===o?void 0:o.email,roles:C,canEditRole:g,mutations:{update:E.a.UPDATE_USER,del:E.a.DELETE_USER,changePassword:E.a.UPDATE_USER}}),preview:!0})))})))))}}},[["HL7+",0,2,1,3,4,5,6,7,8]]]);