_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{"0RHc":function(e,t,a){"use strict";a.r(t),a.d(t,"__N_SSP",(function(){return O}));var n=a("q1tI"),o=a.n(n),c=a("/MKj"),s=a("7BXr"),r=a("EJJs"),i=a("e3uv"),l=a("ApjV"),u=a("lphG"),d=a("QX5T"),E=a("1zqG"),m=a("IxyI"),p=a("j8/+"),b=a("NWnW"),h=a("rP4V"),f=a("u2Cb");var O=!0;t.default=({store:e})=>{const t=Object(l.b)(),a=Object(u.a)(),{user:O,documents:C}=Object(c.c)((e=>({user:e.user,documents:e.documents}))),j=Object(c.b)(),[w,T]=Object(n.useState)("grid"),g=Object(n.useMemo)((()=>O&&"ADMIN"===O.role.name),[O]);return Object(n.useEffect)((()=>{j(Object(p.a)(null))}),[]),o.a.createElement(d.a,{title:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b",filters:[{type:"DATEPICKER"},{type:"SELECT",options:null===e||void 0===e?void 0:e.categories.map((e=>({value:e.id,label:Object(b.a)(e.name)})))}],options:[{label:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",value:"company"},{label:"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438",value:"members"},{label:"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",value:"createdAt"}],handle:{icon:"work",buttonCreateText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",onCreate:t(m.b,{companies:e.companies,categories:e.categories,statuses:e.statuses,canEditStatus:g,mutation:f.a.CREATE_PROJECT,query:f.a.GET_USERS}),onChangeDisplayMethod:e=>T(e.value)},limit:12,startOffset:12,bottomScrollOffset:0,query:f.a.GET_PROJECTS,variables:{status:"PUBLISHED"},store:{documents:C||e.projects},dashboard:!0},(({documents:n})=>"list"===w?o.a.createElement(r.b,{data:n,template:i.a.project,onChecked:()=>{},onClick:e=>t(m.e,{id:e.id,auth:O})(),onDelete:e=>t(m.c,{id:e.id,project:e,auth:O,mutation:f.a.DELETE_PROJECT})(),onEdit:n=>t(m.d,{id:n.id,companies:e.companies,categories:e.categories,statuses:e.statuses,canEditStatus:g,mutation:f.a.UPDATE_PROJECT,query:f.a.GET_USERS,onCompanyInputChange:a(f.a.GET_USERS,{account:"ENTITY"})})(),style:{overflowX:"auto",width:"calc(100vw - 290px)"}}):o.a.createElement(s.a,null,n.map((n=>o.a.createElement(E.c,{key:n.id,project:n,onChecked:()=>{},onScreenshotClick:(e,a)=>t(m.f,{screenshots:[n.preview,...n.screenshots],key:a})(),onLink:t(m.e,{id:n.id,user:O}),onAboutMore:t(h.a,{user:n}),onDelete:t(m.c,{id:n.id,project:n,auth:O,mutation:f.a.DELETE_PROJECT}),onEdit:t(m.d,{id:n.id,companies:e.companies,categories:e.categories,statuses:e.statuses,canEditStatus:g,mutation:f.a.UPDATE_PROJECT,query:f.a.GET_USERS,onCompanyInputChange:a(f.a.GET_USERS,{account:"ENTITY"})}),preview:!0}))))))}},QX5T:function(e,t,a){"use strict";var n=a("q1tI"),o=a.n(n),c=a("vOnD"),s=a("VX74"),r=a("7Cbv"),i=a("8CDE"),l=a("ZwIX"),u=a("wZgm"),d=a("auMy"),E=a("QclZ");const m=(e,t=0)=>{const[a,o]=Object(n.useState)(!1),c=()=>{const e=document.documentElement.scrollHeight-t,n=window.innerHeight,c=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;a||n+c>=e||o(!0)};return Object(n.useEffect)((()=>{a&&e()}),[a]),Object(n.useEffect)((()=>(window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c))),[]),[a,o]};var p=a("X+Rt"),b=a("p9yE"),h=a("RoTl"),f=a("EYtC"),O=a("coMr"),C=a("586Q");const j=Object(c.c)(i.a).withConfig({displayName:"content__Wrap",componentId:"sc-1afm75p-0"})(["margin-top:120px;margin-bottom:80px;"," @media only screen and (max-width:480px){margin-top:0;}"],(({clear:e})=>e&&Object(c.b)(["margin:0;"])));t.a=({title:e,store:t,query:a,handle:c,filters:i,options:w,research:T,scaffold:g,dashboard:y,variables:S={},limit:v=6,startOffset:_=6,bottomScrollOffset:R=450,children:D})=>{const P=y?b.a:p.a,[I,k]=Object(n.useState)(),[x,A]=Object(n.useState)(),[N,J]=Object(n.useState)(null),[L,M]=Object(n.useState)(!1),[X,q]=Object(n.useState)(_),[G,U]=Object(n.useState)((null===t||void 0===t?void 0:t.documents)||[]),[Q,{data:H,loading:V,error:Y,refetch:z}]=Object(s.useLazyQuery)(a),[K,{data:W,loading:Z,error:B,refetch:F}]=Object(s.useLazyQuery)(a),[$,ee]=m((async()=>{const e={...S,offset:X,limit:v};N?await z(S):F?await F(e):await K({variables:e}),q((e=>e+v)),ee(!1)}),R),te=e=>{if(U([]),e)J(e),q(_),Q({variables:{...S,search:e,offset:0,limit:_}});else{const e={...S,offset:0,limit:v};J(null),q(0),F?F(e):K({variables:e})}};return Object(n.useEffect)((()=>{T&&te(T)}),[T]),Object(n.useEffect)((()=>{const e=!N&&!Z&&W||N&&!V&&H;e&&U((t=>[...t,...e[Object.keys(e)[0]]]))}),[N,Z,V,W,H]),o.a.createElement(P,{title:e,scaffold:g},o.a.createElement(j,{clear:g||y},!g&&!y&&o.a.createElement(f.a,{onChangeFilter:()=>M(!L),onSubmit:te}),y&&c&&o.a.createElement(O.a,{title:e,icon:c.icon,buttonCreateText:c.buttonCreateText,onCreate:c.onCreate,onChangeVisibleFilter:()=>M(!L),onChangeDisplayMethod:c.onChangeDisplayMethod}),(i||w)&&o.a.createElement(h.a,{isOpen:L,filters:i.map((e=>{switch(e.type){case"DATEPICKER":return o.a.createElement(u.a,{key:Object(r.a)(),value:I,placeholder:e.placeholder||"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",onChange:k,withNavigate:!0});case"SELECT":return o.a.createElement(E.a,{key:Object(r.a)(),options:e.options,placeholder:e.placeholder||"\u0420\u0430\u0437\u0434\u0435\u043b",selected:x,onChange:e=>A(e)});default:return null}})),options:w}),o.a.createElement(D,{documents:G}),N&&!V&&0===G.length&&o.a.createElement(l.a,{style:{width:"100%",textAlign:"center"}},"\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),(N&&Y||!N&&B)&&o.a.createElement(l.a,{appearance:"error",style:{width:"100%",textAlign:"center"}},"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"),(!B&&Z||N&&!Y&&V||$)&&o.a.createElement(C.d,null,o.a.createElement(d.a,null)),!N&&!Z&&!V&&!Y&&0===G.length&&o.a.createElement(l.a,{style:{width:"100%",textAlign:"center"}},"\u0414\u0430\u043d\u043d\u044b\u0445 \u043d\u0435\u0442")))}},e0St:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/projects",function(){return a("0RHc")}])}},[["e0St",0,2,1,3,4,5,6,7,8]]]);