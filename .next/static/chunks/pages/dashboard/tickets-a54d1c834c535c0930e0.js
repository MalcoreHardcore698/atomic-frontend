_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{IUYj:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/tickets",function(){return a("dsNT")}])},dsNT:function(e,t,a){"use strict";a.r(t),a.d(t,"__N_SSP",(function(){return ue}));var n=a("q1tI"),c=a.n(n),i=a("/MKj"),r=a("7BXr"),o=a("ZwIX"),l=a("wZgm"),s=a("QclZ"),d=a("EJJs"),u=a("e3uv"),b=a("ApjV"),p=a("p9yE"),m=a("coMr"),g=a("RoTl"),k=a("vOnD"),h=a("nShV"),E=a("8CDE"),f=a("7sPp"),w=a("QUga"),v=a("feIE"),j=a("aBfq"),y=a("RKiZ"),O=a("ZeZO"),_=a("DTT8"),C=a("79b8"),T=a("VWQm");const x=Object(k.c)(E.a).withConfig({displayName:"TicketCard__Wrap",componentId:"sc-3sqqk7-0"})(["grid-gap:var(--default-gap);height:max-content;"," "," ",""],(({appearance:e})=>"default"===e&&Object(k.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(k.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(k.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),N=Object(k.c)(h.b).withConfig({displayName:"TicketCard__Header",componentId:"sc-3sqqk7-1"})(["justify-content:space-between;align-items:center;"]),I=Object(k.c)(h.b).withConfig({displayName:"TicketCard__Actions",componentId:"sc-3sqqk7-2"})(["grid-gap:5px;"]),q=Object(k.c)(f.a).withConfig({displayName:"TicketCard__Name",componentId:"sc-3sqqk7-3"})(["transition:opacity 150ms ease;",""],(({onClick:e})=>e&&Object(k.b)(["cursor:pointer;&:hover{opacity:.45;}"]))),S=Object(k.c)(w.b).withConfig({displayName:"TicketCard__Status",componentId:"sc-3sqqk7-4"})(["color:var(--default-color-accent);"]),A=Object(k.c)(h.b).withConfig({displayName:"TicketCard__Footer",componentId:"sc-3sqqk7-5"})(["justify-content:space-between;align-items:center;flex-grow:1;"]),L=({ticket:e,appearance:t,className:a,style:n,onLink:i,onAuthorLink:r,onChecked:o,onEdit:l,onDelete:s})=>{var d,u,b;return c.a.createElement(x,{className:a,style:n,appearance:t},c.a.createElement(E.a,{style:{gridGap:0}},c.a.createElement(N,null,c.a.createElement(j.a,{date:e.createdAt,category:e.category}),o&&l&&s&&c.a.createElement(I,null,c.a.createElement(T.b,{text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435"},c.a.createElement(O.a,{kind:"icon",size:"xs",appearance:"red",onClick:s},c.a.createElement(v.a,{icon:"delete",size:"xs",stroke:"white"}))),c.a.createElement(T.b,{text:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435"},c.a.createElement(O.a,{kind:"icon",size:"xs",onClick:l},c.a.createElement(v.a,{icon:"edit",size:"xs",stroke:"white"}))),c.a.createElement(T.b,{text:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435",self:!0},c.a.createElement(C.a,null)))),c.a.createElement(q,{tag:"h4",onClick:i},e.title),c.a.createElement(h.b,{style:{gridGap:5}},c.a.createElement(w.b,null,e.token),c.a.createElement(S,null,e.status))),c.a.createElement(y.a,{clear:!0}),c.a.createElement(A,null,c.a.createElement(_.b,{img:null===(d=e.author)||void 0===d?void 0:d.avatar,label:"\u0410\u0432\u0442\u043e\u0440",text:null===(u=e.author)||void 0===u?void 0:u.name,onLink:r}),c.a.createElement(_.b,{icon:"chat",label:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439",text:null===(b=e.messages)||void 0===b?void 0:b.length})))};L.defaultProps={appearance:"default"};var D=L,F=a("7ni8"),P=a("Gliw");const M=Object(k.c)(E.a).withConfig({displayName:"FormTicket__Wrap",componentId:"n5aw2g-0"})(["width:100%;"]),V=Object(k.c)(h.b).withConfig({displayName:"FormTicket__Header",componentId:"n5aw2g-1"})(["justify-content:space-between;width:100%;"]),K=Object(k.c)(E.a).withConfig({displayName:"FormTicket__Messages",componentId:"n5aw2g-2"})(["position:relative;background:#fbfbfb;border-radius:var(--surface-border-radius);padding:var(--default-gap);padding-top:55px;flex-grow:1;"]),X=Object(k.c)(h.b).withConfig({displayName:"FormTicket__Meta",componentId:"n5aw2g-3"})(["position:absolute;top:0;left:0;width:100%;justify-content:space-between;padding:8px var(--default-gap);border-radius:var(--surface-border-radius) var(--surface-border-radius) 0 0;background:var(--ghost-color-background);"]),Z=Object(k.c)(w.b).withConfig({displayName:"FormTicket__Empty",componentId:"n5aw2g-4"})(["display:flex;justify-content:center;align-items:center;width:100%;height:100%;"]);var R=({ticket:e,appearance:t,onFinish:a,onReport:n,onLink:i,onAttach:r,onSubmit:o,...l})=>c.a.createElement(M,l,e&&c.a.createElement(V,null,c.a.createElement(_.b,{label:"\u041d\u043e\u043c\u0435\u0440 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f",text:(null===e||void 0===e?void 0:e.token)||"-"}),c.a.createElement(h.b,null,c.a.createElement(O.a,{onClick:a,disabled:!e},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435"),c.a.createElement(O.a,{onClick:n,kind:"icon",appearance:"red",disabled:!e},c.a.createElement(v.a,{icon:"flag",stroke:"white"})))),c.a.createElement(K,null,e&&c.a.createElement(X,null,c.a.createElement(w.b,null,"\u0422\u0435\u043c\u0430: ",e.title),c.a.createElement(w.b,null,e.createdAt)),e&&e.messages&&e.messages.length>0?e.messages.map((e=>c.a.createElement(F.a,{key:e.id,avatar:e.avatar,side:e.side,name:e.name,text:e.text,time:e.time,onLink:i}))):c.a.createElement(Z,null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435")),c.a.createElement(h.b,null,c.a.createElement(O.a,{kind:"icon",onSubmit:r},c.a.createElement(v.a,{icon:"attach",stroke:"white"})),c.a.createElement(P.a,{placeholder:"\u041e\u0442\u043f\u0440\u0430\u0432\u044c\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0435\u043d\u0438\u0435...",appearance:t}),c.a.createElement(O.a,{kind:"icon",onSubmit:o},c.a.createElement(v.a,{icon:"send",stroke:"white"})))),J=a("xAqQ"),U=a("otXJ"),z=a("EYtC");function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const W=Object(k.c)(h.b).withConfig({displayName:"TicketView__Wrap",componentId:"sc-1wxiq0b-0"})(["height:100%;flex-grow:1;@media only screen and (max-width:568px){flex-direction:column;}"," "," ",""],(({appearance:e})=>"default"===e&&Object(k.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(k.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(k.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),G=Object(k.c)(E.a).withConfig({displayName:"TicketView__Tickets",componentId:"sc-1wxiq0b-1"})(["grid-gap:0;width:320px;@media only screen and (max-width:568px){width:100%;}"]),Y=Object(k.c)(U.a).withConfig({displayName:"TicketView__Ticket",componentId:"sc-1wxiq0b-2"})(["margin:10px 0 0 0;padding:10px;border-radius:var(--surface-border-radius);",""],(({active:e})=>e&&Object(k.b)(["background:var(--input-background);"]))),B=({tickets:e,appearance:t,onMemberLink:a,onFinish:i,onReport:r,onAttach:l,onSubmit:s,...d})=>{const[u,b]=Object(n.useState)(null);return c.a.createElement(W,Q({},d,{appearance:t}),c.a.createElement(G,null,c.a.createElement(z.a,{appearance:"ghost"}),(null===e||void 0===e?void 0:e.length)>0?e.map((e=>c.a.createElement(Y,{key:e.id,name:e.title,budge:e.messages.reduce(((e,t)=>e+(t.unreaded?1:0)),0),position:e.token,onClick:()=>b(e),active:u&&u.id===e.id}))):c.a.createElement(o.a,{style:{marginTop:15},appearance:"warning"},"\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442")),c.a.createElement(R,{ticket:u,appearance:"ghost",onFinish:i,onReport:r,onLink:a,onAttach:l,onSubmit:s}))};B.defaultProps={appearance:"default"};var H=B,$=a("j8/+"),ee=a("Ztxg"),te=a("9Xo6"),ae=a("rP4V"),ne=a("+EEm");function ce(e,t){const{ticket:a}=t;e(Object(ee.a)({icon:"ticket",title:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435",content:c.a.createElement(H,{ticket:a,appearance:"clear",onFileLink:()=>Object(ne.b)(e),onMemberLink:()=>Object(ae.i)(e)})}))}function ie(e,t){const{mutation:a}=t;e(Object(ee.a)({icon:"ticket",title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f",content:c.a.createElement(R,{mutation:a,appearance:"clear",onSubmit:async(t,a)=>{try{const n=await a({variables:{input:{title:t.title,body:t.body||"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442",status:t.status.value}}});e(Object($.a)(n.data.createTicket)),e(Object(ee.a)(null)),e(Object(te.c)({type:"success",message:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u043e"}))}catch(n){e(Object(ee.a)(null)),e(Object(te.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435"}))}}})}))}function re(e,t){const{ticket:a,mutation:n}=t;e(Object(ee.a)({icon:"ticket",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0432\u043e\u0430\u043d\u0438\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f",content:c.a.createElement(R,{ticket:a,mutation:n,appearance:"clear",onSubmit:async(t,n)=>{try{const c=await n({variables:{id:a.id,input:{title:t.title,body:t.body||"\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442",status:t.status.value}}});e(Object($.a)(c.data.updateTicket)),e(Object(ee.a)(null)),e(Object(te.c)({type:"success",message:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043e"}))}catch(c){e(Object(ee.a)(null)),e(Object(te.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435"}))}}})}))}function oe(e,t){const{ticket:a,mutation:n}=t;e(Object(ee.a)({icon:"delete",color:"red",title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f",content:c.a.createElement(J.a,{mutation:n,appearance:"clear",onCancel:()=>e(Object(ee.a)(null)),onSubmit:async(t,n)=>{try{const t=await n({variables:{id:a.id}});e(Object($.a)(t.data.deleteTicket)),e(Object(te.c)({type:"success",message:"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e"}))}catch(c){e(Object(te.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435"}))}finally{e(Object(ee.a)(null))}}},c.a.createElement(D,{ticket:a,appearance:"clear"}))}))}var le=a("u2Cb"),se=a("wha1");const de="\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u044f";var ue=!0;t.default=({store:e})=>{const t=Object(b.a)(),a=Object(i.c)((e=>e.documents)),k=Object(i.b)(),[h,E]=Object(n.useState)(),[f,w]=Object(n.useState)(),[v,j]=Object(n.useState)(!1),[y,O]=Object(n.useState)("grid"),_=Object(n.useMemo)((()=>a||e.tickets),[a,e]);return Object(n.useEffect)((()=>{k(Object($.a)(null))}),[]),c.a.createElement(p.a,{title:de},c.a.createElement(m.a,{icon:"ticket",title:de,buttonCreateText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435",onCreate:t(ie,{mutation:le.a.CREATE_TICKET}),onChangeVisibleFilter:()=>j(!v),onChangeDisplayMethod:e=>O(e.value)}),c.a.createElement(g.a,{isOpen:v,filters:[c.a.createElement(l.a,{key:0,value:h,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",onChange:E,withNavigate:!0}),c.a.createElement(s.a,{key:1,options:se.a,placeholder:"\u0420\u0430\u0437\u0434\u0435\u043b",selected:f,onChange:e=>w(e)})],options:"list"===y?[]:u.a.ticket.map(((e,t)=>({label:e.header,value:t})))}),0===_.length&&c.a.createElement(o.a,{style:{width:"100%",textAlign:"center"}},"\u041e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0439 \u043d\u0435\u0442"),"list"===y&&c.a.createElement(d.b,{data:_,template:u.a.ticket,onChecked:()=>{},onClick:e=>t(ce,{id:e.id,ticket:e})(),onDelete:e=>t(oe,{id:e.id,ticket:e,mutation:le.a.DELETE_TICKET})(),onEdit:e=>t(re,{id:e.id,ticket:e,mutation:le.a.UPDATE_TICKET})(),style:{overflowX:"auto",width:"calc(100vw - 290px)"}}),"grid"===y&&c.a.createElement(r.a,null,_.map((e=>c.a.createElement(D,{key:e.id,ticket:e,onChecked:()=>{},onLink:t(ce,{id:e.id,ticket:e}),onDelete:t(oe,{id:e.id,ticket:e,mutation:le.a.DELETE_TICKET}),onEdit:t(re,{id:e.id,ticket:e,mutation:le.a.UPDATE_TICKET})})))))}},wha1:function(e,t,a){"use strict";a.d(t,"f",(function(){return n})),a.d(t,"e",(function(){return c})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return l}));const n=[{label:"\u041e \u0440\u0435\u0441\u0443\u0440\u0441\u0435",path:"/about"},{label:"\u041b\u044e\u0434\u0438 \u0440\u0435\u0441\u0443\u0440\u0441\u0430",path:"/creators"},{label:"\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430",path:"/support"},{label:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a",path:"/guide"}],c=["/images/socials/gmail.png","/images/socials/vk.png","/images/socials/facebook.png"],i=[{label:"\u0433. \u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0431\u0443\u0440\u0433, \u0443\u043b. \u0414\u0435\u043a\u0430\u0431\u0440\u0438\u0441\u0442\u043e\u0432 20\u0430, \u043e\u0444. 302",icon:"location"},{label:"+7 (499) 222-54-86",icon:"call"},{label:"info@mail.ru",icon:"message"}],r=[{label:"\u041c\u043e\u0438 \u043f\u0440\u043e\u0435\u043a\u0442\u044b",value:"/projects"},{label:"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",value:"/liked"},{label:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435",value:"/feed"}],o=[{value:0,label:"\u0421\u0442\u0440\u043e\u0438\u0442\u0435\u043b\u044c\u0441\u0442\u0432\u043e"},{value:1,label:"\u0420\u0435\u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u044f"},{value:2,label:"\u041a\u0430\u043f\u0438\u0442\u0430\u043b\u044c\u043d\u044b\u0439 \u0440\u0435\u043c\u043e\u043d\u0442"},{value:3,label:"\u0426\u0438\u0444\u0440\u043e\u0432\u0430\u044f \u0441\u0440\u0435\u0434\u0430"}],l=[{label:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433",value:"rating"},{label:"\u041f\u043e\u0434\u043f\u0438\u0441\u0447\u0438\u043a\u0438",value:"followers"},{label:"\u0414\u0430\u0442\u0430",value:"date"}]}},[["IUYj",0,2,1,3,4,5,6,8]]]);