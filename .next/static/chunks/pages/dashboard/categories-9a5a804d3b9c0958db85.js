_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[23],{"/ZbR":function(e,a,t){"use strict";t.r(a),t.d(a,"__N_SSP",(function(){return ae}));var n=t("q1tI"),c=t.n(n),r=t("/MKj"),o=t("7Cbv"),l=t("7BXr"),i=t("ZwIX"),s=t("wZgm"),d=t("EJJs"),p=t("e3uv"),u=t("ApjV"),b=t("p9yE"),m=t("coMr"),g=t("RoTl"),y=t("vOnD"),E=t("nShV"),h=t("8CDE"),O=t("7sPp"),f=t("QUga"),j=t("V0nP"),C=t("aBfq"),v=t("ZeZO"),w=t("feIE"),_=t("79b8"),k=t("VWQm"),N=t("ObTy");const x=Object(y.c)(h.a).withConfig({displayName:"CategoryCard__Wrap",componentId:"sc-10psc0b-0"})([""," "," ",""],(({appearance:e})=>"default"===e&&Object(y.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(y.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(y.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),T=(Object(y.c)(j.a).withConfig({displayName:"CategoryCard__Poster",componentId:"sc-10psc0b-1"})(["object-fit:cover;width:100%;height:512px;border-radius:var(--surface-border-radius);"]),Object(y.c)(E.b).withConfig({displayName:"CategoryCard__Header",componentId:"sc-10psc0b-2"})(["justify-content:space-between;align-items:center;"])),A=Object(y.c)(E.b).withConfig({displayName:"CategoryCard__Actions",componentId:"sc-10psc0b-3"})(["grid-gap:5px;"]),S=Object(y.c)(h.a).withConfig({displayName:"CategoryCard__Content",componentId:"sc-10psc0b-4"})(["grid-gap:0;"]),I=Object(y.c)(O.a).withConfig({displayName:"CategoryCard__Name",componentId:"sc-10psc0b-5"})(["transition:opacity 150ms ease;",""],(({onClick:e})=>e&&Object(y.b)(["cursor:pointer;&:hover{opacity:0.45;}"]))),P=({category:e,appearance:a,className:t,style:n,onLink:r,onChecked:o,onDelete:l,onEdit:i})=>c.a.createElement(x,{className:t,style:n,appearance:a},c.a.createElement(S,null,c.a.createElement(T,null,c.a.createElement(C.a,{date:e.createdAt,category:Object(N.c)(e.type)}),o&&i&&l&&c.a.createElement(A,null,c.a.createElement(k.b,{text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"},c.a.createElement(v.a,{kind:"icon",size:"xs",appearance:"red",onClick:l},c.a.createElement(w.a,{icon:"delete",size:"xs",stroke:"white"}))),c.a.createElement(k.b,{text:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"},c.a.createElement(v.a,{kind:"icon",size:"xs",onClick:i},c.a.createElement(w.a,{icon:"edit",size:"xs",stroke:"white"}))),c.a.createElement(k.b,{text:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",self:!0},c.a.createElement(_.a,null)))),c.a.createElement(I,{tag:"h4",onClick:r},e.name),c.a.createElement(f.b,null,e.description)));P.defaultProps={appearance:"default"};var V=P,D=t("Gliw"),R=t("QclZ"),Z=t("3jgA"),z=t("qoM+");const G=({category:e,categoryTypes:a,mutation:t,appearance:r,className:o,create:l,edit:s,onSubmit:d})=>{const[p,u]=Object(n.useState)(!1),[b,m]=Object(n.useState)(e&&e.type&&{value:e.type,label:Object(N.c)(e.type)}||null),[g,y]=Object(n.useState)(!0);return c.a.createElement(z.b,{className:o,appearance:r,mutation:t,onSubmit:(e,a)=>{b?d({...e,type:b},a):u(!0)}},(({register:t,loading:n,errors:r,getValues:o})=>c.a.createElement(c.a.Fragment,null,c.a.createElement(h.a,null,c.a.createElement(O.a,{tag:"h4"},"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435"),r&&r.name&&c.a.createElement(i.a,{style:{width:"100%"},appearance:"error"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),c.a.createElement(D.a,{type:"text",name:"name",ref:t({required:!0}),onChange:a=>{a.target.value===(null===e||void 0===e?void 0:e.name)?y(!0):y(!1)},defaultValue:(null===e||void 0===e?void 0:e.name)||o("name"),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",appearance:"ghost",disabled:n}),p&&c.a.createElement(i.a,{style:{width:"100%"},appearance:"error"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),c.a.createElement(R.a,{name:"type",appearance:"ghost",defaultValue:b,onChange:a=>{m(a),u(!1),a.value===(null===e||void 0===e?void 0:e.type)?y(!0):y(!1)},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f",options:a.map((e=>({value:e,label:Object(N.c)(e)}))),isLoading:n,isClearable:!0}),c.a.createElement(Z.a,{name:"description",ref:t(),onChange:a=>{a.target.value===(null===e||void 0===e?void 0:e.description)?y(!0):y(!1)},defaultValue:(null===e||void 0===e?void 0:e.description)||o("description"),placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",appearance:"ghost",disabled:n})),c.a.createElement(E.b,null,c.a.createElement(v.a,{style:{flexGrow:1},type:"submit",disabled:g||n},l&&!s&&"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",!l&&s&&"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))))};G.defaultProps={create:!0};var X=G,q=t("xAqQ");const L=Object(y.c)(h.a).withConfig({displayName:"CategoryView__Wrap",componentId:"sc-1leuzf2-0"})([""," "," ",""],(({appearance:e})=>"default"===e&&Object(y.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(y.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(y.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),M=(Object(y.c)(j.a).withConfig({displayName:"CategoryView__Poster",componentId:"sc-1leuzf2-1"})(["object-fit:cover;width:100%;height:512px;border-radius:var(--surface-border-radius);"]),Object(y.c)(h.a).withConfig({displayName:"CategoryView__Content",componentId:"sc-1leuzf2-2"})(["grid-gap:0;"])),Y=({category:e,appearance:a,className:t,style:n})=>c.a.createElement(L,{className:t,style:n,appearance:a},c.a.createElement(M,null,c.a.createElement(C.a,{date:e.createdAt,category:Object(N.c)(e.type)}),c.a.createElement(O.a,{tag:"h4"},e.name),c.a.createElement(f.b,null,e.description)));Y.defaultProps={appearance:"default"};var J=Y,Q=t("j8/+"),U=t("Ztxg"),W=t("9Xo6");function B(e,a){const{category:t}=a;e(Object(U.a)({icon:"folder",title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",content:c.a.createElement(J,{category:t,appearance:"clear"})}))}function F(e,a){const{types:t,mutation:n}=a;e(Object(U.a)({icon:"folder",title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",content:c.a.createElement(X,{mutation:n,categoryTypes:t,appearance:"clear",onSubmit:async(a,t)=>{try{const n=await t({variables:{input:{name:a.name,type:a.type.value,description:a.description}}});e(Object(Q.a)(n.data.createCategory)),e(Object(U.a)(null)),e(Object(W.c)({type:"success",message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430"}))}catch(n){e(Object(U.a)(null)),e(Object(W.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}))}}})}))}function H(e,a){const{category:t,types:n,mutation:r}=a;e(Object(U.a)({icon:"folder",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",content:c.a.createElement(X,{category:t,mutation:r,categoryTypes:n,appearance:"clear",onSubmit:async(a,n)=>{try{const c=await n({variables:{id:t.id,input:{name:a.name,type:a.type.value,description:a.description}}});e(Object(Q.a)(c.data.updateCategory)),e(Object(U.a)(null)),e(Object(W.c)({type:"success",message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430"}))}catch(c){e(Object(U.a)(null)),e(Object(W.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}))}}})}))}function K(e,a){const{category:t,mutation:n}=a;e(Object(U.a)({icon:"delete",color:"red",title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",content:c.a.createElement(q.a,{mutation:n,appearance:"clear",onCancel:()=>e(Object(U.a)(null)),onSubmit:async(a,n)=>{try{const a=await n({variables:{id:t.id}});e(Object(Q.a)(a.data.deleteCategory)),e(Object(W.c)({type:"success",message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"}))}catch(c){e(Object(W.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}))}finally{e(Object(U.a)(null))}}},c.a.createElement(J,{category:t,appearance:"clear"}))}))}var $=t("u2Cb");const ee="\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438";var ae=!0;a.default=({store:e,types:a})=>{const t=Object(u.a)(),y=Object(r.c)((e=>e.documents)),E=Object(r.b)(),[h,O]=Object(n.useState)(),[f,j]=Object(n.useState)(),[C,v]=Object(n.useState)(!1),[w,_]=Object(n.useState)("grid"),k=Object(n.useMemo)((()=>y||e.categories),[y,e]);return Object(n.useEffect)((()=>{E(Object(Q.a)(null))}),[]),c.a.createElement(b.a,{title:ee},c.a.createElement(m.a,{icon:"folder",title:ee,buttonCreateText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",onCreate:t(F,{types:a,mutation:$.a.CREATE_CATEGORY}),onChangeVisibleFilter:()=>v(!C),onChangeDisplayMethod:e=>_(e.value)}),c.a.createElement(g.a,{isOpen:C,filters:[c.a.createElement(s.a,{key:0,value:h,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",onChange:O,withNavigate:!0}),c.a.createElement(s.a,{key:0,value:f,placeholder:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",onChange:j,withNavigate:!0})],options:"list"===w?[]:p.a.category.map(((e,a)=>({label:e.header,value:a})))}),0===k.length&&c.a.createElement(i.a,{style:{width:"100%",textAlign:"center"}},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0435\u0442"),"list"===w&&c.a.createElement(d.b,{data:k,template:p.a.category,onChecked:()=>{},onClick:e=>t(B,{id:e.id,category:e})(),onDelete:e=>t(K,{id:e.id,category:e,mutation:$.a.DELETE_CATEGORY})(),onEdit:e=>t(H,{id:e.id,category:e,types:a,mutation:$.a.UPDATE_CATEGORY})(),style:{overflowX:"auto",width:"calc(100vw - 290px)"}}),"grid"===w&&c.a.createElement(l.a,null,k.map((e=>c.a.createElement(V,{key:Object(o.a)(),category:e,onChecked:()=>{},onLink:t(B,{id:e.id,category:e}),onDelete:t(K,{id:e.id,category:e,mutation:$.a.DELETE_CATEGORY}),onEdit:t(H,{id:e.id,category:e,types:a,mutation:$.a.UPDATE_CATEGORY})})))))}},C1nt:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/categories",function(){return t("/ZbR")}])}},[["C1nt",0,2,1,3,4,5,7,8]]]);