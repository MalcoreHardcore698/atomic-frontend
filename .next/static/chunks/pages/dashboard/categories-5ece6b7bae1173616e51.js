_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[24],{"/ZbR":function(e,a,t){"use strict";t.r(a),t.d(a,"__N_SSP",(function(){return ae}));var n=t("q1tI"),r=t.n(n),c=t("/MKj"),o=t("7Cbv"),i=t("7BXr"),l=t("ZwIX"),d=t("wZgm"),s=t("EJJs"),p=t("e3uv"),u=t("ApjV"),b=t("p9yE"),m=t("coMr"),g=t("RoTl"),y=t("vOnD"),f=t("nShV"),h=t("8CDE"),v=t("7sPp"),E=t("QUga"),O=t("V0nP"),j=t("aBfq"),w=t("ZeZO"),C=t("feIE"),_=t("79b8"),k=t("VWQm"),x=t("ObTy");const N=Object(y.c)(h.a).withConfig({displayName:"CategoryCard__Wrap",componentId:"sc-10psc0b-0"})([""," "," ",""],(({appearance:e})=>"default"===e&&Object(y.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(y.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(y.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),T=(Object(y.c)(O.a).withConfig({displayName:"CategoryCard__Poster",componentId:"sc-10psc0b-1"})(["object-fit:cover;width:100%;height:512px;border-radius:var(--surface-border-radius);"]),Object(y.c)(f.b).withConfig({displayName:"CategoryCard__Header",componentId:"sc-10psc0b-2"})(["justify-content:space-between;align-items:center;"])),S=Object(y.c)(f.b).withConfig({displayName:"CategoryCard__Actions",componentId:"sc-10psc0b-3"})(["grid-gap:5px;"]),A=Object(y.c)(h.a).withConfig({displayName:"CategoryCard__Content",componentId:"sc-10psc0b-4"})(["grid-gap:0;"]),I=Object(y.c)(v.a).withConfig({displayName:"CategoryCard__Name",componentId:"sc-10psc0b-5"})(["transition:opacity 150ms ease;",""],(({onClick:e})=>e&&Object(y.b)(["cursor:pointer;&:hover{opacity:0.45;}"]))),P=({category:e,appearance:a,className:t,style:n,onLink:c,onChecked:o,onDelete:i,onEdit:l})=>r.a.createElement(N,{className:t,style:n,appearance:a},r.a.createElement(A,null,r.a.createElement(T,null,r.a.createElement(j.a,{date:e.createdAt,category:Object(x.c)(e.type)}),o&&l&&i&&r.a.createElement(S,null,r.a.createElement(k.b,{text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"},r.a.createElement(w.a,{kind:"icon",size:"xs",appearance:"red",onClick:i},r.a.createElement(C.a,{icon:"delete",size:"xs",stroke:"white"}))),r.a.createElement(k.b,{text:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"},r.a.createElement(w.a,{kind:"icon",size:"xs",onClick:l},r.a.createElement(C.a,{icon:"edit",size:"xs",stroke:"white"}))),r.a.createElement(k.b,{text:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",self:!0},r.a.createElement(_.a,null)))),r.a.createElement(I,{tag:"h4",onClick:c},e.name),r.a.createElement(E.b,null,e.description)));P.defaultProps={appearance:"default"};var V=P,D=t("Gliw"),R=t("QclZ"),G=t("3jgA"),Z=t("qoM+");const q=({category:e,categoryTypes:a,mutation:t,appearance:c,className:o,onSubmit:i})=>{const[d,s]=Object(n.useState)(!1),[p,u]=Object(n.useState)(e&&e.type&&{value:e.type,label:Object(x.c)(e.type)}||null),[b,m]=Object(n.useState)(!0);return r.a.createElement(Z.b,{className:o,appearance:c,mutation:t,onSubmit:(e,a)=>{p?i({...e,type:p},a):s(!0)}},(({register:t,loading:n,errors:c,getValues:o})=>r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(v.a,{tag:"h4"},"\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435"),c&&c.name&&r.a.createElement(l.a,{style:{width:"100%"},appearance:"error"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),r.a.createElement(D.a,{type:"text",name:"name",ref:t({required:!0}),onChange:a=>{a.target.value===(null===e||void 0===e?void 0:e.name)?m(!0):m(!1)},defaultValue:(null===e||void 0===e?void 0:e.name)||o("name"),placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",appearance:"ghost",disabled:n}),d&&r.a.createElement(l.a,{style:{width:"100%"},appearance:"error"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438"),r.a.createElement(R.a,{name:"type",appearance:"ghost",defaultValue:p,onChange:a=>{u(a),s(!1),a.value===(null===e||void 0===e?void 0:e.type)?m(!0):m(!1)},placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0442\u0438\u043f",options:a.map((e=>({value:e,label:Object(x.c)(e)}))),isLoading:n,isClearable:!0}),r.a.createElement(G.a,{name:"description",ref:t(),onChange:a=>{a.target.value===(null===e||void 0===e?void 0:e.description)?m(!0):m(!1)},defaultValue:(null===e||void 0===e?void 0:e.description)||o("description"),placeholder:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",appearance:"ghost",disabled:n})),r.a.createElement(f.b,null,r.a.createElement(w.a,{style:{flexGrow:1},type:"submit",disabled:b||n},e?"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))))};q.defaultProps={create:!0};var z=q,X=t("xAqQ");const J=Object(y.c)(h.a).withConfig({displayName:"CategoryView__Wrap",componentId:"sc-1leuzf2-0"})([""," "," ",""],(({appearance:e})=>"default"===e&&Object(y.b)(["padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);"])),(({appearance:e})=>"ghost"===e&&Object(y.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"])),(({appearance:e})=>"clear"===e&&Object(y.b)(["padding:0;border:none;background:none;border-radius:0;box-shadow:none;"]))),L=(Object(y.c)(O.a).withConfig({displayName:"CategoryView__Poster",componentId:"sc-1leuzf2-1"})(["object-fit:cover;width:100%;height:512px;border-radius:var(--surface-border-radius);"]),Object(y.c)(h.a).withConfig({displayName:"CategoryView__Content",componentId:"sc-1leuzf2-2"})(["grid-gap:0;"])),M=({category:e,appearance:a,className:t,style:n})=>r.a.createElement(J,{className:t,style:n,appearance:a},r.a.createElement(L,null,r.a.createElement(j.a,{date:e.createdAt,category:Object(x.c)(e.type)}),r.a.createElement(v.a,{tag:"h4"},e.name),r.a.createElement(E.b,null,e.description)));M.defaultProps={appearance:"default"};var Y=M,Q=t("j8/+"),F=t("Ztxg"),U=t("9Xo6");function W(e,a){const{category:t}=a;e(Object(F.a)({icon:"folder",title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f",content:r.a.createElement(Y,{category:t,appearance:"clear"})}))}function B(e,a){const{types:t,mutation:n}=a;e(Object(F.a)({icon:"folder",title:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",content:r.a.createElement(z,{mutation:n,categoryTypes:t,appearance:"clear",onSubmit:async(a,t)=>{try{const n=await t({variables:{input:{name:a.name,type:a.type.value,description:a.description}}});e(Object(Q.a)(n.data.createCategory)),e(Object(F.a)(null)),e(Object(U.c)({type:"success",message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430"}))}catch(n){e(Object(F.a)(null)),e(Object(U.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}))}}})}))}function H(e,a){const{category:t,types:n,mutation:c}=a;e(Object(F.a)({icon:"folder",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",content:r.a.createElement(z,{category:t,mutation:c,categoryTypes:n,appearance:"clear",onSubmit:async(a,n)=>{try{const r=await n({variables:{id:t.id,input:{name:a.name,type:a.type.value,description:a.description}}});e(Object(Q.a)(r.data.updateCategory)),e(Object(F.a)(null)),e(Object(U.c)({type:"success",message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0430"}))}catch(r){e(Object(F.a)(null)),e(Object(U.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0442\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}))}}})}))}function K(e,a){const{category:t,mutation:n}=a;e(Object(F.a)({icon:"delete",color:"red",title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",content:r.a.createElement(X.a,{mutation:n,appearance:"clear",onCancel:()=>e(Object(F.a)(null)),onSubmit:async(a,n)=>{try{const a=await n({variables:{id:t.id}});e(Object(Q.a)(a.data.deleteCategory)),e(Object(U.c)({type:"success",message:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430"}))}catch(r){e(Object(U.c)({type:"error",message:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"}))}finally{e(Object(F.a)(null))}}},r.a.createElement(Y,{category:t,appearance:"clear"}))}))}var $=t("u2Cb");const ee="\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438";var ae=!0;a.default=({store:e,types:a})=>{const t=Object(u.b)(),y=Object(c.c)((e=>e.documents)),f=Object(c.b)(),[h,v]=Object(n.useState)(),[E,O]=Object(n.useState)(),[j,w]=Object(n.useState)(!1),[C,_]=Object(n.useState)("grid"),k=Object(n.useMemo)((()=>y||e.categories),[y,e]);return Object(n.useEffect)((()=>{f(Object(Q.a)(null))}),[]),r.a.createElement(b.a,{title:ee},r.a.createElement(m.a,{icon:"folder",title:ee,buttonCreateText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",onCreate:t(B,{types:a,mutation:$.a.CREATE_CATEGORY}),onChangeVisibleFilter:()=>w(!j),onChangeDisplayMethod:e=>_(e.value)}),r.a.createElement(g.a,{isOpen:j,filters:[r.a.createElement(d.a,{key:0,value:h,placeholder:"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",onChange:v,withNavigate:!0}),r.a.createElement(d.a,{key:0,value:E,placeholder:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",onChange:O,withNavigate:!0})],options:"list"===C?[]:p.a.category.map(((e,a)=>({label:e.header,value:a})))}),0===k.length&&r.a.createElement(l.a,{style:{width:"100%",textAlign:"center"}},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0435\u0442"),"list"===C&&r.a.createElement(s.b,{data:k,template:p.a.category,onChecked:()=>{},onClick:e=>t(W,{id:e.id,category:e})(),onDelete:e=>t(K,{id:e.id,category:e,mutation:$.a.DELETE_CATEGORY})(),onEdit:e=>t(H,{id:e.id,category:e,types:a,mutation:$.a.UPDATE_CATEGORY})(),style:{overflowX:"auto",width:"calc(100vw - 290px)"}}),"grid"===C&&r.a.createElement(i.a,null,k.map((e=>r.a.createElement(V,{key:Object(o.a)(),category:e,onChecked:()=>{},onLink:t(W,{id:e.id,category:e}),onDelete:t(K,{id:e.id,category:e,mutation:$.a.DELETE_CATEGORY}),onEdit:t(H,{id:e.id,category:e,types:a,mutation:$.a.UPDATE_CATEGORY})})))))}},C1nt:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/categories",function(){return t("/ZbR")}])},vJvq:function(e,a,t){"use strict";t.d(a,"a",(function(){return y}));var n=t("wx14"),r=t("Ff2n"),c=t("h4VS"),o=t("q1tI"),i=t.n(o),l=t("vOnD"),d=t("cpGi"),s=t("7Cbv"),p=i.a.createElement;function u(){var e=Object(c.a)(["\n      width: "," !important;\n    "]);return u=function(){return e},e}function b(){var e=Object(c.a)(["\n      padding: 0 !important;\n      border: none !important;\n      box-shadow: var(--default-shadow) !important;\n    "]);return b=function(){return e},e}function m(){var e=Object(c.a)(["\n  padding: var(--default-gap) !important;\n  border: 1px solid var(--surface-border) !important;\n  background: var(--surface-background) !important;\n  box-shadow: var(--default-shadow) !important;\n  border-radius: var(--surface-border-radius) !important;\n  border: none !important;\n  pointer-events: initial !important;\n\n  ","\n\n  &.show {\n    opacity: 1 !important;\n  }\n\n  &::after {\n    display: none !important;\n  }\n\n  ","\n"]);return m=function(){return e},e}function g(){var e=Object(c.a)(["\n  position: relative;\n  display: inline-flex;\n"]);return g=function(){return e},e}var y=l.c.div(g()),f=Object(l.c)(d.a)(m(),(function(e){return"clear"===e.appearance&&Object(l.b)(b())}),(function(e){var a=e.width;return a&&Object(l.b)(u(),a||"auto")})),h=function(e){var a=e.body,t=e.appearance,c=e.children,o=e.width,i=Object(r.a)(e,["body","appearance","children","width"]),l="popper-".concat(Object(s.a)());return p(y,null,p("div",{"data-event":"click focus","data-for":l,"data-tip":!0},c),p(f,Object(n.a)({},i,{id:l,width:o,globalEventOff:"click",appearance:t}),a))};h.defaultProps={place:"top",effect:"solid",appearance:"default"},a.b=h}},[["C1nt",0,2,1,3,4,5,7,8]]]);