_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[22],{"/ZbR":function(e,t,n){"use strict";n.r(t),n.d(t,"__N_SSP",(function(){return q}));var r=n("q1tI"),c=n.n(r),a=n("/MKj"),i=n("4yYH"),o=n("ApjV"),u=n("V9G2"),d=n("yEVw"),l=n("7Cbv"),s=n("8CDE"),f=n("p9yE"),b=n("vOnD"),p=n("VX74"),h=n("EJJs"),O=n("ZwIX"),m=n("auMy"),j=n("586Q"),v=n("VP1n"),k=n("RotF"),y=n.n(k),g=n("20a2");Object(b.d)(s.a).withConfig({displayName:"List__Wrap",componentId:"sc-1jo6mxw-0"})([""]),Object(b.d)(O.a).withConfig({displayName:"List__CenterAlert",componentId:"sc-1jo6mxw-1"})(["width:100%;text-align:center;"]);var x=({type:e,query:t,template:n,variables:i,component:o,limit:u=6,startOffset:d=6,setCheckedList:l,onChecked:s,onClick:f,onEdit:b,onDelete:O})=>{const k=Object(g.useRouter)(),x=Object(a.c)((e=>e.root.displayMethod)),w=Object(r.useMemo)((()=>{var e;return Number(null===(e=k.query)||void 0===e?void 0:e.page)||1}),[k]),[E,C]=Object(r.useState)(d+1),[T,D]=Object(r.useState)([]),[M,S]=Object(r.useState)(!1),{data:_,loading:z,refetch:P}=Object(p.useQuery)(t,{variables:{...i,offset:0,limit:u}}),A=Object(r.useCallback)((()=>"grid"===x?c.a.createElement(j.b,null,(T||[]).map((e=>c.a.createElement(v.a,{key:e.id||e.email},o(e))))):c.a.createElement(h.b,{data:T,template:n,onChecked:s,onClick:f,onEdit:b,onDelete:O})),[T,x,s,f,b,O]);return Object(r.useEffect)((()=>{if(!z&&_){const t=_[e];t.length>0&&D((e=>[...e,...t])),0===t.length&&S(!0)}}),[_,z,S]),Object(r.useEffect)((()=>{(null===T||void 0===T?void 0:T.length)>0&&l&&l(T)}),[T,l]),c.a.createElement(y.a,{pageStart:w||0,loadMore:async()=>{const t={...i,offset:E,limit:u};if(P){0===(await P(t)).data[e].length&&S(!0),C((e=>e+u))}},hasMore:!M,loader:c.a.createElement(j.d,{key:"loader"},c.a.createElement(m.a,null))},A())},w=n("RoTl"),E=n("coMr"),C=n("xAqQ"),T=n("Sza6"),D=n("Ztxg"),M=n("9Xo6");const S=e=>{var t;return"ADMIN"!==(null===e||void 0===e||null===(t=e.name)||void 0===t?void 0:t.toUpperCase())},_=({item:e,query:t,component:n,entityMultiText:i,entitySingleText:o,onSubmit:u})=>{const d=Object(r.useMemo)((()=>Array.isArray(e)),[e]),l=Object(a.b)(),f=n;return c.a.createElement(C.a,{mutation:t,appearance:"clear",onCancel:()=>l(Object(D.a)(null)),onSubmit:async(t,n)=>{try{await n({variables:{id:d?e.map((e=>e.id)):[e.id]}}),l(Object(M.c)({type:"success",message:d?`${i} \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u044b`:`${o} \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d`}))}catch(r){r&&l(Object(M.c)({type:"error",message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}))}finally{l(Object(D.a)(null)),u&&u()}}},d?c.a.createElement(s.a,null,e.map((e=>c.a.createElement(f,{key:e.id,item:e})))):c.a.createElement(f,{item:e}))},z=({item:e,checked:t,appearance:n,component:r,withoutChecked:a,onChecked:i,onLink:o,onEdit:u,onDelete:d})=>c.a.cloneElement(r,{checked:t,appearance:n,onChecked:!a&&(t=>i({...e,checked:t})),onLink:o&&(()=>o(e)),onEdit:u&&(()=>u(e)),onDelete:d&&(()=>d(e))}),P=({render:e,title:t,icon:n,field:i,filters:o,options:u,template:d,buttonCreateText:b,getType:p,getQuery:h,deleteQuery:O,deleteEntityMultiText:m,deleteEntitySingleText:j,onLink:v,onEdit:k,onCreate:y,emptyMessage:g,withoutChecked:C})=>{const{displayMethod:M,visibleFilters:P}=Object(a.c)((e=>({displayMethod:e.root.displayMethod,visibleFilters:e.root.visibleFilters}))),A=Object(a.b)(),[N,V]=Object(r.useState)(!1),[q,I]=Object(r.useState)([]),[L,R]=Object(r.useState)("list"),J=Object(r.useCallback)((e=>{var t;return null===(t=q.find((t=>t[i]===e[i])))||void 0===t?void 0:t.checked}),[q]),Q=e=>{I((t=>{const n=t=>t[i]===e[i];return t.find(n)?t.map((t=>n(t)?{...e,checked:!t.checked}:{...t,checked:N||t.checked})):[...t,{...e,checked:!0}]})),V(!1)},F=()=>{const e=!N;I((t=>t.map((t=>({...t,checked:!!S(t)&&e}))))),V(e)},G=t=>A(Object(D.a)({icon:"delete",color:"red",title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",content:c.a.createElement(_,{item:t,query:O,component:t=>c.a.cloneElement(e(t.item),{appearance:"clear"}),entityMultiText:m,entitySingleText:j,onSubmit:()=>R(Object(l.a)())})}));return Object(r.useEffect)((()=>{const e=q.reduce(((e,t)=>e+(t.checked?1:0)),0);q.length>0&&e===q.length&&V(!0)}),[q]),c.a.createElement(f.a,{title:t},c.a.createElement(s.a,null,c.a.createElement(E.b,{title:t,icon:n,checked:N,defaultDisplayMethod:M,defaultVisibleFilters:P,buttonDeleteDisabled:!q.find((e=>e.checked)),buttonCreateText:b,onCreate:y,onChecked:()=>"grid"===M&&F&&F(),onChangeVisibleFilter:()=>A(Object(T.u)(!P)),onChangeDisplayMethod:e=>A(Object(T.l)(e.value)),onDeleteAll:()=>G(q.filter((e=>e.checked))),withoutFooter:"list"===M,withFilters:o&&u}),(o||u)&&c.a.createElement(w.a,{isOpen:P,filters:o,options:u}),c.a.createElement(x,{key:L,type:p,query:h,template:d,setCheckedList:I,component:t=>c.a.createElement(z,{item:t,component:e(t),checked:S(t)&&(N||J(t)),onChecked:Q,onLink:e=>v(e),onEdit:e=>k(e),onDelete:G,withoutChecked:C}),emptyMessage:g,onChecked:Q,onClick:e=>v(e),onEdit:e=>k(e),onDelete:G})))};P.defaultProps={field:"id"};var A=P,N=n("j8/+"),V=n("u2Cb");var q=!0;t.default=({types:e})=>{const t=Object(o.b)(),n=Object(a.b)();return Object(r.useEffect)((()=>{n(Object(N.a)(null))}),[]),c.a.createElement(A,{title:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",icon:"folder",template:i.a,emptyMessage:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439 \u043d\u0435\u0442",buttonCreateText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",getType:"getCategories",getQuery:V.a.GET_CATEGORIES,deleteQuery:V.a.DELETE_CATEGORY,deleteEntityMultiText:"\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0438",deleteEntitySingleText:"\u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",onLink:e=>t(u.c,{id:e.id,category:e}),onEdit:n=>t(u.b,{id:n.id,category:n,types:e,mutation:V.a.UPDATE_CATEGORY})(),onCreate:t(u.a,{types:e,mutation:V.a.CREATE_CATEGORY}),render:e=>c.a.createElement(d.a,{category:e})})}},"4yYH":function(e,t,n){"use strict";var r=n("q1tI"),c=n.n(r),a=n("+nv6"),i=n("EJJs"),o=c.a.createElement,u=[{header:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",content:function(e){return o(i.a,{text:e.name||"-"})},width:"15%"},{header:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",content:function(e){return o(i.a,{text:e.description||"-"})},width:"70%"},{header:"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f",content:function(e){return o(i.a,{text:o(a.a,{text:e.createdAt,options:{year:"numeric",month:"2-digit",day:"2-digit"}})||"-"})},width:"15%"}];t.a=u},C1nt:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard/categories",function(){return n("/ZbR")}])},EJJs:function(e,t,n){"use strict";n.d(t,"a",(function(){return W}));var r=n("KQm4"),c=n("rePB"),a=n("h4VS"),i=n("q1tI"),o=n.n(i),u=n("vOnD"),d=n("7Cbv"),l=n("nShV"),s=n("8CDE"),f=n("feIE"),b=n("ZeZO"),p=n("OXt0"),h=n("DTT8"),O=n("79b8"),m=n("VWQm"),j=n("vJvq"),v=o.a.createElement;function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(){var e=Object(a.a)(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n"]);return g=function(){return e},e}function x(){var e=Object(a.a)(["\n  border: 1px solid var(--surface-border);\n  background: var(--surface-background);\n  box-shadow: var(--surface-shadow);\n  border-radius: var(--surface-border-radius);\n  padding: 10px;\n  grid-gap: 10px;\n"]);return x=function(){return e},e}function w(){var e=Object(a.a)(["\n  align-items: center;\n  flex-grow: 1;\n\n  width: ",";\n  overflow: hidden;\n\n  & > div {\n    width: 100%;\n  }\n\n  h4 {\n    font-size: var(--font-size-m);\n    font-weight: var(--font-weight-bold);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n"]);return w=function(){return e},e}function E(){var e=Object(a.a)(["\n  display: flex;\n  align-items: center;\n\n  & > div {\n    display: flex;\n  }\n"]);return E=function(){return e},e}function C(){var e=Object(a.a)(["\n      border: none;\n      background: none;\n      box-shadow: none;\n      border-radius: 0;\n      padding: 0;\n    "]);return C=function(){return e},e}function T(){var e=Object(a.a)(["\n      border: 1px solid var(--surface-border);\n      background: var(--surface-background);\n      box-shadow: 1px solid var(--surface-shadow);\n      border-radius: var(--surface-border-radius);\n    "]);return T=function(){return e},e}function D(){var e=Object(a.a)(["\n      flex-direction: row;\n    "]);return D=function(){return e},e}function M(){var e=Object(a.a)(["\n  justify-content: center;\n  align-items: center;\n  width: 70px;\n  padding: 5px;\n  grid-gap: 5px;\n\n  button {\n    width: 100%;\n    flex-grow: 1;\n  }\n\n  "," {\n    width: 100%;\n  }\n\n  ","\n\n  ","\n\n  ","\n"]);return M=function(){return e},e}function S(){var e=Object(a.a)(["\n      cursor: pointer;\n    "]);return S=function(){return e},e}function _(){var e=Object(a.a)(["\n  width: 100%;\n\n  ","\n"]);return _=function(){return e},e}function z(){var e=Object(a.a)(["\n      border: none;\n      background: none;\n      box-shadow: none;\n      border-radius: 0;\n    "]);return z=function(){return e},e}function P(){var e=Object(a.a)(["\n      border: 1px solid var(--surface-border);\n      background: var(--surface-background);\n      box-shadow: 1px solid var(--surface-shadow);\n      border-radius: var(--surface-border-radius);\n    "]);return P=function(){return e},e}function A(){var e=Object(a.a)(["\n  padding: 5px 15px;\n  width: calc(100% - 85px);\n\n  ","\n\n  ","\n\n  & > label {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: calc(var(--input-height-m) - 15px);\n    margin-left: 5px;\n\n    & > span {\n      margin: 0;\n    }\n  }\n"]);return A=function(){return e},e}function N(){var e=Object(a.a)(["\n      opacity: 0.45;\n    "]);return N=function(){return e},e}function V(){var e=Object(a.a)(["\n  transition: opacity 150ms ease;\n\n  ","\n"]);return V=function(){return e},e}function q(){var e=Object(a.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  width: 100%;\n  height: 30px;\n  color: #959595;\n\n  &:last-child {\n    justify-content: flex-end;\n  }\n"]);return q=function(){return e},e}function I(){var e=Object(a.a)(["\n      span:first-child {\n        width: calc("," + 45px);\n      }\n    "]);return I=function(){return e},e}function L(){var e=Object(a.a)(["\n      span {\n        width: ",";\n      }\n    "]);return L=function(){return e},e}function R(){var e=Object(a.a)(["\n  ","\n\n  ","\n"]);return R=function(){return e},e}function J(){var e=Object(a.a)(["\n  display: grid;\n  grid-template-columns: 36px 1fr 70px;\n"]);return J=function(){return e},e}function Q(){var e=Object(a.a)([""]);return Q=function(){return e},e}var F=Object(u.d)(s.a)(Q()),G=Object(u.d)(l.b)(J()),X=Object(u.d)(p.b)(R(),(function(e){var t=e.width;return t&&Object(u.c)(L(),t)}),(function(e){var t=e.first,n=e.width;return t&&n&&Object(u.c)(I(),n)})),Z=(Object(u.d)(l.b)(q()),Object(u.d)(l.b)(V(),(function(e){return e.checked&&Object(u.c)(N())}))),Y=Object(u.d)(l.b)(A(),(function(e){return"default"===e.appearance&&Object(u.c)(P())}),(function(e){return"clear"===e.appearance&&Object(u.c)(z())})),U=Object(u.d)(l.b)(_(),(function(e){return e.onClick&&Object(u.c)(S())})),H=Object(u.d)(s.a)(M(),m.a,(function(e){return e.horizontal&&Object(u.c)(D())}),(function(e){return"default"===e.appearance&&Object(u.c)(T())}),(function(e){return"clear"===e.appearance&&Object(u.c)(C())})),K=Object(u.d)(j.b)(E()),W=Object(u.d)(h.c)(w(),(function(e){return e.width})),$=Object(u.d)(s.a)(x()),B=Object(u.d)(m.b)(g()),ee=function(e){var t;return"ADMIN"===(null===(t=e.name)||void 0===t?void 0:t.toUpperCase())},te=function(e){var t=e.data,n=e.template,c=e.className,a=e.style,u=e.appearance,l=e.onClick,s=e.onChecked,p=e.onDelete,h=e.onEdit,j=Object(i.useState)(!1),k=j[0],g=j[1],x=Object(i.useState)((t||[]).map((function(e){return y(y({},e),{},{id:e.id||Object(d.a)(),checked:!1})}))),w=x[0],E=x[1],C=Object(i.useMemo)((function(){return!w.find((function(e){return e.checked}))}),[w]),T="".concat(Math.floor(100/n.length),"%"),D=Object(i.useMemo)((function(){return(n||[]).map((function(e){return{value:Object(d.a)(),label:e.header,tooltip:e.tooltip||"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \xab".concat(e.header,"\xbb"),visible:!e.hidden}}))}),[]);return Object(i.useEffect)((function(){var e=w.reduce((function(e,t){return e+(t.checked?1:0)}),0);w.length>0&&e===w.length&&g(!0)}),[w]),v(F,{className:c,style:a},v(G,null,v(B,{text:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u0432\u0441\u0435",self:!0},s&&v(O.a,{size:"s",checked:k,onChange:function(){var e=!k;E((function(t){return t.map((function(t){return y(y({},t),{},{checked:!ee(t)&&e})}))})),g(e)}})),v(X,{defaultValue:D[0],options:D.filter((function(e){return e.visible})),first:s,stretch:!0}),v(H,{appearance:u,horizontal:!0},v(m.b,{text:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u0433\u043e",place:"left"},v(b.a,{size:"xs",kind:"icon",appearance:C?"ghost":"red",disabled:C,onClick:function(){return p(w.filter((function(e){return e.checked})))}},v(f.a,{icon:"delete",size:"xs",stroke:C?"var(--ghost-color-text)":"white"}))),v(K,{place:"left",offset:{bottom:80},body:v($,null,D.map((function(e,t){return v(O.a,{key:t,size:"s",label:e.label,checked:e.visible})}))),appearance:"clear"},v(m.b,{text:"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u0435\u0439",place:"left"},v(b.a,{size:"xs",kind:"icon"},v(f.a,{icon:"show",size:"xs",stroke:"white"})))))),w.map((function(e,t){return v(Z,{key:t,checked:e.checked},v(Y,{appearance:u},v(B,{text:"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442",self:!0},s&&v(O.a,{size:"s",checked:!ee(e)&&(k||e.checked),onChange:!ee(e)&&function(){return function(e){E((function(t){var n=function(t){return t.id===e.id};return t.find(n)?t.map((function(t){return n(t)?y(y({},e),{},{checked:!t.checked}):y(y({},t),{},{checked:k||t.checked})})):[].concat(Object(r.a)(t),[y(y({},e),{},{checked:!0})])})),g(!1)}(e)}})),v(U,{onClick:function(){return l(e)}},n.map((function(t,n){return D[n].visible?o.a.cloneElement(t.content(e),{key:n,label:t.header,width:(null===t||void 0===t?void 0:t.width)||T}):null})))),(h||p)&&v(H,{appearance:u},h&&v(m.b,{text:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",place:"left"},v(b.a,{size:"xs",kind:"icon",disabled:ee(e)||e.checked,onClick:function(){return h(e)}},v(f.a,{icon:"edit",size:"xs",stroke:"white",fill:ee(e)||e.checked?"var(--ghost-color-text)":"var(--default-color-accent)"}))),p&&v(m.b,{text:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",place:"left"},v(b.a,{size:"xs",kind:"icon",appearance:"red",disabled:ee(e)||e.checked,onClick:function(){return p(e)}},v(f.a,{icon:"delete",size:"xs",stroke:"white",fill:ee(e)||e.checked?"var(--ghost-color-text)":"var(--default-color-red)"})))))})))};te.defaultProps={appearance:"default"},t.b=te}},[["C1nt",0,2,1,3,4,5,7]]]);