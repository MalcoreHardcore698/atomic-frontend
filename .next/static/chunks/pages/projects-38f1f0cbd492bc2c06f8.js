_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[31],{D85t:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects",function(){return a("RHEb")}])},EYtC:function(e,t,a){"use strict";var l=a("q1tI"),n=a.n(l),o=a("vOnD"),i=a("nShV"),r=a("ZeZO"),c=a("feIE"),s=a("t7jn");const d=Object(o.c)(i.b).withConfig({displayName:"SearchBar__Wrap",componentId:"sc-1ruwjhl-0"})(["width:100%;"]),u=Object(o.c)(s.a).withConfig({displayName:"SearchBar__WrapSearchField",componentId:"sc-1ruwjhl-1"})(["flex-grow:100;"]),m=Object(o.c)(r.a).withConfig({displayName:"SearchBar__WrapButton",componentId:"sc-1ruwjhl-2"})(["background:var(--default-color-accent-dim);border:none;&:hover{svg{path,circle{stroke:white;}}}",""],(({visibleFilter:e})=>e&&Object(o.b)(["background:var(--default-color-accent);"])));t.a=({appearance:e,onChangeFilter:t,onSubmit:a})=>{const[o,i]=Object(l.useState)(!1);return n.a.createElement(d,null,n.a.createElement(u,{appearance:e,placeholder:"\u041f\u043e\u0438\u0441\u043a",onSubmit:a}),n.a.createElement(m,{type:"button",kind:"icon",onClick:()=>{i(!o),t&&t(!o)},visibleFilter:o},n.a.createElement(c.a,{icon:"filter2",stroke:o?"white":"var(--default-color-accent)"})))}},QX5T:function(e,t,a){"use strict";var l=a("q1tI"),n=a.n(l),o=a("vOnD"),i=a("VX74"),r=a("7Cbv"),c=a("8CDE"),s=a("ZwIX"),d=a("wZgm"),u=a("auMy"),m=a("QclZ");const p=({callbackOnTop:e,callbackOnBottom:t,offset:a=50})=>{const[n,o]=Object(l.useState)(0);Object(l.useEffect)((()=>{const l=document.documentElement,i=()=>{if(!l)return;const i=l.scrollTop-n;t&&i>0&&l.scrollTop+l.clientHeight>=l.scrollHeight-a&&t(l.scrollTop,l.scrollHeight),e&&i<0&&l.scrollTop<=a&&e(l.scrollTop,l.scrollHeight),o(l.scrollTop)};return l&&window.addEventListener("scroll",i),()=>{l&&window.removeEventListener("scroll",i)}}),[e,t,a])};var b=a("X+Rt"),f=a("p9yE"),E=a("RoTl"),v=a("EYtC"),h=a("coMr"),j=a("586Q");const O=Object(o.c)(c.a).withConfig({displayName:"content__Wrap",componentId:"sc-1afm75p-0"})(["margin-top:120px;margin-bottom:80px;"," @media only screen and (max-width:480px){margin-top:0;}"],(({clear:e})=>e&&Object(o.b)(["margin:0;"])));t.a=({title:e,store:t,query:a,handle:o,filters:c,options:g,research:y,scaffold:w,dashboard:C,variables:_={},limit:S=6,startOffset:T=6,initialize:k,children:R})=>{const P=C?f.a:b.a,[D,I]=Object(l.useState)(),[L,x]=Object(l.useState)(),[A,M]=Object(l.useState)(null),[N,q]=Object(l.useState)(!1),[F,B]=Object(l.useState)(!1),[J,Q]=Object(l.useState)(T),[X,H]=Object(l.useState)((null===t||void 0===t?void 0:t.documents)||[]),[V,{data:U,loading:G,error:W,refetch:z}]=Object(i.useLazyQuery)(a),[Z,{data:K,loading:Y,error:$,refetch:ee}]=Object(i.useLazyQuery)(a),te=e=>{if(H([]),e)M(e),V({variables:{..._,search:e,offset:0,limit:T}});else{const e={..._,offset:0,limit:S};M(null),ee?ee(e):Z({variables:e})}Q(0)};return p({callbackOnBottom:async()=>{if(!Y&&!N){q(!0);const e={..._,offset:J,limit:S};A?await z(_):ee?(await ee(e),Q((e=>e+S))):await Z({variables:e}),q(!1)}},offset:850}),Object(l.useEffect)((()=>{k&&Z({variables:{offset:J,limit:S}})}),[k]),Object(l.useEffect)((()=>{y&&te(y)}),[y]),Object(l.useEffect)((()=>{const e=!A&&!Y&&K||A&&!G&&U;e&&H((t=>[...t,...e[Object.keys(e)[0]]]))}),[A,Y,G,K,U]),n.a.createElement(P,{title:e,scaffold:w},n.a.createElement(O,{clear:w||C},!w&&!C&&n.a.createElement(v.a,{onChangeFilter:()=>B(!F),onSubmit:te}),C&&o&&n.a.createElement(h.a,{title:e,icon:o.icon,buttonCreateText:o.buttonCreateText,onCreate:o.onCreate,onChangeVisibleFilter:()=>B(!F),onChangeDisplayMethod:o.onChangeDisplayMethod}),(c||g)&&n.a.createElement(E.a,{isOpen:F,filters:c.map((e=>{switch(e.type){case"DATEPICKER":return n.a.createElement(d.a,{key:Object(r.a)(),value:D,placeholder:e.placeholder||"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",onChange:I,withNavigate:!0});case"SELECT":return n.a.createElement(m.a,{key:Object(r.a)(),options:e.options,placeholder:e.placeholder||"\u0420\u0430\u0437\u0434\u0435\u043b",selected:L,onChange:e=>x(e)});default:return null}})),options:g}),"function"===typeof R?n.a.createElement(R,{documents:X}):R,A&&!G&&0===X.length&&n.a.createElement(s.a,{style:{width:"100%",textAlign:"center"}},"\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),(A&&W||!A&&$)&&n.a.createElement(s.a,{appearance:"error",style:{width:"100%",textAlign:"center"}},"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"),(N||!$&&Y||A&&!W&&G)&&n.a.createElement(j.d,null,n.a.createElement(u.a,null))))}},RHEb:function(e,t,a){"use strict";a.r(t);var l=a("q1tI"),n=a.n(l),o=a("20a2"),i=a("VX74"),r=a("auMy"),c=a("NWnW"),s=a("QX5T"),d=a("qF4B"),u=a("586Q"),m=a("u2Cb");t.default=()=>{var e;const t=Object(o.useRouter)(),[a,{data:p,loading:b}]=Object(i.useLazyQuery)(m.a.GET_META_PROJECTS);return Object(l.useEffect)((()=>{var e;const l=null===(e=t.query)||void 0===e?void 0:e.c;l&&a({variables:{offset:0,limit:6,status:"PUBLISHED",category:l}})}),[t]),b?n.a.createElement(u.a,null,n.a.createElement(r.a,null)):n.a.createElement(s.a,{title:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b",filters:[{type:"DATEPICKER"},{type:"SELECT",options:null===p||void 0===p?void 0:p.getCategories.map((e=>({value:e.id,label:Object(c.d)(e.name)})))}],options:[{label:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",value:"company"},{label:"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438",value:"members"},{label:"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",value:"createdAt"}],query:m.a.GET_PROJECTS,variables:{category:null===(e=t.query)||void 0===e?void 0:e.c,status:"PUBLISHED"},store:{documents:null===p||void 0===p?void 0:p.getProjects}},(({documents:e})=>n.a.createElement(u.b,null,n.a.createElement(d.a,{initialList:e,layout:!0}))))}},qF4B:function(e,t,a){"use strict";var l=a("q1tI"),n=a.n(l),o=a("vOnD"),i=a("VX74"),r=a("/MKj"),c=a("ZwIX"),s=a("auMy"),d=a("586Q"),u=a("VP1n"),m=a("1zqG"),p=a("ApjV"),b=a("lphG"),f=a("8ihE"),E=a("rP4V"),v=a("IxyI"),h=a("u2Cb");const j=o.c.div.withConfig({displayName:"ProjectList__Wrap",componentId:"zcwfmw-0"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(442px,1fr));grid-gap:var(--default-gap);grid-auto-rows:max-content;@media only screen and (max-width:768px){grid-template-columns:repeat(auto-fit,minmax(285px,1fr));}"]),O=({variables:e,layout:t,eliminable:a,initialList:o,initialRefetch:O,emptyMessage:g})=>{const y=Object(p.b)(),w=Object(b.a)(),{user:C,folder:_}=Object(r.c)((e=>({user:e.user,folder:e.root.folder}))),[S,T]=Object(l.useState)(o||[]),k=Object(r.b)(),{data:R,loading:P,error:D}=o?{data:null,loading:!1,error:!1}:Object(i.useQuery)(h.a.GET_PROJECTS,{variables:e}),I=Object(l.useCallback)((e=>y(v.a,{id:e.id,folders:null===C||void 0===C?void 0:C.folders,mutations:{addProject:h.a.ADD_USER_PROJECT,createFolder:h.a.ADD_USER_FOLDER},callback:t=>{const a={...t,projects:[...t.projects,e.id]};k(Object(f.c)(a))}})()),[C]),L=Object(l.useCallback)((e=>y(v.f,{id:e.id,folder:_,mutation:h.a.REMOVE_USER_PROJECT,callback:()=>O&&O(S.filter((t=>t.id!==e.id)).map((e=>e.id)))})()),[C]);return Object(l.useEffect)((()=>{!P&&R&&T(R.getProjects)}),[R,P]),Object(l.useEffect)((()=>{!P&&(null===o||void 0===o?void 0:o.length)>0&&T(o)}),[P,o]),n.a.createElement(j,null,S.length>0?S.map((e=>{var l,o,i,r;const c=null===C||void 0===C||null===(l=C.projects)||void 0===l?void 0:l.find((t=>t.id===e.id));return n.a.createElement(u.a,{key:e.id},n.a.createElement(m.c,{project:e,eliminable:a,layout:t||"column",owned:c,added:!(null===C||void 0===C||null===(o=C.folders)||void 0===o||!o.find((t=>!(null===t||void 0===t||!t.projects.find((t=>t===e.id)))))),liked:!!(e.rating||[]).find((e=>e.email===C.email)),onLink:y(v.e,{id:e.id,auth:null===C||void 0===C?void 0:C.email,added:!(null===C||void 0===C||null===(i=C.folders)||void 0===i||!i.find((t=>!(null===t||void 0===t||!t.projects.find((t=>t===e.id)))))),liked:!!(e.rating||[]).find((e=>e.email===C.email)),onLike:C.email&&w(h.a.LIKE_PROJECT,{id:e.id},(e=>k(Object(f.e)(e.data.likeProject)))),onAdd:C.email&&y(v.a,{id:e.id,folders:null===C||void 0===C?void 0:C.folders,mutations:{addProject:h.a.ADD_USER_PROJECT,createFolder:h.a.ADD_USER_FOLDER},callback:t=>{const a={...t,projects:[...t.projects,e.id]};k(Object(f.c)(a))}}),owned:c}),onLike:C.email&&w(h.a.LIKE_PROJECT,{id:e.id},(e=>k(Object(f.e)(e.data.likeProject)))),onAdd:C.email&&(()=>I(e)),onRemove:C.email&&(()=>L(e)),onAboutMore:y(E.a,{user:e}),onCompanyLink:y(E.i,{id:null===(r=e.company)||void 0===r?void 0:r.email,auth:null===C||void 0===C?void 0:C.email,recipient:e.author,query:h.a.GET_USER_CHATS,mutation:h.a.SEND_MESSAGE}),onScreenshotClick:(t,a)=>y(v.g,{screenshots:[e.preview,...e.screenshots],key:a})()}))})):D?n.a.createElement(c.a,{appearance:"error",style:{width:"100%",textAlign:"center"}},"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"):P?n.a.createElement(d.c,null,n.a.createElement(s.a,null)):n.a.createElement(c.a,{style:{width:"100%",textAlign:"center"}},g))};O.defaultProps={emptyMessage:"\u041f\u0440\u043e\u0435\u043a\u0442\u043e\u0432 \u043d\u0435\u0442"},t.a=O}},[["D85t",0,2,1,3,4,5,6,7]]]);