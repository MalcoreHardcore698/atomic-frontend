_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[30],{RNiq:function(e,i,a){"use strict";a.r(i),a.d(i,"__N_SSP",(function(){return O}));var t=a("q1tI"),d=a.n(t),n=a("vOnD"),o=a("/MKj"),l=a("VX74"),r=a("7Cbv"),c=a("ZwIX"),s=a("7sPp"),u=a("auMy"),m=a("ApjV"),E=a("lphG");const p=e=>{const[i,a]=Object(t.useState)(!1),d=()=>{const e=document.documentElement.scrollHeight,t=window.innerHeight,d=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;i||t+d!==e||a(!0)};return Object(t.useEffect)((()=>{i&&e()}),[i]),Object(t.useEffect)((()=>(window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d))),[]),[i,a]};var v=a("X+Rt"),_=a("1zqG"),h=a("UwjQ"),f=a("TsNn"),g=a("8ihE"),j=a("IxyI"),w=a("rP4V"),S=a("owvJ"),C=a("+EEm"),k=a("u2Cb");const y=n.c.div.withConfig({displayName:"pages__Container",componentId:"sc-1kp8388-0"})(["display:grid;grid-template-columns:1fr min-content;grid-gap:var(--default-gap);margin-bottom:80px;@media only screen and (max-width:1196px){grid-template-columns:1fr;}"]),A=n.c.aside.withConfig({displayName:"pages__Projects",componentId:"sc-1kp8388-1"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(442px,1fr));grid-gap:var(--default-gap);grid-auto-rows:max-content;@media only screen and (max-width:768px){grid-template-columns:repeat(auto-fit,minmax(285px,1fr));}"]),D=n.c.aside.withConfig({displayName:"pages__Aside",componentId:"sc-1kp8388-2"})(["display:flex;flex-direction:column;grid-gap:var(--default-gap);width:394px;@media only screen and (max-width:1196px){width:auto;}"]),R=n.c.div.withConfig({displayName:"pages__Loader",componentId:"sc-1kp8388-3"})(["display:flex;justify-content:center;width:100%;height:80px;"]);var O=!0;i.default=({store:e})=>{const i=Object(m.b)(),a=Object(E.a)(),n=Object(o.c)((e=>e.user)),O=Object(o.b)(),{loading:T,refetch:b}=Object(l.useQuery)(k.a.GET_PROJECTS,{variables:{offset:0,limit:5}}),{articles:P,users:L}=e,[x,U]=Object(t.useState)(e.projects||[]),[N,G]=Object(t.useState)(13),[H,I]=p((async()=>{const e=await b({offset:N,limit:5});e.errors||U((i=>[...i,...e.data.getProjects])),G((e=>e+5)),I(!1)}));return d.a.createElement(v.a,{title:"\u0410\u0442\u043e\u043c\u0438\u043a",scaffold:{title:"\u0421\u043e\u0437\u0434\u0430\u0432\u0430\u0439 \u0448\u043a\u043e\u043b\u0443 \u0431\u0443\u0434\u0443\u0449\u0435\u0433\u043e \u0441 \u043d\u0430\u043c\u0438",background:"/images/main-background.png",primary:x.length>0&&x[0],residue:x.length>4&&x.slice(1,3),onLink:(e,t)=>i(j.e,{id:e.id,auth:null===n||void 0===n?void 0:n.email,project:e,liked:!!((null===n||void 0===n?void 0:n.likedProjects)||[]).find((i=>i.id===e.id)),onLike:n.email&&a(k.a.LIKE_PROJECT,{id:e.id},(e=>O(Object(g.e)(e.data.likeProject)))),onAdd:n.email&&i(j.a,{id:e.id,project:e,folders:null===n||void 0===n?void 0:n.folders,mutations:{addProject:k.a.ADD_USER_PROJECT,createFolder:k.a.ADD_USER_FOLDER}}),owned:t})(),onLike:n.email&&(e=>a(k.a.LIKE_PROJECT,{id:e.id},(e=>O(Object(g.e)(e.data.likeProject))))()),onAdd:n.email&&(e=>i(j.a,{id:e.id,project:e,folders:null===n||void 0===n?void 0:n.folders,mutations:{addProject:k.a.ADD_USER_PROJECT,createFolder:k.a.ADD_USER_FOLDER}})()),onCompanyLink:e=>{var a;return i(w.i,{id:null===(a=e.company)||void 0===a?void 0:a.email,auth:n})()},onScreenshotClick:(e,a)=>i(j.f,{screenshots:[e.preview,...e.screenshots],key:a})()}},d.a.createElement(y,null,d.a.createElement(A,null,x.length>3?x.slice(3).map((e=>{var t,o,l;const c=null===n||void 0===n||null===(t=n.projects)||void 0===t?void 0:t.find((i=>i.id===e.id));return d.a.createElement(_.c,{key:Object(r.a)(),project:e,owned:c,added:!(null===n||void 0===n||null===(o=n.folders)||void 0===o||!o.find((i=>!(null===i||void 0===i||!i.projects.find((i=>i.id===e.id)))))),liked:!!((null===n||void 0===n?void 0:n.likedProjects)||[]).find((i=>i.id===e.id)),onLink:i(j.e,{id:e.id,auth:null===n||void 0===n?void 0:n.email,liked:!!((null===n||void 0===n?void 0:n.likedProjects)||[]).find((i=>i.id===e.id)),onLike:n.email&&a(k.a.LIKE_PROJECT,{id:e.id},(e=>O(Object(g.e)(e.data.likeProject)))),onAdd:n.email&&i(j.a,{id:e.id,project:e,folders:null===n||void 0===n?void 0:n.folders,mutations:{addProject:k.a.ADD_USER_PROJECT,createFolder:k.a.ADD_USER_FOLDER}}),owned:c}),onLike:n.email&&a(k.a.LIKE_PROJECT,{id:e.id},(e=>O(Object(g.e)(e.data.likeProject)))),onAdd:n.email&&i(j.a,{id:e.id,project:e,folders:null===n||void 0===n?void 0:n.folders,mutations:{addProject:k.a.ADD_USER_PROJECT,createFolder:k.a.ADD_USER_FOLDER}}),onCompanyLink:i(w.i,{id:null===(l=e.company)||void 0===l?void 0:l.email,auth:null===n||void 0===n?void 0:n.email,recipient:e.author,query:k.a.GET_USER_CHATS,mutation:k.a.SEND_MESSAGE}),onScreenshotClick:(a,t)=>i(j.f,{screenshots:[e.preview,...e.screenshots],key:t})()})})):d.a.createElement(c.a,{style:{width:"100%",textAlign:"center"}},"\u041f\u0440\u043e\u0435\u043a\u0442\u043e\u0432 \u043d\u0435\u0442"),(T||H)&&d.a.createElement(R,null,d.a.createElement(u.a,null))),d.a.createElement(D,null,d.a.createElement(s.a,{tag:"h4"},"\u0410\u0432\u0442\u043e\u0440\u044b"),L.length>0?L.slice(0,3).map((e=>{var a;const t=e.name===(null===n||void 0===n?void 0:n.name);return d.a.createElement(f.a,{key:Object(r.a)(),user:e,owned:t,onChat:n.email&&i(C.a,{email:e.email,auth:null===n||void 0===n?void 0:n.email,queries:{userChats:k.a.GET_USER_CHATS,chat:k.a.GET_CHAT},mutations:{addUserChat:k.a.ADD_USER_CHAT,sendMessage:k.a.SEND_MESSAGE}}),onLink:i(w.i,{id:e.email,auth:null===n||void 0===n?void 0:n.email,owned:t,queries:{userChats:k.a.GET_USER_CHATS,chat:k.a.GET_CHAT},mutations:{addUserChat:k.a.ADD_USER_CHAT,sendMessage:k.a.SEND_MESSAGE}}),onMembers:i(w.j,{id:null===e||void 0===e?void 0:e.email,auth:null===n||void 0===n?void 0:n.email}),onCompanyLink:i(w.i,{id:null===(a=e.company)||void 0===a?void 0:a.email,auth:null===n||void 0===n?void 0:n.email,queries:{userChats:k.a.GET_USER_CHATS,chat:k.a.GET_CHAT},mutations:{addUserChat:k.a.ADD_USER_CHAT,sendMessage:k.a.SEND_MESSAGE}})})})):d.a.createElement(c.a,{style:{width:"100%",textAlign:"center"}},"\u0410\u0432\u0442\u043e\u0440\u043e\u0432 \u043d\u0435\u0442"),d.a.createElement(s.a,{tag:"h4"},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"),P.length>0?P.slice(0,2).map((e=>{var a;return d.a.createElement(h.a,{key:Object(r.a)(),layout:"column",article:e,owned:null===n||void 0===n||null===(a=n.articles)||void 0===a?void 0:a.find((i=>i.id===e.id)),onLink:i(S.d,{id:e.id,auth:null===n||void 0===n?void 0:n.email})})})):d.a.createElement(c.a,{style:{width:"100%",textAlign:"center"}},"\u041d\u043e\u0432\u043e\u0441\u0442\u0435\u0439 \u043d\u0435\u0442"))))}},vlRD:function(e,i,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a("RNiq")}])}},[["vlRD",0,2,1,3,4,5,6,9]]]);