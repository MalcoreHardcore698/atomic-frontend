_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[31],{D85t:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects",function(){return a("RHEb")}])},EYtC:function(e,t,a){"use strict";var n=a("q1tI"),l=a.n(n),i=a("vOnD"),o=a("nShV"),r=a("ZeZO"),c=a("feIE"),d=a("t7jn"),s=a("coMr");const u=Object(i.d)(o.b).withConfig({displayName:"SearchBar__Wrap",componentId:"sc-1ruwjhl-0"})(["width:100%;"]),m=Object(i.d)(d.a).withConfig({displayName:"SearchBar__WrapSearchField",componentId:"sc-1ruwjhl-1"})(["flex-grow:100;"]),b=Object(i.d)(r.a).withConfig({displayName:"SearchBar__WrapButton",componentId:"sc-1ruwjhl-2"})(["background:var(--default-color-accent-dim);border:none;&:hover{svg{path,circle{stroke:white;}}}",""],(({visibleFilter:e})=>e&&Object(i.c)(["background:var(--default-color-accent);"])));t.a=({appearance:e,buttonCreateText:t,defaultValue:a,onCreate:i,onChangeFilter:o,onSubmit:r})=>{const[d,p]=Object(n.useState)(!1);return l.a.createElement(u,null,l.a.createElement(m,{appearance:e,placeholder:"\u041f\u043e\u0438\u0441\u043a",defaultValue:a,onSubmit:r}),l.a.createElement(b,{type:"button",kind:"icon",onClick:()=>{p(!d),o&&o(!d)},visibleFilter:d},l.a.createElement(c.a,{icon:"filter2",stroke:d?"white":"var(--default-color-accent)"})),i&&l.a.createElement(s.a,{type:"button",onClick:i},l.a.createElement("span",null,t),l.a.createElement(c.a,{type:"button",icon:"add",stroke:"white"})))}},QX5T:function(e,t,a){"use strict";var n=a("q1tI"),l=a.n(n),i=a("20a2"),o=a("vOnD"),r=a("VX74"),c=a("RotF"),d=a.n(c),s=a("7Cbv"),u=a("8CDE"),m=a("wZgm"),b=a("auMy"),p=a("QclZ"),f=a("X+Rt"),E=a("p9yE"),v=a("RoTl"),j=a("EYtC"),h=a("coMr"),O=a("586Q"),y=a("/MKj");const g=Object(o.d)(u.a).withConfig({displayName:"content__Wrap",componentId:"sc-1afm75p-0"})(["margin-top:120px;margin-bottom:80px;"," @media only screen and (max-width:480px){margin-top:0;}"],(({clear:e})=>e&&Object(o.c)(["margin:0;"])));t.a=({title:e,store:t,query:a,handle:o,filters:c,options:u,scaffold:C,dashboard:w,variables:_={},limit:S=6,startOffset:k=6,initialize:R,children:T})=>{const P=Object(i.useRouter)(),D=Object(y.c)((e=>e.root.search)),I=w?E.a:f.a,[x,L]=Object(n.useState)(),[M,A]=Object(n.useState)(),[q,N]=Object(n.useState)(null),[F,V]=Object(n.useState)(!1),[J,Q]=Object(n.useState)(k+1),[X,B]=Object(n.useState)((null===t||void 0===t?void 0:t.documents)||[]),[U,G]=Object(n.useState)(!1),W=Object(n.useMemo)((()=>{var e;return Number(null===(e=P.query)||void 0===e?void 0:e.page)||1}),[P]),[z,{data:K,loading:H,refetch:Z}]=Object(r.useLazyQuery)(a),[Y,{data:$,loading:ee,refetch:te}]=Object(r.useLazyQuery)(a),ae=e=>{if(B([]),e)N(e),z({variables:{..._,search:e,offset:0,limit:k*W}});else{const e={..._,offset:0,limit:S};N(null),te?te(e):Y({variables:e})}Q(0)};return Object(n.useEffect)((()=>{R&&Y({variables:{offset:J,limit:S}})}),[R]),Object(n.useEffect)((()=>{D&&ae(D)}),[D]),Object(n.useEffect)((()=>{const e=!q&&!ee&&$||q&&!H&&K;if(e){const t=e[Object.keys(e)[0]];t.length>0&&B((e=>[...e,...t])),0===t.length&&G(!0)}}),[q,ee,H,$,K,G]),l.a.createElement(I,{title:e,scaffold:C},l.a.createElement(g,{clear:C||w},!C&&!w&&l.a.createElement(j.a,{defaultValue:D||q,onChangeFilter:()=>V(!F),onSubmit:ae}),w&&o&&l.a.createElement(h.b,{title:e,icon:o.icon,buttonCreateText:o.buttonCreateText,onCreate:o.onCreate,onChangeVisibleFilter:()=>V(!F),onChangeDisplayMethod:o.onChangeDisplayMethod}),(c||u)&&l.a.createElement(v.a,{isOpen:F,filters:c.map((e=>{switch(e.type){case"DATEPICKER":return l.a.createElement(m.a,{key:Object(s.a)(),value:x,placeholder:e.placeholder||"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",onChange:L,withNavigate:!0});case"SELECT":return l.a.createElement(p.a,{key:Object(s.a)(),options:e.options,placeholder:e.placeholder||"\u0420\u0430\u0437\u0434\u0435\u043b",selected:M,onChange:e=>A(e)});default:return null}})),options:u}),q?"function"===typeof T?l.a.createElement(T,{documents:X}):T:l.a.createElement(d.a,{pageStart:W||0,loadMore:async e=>{const t={..._,offset:J,limit:S};q&&Z?await Z(_):te?(await te(t),Q(S*e+k+1)):await Y({variables:t})},hasMore:!U,loader:l.a.createElement(O.d,{key:"loader"},l.a.createElement(b.a,null))},"function"===typeof T?l.a.createElement(T,{documents:X}):T)))}},RHEb:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),l=a.n(n),i=a("20a2"),o=a("VX74"),r=a("auMy"),c=a("NWnW"),d=a("QX5T"),s=a("qF4B"),u=a("586Q"),m=a("u2Cb");t.default=()=>{var e;const t=Object(i.useRouter)(),[a,{data:b,loading:p}]=Object(o.useLazyQuery)(m.a.GET_META_PROJECTS);return Object(n.useEffect)((()=>{var e,n;const l=null===(e=t.query)||void 0===e?void 0:e.page,i=null===(n=t.query)||void 0===n?void 0:n.c;i&&a({variables:{offset:l?6*l:0,limit:6,status:"PUBLISHED",category:i}})}),[t]),p?l.a.createElement(u.a,null,l.a.createElement(r.a,null)):l.a.createElement(d.a,{title:"\u041f\u0440\u043e\u0435\u043a\u0442\u044b",filters:[{type:"DATEPICKER"},{type:"SELECT",options:null===b||void 0===b?void 0:b.getCategories.map((e=>({value:e.id,label:Object(c.e)(e.name)})))}],options:[{label:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",value:"company"},{label:"\u0423\u0447\u0430\u0441\u0442\u043d\u0438\u043a\u0438",value:"members"},{label:"\u0414\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438",value:"createdAt"}],query:m.a.GET_PROJECTS,variables:{category:null===(e=t.query)||void 0===e?void 0:e.c,status:"PUBLISHED"},store:{documents:null===b||void 0===b?void 0:b.getProjects}},(({documents:e})=>l.a.createElement(u.b,null,l.a.createElement(s.a,{initialList:e,layout:!0}))))}},qF4B:function(e,t,a){"use strict";var n=a("q1tI"),l=a.n(n),i=a("vOnD"),o=a("VX74"),r=a("/MKj"),c=a("ZwIX"),d=a("auMy"),s=a("586Q"),u=a("VP1n"),m=a("1zqG"),b=a("ApjV"),p=a("lphG"),f=a("8ihE"),E=a("rP4V"),v=a("IxyI"),j=a("u2Cb");const h=i.d.div.withConfig({displayName:"ProjectList__Wrap",componentId:"zcwfmw-0"})(["display:grid;grid-template-columns:repeat(auto-fit,minmax(442px,1fr));grid-gap:var(--default-gap);grid-auto-rows:max-content;@media only screen and (max-width:768px){grid-template-columns:repeat(auto-fit,minmax(285px,1fr));}"]),O=({variables:e,layout:t,eliminable:a,initialList:i,initialRefetch:O,emptyMessage:y})=>{const g=Object(b.b)(),C=Object(p.a)(),{user:w,folder:_}=Object(r.c)((e=>({user:e.user,folder:e.root.folder}))),[S,k]=Object(n.useState)(i||[]),R=Object(r.b)(),{data:T,loading:P,error:D}=i?{data:null,loading:!1,error:!1}:Object(o.useQuery)(j.a.GET_PROJECTS,{variables:e}),I=Object(n.useCallback)((e=>g(v.a,{id:e.id,folders:null===w||void 0===w?void 0:w.folders,mutations:{addProject:j.a.ADD_USER_PROJECT,createFolder:j.a.ADD_USER_FOLDER},callback:t=>{const a={...t,projects:[...t.projects,e.id]};R(Object(f.c)(a))}})()),[w]),x=Object(n.useCallback)((e=>g(v.f,{id:e.id,folder:_,mutation:j.a.REMOVE_USER_PROJECT,callback:()=>O&&O(S.filter((t=>t.id!==e.id)).map((e=>e.id)))})()),[w]);return Object(n.useEffect)((()=>{!P&&T&&k(T.getProjects)}),[T,P]),Object(n.useEffect)((()=>{!P&&(null===i||void 0===i?void 0:i.length)>0&&k(i)}),[P,i]),l.a.createElement(h,null,S.length>0?S.map((e=>{var n,i,o,r;const c=null===w||void 0===w||null===(n=w.projects)||void 0===n?void 0:n.find((t=>t.id===e.id));return l.a.createElement(u.a,{key:e.id},l.a.createElement(m.c,{project:e,eliminable:a,layout:t||"column",owned:c,added:!(null===w||void 0===w||null===(i=w.folders)||void 0===i||!i.find((t=>!(null===t||void 0===t||!t.projects.find((t=>t===e.id)))))),liked:!!(e.rating||[]).find((e=>e.email===w.email)),onLink:g(v.e,{id:e.id,auth:null===w||void 0===w?void 0:w.email,added:!(null===w||void 0===w||null===(o=w.folders)||void 0===o||!o.find((t=>!(null===t||void 0===t||!t.projects.find((t=>t===e.id)))))),liked:!!(e.rating||[]).find((e=>e.email===w.email)),onLike:w.email&&C(j.a.LIKE_PROJECT,{id:e.id},(e=>R(Object(f.e)(e.data.likeProject)))),onAdd:w.email&&g(v.a,{id:e.id,folders:null===w||void 0===w?void 0:w.folders,mutations:{addProject:j.a.ADD_USER_PROJECT,createFolder:j.a.ADD_USER_FOLDER},callback:t=>{const a={...t,projects:[...t.projects,e.id]};R(Object(f.c)(a))}}),owned:c}),onLike:w.email&&C(j.a.LIKE_PROJECT,{id:e.id},(e=>R(Object(f.e)(e.data.likeProject)))),onAdd:w.email&&(()=>I(e)),onRemove:w.email&&(()=>x(e)),onAboutMore:g(E.a,{user:e}),onCompanyLink:g(E.i,{id:null===(r=e.company)||void 0===r?void 0:r.email,auth:null===w||void 0===w?void 0:w.email,recipient:e.author,query:j.a.GET_USER_CHATS,mutation:j.a.SEND_MESSAGE}),onScreenshotClick:(t,a)=>g(v.g,{screenshots:[e.preview,...e.screenshots],key:a})(),withSocials:!0}))})):D?l.a.createElement(c.a,{appearance:"error",style:{width:"100%",textAlign:"center"}},"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"):P?l.a.createElement(s.c,null,l.a.createElement(d.a,null)):l.a.createElement(c.a,{style:{width:"100%",textAlign:"center"}},y))};O.defaultProps={emptyMessage:"\u041f\u0440\u043e\u0435\u043a\u0442\u043e\u0432 \u043d\u0435\u0442"},t.a=O}},[["D85t",0,2,1,3,4,5,6,7,8]]]);