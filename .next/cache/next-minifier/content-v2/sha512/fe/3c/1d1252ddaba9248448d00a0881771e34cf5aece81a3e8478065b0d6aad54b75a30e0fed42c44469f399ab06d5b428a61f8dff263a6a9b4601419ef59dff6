{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[28],{\"HL7+\":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/dashboard/users\",function(){return a(\"jNog\")}])},jNog:function(e,t,a){\"use strict\";a.r(t);var n=a(\"q1tI\"),r=a.n(n),i=a(\"/MKj\"),o=a(\"oFhP\"),u=a(\"TsNn\"),s=a(\"OqOz\"),c=a(\"rP4V\"),d=a(\"j8/+\"),E=a(\"ApjV\"),l=a(\"+EEm\"),_=a(\"u2Cb\");t.default=()=>{const e=Object(E.b)(),t=Object(i.c)((e=>e.user)),a=Object(i.b)(),m=Object(n.useMemo)((()=>t&&\"ADMIN\"===t.role.name),[t]);return Object(n.useEffect)((()=>{a(Object(d.a)(null))}),[]),r.a.createElement(s.b,{title:\"\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u0438\",limit:12,icon:\"user2\",field:\"email\",template:o.a,startOffset:0,emptyMessage:\"\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u0435\\u0439 \\u043d\\u0435\\u0442\",buttonCreateText:\"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044f\",getType:\"getUsers\",getQuery:_.a.GET_USERS,deleteQuery:_.a.DELETE_USER,deleteEntityMultiText:\"\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u0438\",deleteEntitySingleText:\"\\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044c\",onLink:a=>{const n=a.name===t.name;e(c.i,{id:a.email,auth:null===t||void 0===t?void 0:t.email,owned:n,queries:{userChats:_.a.GET_USER_CHATS,chat:_.a.GET_CHAT},mutations:{addUserChat:_.a.ADD_USER_CHAT,sendMessage:_.a.SEND_MESSAGE}})},onEdit:a=>e(c.f,{user:a.email,auth:null===t||void 0===t?void 0:t.email,canEditRole:m,mutations:{update:_.a.UPDATE_USER,del:_.a.DELETE_USER,changePassword:_.a.UPDATE_USER}})(),onCreate:e(c.d,{canEditRole:m,mutation:_.a.CREATE_USER}),render:a=>r.a.createElement(u.a,{user:a,onChat:t.email&&e(l.a,{id:a.email,auth:null===t||void 0===t?void 0:t.email,queries:{userChats:_.a.GET_USER_CHATS,chat:_.a.GET_CHAT},mutations:{addUserChat:_.a.ADD_USER_CHAT,sendMessage:_.a.SEND_MESSAGE}}),onAboutMore:e(c.a,{user:a}),preview:!0})})}},oFhP:function(e,t,a){\"use strict\";var n=a(\"q1tI\"),r=a.n(n),i=a(\"+nv6\"),o=a(\"EJJs\"),u=r.a.createElement,s=function(e){switch(e){case\"ADMIN\":return\"\\u0410\\u0434\\u043c\\u0438\\u043d\";case\"MODERATOR\":return\"\\u041c\\u043e\\u0434\\u0435\\u0440\\u0430\\u0442\\u043e\\u0440\";case\"OFICIAL\":return\"\\u041e\\u0444. \\u043b\\u0438\\u0446\\u043e\";case\"ENTITY\":return\"\\u042e\\u0440. \\u043b\\u0438\\u0446\\u043e\";default:return\"\\u0424\\u0438\\u0437. \\u043b\\u0438\\u0446\\u043e\"}},c=[{header:\"\\u041d\\u0430\\u0438\\u043c\\u0435\\u043d\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435\",content:function(e){var t;return u(o.a,{img:null===(t=e.avatar)||void 0===t?void 0:t.path,text:e.name||\"-\"})}},{header:\"\\u0410\\u043a\\u043a\\u0430\\u0443\\u043d\\u0442\",content:function(e){return u(o.a,{text:e.account&&s(e.account)||\"-\"})}},{header:\"\\u041e \\u0441\\u0435\\u0431\\u0435\",content:function(e){return u(o.a,{text:e.about||\"-\"})}},{header:\"\\u041f\\u0440\\u043e\\u0435\\u043a\\u0442\\u044b\",content:function(e){var t;return u(o.a,{text:(null===(t=e.projects)||void 0===t?void 0:t.length)||\"-\"})}},{header:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438\",content:function(e){return u(o.a,{text:u(i.a,{text:e.createdAt,options:{year:\"numeric\",month:\"2-digit\",day:\"2-digit\"}})||\"-\"})},hidden:!0}];t.a=c}},[[\"HL7+\",0,2,1,3,4,5,6,7]]]);","map":{"version":3,"sources":["static/chunks/pages/dashboard/users-054cb45582e86d01d0bd.js"],"names":["_N_E","window","push","HL7+","module","exports","__webpack_require__","__NEXT_P","jNog","__webpack_exports__","r","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_redux__WEBPACK_IMPORTED_MODULE_1__","_atomic_ui_components_Table_templates_user__WEBPACK_IMPORTED_MODULE_2__","_components_UserCard__WEBPACK_IMPORTED_MODULE_3__","_layouts_dashboard_content__WEBPACK_IMPORTED_MODULE_4__","_store_helpers_user__WEBPACK_IMPORTED_MODULE_5__","_store_actions_documents__WEBPACK_IMPORTED_MODULE_6__","_hooks_useHelper__WEBPACK_IMPORTED_MODULE_7__","_store_helpers__WEBPACK_IMPORTED_MODULE_8__","_graphql_queries__WEBPACK_IMPORTED_MODULE_9__","recall","Object","user","state","dispatch","canEditRole","role","name","a","createElement","title","limit","icon","field","template","startOffset","emptyMessage","buttonCreateText","getType","getQuery","GET_USERS","deleteQuery","DELETE_USER","deleteEntityMultiText","deleteEntitySingleText","onLink","author","owned","id","email","auth","queries","userChats","GET_USER_CHATS","chat","GET_CHAT","mutations","addUserChat","ADD_USER_CHAT","sendMessage","SEND_MESSAGE","onEdit","update","UPDATE_USER","del","changePassword","onCreate","mutation","CREATE_USER","render","document","onChat","onAboutMore","preview","oFhP","_DateText__WEBPACK_IMPORTED_MODULE_1__","___WEBPACK_IMPORTED_MODULE_2__","__jsx","getLabelRole","header","content","item","_item$avatar","img","avatar","path","text","account","about","_item$projects","projects","length","createdAt","options","year","month","day","hidden"],"mappings":"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"},"name":"static/chunks/pages/dashboard/users-054cb45582e86d01d0bd.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[28],{\n\n/***/ \"HL7+\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/dashboard/users\",\n        function () {\n          return __webpack_require__(\"jNog\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"jNog\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"/MKj\");\n/* harmony import */ var _atomic_ui_components_Table_templates_user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"oFhP\");\n/* harmony import */ var _components_UserCard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"TsNn\");\n/* harmony import */ var _layouts_dashboard_content__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"OqOz\");\n/* harmony import */ var _store_helpers_user__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"rP4V\");\n/* harmony import */ var _store_actions_documents__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"j8/+\");\n/* harmony import */ var _hooks_useHelper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"ApjV\");\n/* harmony import */ var _store_helpers__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"+EEm\");\n/* harmony import */ var _graphql_queries__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"u2Cb\");\n\n\n\n\n\n\n\n\n\n\nconst TITLE = 'Пользователи';\nconst START_OFFSET = 0;\nconst LIMIT = 12;\n\nconst Users = () => {\n  const recall = Object(_hooks_useHelper__WEBPACK_IMPORTED_MODULE_7__[/* useHelper */ \"b\"])();\n  const user = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useSelector */ \"c\"])(state => state.user);\n  const dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useDispatch */ \"b\"])();\n  const canEditRole = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => user && user.role.name === 'ADMIN', [user]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    dispatch(Object(_store_actions_documents__WEBPACK_IMPORTED_MODULE_6__[/* setDocuments */ \"a\"])(null));\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_layouts_dashboard_content__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"b\"], {\n    title: TITLE,\n    limit: LIMIT,\n    icon: 'user2',\n    field: 'email',\n    template: _atomic_ui_components_Table_templates_user__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"],\n    startOffset: START_OFFSET,\n    emptyMessage: 'Пользователей нет',\n    buttonCreateText: 'Создать пользователя',\n    getType: 'getUsers',\n    getQuery: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].GET_USERS,\n    deleteQuery: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].DELETE_USER,\n    deleteEntityMultiText: 'пользователи',\n    deleteEntitySingleText: 'пользователь',\n    onLink: author => {\n      const owned = author.name === user.name;\n      recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_5__[/* onUserLink */ \"i\"], {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned,\n        queries: {\n          userChats: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].GET_USER_CHATS,\n          chat: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].GET_CHAT\n        },\n        mutations: {\n          addUserChat: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].ADD_USER_CHAT,\n          sendMessage: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].SEND_MESSAGE\n        }\n      });\n    },\n    onEdit: author => recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_5__[/* onUserEdit */ \"f\"], {\n      user: author.email,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      canEditRole,\n      mutations: {\n        update: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].UPDATE_USER,\n        del: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].DELETE_USER,\n        changePassword: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].UPDATE_USER\n      }\n    })(),\n    onCreate: recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_5__[/* onUserCreate */ \"d\"], {\n      canEditRole,\n      mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].CREATE_USER\n    }),\n    render: document => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_UserCard__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"], {\n      user: document,\n      onChat: user.email && recall(_store_helpers__WEBPACK_IMPORTED_MODULE_8__[/* onChat */ \"a\"], {\n        id: document.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        queries: {\n          userChats: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].GET_USER_CHATS,\n          chat: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].GET_CHAT\n        },\n        mutations: {\n          addUserChat: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].ADD_USER_CHAT,\n          sendMessage: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].SEND_MESSAGE\n        }\n      }),\n      onAboutMore: recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_5__[/* onUserAboutMore */ \"a\"], {\n        user: document\n      }),\n      preview: true\n    })\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Users);\n\n/***/ }),\n\n/***/ \"oFhP\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export user */\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _DateText__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"+nv6\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"EJJs\");\nvar __jsx = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement;\n\n\n\n\nvar getLabelRole = function getLabelRole(role) {\n  switch (role) {\n    case 'ADMIN':\n      return 'Админ';\n\n    case 'MODERATOR':\n      return 'Модератор';\n\n    case 'OFICIAL':\n      return 'Оф. лицо';\n\n    case 'ENTITY':\n      return 'Юр. лицо';\n\n    default:\n      return 'Физ. лицо';\n  }\n};\n\nvar user = [{\n  header: 'Наименование',\n  content: function content(item) {\n    var _item$avatar;\n\n    return __jsx(___WEBPACK_IMPORTED_MODULE_2__[/* Cell */ \"a\"], {\n      img: (_item$avatar = item.avatar) === null || _item$avatar === void 0 ? void 0 : _item$avatar.path,\n      text: item.name || '-'\n    });\n  }\n}, {\n  header: 'Аккаунт',\n  content: function content(item) {\n    return __jsx(___WEBPACK_IMPORTED_MODULE_2__[/* Cell */ \"a\"], {\n      text: item.account && getLabelRole(item.account) || '-'\n    });\n  }\n}, {\n  header: 'О себе',\n  content: function content(item) {\n    return __jsx(___WEBPACK_IMPORTED_MODULE_2__[/* Cell */ \"a\"], {\n      text: item.about || '-'\n    });\n  }\n}, {\n  header: 'Проекты',\n  content: function content(item) {\n    var _item$projects;\n\n    return __jsx(___WEBPACK_IMPORTED_MODULE_2__[/* Cell */ \"a\"], {\n      text: ((_item$projects = item.projects) === null || _item$projects === void 0 ? void 0 : _item$projects.length) || '-'\n    });\n  }\n}, {\n  header: 'Дата регистрации',\n  content: function content(item) {\n    return __jsx(___WEBPACK_IMPORTED_MODULE_2__[/* Cell */ \"a\"], {\n      text: __jsx(_DateText__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"], {\n        text: item.createdAt,\n        options: {\n          year: 'numeric',\n          month: '2-digit',\n          day: '2-digit'\n        }\n      }) || '-'\n    });\n  },\n  hidden: true\n}];\n/* harmony default export */ __webpack_exports__[\"a\"] = (user);\n\n/***/ })\n\n},[[\"HL7+\",0,2,1,3,4,5,6,7]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fdashboard%2Fusers&absolutePagePath=private-next-pages%2Fdashboard%2Fusers.js!","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\pages\\dashboard\\users.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\atomic-ui\\components\\Table\\templates\\user.js"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,MAAuC;AAChE;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkD;AACK;AACgB;AACtB;AACW;AACqC;AACpC;AACX;AACL;AACD;AAC5C;AACA;AACA;;AAEA;AACA,iBAAiB,0EAAS;AAC1B,eAAe,uEAAW;AAC1B,mBAAmB,uEAAW;AAC9B,sBAAsB,qDAAO;AAC7B,EAAE,uDAAS;AACX,aAAa,qFAAY;AACzB,GAAG;AACH,sBAAsB,4CAAK,eAAe,0EAAa;AACvD;AACA;AACA;AACA;AACA,cAAc,0FAAQ;AACtB;AACA;AACA;AACA;AACA,cAAc,gEAAO;AACrB,iBAAiB,gEAAO;AACxB;AACA;AACA;AACA;AACA,aAAa,sEAAU;AACvB;AACA;AACA;AACA;AACA,qBAAqB,gEAAO;AAC5B,gBAAgB,gEAAO;AACvB,SAAS;AACT;AACA,uBAAuB,gEAAO;AAC9B,uBAAuB,gEAAO;AAC9B;AACA,OAAO;AACP,KAAK;AACL,6BAA6B,sEAAU;AACvC;AACA;AACA;AACA;AACA,gBAAgB,gEAAO;AACvB,aAAa,gEAAO;AACpB,wBAAwB,gEAAO;AAC/B;AACA,KAAK;AACL,qBAAqB,wEAAY;AACjC;AACA,gBAAgB,gEAAO;AACvB,KAAK;AACL,qCAAqC,4CAAK,eAAe,oEAAQ;AACjE;AACA,mCAAmC,6DAAM;AACzC;AACA;AACA;AACA,qBAAqB,gEAAO;AAC5B,gBAAgB,gEAAO;AACvB,SAAS;AACT;AACA,uBAAuB,gEAAO;AAC9B,uBAAuB,gEAAO;AAC9B;AACA,OAAO;AACP,0BAA0B,2EAAe;AACzC;AACA,OAAO;AACP;AACA,KAAK;AACL,GAAG;AACH;;AAEe,oEAAK,E;;;;;;;;ACxFpB;AAAA;AAAA;AAAA;AAAA;AAAA,YAAY,4CAAK;AACS;AACY;AACZ;;AAE1B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEA,iBAAiB,8CAAI;AACrB;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA,iBAAiB,8CAAI;AACrB;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA,iBAAiB,8CAAI;AACrB;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;;AAEA,iBAAiB,8CAAI;AACrB;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA,iBAAiB,8CAAI;AACrB,kBAAkB,yDAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA,CAAC;AACc,6DAAI,E","file":"x","sourcesContent":["\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/dashboard/users\",\n        function () {\n          return require(\"private-next-pages/dashboard/users.js\");\n        }\n      ]);\n    ","import React, { useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport template from '../../atomic-ui/components/Table/templates/user';\nimport UserCard from '../../components/UserCard';\nimport ContentLayout from '../../layouts/dashboard/content';\nimport { onUserCreate, onUserEdit, onUserLink, onUserAboutMore } from '../../store/helpers/user';\nimport { setDocuments } from '../../store/actions/documents';\nimport { useHelper } from '../../hooks/useHelper';\nimport { onChat } from '../../store/helpers';\nimport queries from '../../graphql/queries';\nconst TITLE = 'Пользователи';\nconst START_OFFSET = 0;\nconst LIMIT = 12;\n\nconst Users = () => {\n  const recall = useHelper();\n  const user = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  const canEditRole = useMemo(() => user && user.role.name === 'ADMIN', [user]);\n  useEffect(() => {\n    dispatch(setDocuments(null));\n  }, []);\n  return /*#__PURE__*/React.createElement(ContentLayout, {\n    title: TITLE,\n    limit: LIMIT,\n    icon: 'user2',\n    field: 'email',\n    template: template,\n    startOffset: START_OFFSET,\n    emptyMessage: 'Пользователей нет',\n    buttonCreateText: 'Создать пользователя',\n    getType: 'getUsers',\n    getQuery: queries.GET_USERS,\n    deleteQuery: queries.DELETE_USER,\n    deleteEntityMultiText: 'пользователи',\n    deleteEntitySingleText: 'пользователь',\n    onLink: author => {\n      const owned = author.name === user.name;\n      recall(onUserLink, {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned,\n        queries: {\n          userChats: queries.GET_USER_CHATS,\n          chat: queries.GET_CHAT\n        },\n        mutations: {\n          addUserChat: queries.ADD_USER_CHAT,\n          sendMessage: queries.SEND_MESSAGE\n        }\n      });\n    },\n    onEdit: author => recall(onUserEdit, {\n      user: author.email,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      canEditRole,\n      mutations: {\n        update: queries.UPDATE_USER,\n        del: queries.DELETE_USER,\n        changePassword: queries.UPDATE_USER\n      }\n    })(),\n    onCreate: recall(onUserCreate, {\n      canEditRole,\n      mutation: queries.CREATE_USER\n    }),\n    render: document => /*#__PURE__*/React.createElement(UserCard, {\n      user: document,\n      onChat: user.email && recall(onChat, {\n        id: document.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        queries: {\n          userChats: queries.GET_USER_CHATS,\n          chat: queries.GET_CHAT\n        },\n        mutations: {\n          addUserChat: queries.ADD_USER_CHAT,\n          sendMessage: queries.SEND_MESSAGE\n        }\n      }),\n      onAboutMore: recall(onUserAboutMore, {\n        user: document\n      }),\n      preview: true\n    })\n  });\n};\n\nexport default Users;","var __jsx = React.createElement;\nimport React from 'react';\nimport DateText from '../../DateText';\nimport { Cell } from '..';\n\nvar getLabelRole = function getLabelRole(role) {\n  switch (role) {\n    case 'ADMIN':\n      return 'Админ';\n\n    case 'MODERATOR':\n      return 'Модератор';\n\n    case 'OFICIAL':\n      return 'Оф. лицо';\n\n    case 'ENTITY':\n      return 'Юр. лицо';\n\n    default:\n      return 'Физ. лицо';\n  }\n};\n\nexport var user = [{\n  header: 'Наименование',\n  content: function content(item) {\n    var _item$avatar;\n\n    return __jsx(Cell, {\n      img: (_item$avatar = item.avatar) === null || _item$avatar === void 0 ? void 0 : _item$avatar.path,\n      text: item.name || '-'\n    });\n  }\n}, {\n  header: 'Аккаунт',\n  content: function content(item) {\n    return __jsx(Cell, {\n      text: item.account && getLabelRole(item.account) || '-'\n    });\n  }\n}, {\n  header: 'О себе',\n  content: function content(item) {\n    return __jsx(Cell, {\n      text: item.about || '-'\n    });\n  }\n}, {\n  header: 'Проекты',\n  content: function content(item) {\n    var _item$projects;\n\n    return __jsx(Cell, {\n      text: ((_item$projects = item.projects) === null || _item$projects === void 0 ? void 0 : _item$projects.length) || '-'\n    });\n  }\n}, {\n  header: 'Дата регистрации',\n  content: function content(item) {\n    return __jsx(Cell, {\n      text: __jsx(DateText, {\n        text: item.createdAt,\n        options: {\n          year: 'numeric',\n          month: '2-digit',\n          day: '2-digit'\n        }\n      }) || '-'\n    });\n  },\n  hidden: true\n}];\nexport default user;"]}}