{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{\"07fs\":function(e,t,a){\"use strict\";var n=a(\"q1tI\"),o=a.n(n),r=a(\"vOnD\");const i=r.d.div.withConfig({displayName:\"FadeLoad__Wrap\",componentId:\"sc-1rdnrub-0\"})([\"opacity:0;transition:opacity 100ms ease;\",\"\"],(({isVisible:e})=>e&&Object(r.c)([\"opacity:1;\"])));t.a=({children:e})=>{const[t,a]=Object(n.useState)(!0),r=Object(n.useRef)();return Object(n.useEffect)((()=>{const e=new IntersectionObserver((e=>{e.forEach((e=>a(e.isIntersecting)))}));return e.observe(r.current),()=>e.unobserve(r.current)}),[]),o.a.createElement(i,{isVisible:t,ref:r},e)}},EYtC:function(e,t,a){\"use strict\";var n=a(\"q1tI\"),o=a.n(n),r=a(\"vOnD\"),i=a(\"nShV\"),l=a(\"ZeZO\"),c=a(\"feIE\"),s=a(\"t7jn\"),u=a(\"coMr\");const d=Object(r.d)(i.b).withConfig({displayName:\"SearchBar__Wrap\",componentId:\"sc-1ruwjhl-0\"})([\"width:100%;\"]),E=Object(r.d)(s.a).withConfig({displayName:\"SearchBar__WrapSearchField\",componentId:\"sc-1ruwjhl-1\"})([\"flex-grow:100;\"]),m=Object(r.d)(l.a).withConfig({displayName:\"SearchBar__WrapButton\",componentId:\"sc-1ruwjhl-2\"})([\"background:var(--default-color-accent-dim);border:none;&:hover{svg{path,circle{stroke:white;}}}\",\"\"],(({visibleFilter:e})=>e&&Object(r.c)([\"background:var(--default-color-accent);\"])));t.a=({appearance:e,buttonCreateText:t,onCreate:a,onChangeFilter:r,onSubmit:i})=>{const[l,s]=Object(n.useState)(!1);return o.a.createElement(d,null,o.a.createElement(E,{appearance:e,placeholder:\"\\u041f\\u043e\\u0438\\u0441\\u043a\",onSubmit:i}),o.a.createElement(m,{type:\"button\",kind:\"icon\",onClick:()=>{s(!l),r&&r(!l)},visibleFilter:l},o.a.createElement(c.a,{icon:\"filter2\",stroke:l?\"white\":\"var(--default-color-accent)\"})),a&&o.a.createElement(u.a,{type:\"button\",onClick:a},o.a.createElement(\"span\",null,t),o.a.createElement(c.a,{type:\"button\",icon:\"add\",stroke:\"white\"})))}},\"HL7+\":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/dashboard/users\",function(){return a(\"jNog\")}])},QX5T:function(e,t,a){\"use strict\";var n=a(\"q1tI\"),o=a.n(n),r=a(\"20a2\"),i=a(\"vOnD\"),l=a(\"VX74\"),c=a(\"RotF\"),s=a.n(c),u=a(\"7Cbv\"),d=a(\"8CDE\"),E=a(\"wZgm\"),m=a(\"auMy\"),b=a(\"QclZ\"),h=a(\"X+Rt\"),p=a(\"p9yE\"),f=a(\"RoTl\"),v=a(\"EYtC\"),S=a(\"coMr\"),_=a(\"586Q\"),C=a(\"/MKj\");const j=Object(i.d)(d.a).withConfig({displayName:\"content__Wrap\",componentId:\"sc-1afm75p-0\"})([\"margin-top:120px;margin-bottom:80px;\",\" @media only screen and (max-width:480px){margin-top:0;}\"],(({clear:e})=>e&&Object(i.c)([\"margin:0;\"])));t.a=({title:e,store:t,query:a,handle:i,filters:c,options:d,scaffold:O,dashboard:w,variables:T={},limit:g=6,startOffset:y=6,initialize:D,children:R})=>{const A=Object(r.useRouter)(),U=Object(C.c)((e=>e.root.search)),M=w?p.a:h.a,[N,k]=Object(n.useState)(),[I,P]=Object(n.useState)(),[L,H]=Object(n.useState)(null),[q,x]=Object(n.useState)(!1),[G,F]=Object(n.useState)(y+1),[V,X]=Object(n.useState)((null===t||void 0===t?void 0:t.documents)||[]),[Q,B]=Object(n.useState)(!1),W=Object(n.useMemo)((()=>{var e;return Number(null===(e=A.query)||void 0===e?void 0:e.page)||1}),[A]),[J,{data:K,loading:Z,refetch:z}]=Object(l.useLazyQuery)(a),[Y,{data:$,loading:ee,refetch:te}]=Object(l.useLazyQuery)(a),ae=e=>{if(X([]),e)H(e),J({variables:{...T,search:e,offset:0,limit:y*W}});else{const e={...T,offset:0,limit:g};H(null),te?te(e):Y({variables:e})}F(0)};return Object(n.useEffect)((()=>{D&&Y({variables:{offset:G,limit:g}})}),[D]),Object(n.useEffect)((()=>{U&&ae(U)}),[U]),Object(n.useEffect)((()=>{const e=!L&&!ee&&$||L&&!Z&&K;if(e){const t=e[Object.keys(e)[0]];t.length>0&&X((e=>[...e,...t])),0===t.length&&B(!0)}}),[L,ee,Z,$,K,B]),o.a.createElement(M,{title:e,scaffold:O},o.a.createElement(j,{clear:O||w},!O&&!w&&o.a.createElement(v.a,{onChangeFilter:()=>x(!q),onSubmit:ae}),w&&i&&o.a.createElement(S.b,{title:e,icon:i.icon,buttonCreateText:i.buttonCreateText,onCreate:i.onCreate,onChangeVisibleFilter:()=>x(!q),onChangeDisplayMethod:i.onChangeDisplayMethod}),(c||d)&&o.a.createElement(f.a,{isOpen:q,filters:c.map((e=>{switch(e.type){case\"DATEPICKER\":return o.a.createElement(E.a,{key:Object(u.a)(),value:N,placeholder:e.placeholder||\"\\u0414\\u0430\\u0442\\u0430 \\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u0430\\u0446\\u0438\\u0438\",onChange:k,withNavigate:!0});case\"SELECT\":return o.a.createElement(b.a,{key:Object(u.a)(),options:e.options,placeholder:e.placeholder||\"\\u0420\\u0430\\u0437\\u0434\\u0435\\u043b\",selected:I,onChange:e=>P(e)});default:return null}})),options:d}),o.a.createElement(s.a,{pageStart:W||0,loadMore:async e=>{const t={...T,offset:G,limit:g};L&&z?await z(T):te?(await te(t),F(g*e+y+1)):await Y({variables:t})},hasMore:!Q,loader:o.a.createElement(_.d,{key:\"loader\"},o.a.createElement(m.a,null))},\"function\"===typeof R?o.a.createElement(R,{documents:V}):R)))}},jNog:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"__N_SSP\",(function(){return v}));var n=a(\"q1tI\"),o=a.n(n),r=a(\"/MKj\"),i=a(\"7BXr\"),l=a(\"EJJs\"),c=a(\"e3uv\"),s=a(\"ApjV\"),u=a(\"QX5T\"),d=a(\"TsNn\"),E=a(\"VP1n\"),m=a(\"07fs\"),b=a(\"rP4V\"),h=a(\"j8/+\"),p=a(\"+EEm\"),f=a(\"u2Cb\");var v=!0;t.default=({store:e})=>{const t=Object(s.b)(),{user:a,documents:v}=Object(r.c)((e=>({user:e.user,documents:e.documents}))),S=Object(r.b)(),[_,C]=Object(n.useState)(\"grid\"),j=Object(n.useMemo)((()=>a&&\"ADMIN\"===a.role.name),[a]),O=Object(n.useMemo)((()=>e.roles),[e]);return Object(n.useEffect)((()=>{S(Object(h.a)(null))}),[]),o.a.createElement(u.a,{title:\"\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u0438\",filters:[{type:\"DATEPICKER\",placeholder:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0430\\u0440\\u0446\\u0438\\u0438\"},{type:\"SELECT\",placeholder:\"\\u041a\\u043e\\u043c\\u043f\\u0430\\u043d\\u0438\\u044f\",options:[]}],options:[{label:\"\\u041a\\u043e\\u043c\\u043f\\u0430\\u043d\\u0438\\u044f\",value:\"company\"},{label:\"\\u0423\\u0447\\u0430\\u0441\\u0442\\u043d\\u0438\\u043a\\u0438\",value:\"members\"},{label:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0430\\u0440\\u0446\\u0438\\u0438\",value:\"createdAt\"}],handle:{icon:\"user2\",buttonCreateText:\"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044f\",onCreate:t(b.d,{roles:O,canEditRole:j,mutation:f.a.CREATE_USER}),onChangeDisplayMethod:e=>C(e.value)},limit:12,startOffset:12,bottomScrollOffset:0,query:f.a.GET_USERS,store:{documents:v||e.users},dashboard:!0},(({documents:e})=>\"list\"===_?o.a.createElement(l.b,{data:e,template:c.a.user,onChecked:()=>{},onClick:e=>{const n=e.name===a.name;return t(b.i,{id:e.email,auth:null===a||void 0===a?void 0:a.email,owned:n,queries:{userChats:f.a.GET_USER_CHATS,chat:f.a.GET_CHAT},mutations:{addUserChat:f.a.ADD_USER_CHAT,sendMessage:f.a.SEND_MESSAGE}})()},onDelete:e=>t(b.e,{id:e.email,user:e,auth:null===a||void 0===a?void 0:a.email,mutation:f.a.DELETE_USER})(),onEdit:e=>t(b.f,{user:e.email,auth:null===a||void 0===a?void 0:a.email,roles:O,canEditRole:j,mutations:{update:f.a.UPDATE_USER,del:f.a.DELETE_USER,changePassword:f.a.UPDATE_USER}})(),style:{overflowX:\"auto\",width:\"calc(100vw - 290px)\"}}):o.a.createElement(i.a,null,e.map((e=>{const n=e.name===a.name;return o.a.createElement(m.a,{key:e.email},o.a.createElement(E.a,null,o.a.createElement(d.a,{user:e,onChecked:()=>{},onChat:a.email&&t(p.a,{id:e.email,auth:null===a||void 0===a?void 0:a.email,queries:{userChats:f.a.GET_USER_CHATS,chat:f.a.GET_CHAT},mutations:{addUserChat:f.a.ADD_USER_CHAT,sendMessage:f.a.SEND_MESSAGE}}),onLink:t(b.i,{id:e.email,auth:null===a||void 0===a?void 0:a.email,owned:n,queries:{userChats:f.a.GET_USER_CHATS,chat:f.a.GET_CHAT},mutations:{addUserChat:f.a.ADD_USER_CHAT,sendMessage:f.a.SEND_MESSAGE}}),onAboutMore:t(b.a,{user:e}),onDelete:t(b.e,{id:e.email,user:e,auth:null===a||void 0===a?void 0:a.email,mutation:f.a.DELETE_USER}),onEdit:t(b.f,{user:e.email,auth:null===a||void 0===a?void 0:a.email,roles:O,canEditRole:j,mutations:{update:f.a.UPDATE_USER,del:f.a.DELETE_USER,changePassword:f.a.UPDATE_USER}}),preview:!0})))})))))}}},[[\"HL7+\",0,2,1,3,4,5,6,7,8]]]);","map":{"version":3,"sources":["static/chunks/pages/dashboard/users-c736e524460a5bf5afb7.js"],"names":["_N_E","window","push","07fs","module","__webpack_exports__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","styled_components__WEBPACK_IMPORTED_MODULE_1__","Wrap","div","withConfig","displayName","componentId","isVisible","Object","children","setVisible","domRef","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","observe","current","unobserve","a","createElement","ref","EYtC","_atomic_ui_components_Row__WEBPACK_IMPORTED_MODULE_2__","_atomic_ui_components_Button__WEBPACK_IMPORTED_MODULE_3__","_atomic_ui_components_Icon__WEBPACK_IMPORTED_MODULE_4__","_atomic_ui_components_Search__WEBPACK_IMPORTED_MODULE_5__","_HandleBar__WEBPACK_IMPORTED_MODULE_6__","WrapSearchField","WrapButton","visibleFilter","appearance","buttonCreateText","onCreate","onChangeFilter","onSubmit","setVisibleFilter","placeholder","type","kind","onClick","icon","stroke","HL7+","exports","__NEXT_P","QX5T","next_router__WEBPACK_IMPORTED_MODULE_1__","styled_components__WEBPACK_IMPORTED_MODULE_2__","_apollo_react_hooks__WEBPACK_IMPORTED_MODULE_3__","react_infinite_scroller__WEBPACK_IMPORTED_MODULE_4__","react_infinite_scroller__WEBPACK_IMPORTED_MODULE_4___default","uuid__WEBPACK_IMPORTED_MODULE_5__","_atomic_ui_components_Column__WEBPACK_IMPORTED_MODULE_6__","_atomic_ui_components_DatePicker__WEBPACK_IMPORTED_MODULE_7__","_atomic_ui_components_Spinner__WEBPACK_IMPORTED_MODULE_8__","_atomic_ui_components_Select__WEBPACK_IMPORTED_MODULE_9__","_layouts_default__WEBPACK_IMPORTED_MODULE_10__","_dashboard__WEBPACK_IMPORTED_MODULE_11__","_components_FilterBar__WEBPACK_IMPORTED_MODULE_12__","_components_SearchBar__WEBPACK_IMPORTED_MODULE_13__","_components_HandleBar__WEBPACK_IMPORTED_MODULE_14__","_components_Styled__WEBPACK_IMPORTED_MODULE_15__","react_redux__WEBPACK_IMPORTED_MODULE_16__","clear","title","store","query","handle","filters","options","scaffold","dashboard","variables","limit","startOffset","initialize","router","research","state","root","search","Layout","date","onChangeDate","select","onChangeSelect","setSearch","offset","setOffset","documents","setDocuments","isEnd","setIsEnd","pageStart","_router$query","Number","page","loadDocumentsBySearch","data","dataBySearch","loading","loadingBySearch","refetch","refetchBySearch","loadDocuments","onSearch","value","result","resultList","list","keys","length","prev","onChangeVisibleFilter","onChangeDisplayMethod","isOpen","map","filter","key","onChange","withNavigate","selected","item","loadMore","async","hasMore","loader","jNog","r","d","__N_SSP","react_redux__WEBPACK_IMPORTED_MODULE_1__","_atomic_ui_components_Grid__WEBPACK_IMPORTED_MODULE_2__","_atomic_ui_components_Table__WEBPACK_IMPORTED_MODULE_3__","_atomic_ui_components_Table_templates__WEBPACK_IMPORTED_MODULE_4__","_hooks_useHelper__WEBPACK_IMPORTED_MODULE_5__","_layouts_content__WEBPACK_IMPORTED_MODULE_6__","_components_UserCard__WEBPACK_IMPORTED_MODULE_7__","_components_LazyLoad__WEBPACK_IMPORTED_MODULE_8__","_components_FadeLoad__WEBPACK_IMPORTED_MODULE_9__","_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__","_store_actions_documents__WEBPACK_IMPORTED_MODULE_11__","_store_helpers__WEBPACK_IMPORTED_MODULE_12__","_graphql_queries__WEBPACK_IMPORTED_MODULE_13__","recall","user","dispatch","displayMethod","canEditRole","role","name","roles","label","mutation","CREATE_USER","bottomScrollOffset","GET_USERS","users","template","onChecked","author","owned","id","email","auth","queries","userChats","GET_USER_CHATS","chat","GET_CHAT","mutations","addUserChat","ADD_USER_CHAT","sendMessage","SEND_MESSAGE","onDelete","DELETE_USER","onEdit","update","UPDATE_USER","del","changePassword","style","overflowX","width","onChat","onLink","onAboutMore","preview"],"mappings":"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"},"name":"static/chunks/pages/dashboard/users-c736e524460a5bf5afb7.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[27],{\n\n/***/ \"07fs\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export Wrap */\n/* unused harmony export FadeLoad */\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"vOnD\");\n\n\nconst Wrap = styled_components__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"d\"].div.withConfig({\n  displayName: \"FadeLoad__Wrap\",\n  componentId: \"sc-1rdnrub-0\"\n})([\"opacity:0;transition:opacity 100ms ease;\", \"\"], ({\n  isVisible\n}) => isVisible && Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[/* css */ \"c\"])([\"opacity:1;\"]));\nconst FadeLoad = ({\n  children\n}) => {\n  const [isVisible, setVisible] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(true);\n  const domRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    const observer = new IntersectionObserver(entries => {\n      entries.forEach(entry => setVisible(entry.isIntersecting));\n    });\n    observer.observe(domRef.current);\n    return () => observer.unobserve(domRef.current);\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Wrap, {\n    isVisible: isVisible,\n    ref: domRef\n  }, children);\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (FadeLoad);\n\n/***/ }),\n\n/***/ \"EYtC\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export Wrap */\n/* unused harmony export WrapSearchField */\n/* unused harmony export WrapButton */\n/* unused harmony export Search */\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"vOnD\");\n/* harmony import */ var _atomic_ui_components_Row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"nShV\");\n/* harmony import */ var _atomic_ui_components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"ZeZO\");\n/* harmony import */ var _atomic_ui_components_Icon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"feIE\");\n/* harmony import */ var _atomic_ui_components_Search__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"t7jn\");\n/* harmony import */ var _HandleBar__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"coMr\");\n\n\n\n\n\n\n\nconst Wrap = Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"d\"])(_atomic_ui_components_Row__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"b\"]).withConfig({\n  displayName: \"SearchBar__Wrap\",\n  componentId: \"sc-1ruwjhl-0\"\n})([\"width:100%;\"]);\nconst WrapSearchField = Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"d\"])(_atomic_ui_components_Search__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"]).withConfig({\n  displayName: \"SearchBar__WrapSearchField\",\n  componentId: \"sc-1ruwjhl-1\"\n})([\"flex-grow:100;\"]);\nconst WrapButton = Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"d\"])(_atomic_ui_components_Button__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"]).withConfig({\n  displayName: \"SearchBar__WrapButton\",\n  componentId: \"sc-1ruwjhl-2\"\n})([\"background:var(--default-color-accent-dim);border:none;&:hover{svg{path,circle{stroke:white;}}}\", \"\"], ({\n  visibleFilter\n}) => visibleFilter && Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[/* css */ \"c\"])([\"background:var(--default-color-accent);\"]));\nconst Search = ({\n  appearance,\n  buttonCreateText,\n  onCreate,\n  onChangeFilter,\n  onSubmit\n}) => {\n  const [visibleFilter, setVisibleFilter] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n\n  const onClick = () => {\n    setVisibleFilter(!visibleFilter);\n    if (onChangeFilter) onChangeFilter(!visibleFilter);\n  };\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Wrap, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(WrapSearchField, {\n    appearance: appearance,\n    placeholder: 'Поиск',\n    onSubmit: onSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(WrapButton, {\n    type: 'button',\n    kind: 'icon',\n    onClick: onClick,\n    visibleFilter: visibleFilter\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Icon__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"], {\n    icon: 'filter2',\n    stroke: visibleFilter ? 'white' : 'var(--default-color-accent)'\n  })), onCreate && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_HandleBar__WEBPACK_IMPORTED_MODULE_6__[/* CreateButton */ \"a\"], {\n    type: 'button',\n    onClick: onCreate\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(\"span\", null, buttonCreateText), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Icon__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"], {\n    type: 'button',\n    icon: 'add',\n    stroke: 'white'\n  })));\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (Search);\n\n/***/ }),\n\n/***/ \"HL7+\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/dashboard/users\",\n        function () {\n          return __webpack_require__(\"jNog\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"QX5T\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"vOnD\");\n/* harmony import */ var _apollo_react_hooks__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"VX74\");\n/* harmony import */ var react_infinite_scroller__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"RotF\");\n/* harmony import */ var react_infinite_scroller__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react_infinite_scroller__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"7Cbv\");\n/* harmony import */ var _atomic_ui_components_Column__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"8CDE\");\n/* harmony import */ var _atomic_ui_components_DatePicker__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"wZgm\");\n/* harmony import */ var _atomic_ui_components_Spinner__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"auMy\");\n/* harmony import */ var _atomic_ui_components_Select__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"QclZ\");\n/* harmony import */ var _layouts_default__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"X+Rt\");\n/* harmony import */ var _dashboard__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"p9yE\");\n/* harmony import */ var _components_FilterBar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"RoTl\");\n/* harmony import */ var _components_SearchBar__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"EYtC\");\n/* harmony import */ var _components_HandleBar__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"coMr\");\n/* harmony import */ var _components_Styled__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"586Q\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"/MKj\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst Wrap = Object(styled_components__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"d\"])(_atomic_ui_components_Column__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"]).withConfig({\n  displayName: \"content__Wrap\",\n  componentId: \"sc-1afm75p-0\"\n})([\"margin-top:120px;margin-bottom:80px;\", \" @media only screen and (max-width:480px){margin-top:0;}\"], ({\n  clear\n}) => clear && Object(styled_components__WEBPACK_IMPORTED_MODULE_2__[/* css */ \"c\"])([\"margin:0;\"]));\n\nconst ContentLayout = ({\n  title,\n  store,\n  query,\n  handle,\n  filters,\n  options,\n  scaffold,\n  dashboard,\n  variables = {},\n  limit = 6,\n  startOffset = 6,\n  initialize,\n  children\n}) => {\n  const router = Object(next_router__WEBPACK_IMPORTED_MODULE_1__[\"useRouter\"])();\n  const research = Object(react_redux__WEBPACK_IMPORTED_MODULE_16__[/* useSelector */ \"c\"])(state => state.root.search);\n  const Layout = dashboard ? _dashboard__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"] : _layouts_default__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"];\n  const [date, onChangeDate] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])();\n  const [select, onChangeSelect] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])();\n  const [search, setSearch] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(null);\n  const [visibleFilter, setVisibleFilter] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const [offset, setOffset] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(startOffset + 1);\n  const [documents, setDocuments] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])((store === null || store === void 0 ? void 0 : store.documents) || []);\n  const [isEnd, setIsEnd] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const pageStart = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => {\n    var _router$query;\n\n    return Number((_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.page) || 1;\n  }, [router]);\n  const [loadDocumentsBySearch, {\n    data: dataBySearch,\n    loading: loadingBySearch,\n    refetch: refetchBySearch\n  }] = Object(_apollo_react_hooks__WEBPACK_IMPORTED_MODULE_3__[\"useLazyQuery\"])(query);\n  const [loadDocuments, {\n    data,\n    loading,\n    refetch\n  }] = Object(_apollo_react_hooks__WEBPACK_IMPORTED_MODULE_3__[\"useLazyQuery\"])(query);\n\n  const getFilters = () => {\n    return filters.map(filter => {\n      switch (filter.type) {\n        case 'DATEPICKER':\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_DatePicker__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"], {\n            key: Object(uuid__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(),\n            value: date,\n            placeholder: filter.placeholder || 'Дата публикации',\n            onChange: onChangeDate,\n            withNavigate: true\n          });\n\n        case 'SELECT':\n          return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Select__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"], {\n            key: Object(uuid__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(),\n            options: filter.options,\n            placeholder: filter.placeholder || 'Раздел',\n            selected: select,\n            onChange: item => onChangeSelect(item)\n          });\n\n        default:\n          return null;\n      }\n    });\n  };\n\n  const onSearch = value => {\n    setDocuments([]);\n\n    if (value) {\n      setSearch(value);\n      loadDocumentsBySearch({\n        variables: { ...variables,\n          search: value,\n          offset: 0,\n          limit: startOffset * pageStart\n        }\n      });\n    } else {\n      const result = { ...variables,\n        offset: 0,\n        limit\n      };\n      setSearch(null);\n      if (refetch) refetch(result);else loadDocuments({\n        variables: result\n      });\n    }\n\n    setOffset(0);\n  };\n\n  const loadMore = async page => {\n    const updateOffset = () => setOffset(limit * page + startOffset + 1);\n\n    const result = { ...variables,\n      offset,\n      limit\n    };\n\n    if (search && refetchBySearch) {\n      await refetchBySearch(variables);\n    } else {\n      if (refetch) {\n        await refetch(result);\n        updateOffset();\n      } else {\n        await loadDocuments({\n          variables: result\n        });\n      }\n    }\n  };\n\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (initialize) loadDocuments({\n      variables: {\n        offset,\n        limit\n      }\n    });\n  }, [initialize]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (research) onSearch(research);\n  }, [research]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    const commonList = !search && !loading && data;\n    const searchList = search && !loadingBySearch && dataBySearch;\n    const resultList = commonList || searchList;\n\n    if (resultList) {\n      const list = resultList[Object.keys(resultList)[0]];\n      if (list.length > 0) setDocuments(prev => [...prev, ...list]);\n      if (list.length === 0) setIsEnd(true);\n    }\n  }, [search, loading, loadingBySearch, data, dataBySearch, setIsEnd]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Layout, {\n    title: title,\n    scaffold: scaffold\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Wrap, {\n    clear: scaffold || dashboard\n  }, !scaffold && !dashboard && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SearchBar__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"], {\n    onChangeFilter: () => setVisibleFilter(!visibleFilter),\n    onSubmit: onSearch\n  }), dashboard && handle && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_HandleBar__WEBPACK_IMPORTED_MODULE_14__[/* default */ \"b\"], {\n    title: title,\n    icon: handle.icon,\n    buttonCreateText: handle.buttonCreateText,\n    onCreate: handle.onCreate,\n    onChangeVisibleFilter: () => setVisibleFilter(!visibleFilter),\n    onChangeDisplayMethod: handle.onChangeDisplayMethod\n  }), (filters || options) && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_FilterBar__WEBPACK_IMPORTED_MODULE_12__[/* default */ \"a\"], {\n    isOpen: visibleFilter,\n    filters: getFilters(),\n    options: options\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(react_infinite_scroller__WEBPACK_IMPORTED_MODULE_4___default.a, {\n    pageStart: pageStart || 0,\n    loadMore: loadMore,\n    hasMore: !isEnd,\n    loader: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_Styled__WEBPACK_IMPORTED_MODULE_15__[/* LowerLoader */ \"d\"], {\n      key: 'loader'\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Spinner__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"], null))\n  }, typeof children === 'function' ? react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(children, {\n    documents\n  }) : children)));\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ContentLayout);\n\n/***/ }),\n\n/***/ \"jNog\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__N_SSP\", function() { return __N_SSP; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"/MKj\");\n/* harmony import */ var _atomic_ui_components_Grid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"7BXr\");\n/* harmony import */ var _atomic_ui_components_Table__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"EJJs\");\n/* harmony import */ var _atomic_ui_components_Table_templates__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"e3uv\");\n/* harmony import */ var _hooks_useHelper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"ApjV\");\n/* harmony import */ var _layouts_content__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"QX5T\");\n/* harmony import */ var _components_UserCard__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"TsNn\");\n/* harmony import */ var _components_LazyLoad__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"VP1n\");\n/* harmony import */ var _components_FadeLoad__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"07fs\");\n/* harmony import */ var _store_helpers_user__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"rP4V\");\n/* harmony import */ var _store_actions_documents__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"j8/+\");\n/* harmony import */ var _store_helpers__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"+EEm\");\n/* harmony import */ var _graphql_queries__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"u2Cb\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst TITLE = 'Пользователи';\nconst START_OFFSET = 12;\nconst LIMIT = 12;\n\nconst Users = ({\n  store\n}) => {\n  const recall = Object(_hooks_useHelper__WEBPACK_IMPORTED_MODULE_5__[/* useHelper */ \"b\"])();\n  const {\n    user,\n    documents\n  } = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useSelector */ \"c\"])(state => ({\n    user: state.user,\n    documents: state.documents\n  }));\n  const dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useDispatch */ \"b\"])();\n  const [displayMethod, onChangeDisplayMethod] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])('grid');\n  const canEditRole = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => user && user.role.name === 'ADMIN', [user]);\n  const roles = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => store.roles, [store]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    dispatch(Object(_store_actions_documents__WEBPACK_IMPORTED_MODULE_11__[/* setDocuments */ \"a\"])(null));\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_layouts_content__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"], {\n    title: TITLE,\n    filters: [{\n      type: 'DATEPICKER',\n      placeholder: 'Дата регистарции'\n    }, {\n      type: 'SELECT',\n      placeholder: 'Компания',\n      options: []\n    }],\n    options: [{\n      label: 'Компания',\n      value: 'company'\n    }, {\n      label: 'Участники',\n      value: 'members'\n    }, {\n      label: 'Дата регистарции',\n      value: 'createdAt'\n    }],\n    handle: {\n      icon: 'user2',\n      buttonCreateText: 'Создать пользователя',\n      onCreate: recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserCreate */ \"d\"], {\n        roles,\n        canEditRole,\n        mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].CREATE_USER\n      }),\n      onChangeDisplayMethod: item => onChangeDisplayMethod(item.value)\n    },\n    limit: LIMIT,\n    startOffset: START_OFFSET,\n    bottomScrollOffset: 0,\n    query: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_USERS,\n    store: {\n      documents: documents || store.users\n    },\n    dashboard: true\n  }, ({\n    documents\n  }) => displayMethod === 'list' ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Table__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"b\"], {\n    data: documents,\n    template: _atomic_ui_components_Table_templates__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].user,\n    onChecked: () => {},\n    onClick: author => {\n      const owned = author.name === user.name;\n      return recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserLink */ \"i\"], {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned,\n        queries: {\n          userChats: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_USER_CHATS,\n          chat: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_CHAT\n        },\n        mutations: {\n          addUserChat: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].ADD_USER_CHAT,\n          sendMessage: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].SEND_MESSAGE\n        }\n      })();\n    },\n    onDelete: author => recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserDelete */ \"e\"], {\n      id: author.email,\n      user: author,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].DELETE_USER\n    })(),\n    onEdit: author => recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserEdit */ \"f\"], {\n      user: author.email,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      roles,\n      canEditRole,\n      mutations: {\n        update: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].UPDATE_USER,\n        del: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].DELETE_USER,\n        changePassword: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].UPDATE_USER\n      }\n    })(),\n    style: {\n      overflowX: 'auto',\n      width: 'calc(100vw - 290px)'\n    }\n  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Grid__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"], null, documents.map(author => {\n    const owned = author.name === user.name;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_FadeLoad__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"], {\n      key: author.email\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_LazyLoad__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_UserCard__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"], {\n      user: author,\n      onChecked: () => {},\n      onChat: user.email && recall(_store_helpers__WEBPACK_IMPORTED_MODULE_12__[/* onChat */ \"a\"], {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        queries: {\n          userChats: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_USER_CHATS,\n          chat: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_CHAT\n        },\n        mutations: {\n          addUserChat: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].ADD_USER_CHAT,\n          sendMessage: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].SEND_MESSAGE\n        }\n      }),\n      onLink: recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserLink */ \"i\"], {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned,\n        queries: {\n          userChats: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_USER_CHATS,\n          chat: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_CHAT\n        },\n        mutations: {\n          addUserChat: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].ADD_USER_CHAT,\n          sendMessage: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].SEND_MESSAGE\n        }\n      }),\n      onAboutMore: recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserAboutMore */ \"a\"], {\n        user: author\n      }),\n      onDelete: recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserDelete */ \"e\"], {\n        id: author.email,\n        user: author,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].DELETE_USER\n      }),\n      onEdit: recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserEdit */ \"f\"], {\n        user: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        roles,\n        canEditRole,\n        mutations: {\n          update: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].UPDATE_USER,\n          del: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].DELETE_USER,\n          changePassword: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].UPDATE_USER\n        }\n      }),\n      preview: true\n    })));\n  })));\n};\n\nvar __N_SSP = true;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Users);\n\n/***/ })\n\n},[[\"HL7+\",0,2,1,3,4,5,6,7,8]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\components\\FadeLoad\\index.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\components\\SearchBar\\index.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fdashboard%2Fusers&absolutePagePath=private-next-pages%2Fdashboard%2Fusers.js!","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\layouts\\content.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\pages\\dashboard\\users.js"],"names":[],"mappings":"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","file":"x","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport styled, { css } from 'styled-components';\nexport const Wrap = styled.div.withConfig({\n  displayName: \"FadeLoad__Wrap\",\n  componentId: \"sc-1rdnrub-0\"\n})([\"opacity:0;transition:opacity 100ms ease;\", \"\"], ({\n  isVisible\n}) => isVisible && css([\"opacity:1;\"]));\nexport const FadeLoad = ({\n  children\n}) => {\n  const [isVisible, setVisible] = useState(true);\n  const domRef = useRef();\n  useEffect(() => {\n    const observer = new IntersectionObserver(entries => {\n      entries.forEach(entry => setVisible(entry.isIntersecting));\n    });\n    observer.observe(domRef.current);\n    return () => observer.unobserve(domRef.current);\n  }, []);\n  return /*#__PURE__*/React.createElement(Wrap, {\n    isVisible: isVisible,\n    ref: domRef\n  }, children);\n};\nexport default FadeLoad;","import React, { useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport Row from '../../atomic-ui/components/Row';\nimport Button from '../../atomic-ui/components/Button';\nimport Icon from '../../atomic-ui/components/Icon';\nimport SearchField from '../../atomic-ui/components/Search';\nimport { CreateButton } from '../HandleBar';\nexport const Wrap = styled(Row).withConfig({\n  displayName: \"SearchBar__Wrap\",\n  componentId: \"sc-1ruwjhl-0\"\n})([\"width:100%;\"]);\nexport const WrapSearchField = styled(SearchField).withConfig({\n  displayName: \"SearchBar__WrapSearchField\",\n  componentId: \"sc-1ruwjhl-1\"\n})([\"flex-grow:100;\"]);\nexport const WrapButton = styled(Button).withConfig({\n  displayName: \"SearchBar__WrapButton\",\n  componentId: \"sc-1ruwjhl-2\"\n})([\"background:var(--default-color-accent-dim);border:none;&:hover{svg{path,circle{stroke:white;}}}\", \"\"], ({\n  visibleFilter\n}) => visibleFilter && css([\"background:var(--default-color-accent);\"]));\nexport const Search = ({\n  appearance,\n  buttonCreateText,\n  onCreate,\n  onChangeFilter,\n  onSubmit\n}) => {\n  const [visibleFilter, setVisibleFilter] = useState(false);\n\n  const onClick = () => {\n    setVisibleFilter(!visibleFilter);\n    if (onChangeFilter) onChangeFilter(!visibleFilter);\n  };\n\n  return /*#__PURE__*/React.createElement(Wrap, null, /*#__PURE__*/React.createElement(WrapSearchField, {\n    appearance: appearance,\n    placeholder: 'Поиск',\n    onSubmit: onSubmit\n  }), /*#__PURE__*/React.createElement(WrapButton, {\n    type: 'button',\n    kind: 'icon',\n    onClick: onClick,\n    visibleFilter: visibleFilter\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: 'filter2',\n    stroke: visibleFilter ? 'white' : 'var(--default-color-accent)'\n  })), onCreate && /*#__PURE__*/React.createElement(CreateButton, {\n    type: 'button',\n    onClick: onCreate\n  }, /*#__PURE__*/React.createElement(\"span\", null, buttonCreateText), /*#__PURE__*/React.createElement(Icon, {\n    type: 'button',\n    icon: 'add',\n    stroke: 'white'\n  })));\n};\nexport default Search;","\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/dashboard/users\",\n        function () {\n          return require(\"private-next-pages/dashboard/users.js\");\n        }\n      ]);\n    ","import React, { useState, useEffect, useMemo } from 'react';\nimport { useRouter } from 'next/router';\nimport styled, { css } from 'styled-components';\nimport { useLazyQuery } from '@apollo/react-hooks';\nimport InfiniteScroll from 'react-infinite-scroller';\nimport { v4 } from 'uuid';\nimport Column from '../atomic-ui/components/Column';\nimport DatePicker from '../atomic-ui/components/DatePicker';\nimport Spinner from '../atomic-ui/components/Spinner';\nimport Select from '../atomic-ui/components/Select';\nimport DefaultLayout from '../layouts/default';\nimport DashboardLayout from './dashboard';\nimport FilterBar from '../components/FilterBar';\nimport SearchBar from '../components/SearchBar';\nimport HandleBar from '../components/HandleBar';\nimport { LowerLoader } from '../components/Styled';\nimport { useSelector } from 'react-redux';\nconst Wrap = styled(Column).withConfig({\n  displayName: \"content__Wrap\",\n  componentId: \"sc-1afm75p-0\"\n})([\"margin-top:120px;margin-bottom:80px;\", \" @media only screen and (max-width:480px){margin-top:0;}\"], ({\n  clear\n}) => clear && css([\"margin:0;\"]));\n\nconst ContentLayout = ({\n  title,\n  store,\n  query,\n  handle,\n  filters,\n  options,\n  scaffold,\n  dashboard,\n  variables = {},\n  limit = 6,\n  startOffset = 6,\n  initialize,\n  children\n}) => {\n  const router = useRouter();\n  const research = useSelector(state => state.root.search);\n  const Layout = dashboard ? DashboardLayout : DefaultLayout;\n  const [date, onChangeDate] = useState();\n  const [select, onChangeSelect] = useState();\n  const [search, setSearch] = useState(null);\n  const [visibleFilter, setVisibleFilter] = useState(false);\n  const [offset, setOffset] = useState(startOffset + 1);\n  const [documents, setDocuments] = useState((store === null || store === void 0 ? void 0 : store.documents) || []);\n  const [isEnd, setIsEnd] = useState(false);\n  const pageStart = useMemo(() => {\n    var _router$query;\n\n    return Number((_router$query = router.query) === null || _router$query === void 0 ? void 0 : _router$query.page) || 1;\n  }, [router]);\n  const [loadDocumentsBySearch, {\n    data: dataBySearch,\n    loading: loadingBySearch,\n    refetch: refetchBySearch\n  }] = useLazyQuery(query);\n  const [loadDocuments, {\n    data,\n    loading,\n    refetch\n  }] = useLazyQuery(query);\n\n  const getFilters = () => {\n    return filters.map(filter => {\n      switch (filter.type) {\n        case 'DATEPICKER':\n          return /*#__PURE__*/React.createElement(DatePicker, {\n            key: v4(),\n            value: date,\n            placeholder: filter.placeholder || 'Дата публикации',\n            onChange: onChangeDate,\n            withNavigate: true\n          });\n\n        case 'SELECT':\n          return /*#__PURE__*/React.createElement(Select, {\n            key: v4(),\n            options: filter.options,\n            placeholder: filter.placeholder || 'Раздел',\n            selected: select,\n            onChange: item => onChangeSelect(item)\n          });\n\n        default:\n          return null;\n      }\n    });\n  };\n\n  const onSearch = value => {\n    setDocuments([]);\n\n    if (value) {\n      setSearch(value);\n      loadDocumentsBySearch({\n        variables: { ...variables,\n          search: value,\n          offset: 0,\n          limit: startOffset * pageStart\n        }\n      });\n    } else {\n      const result = { ...variables,\n        offset: 0,\n        limit\n      };\n      setSearch(null);\n      if (refetch) refetch(result);else loadDocuments({\n        variables: result\n      });\n    }\n\n    setOffset(0);\n  };\n\n  const loadMore = async page => {\n    const updateOffset = () => setOffset(limit * page + startOffset + 1);\n\n    const result = { ...variables,\n      offset,\n      limit\n    };\n\n    if (search && refetchBySearch) {\n      await refetchBySearch(variables);\n    } else {\n      if (refetch) {\n        await refetch(result);\n        updateOffset();\n      } else {\n        await loadDocuments({\n          variables: result\n        });\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (initialize) loadDocuments({\n      variables: {\n        offset,\n        limit\n      }\n    });\n  }, [initialize]);\n  useEffect(() => {\n    if (research) onSearch(research);\n  }, [research]);\n  useEffect(() => {\n    const commonList = !search && !loading && data;\n    const searchList = search && !loadingBySearch && dataBySearch;\n    const resultList = commonList || searchList;\n\n    if (resultList) {\n      const list = resultList[Object.keys(resultList)[0]];\n      if (list.length > 0) setDocuments(prev => [...prev, ...list]);\n      if (list.length === 0) setIsEnd(true);\n    }\n  }, [search, loading, loadingBySearch, data, dataBySearch, setIsEnd]);\n  return /*#__PURE__*/React.createElement(Layout, {\n    title: title,\n    scaffold: scaffold\n  }, /*#__PURE__*/React.createElement(Wrap, {\n    clear: scaffold || dashboard\n  }, !scaffold && !dashboard && /*#__PURE__*/React.createElement(SearchBar, {\n    onChangeFilter: () => setVisibleFilter(!visibleFilter),\n    onSubmit: onSearch\n  }), dashboard && handle && /*#__PURE__*/React.createElement(HandleBar, {\n    title: title,\n    icon: handle.icon,\n    buttonCreateText: handle.buttonCreateText,\n    onCreate: handle.onCreate,\n    onChangeVisibleFilter: () => setVisibleFilter(!visibleFilter),\n    onChangeDisplayMethod: handle.onChangeDisplayMethod\n  }), (filters || options) && /*#__PURE__*/React.createElement(FilterBar, {\n    isOpen: visibleFilter,\n    filters: getFilters(),\n    options: options\n  }), /*#__PURE__*/React.createElement(InfiniteScroll, {\n    pageStart: pageStart || 0,\n    loadMore: loadMore,\n    hasMore: !isEnd,\n    loader: /*#__PURE__*/React.createElement(LowerLoader, {\n      key: 'loader'\n    }, /*#__PURE__*/React.createElement(Spinner, null))\n  }, typeof children === 'function' ? React.createElement(children, {\n    documents\n  }) : children)));\n};\n\nexport default ContentLayout;","import React, { useState, useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Grid from '../../atomic-ui/components/Grid';\nimport Table from '../../atomic-ui/components/Table';\nimport templates from '../../atomic-ui/components/Table/templates';\nimport { useHelper } from '../../hooks/useHelper';\nimport ContentLayout from '../../layouts/content';\nimport UserCard from '../../components/UserCard';\nimport LazyLoad from '../../components/LazyLoad';\nimport FadeLoad from '../../components/FadeLoad';\nimport { onUserCreate, onUserEdit, onUserDelete, onUserLink, onUserAboutMore } from '../../store/helpers/user';\nimport { setDocuments } from '../../store/actions/documents';\nimport { onChat } from '../../store/helpers';\nimport queries from '../../graphql/queries';\nconst TITLE = 'Пользователи';\nconst START_OFFSET = 12;\nconst LIMIT = 12;\n\nconst Users = ({\n  store\n}) => {\n  const recall = useHelper();\n  const {\n    user,\n    documents\n  } = useSelector(state => ({\n    user: state.user,\n    documents: state.documents\n  }));\n  const dispatch = useDispatch();\n  const [displayMethod, onChangeDisplayMethod] = useState('grid');\n  const canEditRole = useMemo(() => user && user.role.name === 'ADMIN', [user]);\n  const roles = useMemo(() => store.roles, [store]);\n  useEffect(() => {\n    dispatch(setDocuments(null));\n  }, []);\n  return /*#__PURE__*/React.createElement(ContentLayout, {\n    title: TITLE,\n    filters: [{\n      type: 'DATEPICKER',\n      placeholder: 'Дата регистарции'\n    }, {\n      type: 'SELECT',\n      placeholder: 'Компания',\n      options: []\n    }],\n    options: [{\n      label: 'Компания',\n      value: 'company'\n    }, {\n      label: 'Участники',\n      value: 'members'\n    }, {\n      label: 'Дата регистарции',\n      value: 'createdAt'\n    }],\n    handle: {\n      icon: 'user2',\n      buttonCreateText: 'Создать пользователя',\n      onCreate: recall(onUserCreate, {\n        roles,\n        canEditRole,\n        mutation: queries.CREATE_USER\n      }),\n      onChangeDisplayMethod: item => onChangeDisplayMethod(item.value)\n    },\n    limit: LIMIT,\n    startOffset: START_OFFSET,\n    bottomScrollOffset: 0,\n    query: queries.GET_USERS,\n    store: {\n      documents: documents || store.users\n    },\n    dashboard: true\n  }, ({\n    documents\n  }) => displayMethod === 'list' ? /*#__PURE__*/React.createElement(Table, {\n    data: documents,\n    template: templates.user,\n    onChecked: () => {},\n    onClick: author => {\n      const owned = author.name === user.name;\n      return recall(onUserLink, {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned,\n        queries: {\n          userChats: queries.GET_USER_CHATS,\n          chat: queries.GET_CHAT\n        },\n        mutations: {\n          addUserChat: queries.ADD_USER_CHAT,\n          sendMessage: queries.SEND_MESSAGE\n        }\n      })();\n    },\n    onDelete: author => recall(onUserDelete, {\n      id: author.email,\n      user: author,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      mutation: queries.DELETE_USER\n    })(),\n    onEdit: author => recall(onUserEdit, {\n      user: author.email,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      roles,\n      canEditRole,\n      mutations: {\n        update: queries.UPDATE_USER,\n        del: queries.DELETE_USER,\n        changePassword: queries.UPDATE_USER\n      }\n    })(),\n    style: {\n      overflowX: 'auto',\n      width: 'calc(100vw - 290px)'\n    }\n  }) : /*#__PURE__*/React.createElement(Grid, null, documents.map(author => {\n    const owned = author.name === user.name;\n    return /*#__PURE__*/React.createElement(FadeLoad, {\n      key: author.email\n    }, /*#__PURE__*/React.createElement(LazyLoad, null, /*#__PURE__*/React.createElement(UserCard, {\n      user: author,\n      onChecked: () => {},\n      onChat: user.email && recall(onChat, {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        queries: {\n          userChats: queries.GET_USER_CHATS,\n          chat: queries.GET_CHAT\n        },\n        mutations: {\n          addUserChat: queries.ADD_USER_CHAT,\n          sendMessage: queries.SEND_MESSAGE\n        }\n      }),\n      onLink: recall(onUserLink, {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned,\n        queries: {\n          userChats: queries.GET_USER_CHATS,\n          chat: queries.GET_CHAT\n        },\n        mutations: {\n          addUserChat: queries.ADD_USER_CHAT,\n          sendMessage: queries.SEND_MESSAGE\n        }\n      }),\n      onAboutMore: recall(onUserAboutMore, {\n        user: author\n      }),\n      onDelete: recall(onUserDelete, {\n        id: author.email,\n        user: author,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        mutation: queries.DELETE_USER\n      }),\n      onEdit: recall(onUserEdit, {\n        user: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        roles,\n        canEditRole,\n        mutations: {\n          update: queries.UPDATE_USER,\n          del: queries.DELETE_USER,\n          changePassword: queries.UPDATE_USER\n        }\n      }),\n      preview: true\n    })));\n  })));\n};\n\nexport var __N_SSP = true;\nexport default Users;"]}}