{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{D85t:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/projects\",function(){return n(\"RHEb\")}])},RHEb:function(e,t,n){\"use strict\";n.r(t),n.d(t,\"__N_SSP\",(function(){return x}));var a=n(\"q1tI\"),i=n.n(a),o=n(\"vOnD\"),c=n(\"/MKj\"),d=n(\"8CDE\"),r=n(\"ZwIX\"),l=n(\"wZgm\"),s=n(\"QclZ\"),p=n(\"ApjV\"),u=n(\"lphG\"),m=n(\"X+Rt\"),E=n(\"1zqG\"),h=n(\"RoTl\"),_=n(\"EYtC\"),w=n(\"8ihE\"),v=n(\"IxyI\"),j=n(\"rP4V\"),g=n(\"u2Cb\"),b=n(\"wha1\");const f=Object(o.c)(d.a).withConfig({displayName:\"projects__Wrap\",componentId:\"sc-3yxn9c-0\"})([\"margin-top:120px;margin-bottom:80px;@media only screen and (max-width:480px){margin-top:0;}\"]),y=o.c.aside.withConfig({displayName:\"projects__Container\",componentId:\"sc-3yxn9c-1\"})([\"display:grid;grid-template-columns:repeat(auto-fit,minmax(442px,1fr));grid-gap:var(--default-gap);@media only screen and (max-width:768px){grid-template-columns:repeat(auto-fit,minmax(285px,1fr));}\"]);var x=!0;t.default=({store:e,categories:t})=>{const n=Object(p.a)(),o=Object(u.a)(),{user:d,documents:x}=Object(c.c)((e=>({user:e.user,documents:e.documents}))),k=Object(c.b)(),[C,O]=Object(a.useState)(),[S,N]=Object(a.useState)(),[I,P]=Object(a.useState)(!1),R=Object(a.useMemo)((()=>x||e.projects),[x,e]);return i.a.createElement(m.a,{title:\"\\u041f\\u0440\\u043e\\u0435\\u043a\\u0442\\u044b\"},i.a.createElement(f,null,i.a.createElement(_.a,{onChangeFilter:()=>P(!I)}),i.a.createElement(h.a,{isOpen:I,filters:[i.a.createElement(l.a,{key:0,value:C,placeholder:\"\\u0414\\u0430\\u0442\\u0430 \\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u0430\\u0446\\u0438\\u0438\",onChange:O,withNavigate:!0}),i.a.createElement(s.a,{key:1,options:t,placeholder:\"\\u0420\\u0430\\u0437\\u0434\\u0435\\u043b\",selected:S,onChange:e=>N(e)})],options:b.c}),i.a.createElement(y,null,R.length>0?R.map((e=>{var t,a;const c=null===d||void 0===d||null===(t=d.projects)||void 0===t?void 0:t.find((t=>t.id===e.id));return i.a.createElement(E.b,{key:e.id,project:e,owned:c,liked:!!((null===d||void 0===d?void 0:d.likedProjects)||[]).find((t=>t.id===e.id)),onLink:n(v.e,{id:e.id,auth:d,owned:c}),onLike:(null===d||void 0===d?void 0:d.email)&&o(g.a.LIKE_PROJECT,{id:e.id},(e=>k(Object(w.e)(e.data.likeProject)))),onAdd:(null===d||void 0===d?void 0:d.email)&&n(v.a,{id:e.id}),onCompanyLink:n(j.i,{id:null===(a=e.company)||void 0===a?void 0:a.email,auth:null===d||void 0===d?void 0:d.email,recipient:e.author,query:g.a.GET_USER_CHATS,mutation:g.a.SEND_MESSAGE}),onScreenshotClick:(t,a)=>n(v.f,{screenshots:[e.preview,...e.screenshots],key:a})()})})):i.a.createElement(r.a,{style:{width:\"100%\",textAlign:\"center\"}},\"\\u041f\\u0440\\u043e\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043d\\u0435\\u0442\"))))}}},[[\"D85t\",0,2,1,3,4,5,6,7]]]);","map":{"version":3,"sources":["static/chunks/pages/projects-95897f508c9058431477.js"],"names":["_N_E","window","push","D85t","module","exports","__webpack_require__","__NEXT_P","RHEb","__webpack_exports__","r","d","__N_SSP","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","styled_components__WEBPACK_IMPORTED_MODULE_1__","react_redux__WEBPACK_IMPORTED_MODULE_2__","_atomic_ui_components_Column__WEBPACK_IMPORTED_MODULE_3__","_atomic_ui_components_Alert__WEBPACK_IMPORTED_MODULE_4__","_atomic_ui_components_DatePicker__WEBPACK_IMPORTED_MODULE_5__","_atomic_ui_components_Select__WEBPACK_IMPORTED_MODULE_6__","_hooks_useHelper__WEBPACK_IMPORTED_MODULE_7__","_hooks_useMutate__WEBPACK_IMPORTED_MODULE_8__","_layouts_default__WEBPACK_IMPORTED_MODULE_9__","_components_ProjectCard__WEBPACK_IMPORTED_MODULE_10__","_components_FilterBar__WEBPACK_IMPORTED_MODULE_11__","_components_SearchBar__WEBPACK_IMPORTED_MODULE_12__","_store_actions_user__WEBPACK_IMPORTED_MODULE_13__","_store_helpers_project__WEBPACK_IMPORTED_MODULE_14__","_store_helpers_user__WEBPACK_IMPORTED_MODULE_15__","_graphql_queries__WEBPACK_IMPORTED_MODULE_16__","_mock___WEBPACK_IMPORTED_MODULE_17__","Wrap","Object","withConfig","displayName","componentId","Container","aside","store","categories","recall","mutate","user","documents","state","dispatch","date","onChangeDate","select","onChangeSelect","visibleFilter","setVisibleFilter","projects","a","createElement","title","onChangeFilter","isOpen","filters","key","value","placeholder","onChange","withNavigate","options","selected","item","length","map","project","_user$projects","_project$company","owned","find","candidate","id","liked","likedProjects","onLink","auth","onLike","email","LIKE_PROJECT","response","data","likeProject","onAdd","onCompanyLink","company","recipient","author","query","GET_USER_CHATS","mutation","SEND_MESSAGE","onScreenshotClick","_","screenshots","preview","style","width","textAlign"],"mappings":"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"},"name":"static/chunks/pages/projects-95897f508c9058431477.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[32],{\n\n/***/ \"D85t\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/projects\",\n        function () {\n          return __webpack_require__(\"RHEb\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"RHEb\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__N_SSP\", function() { return __N_SSP; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"vOnD\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"/MKj\");\n/* harmony import */ var _atomic_ui_components_Column__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"8CDE\");\n/* harmony import */ var _atomic_ui_components_Alert__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"ZwIX\");\n/* harmony import */ var _atomic_ui_components_DatePicker__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"wZgm\");\n/* harmony import */ var _atomic_ui_components_Select__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"QclZ\");\n/* harmony import */ var _hooks_useHelper__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"ApjV\");\n/* harmony import */ var _hooks_useMutate__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"lphG\");\n/* harmony import */ var _layouts_default__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"X+Rt\");\n/* harmony import */ var _components_ProjectCard__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"1zqG\");\n/* harmony import */ var _components_FilterBar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"RoTl\");\n/* harmony import */ var _components_SearchBar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"EYtC\");\n/* harmony import */ var _store_actions_user__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"8ihE\");\n/* harmony import */ var _store_helpers_project__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"IxyI\");\n/* harmony import */ var _store_helpers_user__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"rP4V\");\n/* harmony import */ var _graphql_queries__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"u2Cb\");\n/* harmony import */ var _mock___WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(\"wha1\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst TITLE = 'Проекты';\nconst Wrap = Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"c\"])(_atomic_ui_components_Column__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"]).withConfig({\n  displayName: \"projects__Wrap\",\n  componentId: \"sc-3yxn9c-0\"\n})([\"margin-top:120px;margin-bottom:80px;@media only screen and (max-width:480px){margin-top:0;}\"]);\nconst Container = styled_components__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"c\"].aside.withConfig({\n  displayName: \"projects__Container\",\n  componentId: \"sc-3yxn9c-1\"\n})([\"display:grid;grid-template-columns:repeat(auto-fit,minmax(442px,1fr));grid-gap:var(--default-gap);@media only screen and (max-width:768px){grid-template-columns:repeat(auto-fit,minmax(285px,1fr));}\"]);\n\nconst Projects = ({\n  store,\n  categories\n}) => {\n  const recall = Object(_hooks_useHelper__WEBPACK_IMPORTED_MODULE_7__[/* useHelper */ \"a\"])();\n  const mutate = Object(_hooks_useMutate__WEBPACK_IMPORTED_MODULE_8__[/* useMutate */ \"a\"])();\n  const {\n    user,\n    documents\n  } = Object(react_redux__WEBPACK_IMPORTED_MODULE_2__[/* useSelector */ \"c\"])(state => ({\n    user: state.user,\n    documents: state.documents\n  }));\n  const dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_2__[/* useDispatch */ \"b\"])();\n  const [date, onChangeDate] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])();\n  const [select, onChangeSelect] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])();\n  const [visibleFilter, setVisibleFilter] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const projects = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => documents || store.projects, [documents, store]);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_layouts_default__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"], {\n    title: TITLE\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Wrap, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_SearchBar__WEBPACK_IMPORTED_MODULE_12__[/* default */ \"a\"], {\n    onChangeFilter: () => setVisibleFilter(!visibleFilter)\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_FilterBar__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"], {\n    isOpen: visibleFilter,\n    filters: [/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_DatePicker__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"], {\n      key: 0,\n      value: date,\n      placeholder: 'Дата публикации',\n      onChange: onChangeDate,\n      withNavigate: true\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Select__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"], {\n      key: 1,\n      options: categories,\n      placeholder: 'Раздел',\n      selected: select,\n      onChange: item => onChangeSelect(item)\n    })],\n    options: _mock___WEBPACK_IMPORTED_MODULE_17__[/* filters */ \"c\"]\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Container, null, projects.length > 0 ? projects.map(project => {\n    var _user$projects, _project$company;\n\n    const owned = user === null || user === void 0 ? void 0 : (_user$projects = user.projects) === null || _user$projects === void 0 ? void 0 : _user$projects.find(candidate => candidate.id === project.id);\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_ProjectCard__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"b\"], {\n      key: project.id,\n      project: project,\n      owned: owned,\n      liked: !!((user === null || user === void 0 ? void 0 : user.likedProjects) || []).find(item => item.id === project.id),\n      onLink: recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_14__[/* onProjectLink */ \"e\"], {\n        id: project.id,\n        auth: user,\n        owned\n      }),\n      onLike: (user === null || user === void 0 ? void 0 : user.email) && mutate(_graphql_queries__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].LIKE_PROJECT, {\n        id: project.id\n      }, response => dispatch(Object(_store_actions_user__WEBPACK_IMPORTED_MODULE_13__[/* updateUser */ \"e\"])(response.data.likeProject))),\n      onAdd: (user === null || user === void 0 ? void 0 : user.email) && recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_14__[/* onProjectAdd */ \"a\"], {\n        id: project.id\n      }),\n      onCompanyLink: recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_15__[/* onUserLink */ \"i\"], {\n        id: (_project$company = project.company) === null || _project$company === void 0 ? void 0 : _project$company.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        recipient: project.author,\n        query: _graphql_queries__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].GET_USER_CHATS,\n        mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].SEND_MESSAGE\n      }),\n      onScreenshotClick: (_, key) => recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_14__[/* onProjectScreenshot */ \"f\"], {\n        screenshots: [project.preview, ...project.screenshots],\n        key\n      })()\n    });\n  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Alert__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"], {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u043E\\u0432 \\u043D\\u0435\\u0442\"))));\n};\n\nvar __N_SSP = true;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Projects);\n\n/***/ })\n\n},[[\"D85t\",0,2,1,3,4,5,6,7]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fprojects&absolutePagePath=private-next-pages%2Fprojects.js!","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\pages\\projects.js"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,MAAgC;AACzD;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiD;AACV;AACgB;AACH;AACF;AACU;AACR;AACL;AACA;AACA;AACK;AACJ;AACA;AACG;AACyC;AACzC;AACV;AACH;AACtC;AACA,aAAa,yEAAM,CAAC,4EAAM;AAC1B;AACA;AACA,CAAC,qBAAqB,mBAAmB,yCAAyC,cAAc;AAChG,kBAAkB,iEAAM;AACxB;AACA;AACA,CAAC,iBAAiB,yDAAyD,4BAA4B,yCAAyC,0DAA0D;;AAE1M;AACA;AACA;AACA,CAAC;AACD,iBAAiB,0EAAS;AAC1B,iBAAiB,0EAAS;AAC1B;AACA;AACA;AACA,GAAG,GAAG,uEAAW;AACjB;AACA;AACA,GAAG;AACH,mBAAmB,uEAAW;AAC9B,+BAA+B,sDAAQ;AACvC,mCAAmC,sDAAQ;AAC3C,4CAA4C,sDAAQ;AACpD,mBAAmB,qDAAO;AAC1B,sBAAsB,4CAAK,eAAe,gEAAa;AACvD;AACA,GAAG,eAAe,4CAAK,wCAAwC,4CAAK,eAAe,sEAAS;AAC5F;AACA,GAAG,gBAAgB,4CAAK,eAAe,sEAAS;AAChD;AACA,2BAA2B,4CAAK,eAAe,gFAAU;AACzD;AACA;AACA;AACA;AACA;AACA,KAAK,gBAAgB,4CAAK,eAAe,4EAAM;AAC/C;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,aAAa,uDAAO;AACpB,GAAG,gBAAgB,4CAAK;AACxB;;AAEA;AACA,wBAAwB,4CAAK,eAAe,wEAAW;AACvD;AACA;AACA;AACA;AACA,qBAAqB,6EAAa;AAClC;AACA;AACA;AACA,OAAO;AACP,iFAAiF,iEAAO;AACxF;AACA,OAAO,uBAAuB,+EAAU;AACxC,gFAAgF,4EAAY;AAC5F;AACA,OAAO;AACP,4BAA4B,uEAAU;AACtC;AACA;AACA;AACA,eAAe,iEAAO;AACtB,kBAAkB,iEAAO;AACzB,OAAO;AACP,4CAA4C,mFAAmB;AAC/D;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG,iBAAiB,4CAAK,eAAe,2EAAK;AAC7C;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEO;AACQ,uEAAQ,E","file":"x","sourcesContent":["\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/projects\",\n        function () {\n          return require(\"private-next-pages/projects.js\");\n        }\n      ]);\n    ","import React, { useState, useMemo } from 'react';\nimport styled from 'styled-components';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Column from '../atomic-ui/components/Column';\nimport Alert from '../atomic-ui/components/Alert';\nimport DatePicker from '../atomic-ui/components/DatePicker';\nimport Select from '../atomic-ui/components/Select';\nimport { useHelper } from '../hooks/useHelper';\nimport { useMutate } from '../hooks/useMutate';\nimport DefaultLayout from '../layouts/default';\nimport ProjectCard from '../components/ProjectCard';\nimport FilterBar from '../components/FilterBar';\nimport SearchBar from '../components/SearchBar';\nimport { updateUser } from '../store/actions/user';\nimport { onProjectLink, onProjectAdd, onProjectScreenshot } from '../store/helpers/project';\nimport { onUserLink } from '../store/helpers/user';\nimport queries from '../graphql/queries';\nimport { filters } from '../__mock__';\nconst TITLE = 'Проекты';\nconst Wrap = styled(Column).withConfig({\n  displayName: \"projects__Wrap\",\n  componentId: \"sc-3yxn9c-0\"\n})([\"margin-top:120px;margin-bottom:80px;@media only screen and (max-width:480px){margin-top:0;}\"]);\nconst Container = styled.aside.withConfig({\n  displayName: \"projects__Container\",\n  componentId: \"sc-3yxn9c-1\"\n})([\"display:grid;grid-template-columns:repeat(auto-fit,minmax(442px,1fr));grid-gap:var(--default-gap);@media only screen and (max-width:768px){grid-template-columns:repeat(auto-fit,minmax(285px,1fr));}\"]);\n\nconst Projects = ({\n  store,\n  categories\n}) => {\n  const recall = useHelper();\n  const mutate = useMutate();\n  const {\n    user,\n    documents\n  } = useSelector(state => ({\n    user: state.user,\n    documents: state.documents\n  }));\n  const dispatch = useDispatch();\n  const [date, onChangeDate] = useState();\n  const [select, onChangeSelect] = useState();\n  const [visibleFilter, setVisibleFilter] = useState(false);\n  const projects = useMemo(() => documents || store.projects, [documents, store]);\n  return /*#__PURE__*/React.createElement(DefaultLayout, {\n    title: TITLE\n  }, /*#__PURE__*/React.createElement(Wrap, null, /*#__PURE__*/React.createElement(SearchBar, {\n    onChangeFilter: () => setVisibleFilter(!visibleFilter)\n  }), /*#__PURE__*/React.createElement(FilterBar, {\n    isOpen: visibleFilter,\n    filters: [/*#__PURE__*/React.createElement(DatePicker, {\n      key: 0,\n      value: date,\n      placeholder: 'Дата публикации',\n      onChange: onChangeDate,\n      withNavigate: true\n    }), /*#__PURE__*/React.createElement(Select, {\n      key: 1,\n      options: categories,\n      placeholder: 'Раздел',\n      selected: select,\n      onChange: item => onChangeSelect(item)\n    })],\n    options: filters\n  }), /*#__PURE__*/React.createElement(Container, null, projects.length > 0 ? projects.map(project => {\n    var _user$projects, _project$company;\n\n    const owned = user === null || user === void 0 ? void 0 : (_user$projects = user.projects) === null || _user$projects === void 0 ? void 0 : _user$projects.find(candidate => candidate.id === project.id);\n    return /*#__PURE__*/React.createElement(ProjectCard, {\n      key: project.id,\n      project: project,\n      owned: owned,\n      liked: !!((user === null || user === void 0 ? void 0 : user.likedProjects) || []).find(item => item.id === project.id),\n      onLink: recall(onProjectLink, {\n        id: project.id,\n        auth: user,\n        owned\n      }),\n      onLike: (user === null || user === void 0 ? void 0 : user.email) && mutate(queries.LIKE_PROJECT, {\n        id: project.id\n      }, response => dispatch(updateUser(response.data.likeProject))),\n      onAdd: (user === null || user === void 0 ? void 0 : user.email) && recall(onProjectAdd, {\n        id: project.id\n      }),\n      onCompanyLink: recall(onUserLink, {\n        id: (_project$company = project.company) === null || _project$company === void 0 ? void 0 : _project$company.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        recipient: project.author,\n        query: queries.GET_USER_CHATS,\n        mutation: queries.SEND_MESSAGE\n      }),\n      onScreenshotClick: (_, key) => recall(onProjectScreenshot, {\n        screenshots: [project.preview, ...project.screenshots],\n        key\n      })()\n    });\n  }) : /*#__PURE__*/React.createElement(Alert, {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u043E\\u0432 \\u043D\\u0435\\u0442\"))));\n};\n\nexport var __N_SSP = true;\nexport default Projects;"]}}