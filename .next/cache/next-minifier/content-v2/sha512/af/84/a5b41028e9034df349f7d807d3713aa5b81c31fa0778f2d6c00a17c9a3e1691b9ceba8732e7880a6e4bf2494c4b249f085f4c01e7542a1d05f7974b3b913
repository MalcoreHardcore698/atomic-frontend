{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{\"07fs\":function(e,t,a){\"use strict\";var n=a(\"q1tI\"),o=a.n(n),l=a(\"vOnD\");const s=l.c.div.withConfig({displayName:\"FadeLoad__Wrap\",componentId:\"sc-1rdnrub-0\"})([\"opacity:0;transition:opacity 100ms ease;\",\"\"],(({isVisible:e})=>e&&Object(l.b)([\"opacity:1;\"])));t.a=({children:e})=>{const[t,a]=Object(n.useState)(!0),l=Object(n.useRef)();return Object(n.useEffect)((()=>{const e=new IntersectionObserver((e=>{e.forEach((e=>a(e.isIntersecting)))}));return e.observe(l.current),()=>e.unobserve(l.current)}),[]),o.a.createElement(s,{isVisible:t,ref:l},e)}},\"HL7+\":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/dashboard/users\",function(){return a(\"jNog\")}])},QX5T:function(e,t,a){\"use strict\";var n=a(\"q1tI\"),o=a.n(n),l=a(\"vOnD\"),s=a(\"VX74\"),r=a(\"7Cbv\"),i=a(\"8CDE\"),c=a(\"ZwIX\"),u=a(\"wZgm\"),d=a(\"auMy\"),E=a(\"QclZ\");const m=({callbackOnTop:e,callbackOnBottom:t,offset:a=50})=>{const[o,l]=Object(n.useState)(0);Object(n.useEffect)((()=>{const n=document.documentElement,s=()=>{if(!n)return;const s=n.scrollTop-o;t&&s>0&&n.scrollTop+n.clientHeight>=n.scrollHeight-a&&t(n.scrollTop,n.scrollHeight),e&&s<0&&n.scrollTop<=a&&e(n.scrollTop,n.scrollHeight),l(n.scrollTop)};return n&&window.addEventListener(\"scroll\",s),()=>{n&&window.removeEventListener(\"scroll\",s)}}),[e,t,a])};var b=a(\"X+Rt\"),h=a(\"p9yE\"),f=a(\"RoTl\"),p=a(\"EYtC\"),_=a(\"coMr\"),v=a(\"586Q\");const S=Object(l.c)(i.a).withConfig({displayName:\"content__Wrap\",componentId:\"sc-1afm75p-0\"})([\"margin-top:120px;margin-bottom:80px;\",\" @media only screen and (max-width:480px){margin-top:0;}\"],(({clear:e})=>e&&Object(l.b)([\"margin:0;\"])));t.a=({title:e,store:t,query:a,handle:l,filters:i,options:T,research:C,scaffold:O,dashboard:j,variables:w={},limit:g=6,startOffset:y=6,initialize:A,children:D})=>{const R=j?h.a:b.a,[U,M]=Object(n.useState)(),[N,H]=Object(n.useState)(),[L,k]=Object(n.useState)(null),[P,x]=Object(n.useState)(!1),[I,G]=Object(n.useState)(!1),[X,q]=Object(n.useState)(y),[V,Q]=Object(n.useState)((null===t||void 0===t?void 0:t.documents)||[]),[J,{data:z,loading:B,error:F,refetch:K}]=Object(s.useLazyQuery)(a),[Z,{data:W,loading:Y,error:$,refetch:ee}]=Object(s.useLazyQuery)(a),te=e=>{if(Q([]),e)k(e),J({variables:{...w,search:e,offset:0,limit:y}});else{const e={...w,offset:0,limit:g};k(null),ee?ee(e):Z({variables:e})}q(0)};return m({callbackOnBottom:async()=>{if(!Y&&!P){x(!0);const e={...w,offset:X,limit:g};L?await K(w):ee?(await ee(e),q((e=>e+g))):await Z({variables:e}),x(!1)}},offset:850}),Object(n.useEffect)((()=>{A&&Z({variables:{offset:X,limit:g}})}),[A]),Object(n.useEffect)((()=>{C&&te(C)}),[C]),Object(n.useEffect)((()=>{const e=!L&&!Y&&W||L&&!B&&z;e&&Q((t=>[...t,...e[Object.keys(e)[0]]]))}),[L,Y,B,W,z]),o.a.createElement(R,{title:e,scaffold:O},o.a.createElement(S,{clear:O||j},!O&&!j&&o.a.createElement(p.a,{onChangeFilter:()=>G(!I),onSubmit:te}),j&&l&&o.a.createElement(_.a,{title:e,icon:l.icon,buttonCreateText:l.buttonCreateText,onCreate:l.onCreate,onChangeVisibleFilter:()=>G(!I),onChangeDisplayMethod:l.onChangeDisplayMethod}),(i||T)&&o.a.createElement(f.a,{isOpen:I,filters:i.map((e=>{switch(e.type){case\"DATEPICKER\":return o.a.createElement(u.a,{key:Object(r.a)(),value:U,placeholder:e.placeholder||\"\\u0414\\u0430\\u0442\\u0430 \\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u0430\\u0446\\u0438\\u0438\",onChange:M,withNavigate:!0});case\"SELECT\":return o.a.createElement(E.a,{key:Object(r.a)(),options:e.options,placeholder:e.placeholder||\"\\u0420\\u0430\\u0437\\u0434\\u0435\\u043b\",selected:N,onChange:e=>H(e)});default:return null}})),options:T}),o.a.createElement(D,{documents:V}),L&&!B&&0===V.length&&o.a.createElement(c.a,{style:{width:\"100%\",textAlign:\"center\"}},\"\\u041f\\u043e \\u0432\\u0430\\u0448\\u0435\\u043c\\u0443 \\u0437\\u0430\\u043f\\u0440\\u043e\\u0441\\u0443 \\u043d\\u0438\\u0447\\u0435\\u0433\\u043e \\u043d\\u0435 \\u043d\\u0430\\u0439\\u0434\\u0435\\u043d\\u043e\"),(L&&F||!L&&$)&&o.a.createElement(c.a,{appearance:\"error\",style:{width:\"100%\",textAlign:\"center\"}},\"\\u041d\\u0435 \\u0443\\u0434\\u0430\\u043b\\u043e\\u0441\\u044c \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435\"),(P||!$&&Y||L&&!F&&B)&&o.a.createElement(v.d,null,o.a.createElement(d.a,null)),!L&&!Y&&!B&&!F&&0===V.length&&o.a.createElement(c.a,{style:{width:\"100%\",textAlign:\"center\"}},\"\\u0414\\u0430\\u043d\\u043d\\u044b\\u0445 \\u043d\\u0435\\u0442\")))}},jNog:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"__N_SSP\",(function(){return _}));var n=a(\"q1tI\"),o=a.n(n),l=a(\"/MKj\"),s=a(\"7BXr\"),r=a(\"EJJs\"),i=a(\"e3uv\"),c=a(\"ApjV\"),u=a(\"QX5T\"),d=a(\"TsNn\"),E=a(\"VP1n\"),m=a(\"07fs\"),b=a(\"rP4V\"),h=a(\"j8/+\"),f=a(\"+EEm\"),p=a(\"u2Cb\");var _=!0;t.default=({store:e})=>{const t=Object(c.b)(),{user:a,documents:_}=Object(l.c)((e=>({user:e.user,documents:e.documents}))),v=Object(l.b)(),[S,T]=Object(n.useState)(\"grid\"),C=Object(n.useMemo)((()=>a&&\"ADMIN\"===a.role.name),[a]),O=Object(n.useMemo)((()=>e.roles),[e]);return Object(n.useEffect)((()=>{v(Object(h.a)(null))}),[]),o.a.createElement(u.a,{title:\"\\u041f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u0438\",filters:[{type:\"DATEPICKER\",placeholder:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0430\\u0440\\u0446\\u0438\\u0438\"},{type:\"SELECT\",placeholder:\"\\u041a\\u043e\\u043c\\u043f\\u0430\\u043d\\u0438\\u044f\",options:[]}],options:[{label:\"\\u041a\\u043e\\u043c\\u043f\\u0430\\u043d\\u0438\\u044f\",value:\"company\"},{label:\"\\u0423\\u0447\\u0430\\u0441\\u0442\\u043d\\u0438\\u043a\\u0438\",value:\"members\"},{label:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0430\\u0440\\u0446\\u0438\\u0438\",value:\"createdAt\"}],handle:{icon:\"user2\",buttonCreateText:\"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u043f\\u043e\\u043b\\u044c\\u0437\\u043e\\u0432\\u0430\\u0442\\u0435\\u043b\\u044f\",onCreate:t(b.d,{roles:O,canEditRole:C,mutation:p.a.CREATE_USER}),onChangeDisplayMethod:e=>T(e.value)},limit:12,startOffset:12,bottomScrollOffset:0,query:p.a.GET_USERS,store:{documents:_||e.users},dashboard:!0},(({documents:e})=>\"list\"===S?o.a.createElement(r.b,{data:e,template:i.a.user,onChecked:()=>{},onClick:e=>{const n=e.name===a.name;return t(b.i,{id:e.email,auth:null===a||void 0===a?void 0:a.email,owned:n,queries:{userChats:p.a.GET_USER_CHATS,chat:p.a.GET_CHAT},mutations:{addUserChat:p.a.ADD_USER_CHAT,sendMessage:p.a.SEND_MESSAGE}})()},onDelete:e=>t(b.e,{id:e.email,user:e,auth:null===a||void 0===a?void 0:a.email,mutation:p.a.DELETE_USER})(),onEdit:e=>t(b.f,{user:e.email,auth:null===a||void 0===a?void 0:a.email,roles:O,canEditRole:C,mutations:{update:p.a.UPDATE_USER,del:p.a.DELETE_USER,changePassword:p.a.UPDATE_USER}})(),style:{overflowX:\"auto\",width:\"calc(100vw - 290px)\"}}):o.a.createElement(s.a,null,e.map((e=>{const n=e.name===a.name;return o.a.createElement(m.a,{key:e.email},o.a.createElement(E.a,null,o.a.createElement(d.a,{user:e,onChecked:()=>{},onChat:a.email&&t(f.a,{id:e.email,auth:null===a||void 0===a?void 0:a.email,queries:{userChats:p.a.GET_USER_CHATS,chat:p.a.GET_CHAT},mutations:{addUserChat:p.a.ADD_USER_CHAT,sendMessage:p.a.SEND_MESSAGE}}),onLink:t(b.i,{id:e.email,auth:null===a||void 0===a?void 0:a.email,owned:n,queries:{userChats:p.a.GET_USER_CHATS,chat:p.a.GET_CHAT},mutations:{addUserChat:p.a.ADD_USER_CHAT,sendMessage:p.a.SEND_MESSAGE}}),onAboutMore:t(b.a,{user:e}),onDelete:t(b.e,{id:e.email,user:e,auth:null===a||void 0===a?void 0:a.email,mutation:p.a.DELETE_USER}),onEdit:t(b.f,{user:e.email,auth:null===a||void 0===a?void 0:a.email,roles:O,canEditRole:C,mutations:{update:p.a.UPDATE_USER,del:p.a.DELETE_USER,changePassword:p.a.UPDATE_USER}}),preview:!0})))})))))}}},[[\"HL7+\",0,2,1,3,4,5,6,7,8]]]);","map":{"version":3,"sources":["static/chunks/pages/dashboard/users-d82f947aa0e13c832cee.js"],"names":["_N_E","window","push","07fs","module","__webpack_exports__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","styled_components__WEBPACK_IMPORTED_MODULE_1__","Wrap","div","withConfig","displayName","componentId","isVisible","Object","children","setVisible","domRef","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","observe","current","unobserve","a","createElement","ref","HL7+","exports","__NEXT_P","QX5T","react","react_default","styled_components_browser_esm","client","v4","Column","Alert","DatePicker","Spinner","Select","useInfiniteScroll","callbackOnTop","callbackOnBottom","offset","lastScrollTop","setLastScrollTop","scrollElement","document","documentElement","onScroll","dir","scrollTop","clientHeight","scrollHeight","addEventListener","removeEventListener","layouts_default","layouts_dashboard","FilterBar","SearchBar","HandleBar","Styled","clear","title","store","query","handle","filters","options","research","scaffold","dashboard","variables","limit","startOffset","initialize","Layout","date","onChangeDate","select","onChangeSelect","search","setSearch","isFetching","setFetching","visibleFilter","setVisibleFilter","setOffset","documents","setDocuments","loadDocumentsBySearch","data","dataBySearch","loading","loadingBySearch","error","errorBySearch","refetch","refetchBySearch","loadDocuments","onSearch","value","result","async","prev","keys","onChangeFilter","onSubmit","icon","buttonCreateText","onCreate","onChangeVisibleFilter","onChangeDisplayMethod","isOpen","map","filter","type","key","placeholder","onChange","withNavigate","selected","item","length","style","width","textAlign","appearance","jNog","r","d","__N_SSP","react_redux__WEBPACK_IMPORTED_MODULE_1__","_atomic_ui_components_Grid__WEBPACK_IMPORTED_MODULE_2__","_atomic_ui_components_Table__WEBPACK_IMPORTED_MODULE_3__","_atomic_ui_components_Table_templates__WEBPACK_IMPORTED_MODULE_4__","_hooks_useHelper__WEBPACK_IMPORTED_MODULE_5__","_layouts_content__WEBPACK_IMPORTED_MODULE_6__","_components_UserCard__WEBPACK_IMPORTED_MODULE_7__","_components_LazyLoad__WEBPACK_IMPORTED_MODULE_8__","_components_FadeLoad__WEBPACK_IMPORTED_MODULE_9__","_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__","_store_actions_documents__WEBPACK_IMPORTED_MODULE_11__","_store_helpers__WEBPACK_IMPORTED_MODULE_12__","_graphql_queries__WEBPACK_IMPORTED_MODULE_13__","recall","user","state","dispatch","displayMethod","canEditRole","role","name","roles","label","mutation","CREATE_USER","bottomScrollOffset","GET_USERS","users","template","onChecked","onClick","author","owned","id","email","auth","queries","userChats","GET_USER_CHATS","chat","GET_CHAT","mutations","addUserChat","ADD_USER_CHAT","sendMessage","SEND_MESSAGE","onDelete","DELETE_USER","onEdit","update","UPDATE_USER","del","changePassword","overflowX","onChat","onLink","onAboutMore","preview"],"mappings":"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"},"name":"static/chunks/pages/dashboard/users-d82f947aa0e13c832cee.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[27],{\n\n/***/ \"07fs\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export Wrap */\n/* unused harmony export FadeLoad */\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"vOnD\");\n\n\nconst Wrap = styled_components__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"c\"].div.withConfig({\n  displayName: \"FadeLoad__Wrap\",\n  componentId: \"sc-1rdnrub-0\"\n})([\"opacity:0;transition:opacity 100ms ease;\", \"\"], ({\n  isVisible\n}) => isVisible && Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[/* css */ \"b\"])([\"opacity:1;\"]));\nconst FadeLoad = ({\n  children\n}) => {\n  const [isVisible, setVisible] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(true);\n  const domRef = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useRef\"])();\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    const observer = new IntersectionObserver(entries => {\n      entries.forEach(entry => setVisible(entry.isIntersecting));\n    });\n    observer.observe(domRef.current);\n    return () => observer.unobserve(domRef.current);\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Wrap, {\n    isVisible: isVisible,\n    ref: domRef\n  }, children);\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (FadeLoad);\n\n/***/ }),\n\n/***/ \"HL7+\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/dashboard/users\",\n        function () {\n          return __webpack_require__(\"jNog\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"QX5T\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js\nvar styled_components_browser_esm = __webpack_require__(\"vOnD\");\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/index.js\nvar client = __webpack_require__(\"VX74\");\n\n// EXTERNAL MODULE: ./node_modules/uuid/dist/esm-browser/v4.js + 4 modules\nvar v4 = __webpack_require__(\"7Cbv\");\n\n// EXTERNAL MODULE: ./atomic-ui/components/Column/index.js\nvar Column = __webpack_require__(\"8CDE\");\n\n// EXTERNAL MODULE: ./atomic-ui/components/Alert/index.js\nvar Alert = __webpack_require__(\"ZwIX\");\n\n// EXTERNAL MODULE: ./atomic-ui/components/DatePicker/index.js + 5 modules\nvar DatePicker = __webpack_require__(\"wZgm\");\n\n// EXTERNAL MODULE: ./atomic-ui/components/Spinner/index.js\nvar Spinner = __webpack_require__(\"auMy\");\n\n// EXTERNAL MODULE: ./atomic-ui/components/Select/index.js + 22 modules\nvar Select = __webpack_require__(\"QclZ\");\n\n// CONCATENATED MODULE: ./hooks/useInfiniteScroll.js\n\nconst useInfiniteScroll = ({\n  callbackOnTop,\n  callbackOnBottom,\n  offset = 50\n}) => {\n  const [lastScrollTop, setLastScrollTop] = Object(react[\"useState\"])(0);\n  Object(react[\"useEffect\"])(() => {\n    const scrollElement = document.documentElement;\n\n    const onScroll = () => {\n      if (!scrollElement) return;\n      const dir = scrollElement.scrollTop - lastScrollTop;\n\n      if (callbackOnBottom && dir > 0 && scrollElement.scrollTop + scrollElement.clientHeight >= scrollElement.scrollHeight - offset) {\n        callbackOnBottom(scrollElement.scrollTop, scrollElement.scrollHeight);\n      }\n\n      if (callbackOnTop && dir < 0 && scrollElement.scrollTop <= offset) {\n        callbackOnTop(scrollElement.scrollTop, scrollElement.scrollHeight);\n      }\n\n      setLastScrollTop(scrollElement.scrollTop);\n    };\n\n    if (scrollElement) {\n      window.addEventListener('scroll', onScroll);\n    }\n\n    return () => {\n      if (scrollElement) {\n        window.removeEventListener('scroll', onScroll);\n      }\n    };\n  }, [callbackOnTop, callbackOnBottom, offset]);\n};\n/* harmony default export */ var hooks_useInfiniteScroll = (useInfiniteScroll);\n// EXTERNAL MODULE: ./layouts/default.js + 3 modules\nvar layouts_default = __webpack_require__(\"X+Rt\");\n\n// EXTERNAL MODULE: ./layouts/dashboard/index.js + 2 modules\nvar layouts_dashboard = __webpack_require__(\"p9yE\");\n\n// EXTERNAL MODULE: ./components/FilterBar/index.js\nvar FilterBar = __webpack_require__(\"RoTl\");\n\n// EXTERNAL MODULE: ./components/SearchBar/index.js\nvar SearchBar = __webpack_require__(\"EYtC\");\n\n// EXTERNAL MODULE: ./components/HandleBar/index.js\nvar HandleBar = __webpack_require__(\"coMr\");\n\n// EXTERNAL MODULE: ./components/Styled/index.js\nvar Styled = __webpack_require__(\"586Q\");\n\n// CONCATENATED MODULE: ./layouts/content.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst Wrap = Object(styled_components_browser_esm[\"c\" /* default */])(Column[\"a\" /* default */]).withConfig({\n  displayName: \"content__Wrap\",\n  componentId: \"sc-1afm75p-0\"\n})([\"margin-top:120px;margin-bottom:80px;\", \" @media only screen and (max-width:480px){margin-top:0;}\"], ({\n  clear\n}) => clear && Object(styled_components_browser_esm[\"b\" /* css */])([\"margin:0;\"]));\n\nconst ContentLayout = ({\n  title,\n  store,\n  query,\n  handle,\n  filters,\n  options,\n  research,\n  scaffold,\n  dashboard,\n  variables = {},\n  limit = 6,\n  startOffset = 6,\n  initialize,\n  children\n}) => {\n  const Layout = dashboard ? layouts_dashboard[\"a\" /* default */] : layouts_default[\"a\" /* default */];\n  const [date, onChangeDate] = Object(react[\"useState\"])();\n  const [select, onChangeSelect] = Object(react[\"useState\"])();\n  const [search, setSearch] = Object(react[\"useState\"])(null);\n  const [isFetching, setFetching] = Object(react[\"useState\"])(false);\n  const [visibleFilter, setVisibleFilter] = Object(react[\"useState\"])(false);\n  const [offset, setOffset] = Object(react[\"useState\"])(startOffset);\n  const [documents, setDocuments] = Object(react[\"useState\"])((store === null || store === void 0 ? void 0 : store.documents) || []);\n  const [loadDocumentsBySearch, {\n    data: dataBySearch,\n    loading: loadingBySearch,\n    error: errorBySearch,\n    refetch: refetchBySearch\n  }] = Object(client[\"useLazyQuery\"])(query);\n  const [loadDocuments, {\n    data,\n    loading,\n    error,\n    refetch\n  }] = Object(client[\"useLazyQuery\"])(query);\n\n  const getFilters = () => {\n    return filters.map(filter => {\n      switch (filter.type) {\n        case 'DATEPICKER':\n          return /*#__PURE__*/react_default.a.createElement(DatePicker[\"a\" /* default */], {\n            key: Object(v4[\"a\" /* default */])(),\n            value: date,\n            placeholder: filter.placeholder || 'Дата публикации',\n            onChange: onChangeDate,\n            withNavigate: true\n          });\n\n        case 'SELECT':\n          return /*#__PURE__*/react_default.a.createElement(Select[\"a\" /* default */], {\n            key: Object(v4[\"a\" /* default */])(),\n            options: filter.options,\n            placeholder: filter.placeholder || 'Раздел',\n            selected: select,\n            onChange: item => onChangeSelect(item)\n          });\n\n        default:\n          return null;\n      }\n    });\n  };\n\n  const onSearch = value => {\n    setDocuments([]);\n\n    if (value) {\n      setSearch(value);\n      loadDocumentsBySearch({\n        variables: { ...variables,\n          search: value,\n          offset: 0,\n          limit: startOffset\n        }\n      });\n    } else {\n      const result = { ...variables,\n        offset: 0,\n        limit\n      };\n      setSearch(null);\n      if (refetch) refetch(result);else loadDocuments({\n        variables: result\n      });\n    }\n\n    setOffset(0);\n  };\n\n  useInfiniteScroll({\n    callbackOnBottom: async () => {\n      const updateOffset = () => setOffset(prev => prev + limit);\n\n      if (!loading && !isFetching) {\n        setFetching(true);\n        const result = { ...variables,\n          offset,\n          limit\n        };\n\n        if (search) {\n          await refetchBySearch(variables);\n        } else {\n          if (refetch) {\n            await refetch(result);\n            updateOffset();\n          } else {\n            await loadDocuments({\n              variables: result\n            });\n          }\n        }\n\n        setFetching(false);\n      }\n    },\n    offset: 850\n  });\n  Object(react[\"useEffect\"])(() => {\n    if (initialize) loadDocuments({\n      variables: {\n        offset,\n        limit\n      }\n    });\n  }, [initialize]);\n  Object(react[\"useEffect\"])(() => {\n    if (research) onSearch(research);\n  }, [research]);\n  Object(react[\"useEffect\"])(() => {\n    const isCommon = !search && !loading && data;\n    const isSearch = search && !loadingBySearch && dataBySearch;\n    const result = isCommon || isSearch;\n    if (result) setDocuments(prev => [...prev, ...result[Object.keys(result)[0]]]);\n  }, [search, loading, loadingBySearch, data, dataBySearch]);\n  return /*#__PURE__*/react_default.a.createElement(Layout, {\n    title: title,\n    scaffold: scaffold\n  }, /*#__PURE__*/react_default.a.createElement(Wrap, {\n    clear: scaffold || dashboard\n  }, !scaffold && !dashboard && /*#__PURE__*/react_default.a.createElement(SearchBar[\"a\" /* default */], {\n    onChangeFilter: () => setVisibleFilter(!visibleFilter),\n    onSubmit: onSearch\n  }), dashboard && handle && /*#__PURE__*/react_default.a.createElement(HandleBar[\"a\" /* default */], {\n    title: title,\n    icon: handle.icon,\n    buttonCreateText: handle.buttonCreateText,\n    onCreate: handle.onCreate,\n    onChangeVisibleFilter: () => setVisibleFilter(!visibleFilter),\n    onChangeDisplayMethod: handle.onChangeDisplayMethod\n  }), (filters || options) && /*#__PURE__*/react_default.a.createElement(FilterBar[\"a\" /* default */], {\n    isOpen: visibleFilter,\n    filters: getFilters(),\n    options: options\n  }), react_default.a.createElement(children, {\n    documents\n  }), search && !loadingBySearch && documents.length === 0 && /*#__PURE__*/react_default.a.createElement(Alert[\"a\" /* default */], {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041F\\u043E \\u0432\\u0430\\u0448\\u0435\\u043C\\u0443 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443 \\u043D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"), (search && errorBySearch || !search && error) && /*#__PURE__*/react_default.a.createElement(Alert[\"a\" /* default */], {\n    appearance: 'error',\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"), (isFetching || !error && loading || search && !errorBySearch && loadingBySearch) && /*#__PURE__*/react_default.a.createElement(Styled[\"d\" /* LowerLoader */], null, /*#__PURE__*/react_default.a.createElement(Spinner[\"a\" /* default */], null)), !search && !loading && !loadingBySearch && !errorBySearch && documents.length === 0 && /*#__PURE__*/react_default.a.createElement(Alert[\"a\" /* default */], {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043D\\u0435\\u0442\")));\n};\n\n/* harmony default export */ var content = __webpack_exports__[\"a\"] = (ContentLayout);\n\n/***/ }),\n\n/***/ \"jNog\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__N_SSP\", function() { return __N_SSP; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"/MKj\");\n/* harmony import */ var _atomic_ui_components_Grid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"7BXr\");\n/* harmony import */ var _atomic_ui_components_Table__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"EJJs\");\n/* harmony import */ var _atomic_ui_components_Table_templates__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"e3uv\");\n/* harmony import */ var _hooks_useHelper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"ApjV\");\n/* harmony import */ var _layouts_content__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"QX5T\");\n/* harmony import */ var _components_UserCard__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"TsNn\");\n/* harmony import */ var _components_LazyLoad__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"VP1n\");\n/* harmony import */ var _components_FadeLoad__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"07fs\");\n/* harmony import */ var _store_helpers_user__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"rP4V\");\n/* harmony import */ var _store_actions_documents__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"j8/+\");\n/* harmony import */ var _store_helpers__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"+EEm\");\n/* harmony import */ var _graphql_queries__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"u2Cb\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst TITLE = 'Пользователи';\nconst START_OFFSET = 12;\nconst LIMIT = 12;\n\nconst Users = ({\n  store\n}) => {\n  const recall = Object(_hooks_useHelper__WEBPACK_IMPORTED_MODULE_5__[/* useHelper */ \"b\"])();\n  const {\n    user,\n    documents\n  } = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useSelector */ \"c\"])(state => ({\n    user: state.user,\n    documents: state.documents\n  }));\n  const dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useDispatch */ \"b\"])();\n  const [displayMethod, onChangeDisplayMethod] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])('grid');\n  const canEditRole = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => user && user.role.name === 'ADMIN', [user]);\n  const roles = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => store.roles, [store]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    dispatch(Object(_store_actions_documents__WEBPACK_IMPORTED_MODULE_11__[/* setDocuments */ \"a\"])(null));\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_layouts_content__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"], {\n    title: TITLE,\n    filters: [{\n      type: 'DATEPICKER',\n      placeholder: 'Дата регистарции'\n    }, {\n      type: 'SELECT',\n      placeholder: 'Компания',\n      options: []\n    }],\n    options: [{\n      label: 'Компания',\n      value: 'company'\n    }, {\n      label: 'Участники',\n      value: 'members'\n    }, {\n      label: 'Дата регистарции',\n      value: 'createdAt'\n    }],\n    handle: {\n      icon: 'user2',\n      buttonCreateText: 'Создать пользователя',\n      onCreate: recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserCreate */ \"d\"], {\n        roles,\n        canEditRole,\n        mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].CREATE_USER\n      }),\n      onChangeDisplayMethod: item => onChangeDisplayMethod(item.value)\n    },\n    limit: LIMIT,\n    startOffset: START_OFFSET,\n    bottomScrollOffset: 0,\n    query: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_USERS,\n    store: {\n      documents: documents || store.users\n    },\n    dashboard: true\n  }, ({\n    documents\n  }) => displayMethod === 'list' ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Table__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"b\"], {\n    data: documents,\n    template: _atomic_ui_components_Table_templates__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"].user,\n    onChecked: () => {},\n    onClick: author => {\n      const owned = author.name === user.name;\n      return recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserLink */ \"i\"], {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned,\n        queries: {\n          userChats: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_USER_CHATS,\n          chat: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_CHAT\n        },\n        mutations: {\n          addUserChat: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].ADD_USER_CHAT,\n          sendMessage: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].SEND_MESSAGE\n        }\n      })();\n    },\n    onDelete: author => recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserDelete */ \"e\"], {\n      id: author.email,\n      user: author,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].DELETE_USER\n    })(),\n    onEdit: author => recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserEdit */ \"f\"], {\n      user: author.email,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      roles,\n      canEditRole,\n      mutations: {\n        update: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].UPDATE_USER,\n        del: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].DELETE_USER,\n        changePassword: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].UPDATE_USER\n      }\n    })(),\n    style: {\n      overflowX: 'auto',\n      width: 'calc(100vw - 290px)'\n    }\n  }) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Grid__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"], null, documents.map(author => {\n    const owned = author.name === user.name;\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_FadeLoad__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"], {\n      key: author.email\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_LazyLoad__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_UserCard__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"], {\n      user: author,\n      onChecked: () => {},\n      onChat: user.email && recall(_store_helpers__WEBPACK_IMPORTED_MODULE_12__[/* onChat */ \"a\"], {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        queries: {\n          userChats: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_USER_CHATS,\n          chat: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_CHAT\n        },\n        mutations: {\n          addUserChat: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].ADD_USER_CHAT,\n          sendMessage: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].SEND_MESSAGE\n        }\n      }),\n      onLink: recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserLink */ \"i\"], {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned,\n        queries: {\n          userChats: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_USER_CHATS,\n          chat: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].GET_CHAT\n        },\n        mutations: {\n          addUserChat: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].ADD_USER_CHAT,\n          sendMessage: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].SEND_MESSAGE\n        }\n      }),\n      onAboutMore: recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserAboutMore */ \"a\"], {\n        user: author\n      }),\n      onDelete: recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserDelete */ \"e\"], {\n        id: author.email,\n        user: author,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].DELETE_USER\n      }),\n      onEdit: recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_10__[/* onUserEdit */ \"f\"], {\n        user: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        roles,\n        canEditRole,\n        mutations: {\n          update: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].UPDATE_USER,\n          del: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].DELETE_USER,\n          changePassword: _graphql_queries__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"a\"].UPDATE_USER\n        }\n      }),\n      preview: true\n    })));\n  })));\n};\n\nvar __N_SSP = true;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Users);\n\n/***/ })\n\n},[[\"HL7+\",0,2,1,3,4,5,6,7,8]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\components\\FadeLoad\\index.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fdashboard%2Fusers&absolutePagePath=private-next-pages%2Fdashboard%2Fusers.js!","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\hooks\\useInfiniteScroll.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\layouts\\content.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\pages\\dashboard\\users.js"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2D;AACX;AACzC,aAAa,iEAAM;AAC1B;AACA;AACA,CAAC,cAAc,8BAA8B;AAC7C;AACA,CAAC,kBAAkB,qEAAG,aAAa;AAC5B;AACP;AACA,CAAC;AACD,kCAAkC,sDAAQ;AAC1C,iBAAiB,oDAAM;AACvB,EAAE,uDAAS;AACX;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH,sBAAsB,4CAAK;AAC3B;AACA;AACA,GAAG;AACH;AACe,iEAAQ,E;;;;;;;;ACxBvB;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,MAAuC;AAChE;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACN4C;AACrC;AACP;AACA;AACA;AACA,CAAC;AACD,4CAA4C,yBAAQ;AACpD,EAAE,0BAAS;AACX;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACe,6EAAiB,E;;;;;;;;;;;;;;;;;;;;ACpCmB;AACH;AACG;AACzB;AAC0B;AACF;AACU;AACN;AACF;AACW;AAChB;AACL;AACM;AACA;AACA;AACG;AACnD,aAAa,wDAAM,CAAC,yBAAM;AAC1B;AACA;AACA,CAAC,qBAAqB,mBAAmB,8CAA8C,cAAc;AACrG;AACA,CAAC,cAAc,oDAAG,YAAY;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,CAAC;AACD,6BAA6B,oCAAe,GAAG,kCAAa;AAC5D,+BAA+B,yBAAQ;AACvC,mCAAmC,yBAAQ;AAC3C,8BAA8B,yBAAQ;AACtC,oCAAoC,yBAAQ;AAC5C,4CAA4C,yBAAQ;AACpD,8BAA8B,yBAAQ;AACtC,oCAAoC,yBAAQ;AAC5C;AACA;AACA;AACA;AACA;AACA,GAAG,IAAI,8BAAY;AACnB;AACA;AACA;AACA;AACA;AACA,GAAG,IAAI,8BAAY;;AAEnB;AACA;AACA;AACA;AACA,8BAA8B,eAAK,eAAe,6BAAU;AAC5D,iBAAiB,6BAAE;AACnB;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA,8BAA8B,eAAK,eAAe,yBAAM;AACxD,iBAAiB,6BAAE;AACnB;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,sBAAsB;AACtB;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA,OAAO;AACP;;AAEA;AACA;;AAEA,EAAE,iBAAiB;AACnB;AACA;;AAEA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,EAAE,0BAAS;AACX;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,EAAE,0BAAS;AACX;AACA,GAAG;AACH,EAAE,0BAAS;AACX;AACA;AACA;AACA;AACA,GAAG;AACH,sBAAsB,eAAK;AAC3B;AACA;AACA,GAAG,eAAe,eAAK;AACvB;AACA,GAAG,0CAA0C,eAAK,eAAe,4BAAS;AAC1E;AACA;AACA,GAAG,uCAAuC,eAAK,eAAe,4BAAS;AACvE;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,wCAAwC,eAAK,eAAe,4BAAS;AACxE;AACA;AACA;AACA,GAAG,GAAG,eAAK;AACX;AACA,GAAG,wEAAwE,eAAK,eAAe,wBAAK;AACpG;AACA;AACA;AACA;AACA,GAAG,8PAA8P,eAAK,eAAe,wBAAK;AAC1R;AACA;AACA;AACA;AACA;AACA,GAAG,2PAA2P,eAAK,eAAe,6BAAW,qBAAqB,eAAK,eAAe,0BAAO,8GAA8G,eAAK,eAAe,wBAAK;AACpd;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEe,oFAAa,E;;;;;;;;ACvM5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4D;AACL;AACJ;AACE;AACc;AACjB;AACA;AACD;AACA;AACA;AAC8D;AAClD;AAChB;AACD;AAC5C;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD,iBAAiB,0EAAS;AAC1B;AACA;AACA;AACA,GAAG,GAAG,uEAAW;AACjB;AACA;AACA,GAAG;AACH,mBAAmB,uEAAW;AAC9B,iDAAiD,sDAAQ;AACzD,sBAAsB,qDAAO;AAC7B,gBAAgB,qDAAO;AACvB,EAAE,uDAAS;AACX,aAAa,sFAAY;AACzB,GAAG;AACH,sBAAsB,4CAAK,eAAe,gEAAa;AACvD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,uBAAuB,yEAAY;AACnC;AACA;AACA,kBAAkB,iEAAO;AACzB,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA;AACA,WAAW,iEAAO;AAClB;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA,GAAG,6CAA6C,4CAAK,eAAe,2EAAK;AACzE;AACA,cAAc,qFAAS;AACvB,uBAAuB;AACvB;AACA;AACA,oBAAoB,uEAAU;AAC9B;AACA;AACA;AACA;AACA,qBAAqB,iEAAO;AAC5B,gBAAgB,iEAAO;AACvB,SAAS;AACT;AACA,uBAAuB,iEAAO;AAC9B,uBAAuB,iEAAO;AAC9B;AACA,OAAO;AACP,KAAK;AACL,+BAA+B,yEAAY;AAC3C;AACA;AACA;AACA,gBAAgB,iEAAO;AACvB,KAAK;AACL,6BAA6B,uEAAU;AACvC;AACA;AACA;AACA;AACA;AACA,gBAAgB,iEAAO;AACvB,aAAa,iEAAO;AACpB,wBAAwB,iEAAO;AAC/B;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG,iBAAiB,4CAAK,eAAe,0EAAI;AAC5C;AACA,wBAAwB,4CAAK,eAAe,oEAAQ;AACpD;AACA,KAAK,eAAe,4CAAK,eAAe,oEAAQ,qBAAqB,4CAAK,eAAe,oEAAQ;AACjG;AACA,yBAAyB;AACzB,mCAAmC,8DAAM;AACzC;AACA;AACA;AACA,qBAAqB,iEAAO;AAC5B,gBAAgB,iEAAO;AACvB,SAAS;AACT;AACA,uBAAuB,iEAAO;AAC9B,uBAAuB,iEAAO;AAC9B;AACA,OAAO;AACP,qBAAqB,uEAAU;AAC/B;AACA;AACA;AACA;AACA,qBAAqB,iEAAO;AAC5B,gBAAgB,iEAAO;AACvB,SAAS;AACT;AACA,uBAAuB,iEAAO;AAC9B,uBAAuB,iEAAO;AAC9B;AACA,OAAO;AACP,0BAA0B,4EAAe;AACzC;AACA,OAAO;AACP,uBAAuB,yEAAY;AACnC;AACA;AACA;AACA,kBAAkB,iEAAO;AACzB,OAAO;AACP,qBAAqB,uEAAU;AAC/B;AACA;AACA;AACA;AACA;AACA,kBAAkB,iEAAO;AACzB,eAAe,iEAAO;AACtB,0BAA0B,iEAAO;AACjC;AACA,OAAO;AACP;AACA,KAAK;AACL,GAAG;AACH;;AAEO;AACQ,oEAAK,E","file":"x","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport styled, { css } from 'styled-components';\nexport const Wrap = styled.div.withConfig({\n  displayName: \"FadeLoad__Wrap\",\n  componentId: \"sc-1rdnrub-0\"\n})([\"opacity:0;transition:opacity 100ms ease;\", \"\"], ({\n  isVisible\n}) => isVisible && css([\"opacity:1;\"]));\nexport const FadeLoad = ({\n  children\n}) => {\n  const [isVisible, setVisible] = useState(true);\n  const domRef = useRef();\n  useEffect(() => {\n    const observer = new IntersectionObserver(entries => {\n      entries.forEach(entry => setVisible(entry.isIntersecting));\n    });\n    observer.observe(domRef.current);\n    return () => observer.unobserve(domRef.current);\n  }, []);\n  return /*#__PURE__*/React.createElement(Wrap, {\n    isVisible: isVisible,\n    ref: domRef\n  }, children);\n};\nexport default FadeLoad;","\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/dashboard/users\",\n        function () {\n          return require(\"private-next-pages/dashboard/users.js\");\n        }\n      ]);\n    ","import { useState, useEffect } from 'react';\nexport const useInfiniteScroll = ({\n  callbackOnTop,\n  callbackOnBottom,\n  offset = 50\n}) => {\n  const [lastScrollTop, setLastScrollTop] = useState(0);\n  useEffect(() => {\n    const scrollElement = document.documentElement;\n\n    const onScroll = () => {\n      if (!scrollElement) return;\n      const dir = scrollElement.scrollTop - lastScrollTop;\n\n      if (callbackOnBottom && dir > 0 && scrollElement.scrollTop + scrollElement.clientHeight >= scrollElement.scrollHeight - offset) {\n        callbackOnBottom(scrollElement.scrollTop, scrollElement.scrollHeight);\n      }\n\n      if (callbackOnTop && dir < 0 && scrollElement.scrollTop <= offset) {\n        callbackOnTop(scrollElement.scrollTop, scrollElement.scrollHeight);\n      }\n\n      setLastScrollTop(scrollElement.scrollTop);\n    };\n\n    if (scrollElement) {\n      window.addEventListener('scroll', onScroll);\n    }\n\n    return () => {\n      if (scrollElement) {\n        window.removeEventListener('scroll', onScroll);\n      }\n    };\n  }, [callbackOnTop, callbackOnBottom, offset]);\n};\nexport default useInfiniteScroll;","import React, { useState, useEffect } from 'react';\nimport styled, { css } from 'styled-components';\nimport { useLazyQuery } from '@apollo/react-hooks';\nimport { v4 } from 'uuid';\nimport Column from '../atomic-ui/components/Column';\nimport Alert from '../atomic-ui/components/Alert';\nimport DatePicker from '../atomic-ui/components/DatePicker';\nimport Spinner from '../atomic-ui/components/Spinner';\nimport Select from '../atomic-ui/components/Select';\nimport { useInfiniteScroll } from '../hooks/useInfiniteScroll';\nimport DefaultLayout from '../layouts/default';\nimport DashboardLayout from './dashboard';\nimport FilterBar from '../components/FilterBar';\nimport SearchBar from '../components/SearchBar';\nimport HandleBar from '../components/HandleBar';\nimport { LowerLoader } from '../components/Styled';\nconst Wrap = styled(Column).withConfig({\n  displayName: \"content__Wrap\",\n  componentId: \"sc-1afm75p-0\"\n})([\"margin-top:120px;margin-bottom:80px;\", \" @media only screen and (max-width:480px){margin-top:0;}\"], ({\n  clear\n}) => clear && css([\"margin:0;\"]));\n\nconst ContentLayout = ({\n  title,\n  store,\n  query,\n  handle,\n  filters,\n  options,\n  research,\n  scaffold,\n  dashboard,\n  variables = {},\n  limit = 6,\n  startOffset = 6,\n  initialize,\n  children\n}) => {\n  const Layout = dashboard ? DashboardLayout : DefaultLayout;\n  const [date, onChangeDate] = useState();\n  const [select, onChangeSelect] = useState();\n  const [search, setSearch] = useState(null);\n  const [isFetching, setFetching] = useState(false);\n  const [visibleFilter, setVisibleFilter] = useState(false);\n  const [offset, setOffset] = useState(startOffset);\n  const [documents, setDocuments] = useState((store === null || store === void 0 ? void 0 : store.documents) || []);\n  const [loadDocumentsBySearch, {\n    data: dataBySearch,\n    loading: loadingBySearch,\n    error: errorBySearch,\n    refetch: refetchBySearch\n  }] = useLazyQuery(query);\n  const [loadDocuments, {\n    data,\n    loading,\n    error,\n    refetch\n  }] = useLazyQuery(query);\n\n  const getFilters = () => {\n    return filters.map(filter => {\n      switch (filter.type) {\n        case 'DATEPICKER':\n          return /*#__PURE__*/React.createElement(DatePicker, {\n            key: v4(),\n            value: date,\n            placeholder: filter.placeholder || 'Дата публикации',\n            onChange: onChangeDate,\n            withNavigate: true\n          });\n\n        case 'SELECT':\n          return /*#__PURE__*/React.createElement(Select, {\n            key: v4(),\n            options: filter.options,\n            placeholder: filter.placeholder || 'Раздел',\n            selected: select,\n            onChange: item => onChangeSelect(item)\n          });\n\n        default:\n          return null;\n      }\n    });\n  };\n\n  const onSearch = value => {\n    setDocuments([]);\n\n    if (value) {\n      setSearch(value);\n      loadDocumentsBySearch({\n        variables: { ...variables,\n          search: value,\n          offset: 0,\n          limit: startOffset\n        }\n      });\n    } else {\n      const result = { ...variables,\n        offset: 0,\n        limit\n      };\n      setSearch(null);\n      if (refetch) refetch(result);else loadDocuments({\n        variables: result\n      });\n    }\n\n    setOffset(0);\n  };\n\n  useInfiniteScroll({\n    callbackOnBottom: async () => {\n      const updateOffset = () => setOffset(prev => prev + limit);\n\n      if (!loading && !isFetching) {\n        setFetching(true);\n        const result = { ...variables,\n          offset,\n          limit\n        };\n\n        if (search) {\n          await refetchBySearch(variables);\n        } else {\n          if (refetch) {\n            await refetch(result);\n            updateOffset();\n          } else {\n            await loadDocuments({\n              variables: result\n            });\n          }\n        }\n\n        setFetching(false);\n      }\n    },\n    offset: 850\n  });\n  useEffect(() => {\n    if (initialize) loadDocuments({\n      variables: {\n        offset,\n        limit\n      }\n    });\n  }, [initialize]);\n  useEffect(() => {\n    if (research) onSearch(research);\n  }, [research]);\n  useEffect(() => {\n    const isCommon = !search && !loading && data;\n    const isSearch = search && !loadingBySearch && dataBySearch;\n    const result = isCommon || isSearch;\n    if (result) setDocuments(prev => [...prev, ...result[Object.keys(result)[0]]]);\n  }, [search, loading, loadingBySearch, data, dataBySearch]);\n  return /*#__PURE__*/React.createElement(Layout, {\n    title: title,\n    scaffold: scaffold\n  }, /*#__PURE__*/React.createElement(Wrap, {\n    clear: scaffold || dashboard\n  }, !scaffold && !dashboard && /*#__PURE__*/React.createElement(SearchBar, {\n    onChangeFilter: () => setVisibleFilter(!visibleFilter),\n    onSubmit: onSearch\n  }), dashboard && handle && /*#__PURE__*/React.createElement(HandleBar, {\n    title: title,\n    icon: handle.icon,\n    buttonCreateText: handle.buttonCreateText,\n    onCreate: handle.onCreate,\n    onChangeVisibleFilter: () => setVisibleFilter(!visibleFilter),\n    onChangeDisplayMethod: handle.onChangeDisplayMethod\n  }), (filters || options) && /*#__PURE__*/React.createElement(FilterBar, {\n    isOpen: visibleFilter,\n    filters: getFilters(),\n    options: options\n  }), React.createElement(children, {\n    documents\n  }), search && !loadingBySearch && documents.length === 0 && /*#__PURE__*/React.createElement(Alert, {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041F\\u043E \\u0432\\u0430\\u0448\\u0435\\u043C\\u0443 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443 \\u043D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"), (search && errorBySearch || !search && error) && /*#__PURE__*/React.createElement(Alert, {\n    appearance: 'error',\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"), (isFetching || !error && loading || search && !errorBySearch && loadingBySearch) && /*#__PURE__*/React.createElement(LowerLoader, null, /*#__PURE__*/React.createElement(Spinner, null)), !search && !loading && !loadingBySearch && !errorBySearch && documents.length === 0 && /*#__PURE__*/React.createElement(Alert, {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0445 \\u043D\\u0435\\u0442\")));\n};\n\nexport default ContentLayout;","import React, { useState, useEffect, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Grid from '../../atomic-ui/components/Grid';\nimport Table from '../../atomic-ui/components/Table';\nimport templates from '../../atomic-ui/components/Table/templates';\nimport { useHelper } from '../../hooks/useHelper';\nimport ContentLayout from '../../layouts/content';\nimport UserCard from '../../components/UserCard';\nimport LazyLoad from '../../components/LazyLoad';\nimport FadeLoad from '../../components/FadeLoad';\nimport { onUserCreate, onUserEdit, onUserDelete, onUserLink, onUserAboutMore } from '../../store/helpers/user';\nimport { setDocuments } from '../../store/actions/documents';\nimport { onChat } from '../../store/helpers';\nimport queries from '../../graphql/queries';\nconst TITLE = 'Пользователи';\nconst START_OFFSET = 12;\nconst LIMIT = 12;\n\nconst Users = ({\n  store\n}) => {\n  const recall = useHelper();\n  const {\n    user,\n    documents\n  } = useSelector(state => ({\n    user: state.user,\n    documents: state.documents\n  }));\n  const dispatch = useDispatch();\n  const [displayMethod, onChangeDisplayMethod] = useState('grid');\n  const canEditRole = useMemo(() => user && user.role.name === 'ADMIN', [user]);\n  const roles = useMemo(() => store.roles, [store]);\n  useEffect(() => {\n    dispatch(setDocuments(null));\n  }, []);\n  return /*#__PURE__*/React.createElement(ContentLayout, {\n    title: TITLE,\n    filters: [{\n      type: 'DATEPICKER',\n      placeholder: 'Дата регистарции'\n    }, {\n      type: 'SELECT',\n      placeholder: 'Компания',\n      options: []\n    }],\n    options: [{\n      label: 'Компания',\n      value: 'company'\n    }, {\n      label: 'Участники',\n      value: 'members'\n    }, {\n      label: 'Дата регистарции',\n      value: 'createdAt'\n    }],\n    handle: {\n      icon: 'user2',\n      buttonCreateText: 'Создать пользователя',\n      onCreate: recall(onUserCreate, {\n        roles,\n        canEditRole,\n        mutation: queries.CREATE_USER\n      }),\n      onChangeDisplayMethod: item => onChangeDisplayMethod(item.value)\n    },\n    limit: LIMIT,\n    startOffset: START_OFFSET,\n    bottomScrollOffset: 0,\n    query: queries.GET_USERS,\n    store: {\n      documents: documents || store.users\n    },\n    dashboard: true\n  }, ({\n    documents\n  }) => displayMethod === 'list' ? /*#__PURE__*/React.createElement(Table, {\n    data: documents,\n    template: templates.user,\n    onChecked: () => {},\n    onClick: author => {\n      const owned = author.name === user.name;\n      return recall(onUserLink, {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned,\n        queries: {\n          userChats: queries.GET_USER_CHATS,\n          chat: queries.GET_CHAT\n        },\n        mutations: {\n          addUserChat: queries.ADD_USER_CHAT,\n          sendMessage: queries.SEND_MESSAGE\n        }\n      })();\n    },\n    onDelete: author => recall(onUserDelete, {\n      id: author.email,\n      user: author,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      mutation: queries.DELETE_USER\n    })(),\n    onEdit: author => recall(onUserEdit, {\n      user: author.email,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      roles,\n      canEditRole,\n      mutations: {\n        update: queries.UPDATE_USER,\n        del: queries.DELETE_USER,\n        changePassword: queries.UPDATE_USER\n      }\n    })(),\n    style: {\n      overflowX: 'auto',\n      width: 'calc(100vw - 290px)'\n    }\n  }) : /*#__PURE__*/React.createElement(Grid, null, documents.map(author => {\n    const owned = author.name === user.name;\n    return /*#__PURE__*/React.createElement(FadeLoad, {\n      key: author.email\n    }, /*#__PURE__*/React.createElement(LazyLoad, null, /*#__PURE__*/React.createElement(UserCard, {\n      user: author,\n      onChecked: () => {},\n      onChat: user.email && recall(onChat, {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        queries: {\n          userChats: queries.GET_USER_CHATS,\n          chat: queries.GET_CHAT\n        },\n        mutations: {\n          addUserChat: queries.ADD_USER_CHAT,\n          sendMessage: queries.SEND_MESSAGE\n        }\n      }),\n      onLink: recall(onUserLink, {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned,\n        queries: {\n          userChats: queries.GET_USER_CHATS,\n          chat: queries.GET_CHAT\n        },\n        mutations: {\n          addUserChat: queries.ADD_USER_CHAT,\n          sendMessage: queries.SEND_MESSAGE\n        }\n      }),\n      onAboutMore: recall(onUserAboutMore, {\n        user: author\n      }),\n      onDelete: recall(onUserDelete, {\n        id: author.email,\n        user: author,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        mutation: queries.DELETE_USER\n      }),\n      onEdit: recall(onUserEdit, {\n        user: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        roles,\n        canEditRole,\n        mutations: {\n          update: queries.UPDATE_USER,\n          del: queries.DELETE_USER,\n          changePassword: queries.UPDATE_USER\n        }\n      }),\n      preview: true\n    })));\n  })));\n};\n\nexport var __N_SSP = true;\nexport default Users;"]}}