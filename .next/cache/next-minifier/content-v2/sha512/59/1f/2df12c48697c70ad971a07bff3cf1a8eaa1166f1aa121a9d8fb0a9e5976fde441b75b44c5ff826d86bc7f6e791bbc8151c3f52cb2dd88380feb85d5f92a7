{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[25],{\"0RHc\":function(e,t,n){\"use strict\";n.r(t);var o=n(\"q1tI\"),a=n.n(o),i=n(\"/MKj\"),r=n(\"+nv6\"),c=n(\"EJJs\");var d=[{header:\"\\u041d\\u0430\\u0438\\u043c\\u0435\\u043d\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435\",content:e=>{var t;return a.a.createElement(c.a,{img:null===(t=e.preview)||void 0===t?void 0:t.path,text:e.title||\"-\"})}},{header:\"\\u041e\\u043f\\u0438\\u0441\\u0430\\u043d\\u0438\\u0435\",content:e=>a.a.createElement(c.a,{text:e.body||\"-\"})},{header:\"\\u0420\\u0430\\u0437\\u0434\\u0435\\u043b\",content:e=>{var t;return a.a.createElement(c.a,{text:(null===(t=e.category)||void 0===t?void 0:t.name)||\"-\"})}},{header:\"\\u041a\\u043e\\u043c\\u043f\\u0430\\u043d\\u0438\\u044f\",content:e=>{var t,n,o;return a.a.createElement(c.a,{img:null===(t=e.company)||void 0===t||null===(n=t.avatar)||void 0===n?void 0:n.path,text:(null===(o=e.company)||void 0===o?void 0:o.name)||\"-\"})}},{header:\"\\u0414\\u0430\\u0442\\u0430 \\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u0430\\u0446\\u0438\\u0438\",content:e=>a.a.createElement(c.a,{text:a.a.createElement(r.a,{text:e.createdAt,options:{year:\"numeric\",month:\"2-digit\",day:\"2-digit\"}})||\"-\"})},{header:\"\\u0414\\u0430\\u0442\\u0430 \\u0441\\u043e\\u0437\\u0434\\u0430\\u043d\\u0438\\u044f\",content:e=>a.a.createElement(c.a,{text:a.a.createElement(r.a,{text:e.createdAt,options:{year:\"numeric\",month:\"2-digit\",day:\"2-digit\"}})||\"-\"}),hidden:!0}],l=n(\"WpSk\"),u=n(\"OqOz\"),s=n(\"j8/+\"),v=n(\"QfFT\"),E=n(\"v0uu\"),p=n(\"u2Cb\");function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}t.default=()=>{const{onCreate:e,onEdit:t,...n}=Object(v.a)({isManage:!0}),r=Object(i.b)();return Object(o.useEffect)((()=>{r(Object(s.a)(null))}),[]),a.a.createElement(u.b,{title:\"\\u041f\\u0440\\u043e\\u0435\\u043a\\u0442\\u044b\",icon:\"work\",template:d,entityType:\"project\",getType:\"getProjects\",limit:E.c,emptyMessage:\"\\u041f\\u0440\\u043e\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043d\\u0435\\u0442\",getQuery:p.a.GET_PROJECTS,buttonCreateText:\"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u043f\\u0440\\u043e\\u0435\\u043a\\u0442\",deleteEntityMultiText:\"\\u043f\\u0440\\u043e\\u0435\\u043a\\u0442\\u044b\",deleteEntitySingleText:\"\\u043f\\u0440\\u043e\\u0435\\u043a\\u0442\",startOffset:E.b,deleteQuery:p.a.DELETE_PROJECT,render:e=>a.a.createElement(l.a,b({},n,{project:e,withSocials:!1,preview:!0})),onCreate:e,onEdit:t})}},QfFT:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return v}));var o=n(\"q1tI\"),a=n(\"/MKj\"),i=n(\"IxyI\"),r=n(\"rP4V\"),c=n(\"8ihE\"),d=n(\"8UhZ\"),l=n(\"ApjV\"),u=n(\"lphG\"),s=n(\"u2Cb\");const v=({isManage:e}={})=>{const t=Object(l.b)(),n=Object(u.a)(),{user:v,folder:E}=Object(a.c)((e=>({user:e.user,folder:e.root.folder}))),p=Object(a.b)(),b=Object(o.useMemo)((()=>{var e;return v&&\"ADMIN\"===(null===v||void 0===v||null===(e=v.role)||void 0===e?void 0:e.name)}),[v]),m=Object(o.useCallback)((e=>{var t;return!(null===v||void 0===v||null===(t=v.folders)||void 0===t||!t.find((t=>!(null===t||void 0===t||!t.projects.find((t=>t===e.id))))))}),[v]),j=Object(o.useCallback)((e=>!!(e.rating||[]).find((e=>(null===e||void 0===e?void 0:e.email)===(null===v||void 0===v?void 0:v.email)))),[v]),h=Object(o.useCallback)((e=>t(i.a,{id:e.id,folders:null===v||void 0===v?void 0:v.folders,mutations:{addProject:s.a.ADD_USER_PROJECT,createFolder:s.a.ADD_USER_FOLDER},callback:t=>{const n={...t,projects:[...t.projects,e.id]};p(Object(c.d)(n))}})()),[v,t,p]),f=Object(o.useCallback)((e=>{null!==v&&void 0!==v&&v.email&&n(s.a.LIKE_PROJECT,{id:e.id},(e=>p(Object(c.f)(e.data.likeProject))))}),[v,n,p]),O=Object(o.useCallback)((e=>{var o;const a=null===v||void 0===v||null===(o=v.projects)||void 0===o?void 0:o.find((t=>t.id===e.id));t(i.e,Object(d.b)(e.id,v,a,p,n,t,(t=>{const n={...t,projects:[...t.projects,e.id]};p(Object(c.d)(n))})))()}),[v,p,n,t]),k=Object(o.useCallback)((e=>t(i.f,{id:e.id,folder:E,mutation:s.a.REMOVE_USER_PROJECT})()),[v,t]),C=Object(o.useCallback)((e=>{t(r.a,{user:e})()}),[t]),y=Object(o.useCallback)((e=>{var n;t(r.i,{id:null===(n=e.company)||void 0===n?void 0:n.email,auth:null===v||void 0===v?void 0:v.email,recipient:e.author,query:s.a.GET_USER_CHATS,mutation:s.a.SEND_MESSAGE})()}),[v,t]),S=Object(o.useCallback)(((e,n)=>{t(i.g,{screenshots:[e.preview,...e.screenshots],key:n})()}),[t]);return{user:v,hasAdded:m,hasLiked:j,onAdd:h,onLike:f,onLink:O,onRemove:k,onAboutMore:C,onCompanyLink:y,onScreenshotClick:S,onEdit:e&&((e,o)=>t(i.d,{id:e.id,canEditStatus:b,mutation:s.a.UPDATE_PROJECT,query:s.a.GET_USERS,onCompanyInputChange:n(s.a.GET_USERS,{account:\"ENTITY\"}),onAfter:o})()),onCreate:e&&(e=>t(i.b,{canEditStatus:b,mutation:s.a.CREATE_PROJECT,query:s.a.GET_USERS,onAfter:e})())}}},WpSk:function(e,t,n){\"use strict\";var o=n(\"q1tI\"),a=n.n(o),i=n(\"1zqG\");const r=({user:e,layout:t,preview:n,project:o,checked:r,canRemove:c,appearance:d,withSocials:l,hasAdded:u,hasLiked:s,onAdd:v,onLike:E,onLink:p,onRemove:b,onAboutMore:m,onCompanyLink:j,onScreenshotClick:h,onChecked:f,onDelete:O,onEdit:k})=>a.a.createElement(i.c,{layout:t,project:o,preview:n,checked:r,canRemove:c,appearance:d,withSocials:l,added:u&&u(o),liked:s&&s(o),onLink:()=>p&&p(o),onAdd:(null===e||void 0===e?void 0:e.email)&&(()=>v&&v(o)),onAboutMore:()=>m&&m(o),onLike:(null===e||void 0===e?void 0:e.email)&&(()=>E&&E(o)),onCompanyLink:()=>j&&j(o),onRemove:(null===e||void 0===e?void 0:e.email)&&(()=>b&&b(o)),onScreenshotClick:(e,t)=>h&&h(o,t),onChecked:f,onDelete:O,onEdit:k});r.defaultProps={withSocials:!0},t.a=r},e0St:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/dashboard/projects\",function(){return n(\"0RHc\")}])},v0uu:function(e,t,n){\"use strict\";n.d(t,\"b\",(function(){return o})),n.d(t,\"a\",(function(){return a})),n.d(t,\"d\",(function(){return i})),n.d(t,\"c\",(function(){return r}));const o=0,a=4,i=12,r=12}},[[\"e0St\",0,2,6,7,1,3,4,5,8]]]);","map":{"version":3,"sources":["static/chunks/pages/dashboard/projects-58b5ff984d5e451412aa.js"],"names":["_N_E","window","push","0RHc","module","__webpack_exports__","__webpack_require__","r","react","react_default","n","es","DateText","Table","templates_project","header","content","item","_item$preview","a","createElement","img","preview","path","text","title","body","_item$category","category","name","_item$company","_item$company$avatar","_item$company2","company","avatar","createdAt","options","year","month","day","hidden","ProjectSuit","documents","useProject","constants","queries","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","onCreate","onEdit","methods","isManage","dispatch","icon","template","entityType","getType","limit","emptyMessage","getQuery","GET_PROJECTS","buttonCreateText","deleteEntityMultiText","deleteEntitySingleText","startOffset","deleteQuery","DELETE_PROJECT","render","document","project","withSocials","QfFT","d","react__WEBPACK_IMPORTED_MODULE_0__","react_redux__WEBPACK_IMPORTED_MODULE_1__","_store_helpers_project__WEBPACK_IMPORTED_MODULE_2__","_store_helpers_user__WEBPACK_IMPORTED_MODULE_3__","_store_actions_user__WEBPACK_IMPORTED_MODULE_4__","_useEntityQuery__WEBPACK_IMPORTED_MODULE_5__","_useHelper__WEBPACK_IMPORTED_MODULE_6__","_useMutate__WEBPACK_IMPORTED_MODULE_7__","_graphql_queries__WEBPACK_IMPORTED_MODULE_8__","recall","mutate","user","folder","state","root","canEditStatus","_user$role","role","hasAdded","_user$folders","folders","find","projects","id","hasLiked","rating","email","onAdd","mutations","addProject","ADD_USER_PROJECT","createFolder","ADD_USER_FOLDER","callback","result","onLike","LIKE_PROJECT","response","data","likeProject","onLink","_user$projects","owned","candidate","onRemove","mutation","REMOVE_USER_PROJECT","onAboutMore","onCompanyLink","_project$company","auth","recipient","author","query","GET_USER_CHATS","SEND_MESSAGE","onScreenshotClick","screenshots","onAfter","UPDATE_PROJECT","GET_USERS","onCompanyInputChange","account","CREATE_PROJECT","WpSk","react__WEBPACK_IMPORTED_MODULE_0___default","_ProjectCard__WEBPACK_IMPORTED_MODULE_1__","layout","checked","canRemove","appearance","onChecked","onDelete","added","liked","_","defaultProps","e0St","exports","__NEXT_P","v0uu","COMMON_START_OFFSET","COMMON_LOAD_LIMIT","INDEX_LOAD_LIMIT","DASHBOARD_LOAD_LIMIT"],"mappings":"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"},"name":"static/chunks/pages/dashboard/projects-58b5ff984d5e451412aa.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[25],{\n\n/***/ \"0RHc\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-redux/es/index.js + 22 modules\nvar es = __webpack_require__(\"/MKj\");\n\n// EXTERNAL MODULE: ./atomic-ui/components/DateText/index.js\nvar DateText = __webpack_require__(\"+nv6\");\n\n// EXTERNAL MODULE: ./atomic-ui/components/Table/index.js\nvar Table = __webpack_require__(\"EJJs\");\n\n// CONCATENATED MODULE: ./atomic-ui/components/Table/templates/project.js\n\n\n\nconst project = [{\n  header: 'Наименование',\n  content: item => {\n    var _item$preview;\n\n    return /*#__PURE__*/react_default.a.createElement(Table[\"a\" /* Cell */], {\n      img: (_item$preview = item.preview) === null || _item$preview === void 0 ? void 0 : _item$preview.path,\n      text: item.title || '-'\n    });\n  }\n}, {\n  header: 'Описание',\n  content: item => /*#__PURE__*/react_default.a.createElement(Table[\"a\" /* Cell */], {\n    text: item.body || '-'\n  })\n}, {\n  header: 'Раздел',\n  content: item => {\n    var _item$category;\n\n    return /*#__PURE__*/react_default.a.createElement(Table[\"a\" /* Cell */], {\n      text: ((_item$category = item.category) === null || _item$category === void 0 ? void 0 : _item$category.name) || '-'\n    });\n  }\n}, {\n  header: 'Компания',\n  content: item => {\n    var _item$company, _item$company$avatar, _item$company2;\n\n    return /*#__PURE__*/react_default.a.createElement(Table[\"a\" /* Cell */], {\n      img: (_item$company = item.company) === null || _item$company === void 0 ? void 0 : (_item$company$avatar = _item$company.avatar) === null || _item$company$avatar === void 0 ? void 0 : _item$company$avatar.path,\n      text: ((_item$company2 = item.company) === null || _item$company2 === void 0 ? void 0 : _item$company2.name) || '-'\n    });\n  }\n}, {\n  header: 'Дата публикации',\n  content: item => /*#__PURE__*/react_default.a.createElement(Table[\"a\" /* Cell */], {\n    text: /*#__PURE__*/react_default.a.createElement(DateText[\"a\" /* default */], {\n      text: item.createdAt,\n      options: {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit'\n      }\n    }) || '-'\n  })\n}, {\n  header: 'Дата создания',\n  content: item => /*#__PURE__*/react_default.a.createElement(Table[\"a\" /* Cell */], {\n    text: /*#__PURE__*/react_default.a.createElement(DateText[\"a\" /* default */], {\n      text: item.createdAt,\n      options: {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit'\n      }\n    }) || '-'\n  }),\n  hidden: true\n}];\n/* harmony default export */ var templates_project = (project);\n// EXTERNAL MODULE: ./components/ProjectSuit/index.js\nvar ProjectSuit = __webpack_require__(\"WpSk\");\n\n// EXTERNAL MODULE: ./layouts/dashboard/content.js + 1 modules\nvar content = __webpack_require__(\"OqOz\");\n\n// EXTERNAL MODULE: ./store/actions/documents.js\nvar documents = __webpack_require__(\"j8/+\");\n\n// EXTERNAL MODULE: ./hooks/useProject.js\nvar useProject = __webpack_require__(\"QfFT\");\n\n// EXTERNAL MODULE: ./constants/index.js\nvar constants = __webpack_require__(\"v0uu\");\n\n// EXTERNAL MODULE: ./graphql/queries/index.js + 16 modules\nvar queries = __webpack_require__(\"u2Cb\");\n\n// CONCATENATED MODULE: ./pages/dashboard/projects.js\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n\n\n\n\n\n\n\n\n\nconst TITLE = 'Проекты';\n\nconst Projects = () => {\n  const {\n    onCreate,\n    onEdit,\n    ...methods\n  } = Object(useProject[\"a\" /* useProject */])({\n    isManage: true\n  });\n  const dispatch = Object(es[\"b\" /* useDispatch */])();\n  Object(react[\"useEffect\"])(() => {\n    dispatch(Object(documents[\"a\" /* setDocuments */])(null));\n  }, []);\n  return /*#__PURE__*/react_default.a.createElement(content[\"b\" /* default */], {\n    title: TITLE,\n    icon: 'work',\n    template: templates_project,\n    entityType: 'project',\n    getType: 'getProjects',\n    limit: constants[\"c\" /* DASHBOARD_LOAD_LIMIT */],\n    emptyMessage: 'Проектов нет',\n    getQuery: queries[\"a\" /* default */].GET_PROJECTS,\n    buttonCreateText: 'Создать проект',\n    deleteEntityMultiText: 'проекты',\n    deleteEntitySingleText: 'проект',\n    startOffset: constants[\"b\" /* COMMON_START_OFFSET */],\n    deleteQuery: queries[\"a\" /* default */].DELETE_PROJECT,\n    render: document => /*#__PURE__*/react_default.a.createElement(ProjectSuit[\"a\" /* default */], _extends({}, methods, {\n      project: document,\n      withSocials: false,\n      preview: true\n    })),\n    onCreate: onCreate,\n    onEdit: onEdit\n  });\n};\n\n/* harmony default export */ var projects = __webpack_exports__[\"default\"] = (Projects);\n\n/***/ }),\n\n/***/ \"QfFT\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return useProject; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"/MKj\");\n/* harmony import */ var _store_helpers_project__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"IxyI\");\n/* harmony import */ var _store_helpers_user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"rP4V\");\n/* harmony import */ var _store_actions_user__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"8ihE\");\n/* harmony import */ var _useEntityQuery__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"8UhZ\");\n/* harmony import */ var _useHelper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"ApjV\");\n/* harmony import */ var _useMutate__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"lphG\");\n/* harmony import */ var _graphql_queries__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"u2Cb\");\n\n\n\n\n\n\n\n\n\nconst useProject = ({\n  isManage\n} = {}) => {\n  const recall = Object(_useHelper__WEBPACK_IMPORTED_MODULE_6__[/* useHelper */ \"b\"])();\n  const mutate = Object(_useMutate__WEBPACK_IMPORTED_MODULE_7__[/* useMutate */ \"a\"])();\n  const {\n    user,\n    folder\n  } = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useSelector */ \"c\"])(state => ({\n    user: state.user,\n    folder: state.root.folder\n  }));\n  const dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useDispatch */ \"b\"])();\n  const canEditStatus = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => {\n    var _user$role;\n\n    return user && (user === null || user === void 0 ? void 0 : (_user$role = user.role) === null || _user$role === void 0 ? void 0 : _user$role.name) === 'ADMIN';\n  }, [user]);\n  const hasAdded = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(project => {\n    var _user$folders;\n\n    return !!(user !== null && user !== void 0 && (_user$folders = user.folders) !== null && _user$folders !== void 0 && _user$folders.find(folder => !!(folder !== null && folder !== void 0 && folder.projects.find(item => item === project.id))));\n  }, [user]);\n  const hasLiked = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(project => !!(project.rating || []).find(item => (item === null || item === void 0 ? void 0 : item.email) === (user === null || user === void 0 ? void 0 : user.email)), [user]);\n  const onAdd = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(project => recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_2__[/* onProjectAdd */ \"a\"], {\n    id: project.id,\n    folders: user === null || user === void 0 ? void 0 : user.folders,\n    mutations: {\n      addProject: _graphql_queries__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].ADD_USER_PROJECT,\n      createFolder: _graphql_queries__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].ADD_USER_FOLDER\n    },\n    callback: item => {\n      const result = { ...item,\n        projects: [...item.projects, project.id]\n      };\n      dispatch(Object(_store_actions_user__WEBPACK_IMPORTED_MODULE_4__[/* setUserFolder */ \"d\"])(result));\n    }\n  })(), [user, recall, dispatch]);\n  const onLike = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(project => {\n    if (user !== null && user !== void 0 && user.email) {\n      mutate(_graphql_queries__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].LIKE_PROJECT, {\n        id: project.id\n      }, response => dispatch(Object(_store_actions_user__WEBPACK_IMPORTED_MODULE_4__[/* updateUser */ \"f\"])(response.data.likeProject)));\n    }\n  }, [user, mutate, dispatch]);\n  const onLink = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(project => {\n    var _user$projects;\n\n    const owned = user === null || user === void 0 ? void 0 : (_user$projects = user.projects) === null || _user$projects === void 0 ? void 0 : _user$projects.find(candidate => candidate.id === project.id);\n    recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_2__[/* onProjectLink */ \"e\"], Object(_useEntityQuery__WEBPACK_IMPORTED_MODULE_5__[/* getProjectLinkProps */ \"b\"])(project.id, user, owned, dispatch, mutate, recall, item => {\n      const result = { ...item,\n        projects: [...item.projects, project.id]\n      };\n      dispatch(Object(_store_actions_user__WEBPACK_IMPORTED_MODULE_4__[/* setUserFolder */ \"d\"])(result));\n    }))();\n  }, [user, dispatch, mutate, recall]);\n  const onRemove = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(project => recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_2__[/* onProjectRemove */ \"f\"], {\n    id: project.id,\n    folder,\n    mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].REMOVE_USER_PROJECT\n  })(), [user, recall]);\n  const onAboutMore = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(project => {\n    recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_3__[/* onUserAboutMore */ \"a\"], {\n      user: project\n    })();\n  }, [recall]);\n  const onCompanyLink = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])(project => {\n    var _project$company;\n\n    recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_3__[/* onUserLink */ \"i\"], {\n      id: (_project$company = project.company) === null || _project$company === void 0 ? void 0 : _project$company.email,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      recipient: project.author,\n      query: _graphql_queries__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].GET_USER_CHATS,\n      mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].SEND_MESSAGE\n    })();\n  }, [user, recall]);\n  const onScreenshotClick = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useCallback\"])((project, key) => {\n    recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_2__[/* onProjectScreenshot */ \"g\"], {\n      screenshots: [project.preview, ...project.screenshots],\n      key\n    })();\n  }, [recall]);\n\n  const onEdit = (project, onAfter) => recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_2__[/* onProjectEdit */ \"d\"], {\n    id: project.id,\n    canEditStatus,\n    mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].UPDATE_PROJECT,\n    query: _graphql_queries__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].GET_USERS,\n    onCompanyInputChange: mutate(_graphql_queries__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].GET_USERS, {\n      account: 'ENTITY'\n    }),\n    onAfter\n  })();\n\n  const onCreate = onAfter => recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_2__[/* onProjectCreate */ \"b\"], {\n    canEditStatus,\n    mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].CREATE_PROJECT,\n    query: _graphql_queries__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"].GET_USERS,\n    onAfter\n  })();\n\n  return {\n    user,\n    hasAdded,\n    hasLiked,\n    onAdd,\n    onLike,\n    onLink,\n    onRemove,\n    onAboutMore,\n    onCompanyLink,\n    onScreenshotClick,\n    onEdit: isManage && onEdit,\n    onCreate: isManage && onCreate\n  };\n};\n\n/***/ }),\n\n/***/ \"WpSk\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ProjectSuit */\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _ProjectCard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"1zqG\");\n\n\nconst ProjectSuit = ({\n  user,\n  layout,\n  preview,\n  project,\n  checked,\n  canRemove,\n  appearance,\n  withSocials,\n  hasAdded,\n  hasLiked,\n  onAdd,\n  onLike,\n  onLink,\n  onRemove,\n  onAboutMore,\n  onCompanyLink,\n  onScreenshotClick,\n  onChecked,\n  onDelete,\n  onEdit\n}) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ProjectCard__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"c\"], {\n  layout: layout,\n  project: project,\n  preview: preview,\n  checked: checked,\n  canRemove: canRemove,\n  appearance: appearance,\n  withSocials: withSocials,\n  added: hasAdded && hasAdded(project),\n  liked: hasLiked && hasLiked(project),\n  onLink: () => onLink && onLink(project),\n  onAdd: (user === null || user === void 0 ? void 0 : user.email) && (() => onAdd && onAdd(project)),\n  onAboutMore: () => onAboutMore && onAboutMore(project),\n  onLike: (user === null || user === void 0 ? void 0 : user.email) && (() => onLike && onLike(project)),\n  onCompanyLink: () => onCompanyLink && onCompanyLink(project),\n  onRemove: (user === null || user === void 0 ? void 0 : user.email) && (() => onRemove && onRemove(project)),\n  onScreenshotClick: (_, key) => onScreenshotClick && onScreenshotClick(project, key),\n  onChecked: onChecked,\n  onDelete: onDelete,\n  onEdit: onEdit\n});\nProjectSuit.defaultProps = {\n  withSocials: true\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (ProjectSuit);\n\n/***/ }),\n\n/***/ \"e0St\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/dashboard/projects\",\n      function () {\n        return __webpack_require__(\"0RHc\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"v0uu\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return COMMON_START_OFFSET; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return COMMON_LOAD_LIMIT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return INDEX_LOAD_LIMIT; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return DASHBOARD_LOAD_LIMIT; });\nconst COMMON_START_OFFSET = 0;\nconst COMMON_LOAD_LIMIT = 4;\nconst INDEX_LOAD_LIMIT = 12;\nconst DASHBOARD_LOAD_LIMIT = 12;\n\n/***/ })\n\n},[[\"e0St\",0,2,6,7,1,3,4,5,8]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\atomic-ui\\components\\Table\\templates\\project.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\pages\\dashboard\\projects.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\hooks\\useProject.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\components\\ProjectSuit\\index.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fdashboard%2Fprojects&absolutePagePath=private-next-pages%2Fdashboard%2Fprojects.js!","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\constants\\index.js"],"names":[],"mappings":"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","file":"x","sourcesContent":["import React from 'react';\nimport DateText from '../../DateText';\nimport { Cell } from '..';\nexport const project = [{\n  header: 'Наименование',\n  content: item => {\n    var _item$preview;\n\n    return /*#__PURE__*/React.createElement(Cell, {\n      img: (_item$preview = item.preview) === null || _item$preview === void 0 ? void 0 : _item$preview.path,\n      text: item.title || '-'\n    });\n  }\n}, {\n  header: 'Описание',\n  content: item => /*#__PURE__*/React.createElement(Cell, {\n    text: item.body || '-'\n  })\n}, {\n  header: 'Раздел',\n  content: item => {\n    var _item$category;\n\n    return /*#__PURE__*/React.createElement(Cell, {\n      text: ((_item$category = item.category) === null || _item$category === void 0 ? void 0 : _item$category.name) || '-'\n    });\n  }\n}, {\n  header: 'Компания',\n  content: item => {\n    var _item$company, _item$company$avatar, _item$company2;\n\n    return /*#__PURE__*/React.createElement(Cell, {\n      img: (_item$company = item.company) === null || _item$company === void 0 ? void 0 : (_item$company$avatar = _item$company.avatar) === null || _item$company$avatar === void 0 ? void 0 : _item$company$avatar.path,\n      text: ((_item$company2 = item.company) === null || _item$company2 === void 0 ? void 0 : _item$company2.name) || '-'\n    });\n  }\n}, {\n  header: 'Дата публикации',\n  content: item => /*#__PURE__*/React.createElement(Cell, {\n    text: /*#__PURE__*/React.createElement(DateText, {\n      text: item.createdAt,\n      options: {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit'\n      }\n    }) || '-'\n  })\n}, {\n  header: 'Дата создания',\n  content: item => /*#__PURE__*/React.createElement(Cell, {\n    text: /*#__PURE__*/React.createElement(DateText, {\n      text: item.createdAt,\n      options: {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit'\n      }\n    }) || '-'\n  }),\n  hidden: true\n}];\nexport default project;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport template from '../../atomic-ui/components/Table/templates/project';\nimport ProjectSuit from '../../components/ProjectSuit';\nimport ContentLayout from '../../layouts/dashboard/content';\nimport { setDocuments } from '../../store/actions/documents';\nimport { useProject } from '../../hooks/useProject';\nimport { COMMON_START_OFFSET, DASHBOARD_LOAD_LIMIT } from '../../constants';\nimport queries from '../../graphql/queries';\nconst TITLE = 'Проекты';\n\nconst Projects = () => {\n  const {\n    onCreate,\n    onEdit,\n    ...methods\n  } = useProject({\n    isManage: true\n  });\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(setDocuments(null));\n  }, []);\n  return /*#__PURE__*/React.createElement(ContentLayout, {\n    title: TITLE,\n    icon: 'work',\n    template: template,\n    entityType: 'project',\n    getType: 'getProjects',\n    limit: DASHBOARD_LOAD_LIMIT,\n    emptyMessage: 'Проектов нет',\n    getQuery: queries.GET_PROJECTS,\n    buttonCreateText: 'Создать проект',\n    deleteEntityMultiText: 'проекты',\n    deleteEntitySingleText: 'проект',\n    startOffset: COMMON_START_OFFSET,\n    deleteQuery: queries.DELETE_PROJECT,\n    render: document => /*#__PURE__*/React.createElement(ProjectSuit, _extends({}, methods, {\n      project: document,\n      withSocials: false,\n      preview: true\n    })),\n    onCreate: onCreate,\n    onEdit: onEdit\n  });\n};\n\nexport default Projects;","import { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { onProjectAdd, onProjectCreate, onProjectEdit, onProjectLink, onProjectRemove, onProjectScreenshot } from '../store/helpers/project';\nimport { onUserAboutMore, onUserLink } from '../store/helpers/user';\nimport { setUserFolder, updateUser } from '../store/actions/user';\nimport { getProjectLinkProps } from './useEntityQuery';\nimport { useHelper } from './useHelper';\nimport { useMutate } from './useMutate';\nimport queries from '../graphql/queries';\nexport const useProject = ({\n  isManage\n} = {}) => {\n  const recall = useHelper();\n  const mutate = useMutate();\n  const {\n    user,\n    folder\n  } = useSelector(state => ({\n    user: state.user,\n    folder: state.root.folder\n  }));\n  const dispatch = useDispatch();\n  const canEditStatus = useMemo(() => {\n    var _user$role;\n\n    return user && (user === null || user === void 0 ? void 0 : (_user$role = user.role) === null || _user$role === void 0 ? void 0 : _user$role.name) === 'ADMIN';\n  }, [user]);\n  const hasAdded = useCallback(project => {\n    var _user$folders;\n\n    return !!(user !== null && user !== void 0 && (_user$folders = user.folders) !== null && _user$folders !== void 0 && _user$folders.find(folder => !!(folder !== null && folder !== void 0 && folder.projects.find(item => item === project.id))));\n  }, [user]);\n  const hasLiked = useCallback(project => !!(project.rating || []).find(item => (item === null || item === void 0 ? void 0 : item.email) === (user === null || user === void 0 ? void 0 : user.email)), [user]);\n  const onAdd = useCallback(project => recall(onProjectAdd, {\n    id: project.id,\n    folders: user === null || user === void 0 ? void 0 : user.folders,\n    mutations: {\n      addProject: queries.ADD_USER_PROJECT,\n      createFolder: queries.ADD_USER_FOLDER\n    },\n    callback: item => {\n      const result = { ...item,\n        projects: [...item.projects, project.id]\n      };\n      dispatch(setUserFolder(result));\n    }\n  })(), [user, recall, dispatch]);\n  const onLike = useCallback(project => {\n    if (user !== null && user !== void 0 && user.email) {\n      mutate(queries.LIKE_PROJECT, {\n        id: project.id\n      }, response => dispatch(updateUser(response.data.likeProject)));\n    }\n  }, [user, mutate, dispatch]);\n  const onLink = useCallback(project => {\n    var _user$projects;\n\n    const owned = user === null || user === void 0 ? void 0 : (_user$projects = user.projects) === null || _user$projects === void 0 ? void 0 : _user$projects.find(candidate => candidate.id === project.id);\n    recall(onProjectLink, getProjectLinkProps(project.id, user, owned, dispatch, mutate, recall, item => {\n      const result = { ...item,\n        projects: [...item.projects, project.id]\n      };\n      dispatch(setUserFolder(result));\n    }))();\n  }, [user, dispatch, mutate, recall]);\n  const onRemove = useCallback(project => recall(onProjectRemove, {\n    id: project.id,\n    folder,\n    mutation: queries.REMOVE_USER_PROJECT\n  })(), [user, recall]);\n  const onAboutMore = useCallback(project => {\n    recall(onUserAboutMore, {\n      user: project\n    })();\n  }, [recall]);\n  const onCompanyLink = useCallback(project => {\n    var _project$company;\n\n    recall(onUserLink, {\n      id: (_project$company = project.company) === null || _project$company === void 0 ? void 0 : _project$company.email,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      recipient: project.author,\n      query: queries.GET_USER_CHATS,\n      mutation: queries.SEND_MESSAGE\n    })();\n  }, [user, recall]);\n  const onScreenshotClick = useCallback((project, key) => {\n    recall(onProjectScreenshot, {\n      screenshots: [project.preview, ...project.screenshots],\n      key\n    })();\n  }, [recall]);\n\n  const onEdit = (project, onAfter) => recall(onProjectEdit, {\n    id: project.id,\n    canEditStatus,\n    mutation: queries.UPDATE_PROJECT,\n    query: queries.GET_USERS,\n    onCompanyInputChange: mutate(queries.GET_USERS, {\n      account: 'ENTITY'\n    }),\n    onAfter\n  })();\n\n  const onCreate = onAfter => recall(onProjectCreate, {\n    canEditStatus,\n    mutation: queries.CREATE_PROJECT,\n    query: queries.GET_USERS,\n    onAfter\n  })();\n\n  return {\n    user,\n    hasAdded,\n    hasLiked,\n    onAdd,\n    onLike,\n    onLink,\n    onRemove,\n    onAboutMore,\n    onCompanyLink,\n    onScreenshotClick,\n    onEdit: isManage && onEdit,\n    onCreate: isManage && onCreate\n  };\n};","import React from 'react';\nimport ProjectCard from '../ProjectCard';\nexport const ProjectSuit = ({\n  user,\n  layout,\n  preview,\n  project,\n  checked,\n  canRemove,\n  appearance,\n  withSocials,\n  hasAdded,\n  hasLiked,\n  onAdd,\n  onLike,\n  onLink,\n  onRemove,\n  onAboutMore,\n  onCompanyLink,\n  onScreenshotClick,\n  onChecked,\n  onDelete,\n  onEdit\n}) => /*#__PURE__*/React.createElement(ProjectCard, {\n  layout: layout,\n  project: project,\n  preview: preview,\n  checked: checked,\n  canRemove: canRemove,\n  appearance: appearance,\n  withSocials: withSocials,\n  added: hasAdded && hasAdded(project),\n  liked: hasLiked && hasLiked(project),\n  onLink: () => onLink && onLink(project),\n  onAdd: (user === null || user === void 0 ? void 0 : user.email) && (() => onAdd && onAdd(project)),\n  onAboutMore: () => onAboutMore && onAboutMore(project),\n  onLike: (user === null || user === void 0 ? void 0 : user.email) && (() => onLike && onLike(project)),\n  onCompanyLink: () => onCompanyLink && onCompanyLink(project),\n  onRemove: (user === null || user === void 0 ? void 0 : user.email) && (() => onRemove && onRemove(project)),\n  onScreenshotClick: (_, key) => onScreenshotClick && onScreenshotClick(project, key),\n  onChecked: onChecked,\n  onDelete: onDelete,\n  onEdit: onEdit\n});\nProjectSuit.defaultProps = {\n  withSocials: true\n};\nexport default ProjectSuit;","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/dashboard/projects\",\n      function () {\n        return require(\"private-next-pages/dashboard/projects.js\");\n      }\n    ]);\n  ","export const COMMON_START_OFFSET = 0;\nexport const COMMON_LOAD_LIMIT = 4;\nexport const INDEX_LOAD_LIMIT = 12;\nexport const DASHBOARD_LOAD_LIMIT = 12;"]}}