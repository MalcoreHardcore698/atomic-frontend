{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{IUYj:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/dashboard/tickets\",function(){return n(\"dsNT\")}])},dsNT:function(t,e,n){\"use strict\";n.r(e);var a=n(\"q1tI\"),i=n.n(a),o=n(\"/MKj\"),r=n(\"zQKW\"),d=n(\"4nJQ\"),u=n(\"OqOz\"),c=n(\"ZbFR\"),l=n(\"j8/+\"),s=n(\"rP4V\"),E=n(\"ApjV\"),v=n(\"u2Cb\");e.default=()=>{const t=Object(E.b)(),e=Object(o.c)((t=>t.user)),n=Object(o.b)();return Object(a.useEffect)((()=>{n(Object(l.a)(null))}),[]),i.a.createElement(u.b,{title:\"\\u041e\\u0431\\u0440\\u0430\\u0449\\u0435\\u043d\\u0438\\u044f\",limit:12,icon:\"ticket\",template:r.a,startOffset:0,emptyMessage:\"\\u041e\\u0431\\u0440\\u0430\\u0449\\u0435\\u043d\\u0438\\u0439 \\u043d\\u0435\\u0442\",buttonCreateText:\"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u043e\\u0431\\u0440\\u0430\\u0449\\u0435\\u043d\\u0438\\u0435\",getType:\"getTickets\",getQuery:v.a.GET_TICKETS,deleteQuery:v.a.DELETE_TICKET,deleteEntityMultiText:\"\\u043e\\u0431\\u0440\\u0430\\u0449\\u0435\\u043d\\u0438\\u044f\",deleteEntitySingleText:\"\\u043e\\u0431\\u0440\\u0430\\u0449\\u0435\\u043d\\u0438\\u0435\",onLink:n=>t(c.d,{id:n.id,auth:null===e||void 0===e?void 0:e.email})(),onEdit:(e,n)=>t(c.c,{id:e.id,mutation:v.a.UPDATE_TICKET,onAfter:n})(),onCreate:e=>t(c.a,{mutation:v.a.CREATE_TICKET,onAfter:e})(),render:n=>i.a.createElement(d.a,{ticket:n,onAuthorLink:n=>t(s.i,{id:n,auth:null===e||void 0===e?void 0:e.email,owned:n===e.name})()})})}},zQKW:function(t,e,n){\"use strict\";var a=n(\"q1tI\"),i=n.n(a),o=n(\"+nv6\"),r=n(\"EJJs\"),d=i.a.createElement,u=[{header:\"\\u041d\\u043e\\u043c\\u0435\\u0440\",content:function(t){return d(r.a,{text:t.token||\"-\"})}},{header:\"\\u0410\\u0432\\u0442\\u043e\\u0440\",content:function(t){var e,n;return d(r.a,{img:null===(e=t.author)||void 0===e?void 0:e.avatar,text:(null===(n=t.author)||void 0===n?void 0:n.name)||\"-\"})}},{header:\"\\u041d\\u0430\\u0438\\u043c\\u0435\\u043d\\u043e\\u0432\\u0430\\u043d\\u0438\\u0435\",content:function(t){var e;return d(r.a,{img:null===(e=t.avatar)||void 0===e?void 0:e.path,text:t.title||\"-\"})}},{header:\"\\u041a\\u0430\\u0442\\u0435\\u0433\\u043e\\u0440\\u0438\\u044f\",content:function(t){var e;return d(r.a,{text:(null===(e=t.category)||void 0===e?void 0:e.name)||\"-\"})}},{header:\"\\u0421\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u044f\",content:function(t){var e;return d(r.a,{text:(null===(e=t.messages)||void 0===e?void 0:e.length)||\"-\"})}},{header:\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438\",content:function(t){return d(r.a,{text:d(o.a,{text:t.createdAt,options:{year:\"numeric\",month:\"2-digit\",day:\"2-digit\"}})||\"-\"})},hidden:!0}];e.a=u}},[[\"IUYj\",0,2,1,3,4,5,6,7]]]);","map":{"version":3,"sources":["static/chunks/pages/dashboard/tickets-97e21fbe8ce91f7de68c.js"],"names":["_N_E","window","push","IUYj","module","exports","__webpack_require__","__NEXT_P","dsNT","__webpack_exports__","r","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_redux__WEBPACK_IMPORTED_MODULE_1__","_atomic_ui_components_Table_templates_ticket__WEBPACK_IMPORTED_MODULE_2__","_components_TicketCard__WEBPACK_IMPORTED_MODULE_3__","_layouts_dashboard_content__WEBPACK_IMPORTED_MODULE_4__","_store_helpers_ticket__WEBPACK_IMPORTED_MODULE_5__","_store_actions_documents__WEBPACK_IMPORTED_MODULE_6__","_store_helpers_user__WEBPACK_IMPORTED_MODULE_7__","_hooks_useHelper__WEBPACK_IMPORTED_MODULE_8__","_graphql_queries__WEBPACK_IMPORTED_MODULE_9__","recall","Object","user","state","dispatch","a","createElement","title","limit","icon","template","startOffset","emptyMessage","buttonCreateText","getType","getQuery","GET_TICKETS","deleteQuery","DELETE_TICKET","deleteEntityMultiText","deleteEntitySingleText","onLink","ticket","id","auth","email","onEdit","onAfter","mutation","UPDATE_TICKET","onCreate","CREATE_TICKET","render","document","onAuthorLink","author","owned","name","zQKW","_DateText__WEBPACK_IMPORTED_MODULE_1__","___WEBPACK_IMPORTED_MODULE_2__","__jsx","header","content","item","text","token","_item$author","_item$author2","img","avatar","_item$avatar","path","_item$category","category","_item$messages","messages","length","createdAt","options","year","month","day","hidden"],"mappings":"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"},"name":"static/chunks/pages/dashboard/tickets-97e21fbe8ce91f7de68c.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[27],{\n\n/***/ \"IUYj\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/dashboard/tickets\",\n        function () {\n          return __webpack_require__(\"dsNT\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"dsNT\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"/MKj\");\n/* harmony import */ var _atomic_ui_components_Table_templates_ticket__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"zQKW\");\n/* harmony import */ var _components_TicketCard__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"4nJQ\");\n/* harmony import */ var _layouts_dashboard_content__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"OqOz\");\n/* harmony import */ var _store_helpers_ticket__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"ZbFR\");\n/* harmony import */ var _store_actions_documents__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"j8/+\");\n/* harmony import */ var _store_helpers_user__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"rP4V\");\n/* harmony import */ var _hooks_useHelper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"ApjV\");\n/* harmony import */ var _graphql_queries__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"u2Cb\");\n\n\n\n\n\n\n\n\n\n\nconst TITLE = 'Обращения';\nconst LIMIT = 12;\nconst START_OFFSET = 0;\n\nconst Tickets = () => {\n  const recall = Object(_hooks_useHelper__WEBPACK_IMPORTED_MODULE_8__[/* useHelper */ \"b\"])();\n  const user = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useSelector */ \"c\"])(state => state.user);\n  const dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useDispatch */ \"b\"])();\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    dispatch(Object(_store_actions_documents__WEBPACK_IMPORTED_MODULE_6__[/* setDocuments */ \"a\"])(null));\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_layouts_dashboard_content__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"b\"], {\n    title: TITLE,\n    limit: LIMIT,\n    icon: 'ticket',\n    template: _atomic_ui_components_Table_templates_ticket__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"],\n    startOffset: START_OFFSET,\n    emptyMessage: 'Обращений нет',\n    buttonCreateText: 'Создать обращение',\n    getType: 'getTickets',\n    getQuery: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].GET_TICKETS,\n    deleteQuery: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].DELETE_TICKET,\n    deleteEntityMultiText: 'обращения',\n    deleteEntitySingleText: 'обращение',\n    onLink: ticket => recall(_store_helpers_ticket__WEBPACK_IMPORTED_MODULE_5__[/* onTicketLink */ \"d\"], {\n      id: ticket.id,\n      auth: user === null || user === void 0 ? void 0 : user.email\n    })(),\n    onEdit: (ticket, onAfter) => recall(_store_helpers_ticket__WEBPACK_IMPORTED_MODULE_5__[/* onTicketEdit */ \"c\"], {\n      id: ticket.id,\n      mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].UPDATE_TICKET,\n      onAfter\n    })(),\n    onCreate: onAfter => recall(_store_helpers_ticket__WEBPACK_IMPORTED_MODULE_5__[/* onTicketCreate */ \"a\"], {\n      mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].CREATE_TICKET,\n      onAfter\n    })(),\n    render: document => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_TicketCard__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"], {\n      ticket: document,\n      onAuthorLink: author => recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_7__[/* onUserLink */ \"i\"], {\n        id: author,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned: author === user.name\n      })()\n    })\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Tickets);\n\n/***/ }),\n\n/***/ \"zQKW\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ticket */\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _DateText__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"+nv6\");\n/* harmony import */ var ___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"EJJs\");\nvar __jsx = react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement;\n\n\n\nvar ticket = [{\n  header: 'Номер',\n  content: function content(item) {\n    return __jsx(___WEBPACK_IMPORTED_MODULE_2__[/* Cell */ \"a\"], {\n      text: item.token || '-'\n    });\n  }\n}, {\n  header: 'Автор',\n  content: function content(item) {\n    var _item$author, _item$author2;\n\n    return __jsx(___WEBPACK_IMPORTED_MODULE_2__[/* Cell */ \"a\"], {\n      img: (_item$author = item.author) === null || _item$author === void 0 ? void 0 : _item$author.avatar,\n      text: ((_item$author2 = item.author) === null || _item$author2 === void 0 ? void 0 : _item$author2.name) || '-'\n    });\n  }\n}, {\n  header: 'Наименование',\n  content: function content(item) {\n    var _item$avatar;\n\n    return __jsx(___WEBPACK_IMPORTED_MODULE_2__[/* Cell */ \"a\"], {\n      img: (_item$avatar = item.avatar) === null || _item$avatar === void 0 ? void 0 : _item$avatar.path,\n      text: item.title || '-'\n    });\n  }\n}, {\n  header: 'Категория',\n  content: function content(item) {\n    var _item$category;\n\n    return __jsx(___WEBPACK_IMPORTED_MODULE_2__[/* Cell */ \"a\"], {\n      text: ((_item$category = item.category) === null || _item$category === void 0 ? void 0 : _item$category.name) || '-'\n    });\n  }\n}, {\n  header: 'Сообщения',\n  content: function content(item) {\n    var _item$messages;\n\n    return __jsx(___WEBPACK_IMPORTED_MODULE_2__[/* Cell */ \"a\"], {\n      text: ((_item$messages = item.messages) === null || _item$messages === void 0 ? void 0 : _item$messages.length) || '-'\n    });\n  }\n}, {\n  header: 'Дата регистрации',\n  content: function content(item) {\n    return __jsx(___WEBPACK_IMPORTED_MODULE_2__[/* Cell */ \"a\"], {\n      text: __jsx(_DateText__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"], {\n        text: item.createdAt,\n        options: {\n          year: 'numeric',\n          month: '2-digit',\n          day: '2-digit'\n        }\n      }) || '-'\n    });\n  },\n  hidden: true\n}];\n/* harmony default export */ __webpack_exports__[\"a\"] = (ticket);\n\n/***/ })\n\n},[[\"IUYj\",0,2,1,3,4,5,6,7]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fdashboard%2Ftickets&absolutePagePath=private-next-pages%2Fdashboard%2Ftickets.js!","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\pages\\dashboard\\tickets.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\atomic-ui\\components\\Table\\templates\\ticket.js"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,MAAyC;AAClE;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACc;AACkB;AACpB;AACO;AAC4B;AAC3B;AACP;AACJ;AACN;AAC5C;AACA;AACA;;AAEA;AACA,iBAAiB,0EAAS;AAC1B,eAAe,uEAAW;AAC1B,mBAAmB,uEAAW;AAC9B,EAAE,uDAAS;AACX,aAAa,qFAAY;AACzB,GAAG;AACH,sBAAsB,4CAAK,eAAe,0EAAa;AACvD;AACA;AACA;AACA,cAAc,4FAAQ;AACtB;AACA;AACA;AACA;AACA,cAAc,gEAAO;AACrB,iBAAiB,gEAAO;AACxB;AACA;AACA,6BAA6B,0EAAY;AACzC;AACA;AACA,KAAK;AACL,wCAAwC,0EAAY;AACpD;AACA,gBAAgB,gEAAO;AACvB;AACA,KAAK;AACL,gCAAgC,4EAAc;AAC9C,gBAAgB,gEAAO;AACvB;AACA,KAAK;AACL,qCAAqC,4CAAK,eAAe,sEAAU;AACnE;AACA,qCAAqC,sEAAU;AAC/C;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;;AAEe,sEAAO,E;;;;;;;;AC1DtB;AAAA;AAAA;AAAA;AAAA;AAAA,YAAY,4CAAK;AACS;AACY;AACZ;AACnB;AACP;AACA;AACA,iBAAiB,8CAAI;AACrB;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;;AAEA,iBAAiB,8CAAI;AACrB;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;;AAEA,iBAAiB,8CAAI;AACrB;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;;AAEA,iBAAiB,8CAAI;AACrB;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;;AAEA,iBAAiB,8CAAI;AACrB;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA,iBAAiB,8CAAI;AACrB,kBAAkB,yDAAQ;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH;AACA,CAAC;AACc,+DAAM,E","file":"x","sourcesContent":["\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/dashboard/tickets\",\n        function () {\n          return require(\"private-next-pages/dashboard/tickets.js\");\n        }\n      ]);\n    ","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport template from '../../atomic-ui/components/Table/templates/ticket';\nimport TicketCard from '../../components/TicketCard';\nimport ContentLayout from '../../layouts/dashboard/content';\nimport { onTicketCreate, onTicketEdit, onTicketLink } from '../../store/helpers/ticket';\nimport { setDocuments } from '../../store/actions/documents';\nimport { onUserLink } from '../../store/helpers/user';\nimport { useHelper } from '../../hooks/useHelper';\nimport queries from '../../graphql/queries';\nconst TITLE = 'Обращения';\nconst LIMIT = 12;\nconst START_OFFSET = 0;\n\nconst Tickets = () => {\n  const recall = useHelper();\n  const user = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(setDocuments(null));\n  }, []);\n  return /*#__PURE__*/React.createElement(ContentLayout, {\n    title: TITLE,\n    limit: LIMIT,\n    icon: 'ticket',\n    template: template,\n    startOffset: START_OFFSET,\n    emptyMessage: 'Обращений нет',\n    buttonCreateText: 'Создать обращение',\n    getType: 'getTickets',\n    getQuery: queries.GET_TICKETS,\n    deleteQuery: queries.DELETE_TICKET,\n    deleteEntityMultiText: 'обращения',\n    deleteEntitySingleText: 'обращение',\n    onLink: ticket => recall(onTicketLink, {\n      id: ticket.id,\n      auth: user === null || user === void 0 ? void 0 : user.email\n    })(),\n    onEdit: (ticket, onAfter) => recall(onTicketEdit, {\n      id: ticket.id,\n      mutation: queries.UPDATE_TICKET,\n      onAfter\n    })(),\n    onCreate: onAfter => recall(onTicketCreate, {\n      mutation: queries.CREATE_TICKET,\n      onAfter\n    })(),\n    render: document => /*#__PURE__*/React.createElement(TicketCard, {\n      ticket: document,\n      onAuthorLink: author => recall(onUserLink, {\n        id: author,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned: author === user.name\n      })()\n    })\n  });\n};\n\nexport default Tickets;","var __jsx = React.createElement;\nimport React from 'react';\nimport DateText from '../../DateText';\nimport { Cell } from '..';\nexport var ticket = [{\n  header: 'Номер',\n  content: function content(item) {\n    return __jsx(Cell, {\n      text: item.token || '-'\n    });\n  }\n}, {\n  header: 'Автор',\n  content: function content(item) {\n    var _item$author, _item$author2;\n\n    return __jsx(Cell, {\n      img: (_item$author = item.author) === null || _item$author === void 0 ? void 0 : _item$author.avatar,\n      text: ((_item$author2 = item.author) === null || _item$author2 === void 0 ? void 0 : _item$author2.name) || '-'\n    });\n  }\n}, {\n  header: 'Наименование',\n  content: function content(item) {\n    var _item$avatar;\n\n    return __jsx(Cell, {\n      img: (_item$avatar = item.avatar) === null || _item$avatar === void 0 ? void 0 : _item$avatar.path,\n      text: item.title || '-'\n    });\n  }\n}, {\n  header: 'Категория',\n  content: function content(item) {\n    var _item$category;\n\n    return __jsx(Cell, {\n      text: ((_item$category = item.category) === null || _item$category === void 0 ? void 0 : _item$category.name) || '-'\n    });\n  }\n}, {\n  header: 'Сообщения',\n  content: function content(item) {\n    var _item$messages;\n\n    return __jsx(Cell, {\n      text: ((_item$messages = item.messages) === null || _item$messages === void 0 ? void 0 : _item$messages.length) || '-'\n    });\n  }\n}, {\n  header: 'Дата регистрации',\n  content: function content(item) {\n    return __jsx(Cell, {\n      text: __jsx(DateText, {\n        text: item.createdAt,\n        options: {\n          year: 'numeric',\n          month: '2-digit',\n          day: '2-digit'\n        }\n      }) || '-'\n    });\n  },\n  hidden: true\n}];\nexport default ticket;"]}}