{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[16],{EYtC:function(e,t,a){\"use strict\";var n=a(\"q1tI\"),l=a.n(n),c=a(\"vOnD\"),r=a(\"nShV\"),o=a(\"ZeZO\"),i=a(\"feIE\"),s=a(\"t7jn\");const u=Object(c.c)(r.b).withConfig({displayName:\"SearchBar__Wrap\",componentId:\"sc-1ruwjhl-0\"})([\"width:100%;\"]),d=Object(c.c)(s.a).withConfig({displayName:\"SearchBar__WrapSearchField\",componentId:\"sc-1ruwjhl-1\"})([\"flex-grow:100;\"]),b=Object(c.c)(o.a).withConfig({displayName:\"SearchBar__WrapButton\",componentId:\"sc-1ruwjhl-2\"})([\"background:var(--default-color-accent-dim);border:none;&:hover{svg{path,circle{stroke:white;}}}\",\"\"],(({visibleFilter:e})=>e&&Object(c.b)([\"background:var(--default-color-accent);\"])));t.a=({appearance:e,onChangeFilter:t,onSubmit:a})=>{const[c,r]=Object(n.useState)(!1);return l.a.createElement(u,null,l.a.createElement(d,{appearance:e,placeholder:\"\\u041f\\u043e\\u0438\\u0441\\u043a\",onSubmit:a}),l.a.createElement(b,{type:\"button\",kind:\"icon\",onClick:()=>{r(!c),t&&t(!c)},visibleFilter:c},l.a.createElement(i.a,{icon:\"filter2\",stroke:c?\"white\":\"var(--default-color-accent)\"})))}},OaTT:function(e,t,a){\"use strict\";var n=a(\"q1tI\"),l=a.n(n),c=a(\"VX74\"),r=a(\"/MKj\"),o=a(\"ZwIX\"),i=a(\"auMy\"),s=a(\"586Q\"),u=a(\"VP1n\"),d=a(\"UwjQ\"),b=a(\"ApjV\"),m=a(\"owvJ\"),p=a(\"u2Cb\");t.a=({variables:e,layout:t,initialList:a})=>{const f=Object(b.b)(),h=Object(r.c)((e=>e.user)),[E,v]=Object(n.useState)(a||[]),{data:w,loading:O,error:g}=a?{data:null,loading:!1,error:!1}:Object(c.useQuery)(p.a.GET_ARTICLES,{variables:e});return Object(n.useEffect)((()=>{!O&&w&&v(w.getArticles)}),[w,O]),Object(n.useEffect)((()=>{(null===a||void 0===a?void 0:a.length)>0&&v(a)}),[a]),!O&&w||E.length>0?E.map((e=>{var a;return l.a.createElement(u.a,{key:e.id},l.a.createElement(d.b,{article:e,layout:t||\"column\",owned:null===h||void 0===h||null===(a=h.articles)||void 0===a?void 0:a.find((t=>t.id===e.id)),onLink:f(m.d,{id:e.id,auth:null===h||void 0===h?void 0:h.email})}))})):g?l.a.createElement(o.a,{appearance:\"error\",style:{width:\"100%\",textAlign:\"center\"}},\"\\u041d\\u0435 \\u0443\\u0434\\u0430\\u043b\\u043e\\u0441\\u044c \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435\"):O?l.a.createElement(s.c,null,l.a.createElement(i.a,null)):l.a.createElement(o.a,{style:{width:\"100%\",textAlign:\"center\"}},\"\\u041d\\u043e\\u0432\\u043e\\u0441\\u0442\\u0435\\u0439 \\u043d\\u0435\\u0442\")}},QX5T:function(e,t,a){\"use strict\";var n=a(\"q1tI\"),l=a.n(n),c=a(\"vOnD\"),r=a(\"VX74\"),o=a(\"7Cbv\"),i=a(\"8CDE\"),s=a(\"ZwIX\"),u=a(\"wZgm\"),d=a(\"auMy\"),b=a(\"QclZ\");const m=({callbackOnTop:e,callbackOnBottom:t,offset:a=50})=>{const[l,c]=Object(n.useState)(0);Object(n.useEffect)((()=>{const n=document.documentElement,r=()=>{if(!n)return;const r=n.scrollTop-l;t&&r>0&&n.scrollTop+n.clientHeight>=n.scrollHeight-a&&t(n.scrollTop,n.scrollHeight),e&&r<0&&n.scrollTop<=a&&e(n.scrollTop,n.scrollHeight),c(n.scrollTop)};return n&&window.addEventListener(\"scroll\",r),()=>{n&&window.removeEventListener(\"scroll\",r)}}),[e,t,a])};var p=a(\"X+Rt\"),f=a(\"p9yE\"),h=a(\"RoTl\"),E=a(\"EYtC\"),v=a(\"coMr\"),w=a(\"586Q\");const O=Object(c.c)(i.a).withConfig({displayName:\"content__Wrap\",componentId:\"sc-1afm75p-0\"})([\"margin-top:120px;margin-bottom:80px;\",\" @media only screen and (max-width:480px){margin-top:0;}\"],(({clear:e})=>e&&Object(c.b)([\"margin:0;\"])));t.a=({title:e,store:t,query:a,handle:c,filters:i,options:g,research:j,scaffold:y,dashboard:C,variables:T={},limit:S=6,startOffset:_=6,initialize:k,children:I})=>{const L=C?f.a:p.a,[N,x]=Object(n.useState)(),[A,D]=Object(n.useState)(),[Q,B]=Object(n.useState)(null),[X,R]=Object(n.useState)(!1),[P,q]=Object(n.useState)(!1),[F,M]=Object(n.useState)(_),[V,W]=Object(n.useState)((null===t||void 0===t?void 0:t.documents)||[]),[Z,{data:H,loading:z,error:J,refetch:K}]=Object(r.useLazyQuery)(a),[G,{data:U,loading:Y,error:$,refetch:ee}]=Object(r.useLazyQuery)(a),te=e=>{if(W([]),e)B(e),Z({variables:{...T,search:e,offset:0,limit:_}});else{const e={...T,offset:0,limit:S};B(null),ee?ee(e):G({variables:e})}M(0)};return m({callbackOnBottom:async()=>{if(!Y&&!X){R(!0);const e={...T,offset:F,limit:S};Q?await K(T):ee?(await ee(e),M((e=>e+S))):await G({variables:e}),R(!1)}},offset:850}),Object(n.useEffect)((()=>{k&&G({variables:{offset:F,limit:S}})}),[k]),Object(n.useEffect)((()=>{j&&te(j)}),[j]),Object(n.useEffect)((()=>{const e=!Q&&!Y&&U||Q&&!z&&H;e&&W((t=>[...t,...e[Object.keys(e)[0]]]))}),[Q,Y,z,U,H]),l.a.createElement(L,{title:e,scaffold:y},l.a.createElement(O,{clear:y||C},!y&&!C&&l.a.createElement(E.a,{onChangeFilter:()=>q(!P),onSubmit:te}),C&&c&&l.a.createElement(v.a,{title:e,icon:c.icon,buttonCreateText:c.buttonCreateText,onCreate:c.onCreate,onChangeVisibleFilter:()=>q(!P),onChangeDisplayMethod:c.onChangeDisplayMethod}),(i||g)&&l.a.createElement(h.a,{isOpen:P,filters:i.map((e=>{switch(e.type){case\"DATEPICKER\":return l.a.createElement(u.a,{key:Object(o.a)(),value:N,placeholder:e.placeholder||\"\\u0414\\u0430\\u0442\\u0430 \\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u0430\\u0446\\u0438\\u0438\",onChange:x,withNavigate:!0});case\"SELECT\":return l.a.createElement(b.a,{key:Object(o.a)(),options:e.options,placeholder:e.placeholder||\"\\u0420\\u0430\\u0437\\u0434\\u0435\\u043b\",selected:A,onChange:e=>D(e)});default:return null}})),options:g}),\"function\"===typeof I?l.a.createElement(I,{documents:V}):I,Q&&!z&&0===V.length&&l.a.createElement(s.a,{style:{width:\"100%\",textAlign:\"center\"}},\"\\u041f\\u043e \\u0432\\u0430\\u0448\\u0435\\u043c\\u0443 \\u0437\\u0430\\u043f\\u0440\\u043e\\u0441\\u0443 \\u043d\\u0438\\u0447\\u0435\\u0433\\u043e \\u043d\\u0435 \\u043d\\u0430\\u0439\\u0434\\u0435\\u043d\\u043e\"),(Q&&J||!Q&&$)&&l.a.createElement(s.a,{appearance:\"error\",style:{width:\"100%\",textAlign:\"center\"}},\"\\u041d\\u0435 \\u0443\\u0434\\u0430\\u043b\\u043e\\u0441\\u044c \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044c \\u0434\\u0430\\u043d\\u043d\\u044b\\u0435\"),(X||!$&&Y||Q&&!J&&z)&&l.a.createElement(w.d,null,l.a.createElement(d.a,null))))}},hDBf:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/articles\",function(){return a(\"yRol\")}])},yRol:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"__N_SSP\",(function(){return u}));var n=a(\"q1tI\"),l=a.n(n),c=a(\"NWnW\"),r=a(\"QX5T\"),o=a(\"586Q\"),i=a(\"OaTT\"),s=a(\"u2Cb\");var u=!0;t.default=({store:e})=>l.a.createElement(r.a,{title:\"\\u0421\\u0442\\u0430\\u0442\\u044c\\u0438\",filters:[{type:\"DATEPICKER\",placeholder:\"\\u0414\\u0430\\u0442\\u0430 \\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u0430\\u0446\\u0438\\u0438\"},{type:\"SELECT\",options:null===e||void 0===e?void 0:e.categories.map((e=>({value:e.id,label:Object(c.d)(e.name)})))}],options:[{label:\"\\u041a\\u0430\\u0442\\u0435\\u0433\\u043e\\u0440\\u0438\\u044f\",value:\"category\"},{label:\"\\u0414\\u0430\\u0442\\u0430 \\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u0430\\u0446\\u0438\\u0438\",value:\"createdAt\"}],query:s.a.GET_ARTICLES,variables:{status:\"PUBLISHED\"},store:{documents:null===e||void 0===e?void 0:e.articles}},(({documents:e})=>l.a.createElement(o.b,null,l.a.createElement(i.a,{initialList:e,layout:!0}))))}},[[\"hDBf\",0,2,1,3,4,5,6,7]]]);","map":{"version":3,"sources":["static/chunks/pages/articles-13090af96bf5ff513a58.js"],"names":["_N_E","window","push","EYtC","module","__webpack_exports__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","styled_components__WEBPACK_IMPORTED_MODULE_1__","_atomic_ui_components_Row__WEBPACK_IMPORTED_MODULE_2__","_atomic_ui_components_Button__WEBPACK_IMPORTED_MODULE_3__","_atomic_ui_components_Icon__WEBPACK_IMPORTED_MODULE_4__","_atomic_ui_components_Search__WEBPACK_IMPORTED_MODULE_5__","Wrap","Object","withConfig","displayName","componentId","WrapSearchField","WrapButton","visibleFilter","appearance","onChangeFilter","onSubmit","setVisibleFilter","a","createElement","placeholder","type","kind","onClick","icon","stroke","OaTT","_apollo_react_hooks__WEBPACK_IMPORTED_MODULE_1__","react_redux__WEBPACK_IMPORTED_MODULE_2__","_atomic_ui_components_Alert__WEBPACK_IMPORTED_MODULE_3__","_atomic_ui_components_Spinner__WEBPACK_IMPORTED_MODULE_4__","_Styled__WEBPACK_IMPORTED_MODULE_5__","_LazyLoad__WEBPACK_IMPORTED_MODULE_6__","_ArticleCard__WEBPACK_IMPORTED_MODULE_7__","_hooks_useHelper__WEBPACK_IMPORTED_MODULE_8__","_store_helpers_article__WEBPACK_IMPORTED_MODULE_9__","_graphql_queries__WEBPACK_IMPORTED_MODULE_10__","variables","layout","initialList","recall","user","state","articles","setArticles","data","loading","error","GET_ARTICLES","getArticles","length","map","article","_user$articles","key","id","owned","find","candidate","onLink","auth","email","style","width","textAlign","QX5T","react","react_default","styled_components_browser_esm","client","v4","Column","Alert","DatePicker","Spinner","Select","useInfiniteScroll","callbackOnTop","callbackOnBottom","offset","lastScrollTop","setLastScrollTop","scrollElement","document","documentElement","onScroll","dir","scrollTop","clientHeight","scrollHeight","addEventListener","removeEventListener","layouts_default","layouts_dashboard","FilterBar","SearchBar","HandleBar","Styled","clear","title","store","query","handle","filters","options","research","scaffold","dashboard","limit","startOffset","initialize","children","Layout","date","onChangeDate","select","onChangeSelect","search","setSearch","isFetching","setFetching","setOffset","documents","setDocuments","loadDocumentsBySearch","dataBySearch","loadingBySearch","errorBySearch","refetch","refetchBySearch","loadDocuments","onSearch","value","result","async","prev","keys","buttonCreateText","onCreate","onChangeVisibleFilter","onChangeDisplayMethod","isOpen","filter","onChange","withNavigate","selected","item","hDBf","exports","__NEXT_P","yRol","r","d","__N_SSP","_atomic_ui_utils_functions__WEBPACK_IMPORTED_MODULE_1__","_layouts_content__WEBPACK_IMPORTED_MODULE_2__","_components_Styled__WEBPACK_IMPORTED_MODULE_3__","_components_ArticleList__WEBPACK_IMPORTED_MODULE_4__","_graphql_queries__WEBPACK_IMPORTED_MODULE_5__","categories","category","label","name","status"],"mappings":"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"},"name":"static/chunks/pages/articles-13090af96bf5ff513a58.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[16],{\n\n/***/ \"EYtC\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export Wrap */\n/* unused harmony export WrapSearchField */\n/* unused harmony export WrapButton */\n/* unused harmony export Search */\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"vOnD\");\n/* harmony import */ var _atomic_ui_components_Row__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"nShV\");\n/* harmony import */ var _atomic_ui_components_Button__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"ZeZO\");\n/* harmony import */ var _atomic_ui_components_Icon__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"feIE\");\n/* harmony import */ var _atomic_ui_components_Search__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"t7jn\");\n\n\n\n\n\n\nconst Wrap = Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"c\"])(_atomic_ui_components_Row__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"b\"]).withConfig({\n  displayName: \"SearchBar__Wrap\",\n  componentId: \"sc-1ruwjhl-0\"\n})([\"width:100%;\"]);\nconst WrapSearchField = Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"c\"])(_atomic_ui_components_Search__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"]).withConfig({\n  displayName: \"SearchBar__WrapSearchField\",\n  componentId: \"sc-1ruwjhl-1\"\n})([\"flex-grow:100;\"]);\nconst WrapButton = Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"c\"])(_atomic_ui_components_Button__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"]).withConfig({\n  displayName: \"SearchBar__WrapButton\",\n  componentId: \"sc-1ruwjhl-2\"\n})([\"background:var(--default-color-accent-dim);border:none;&:hover{svg{path,circle{stroke:white;}}}\", \"\"], ({\n  visibleFilter\n}) => visibleFilter && Object(styled_components__WEBPACK_IMPORTED_MODULE_1__[/* css */ \"b\"])([\"background:var(--default-color-accent);\"]));\nconst Search = ({\n  appearance,\n  onChangeFilter,\n  onSubmit\n}) => {\n  const [visibleFilter, setVisibleFilter] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n\n  const onClick = () => {\n    setVisibleFilter(!visibleFilter);\n    if (onChangeFilter) onChangeFilter(!visibleFilter);\n  };\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Wrap, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(WrapSearchField, {\n    appearance: appearance,\n    placeholder: 'Поиск',\n    onSubmit: onSubmit\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(WrapButton, {\n    type: 'button',\n    kind: 'icon',\n    onClick: onClick,\n    visibleFilter: visibleFilter\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Icon__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"], {\n    icon: 'filter2',\n    stroke: visibleFilter ? 'white' : 'var(--default-color-accent)'\n  })));\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (Search);\n\n/***/ }),\n\n/***/ \"OaTT\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export ArticleList */\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _apollo_react_hooks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"VX74\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"/MKj\");\n/* harmony import */ var _atomic_ui_components_Alert__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"ZwIX\");\n/* harmony import */ var _atomic_ui_components_Spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"auMy\");\n/* harmony import */ var _Styled__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"586Q\");\n/* harmony import */ var _LazyLoad__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"VP1n\");\n/* harmony import */ var _ArticleCard__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"UwjQ\");\n/* harmony import */ var _hooks_useHelper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"ApjV\");\n/* harmony import */ var _store_helpers_article__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"owvJ\");\n/* harmony import */ var _graphql_queries__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"u2Cb\");\n\n\n\n\n\n\n\n\n\n\n\nconst ArticleList = ({\n  variables,\n  layout,\n  initialList\n}) => {\n  const recall = Object(_hooks_useHelper__WEBPACK_IMPORTED_MODULE_8__[/* useHelper */ \"b\"])();\n  const user = Object(react_redux__WEBPACK_IMPORTED_MODULE_2__[/* useSelector */ \"c\"])(state => state.user);\n  const [articles, setArticles] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(initialList || []);\n  const {\n    data,\n    loading,\n    error\n  } = initialList ? {\n    data: null,\n    loading: false,\n    error: false\n  } : Object(_apollo_react_hooks__WEBPACK_IMPORTED_MODULE_1__[\"useQuery\"])(_graphql_queries__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"].GET_ARTICLES, {\n    variables\n  });\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (!loading && data) {\n      setArticles(data.getArticles);\n    }\n  }, [data, loading]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if ((initialList === null || initialList === void 0 ? void 0 : initialList.length) > 0) setArticles(initialList);\n  }, [initialList]);\n  return !loading && data || articles.length > 0 ? articles.map(article => {\n    var _user$articles;\n\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_LazyLoad__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"a\"], {\n      key: article.id\n    }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_ArticleCard__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"b\"], {\n      article: article,\n      layout: layout || 'column',\n      owned: user === null || user === void 0 ? void 0 : (_user$articles = user.articles) === null || _user$articles === void 0 ? void 0 : _user$articles.find(candidate => candidate.id === article.id),\n      onLink: recall(_store_helpers_article__WEBPACK_IMPORTED_MODULE_9__[/* onArticleLink */ \"d\"], {\n        id: article.id,\n        auth: user === null || user === void 0 ? void 0 : user.email\n      })\n    }));\n  }) : error ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Alert__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"], {\n    appearance: 'error',\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\") : loading ? /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_Styled__WEBPACK_IMPORTED_MODULE_5__[/* Loader */ \"c\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Spinner__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"], null)) : /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Alert__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"], {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0435\\u0439 \\u043D\\u0435\\u0442\");\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (ArticleList);\n\n/***/ }),\n\n/***/ \"QX5T\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/styled-components/dist/styled-components.browser.esm.js\nvar styled_components_browser_esm = __webpack_require__(\"vOnD\");\n\n// EXTERNAL MODULE: ./node_modules/@apollo/client/index.js\nvar client = __webpack_require__(\"VX74\");\n\n// EXTERNAL MODULE: ./node_modules/uuid/dist/esm-browser/v4.js + 4 modules\nvar v4 = __webpack_require__(\"7Cbv\");\n\n// EXTERNAL MODULE: ./atomic-ui/components/Column/index.js\nvar Column = __webpack_require__(\"8CDE\");\n\n// EXTERNAL MODULE: ./atomic-ui/components/Alert/index.js\nvar Alert = __webpack_require__(\"ZwIX\");\n\n// EXTERNAL MODULE: ./atomic-ui/components/DatePicker/index.js + 5 modules\nvar DatePicker = __webpack_require__(\"wZgm\");\n\n// EXTERNAL MODULE: ./atomic-ui/components/Spinner/index.js\nvar Spinner = __webpack_require__(\"auMy\");\n\n// EXTERNAL MODULE: ./atomic-ui/components/Select/index.js + 22 modules\nvar Select = __webpack_require__(\"QclZ\");\n\n// CONCATENATED MODULE: ./hooks/useInfiniteScroll.js\n\nconst useInfiniteScroll = ({\n  callbackOnTop,\n  callbackOnBottom,\n  offset = 50\n}) => {\n  const [lastScrollTop, setLastScrollTop] = Object(react[\"useState\"])(0);\n  Object(react[\"useEffect\"])(() => {\n    const scrollElement = document.documentElement;\n\n    const onScroll = () => {\n      if (!scrollElement) return;\n      const dir = scrollElement.scrollTop - lastScrollTop;\n\n      if (callbackOnBottom && dir > 0 && scrollElement.scrollTop + scrollElement.clientHeight >= scrollElement.scrollHeight - offset) {\n        callbackOnBottom(scrollElement.scrollTop, scrollElement.scrollHeight);\n      }\n\n      if (callbackOnTop && dir < 0 && scrollElement.scrollTop <= offset) {\n        callbackOnTop(scrollElement.scrollTop, scrollElement.scrollHeight);\n      }\n\n      setLastScrollTop(scrollElement.scrollTop);\n    };\n\n    if (scrollElement) {\n      window.addEventListener('scroll', onScroll);\n    }\n\n    return () => {\n      if (scrollElement) {\n        window.removeEventListener('scroll', onScroll);\n      }\n    };\n  }, [callbackOnTop, callbackOnBottom, offset]);\n};\n/* harmony default export */ var hooks_useInfiniteScroll = (useInfiniteScroll);\n// EXTERNAL MODULE: ./layouts/default.js + 3 modules\nvar layouts_default = __webpack_require__(\"X+Rt\");\n\n// EXTERNAL MODULE: ./layouts/dashboard/index.js + 2 modules\nvar layouts_dashboard = __webpack_require__(\"p9yE\");\n\n// EXTERNAL MODULE: ./components/FilterBar/index.js\nvar FilterBar = __webpack_require__(\"RoTl\");\n\n// EXTERNAL MODULE: ./components/SearchBar/index.js\nvar SearchBar = __webpack_require__(\"EYtC\");\n\n// EXTERNAL MODULE: ./components/HandleBar/index.js\nvar HandleBar = __webpack_require__(\"coMr\");\n\n// EXTERNAL MODULE: ./components/Styled/index.js\nvar Styled = __webpack_require__(\"586Q\");\n\n// CONCATENATED MODULE: ./layouts/content.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst Wrap = Object(styled_components_browser_esm[\"c\" /* default */])(Column[\"a\" /* default */]).withConfig({\n  displayName: \"content__Wrap\",\n  componentId: \"sc-1afm75p-0\"\n})([\"margin-top:120px;margin-bottom:80px;\", \" @media only screen and (max-width:480px){margin-top:0;}\"], ({\n  clear\n}) => clear && Object(styled_components_browser_esm[\"b\" /* css */])([\"margin:0;\"]));\n\nconst ContentLayout = ({\n  title,\n  store,\n  query,\n  handle,\n  filters,\n  options,\n  research,\n  scaffold,\n  dashboard,\n  variables = {},\n  limit = 6,\n  startOffset = 6,\n  initialize,\n  children\n}) => {\n  const Layout = dashboard ? layouts_dashboard[\"a\" /* default */] : layouts_default[\"a\" /* default */];\n  const [date, onChangeDate] = Object(react[\"useState\"])();\n  const [select, onChangeSelect] = Object(react[\"useState\"])();\n  const [search, setSearch] = Object(react[\"useState\"])(null);\n  const [isFetching, setFetching] = Object(react[\"useState\"])(false);\n  const [visibleFilter, setVisibleFilter] = Object(react[\"useState\"])(false);\n  const [offset, setOffset] = Object(react[\"useState\"])(startOffset);\n  const [documents, setDocuments] = Object(react[\"useState\"])((store === null || store === void 0 ? void 0 : store.documents) || []);\n  const [loadDocumentsBySearch, {\n    data: dataBySearch,\n    loading: loadingBySearch,\n    error: errorBySearch,\n    refetch: refetchBySearch\n  }] = Object(client[\"useLazyQuery\"])(query);\n  const [loadDocuments, {\n    data,\n    loading,\n    error,\n    refetch\n  }] = Object(client[\"useLazyQuery\"])(query);\n\n  const getFilters = () => {\n    return filters.map(filter => {\n      switch (filter.type) {\n        case 'DATEPICKER':\n          return /*#__PURE__*/react_default.a.createElement(DatePicker[\"a\" /* default */], {\n            key: Object(v4[\"a\" /* default */])(),\n            value: date,\n            placeholder: filter.placeholder || 'Дата публикации',\n            onChange: onChangeDate,\n            withNavigate: true\n          });\n\n        case 'SELECT':\n          return /*#__PURE__*/react_default.a.createElement(Select[\"a\" /* default */], {\n            key: Object(v4[\"a\" /* default */])(),\n            options: filter.options,\n            placeholder: filter.placeholder || 'Раздел',\n            selected: select,\n            onChange: item => onChangeSelect(item)\n          });\n\n        default:\n          return null;\n      }\n    });\n  };\n\n  const onSearch = value => {\n    setDocuments([]);\n\n    if (value) {\n      setSearch(value);\n      loadDocumentsBySearch({\n        variables: { ...variables,\n          search: value,\n          offset: 0,\n          limit: startOffset\n        }\n      });\n    } else {\n      const result = { ...variables,\n        offset: 0,\n        limit\n      };\n      setSearch(null);\n      if (refetch) refetch(result);else loadDocuments({\n        variables: result\n      });\n    }\n\n    setOffset(0);\n  };\n\n  useInfiniteScroll({\n    callbackOnBottom: async () => {\n      const updateOffset = () => setOffset(prev => prev + limit);\n\n      if (!loading && !isFetching) {\n        setFetching(true);\n        const result = { ...variables,\n          offset,\n          limit\n        };\n\n        if (search) {\n          await refetchBySearch(variables);\n        } else {\n          if (refetch) {\n            await refetch(result);\n            updateOffset();\n          } else {\n            await loadDocuments({\n              variables: result\n            });\n          }\n        }\n\n        setFetching(false);\n      }\n    },\n    offset: 850\n  });\n  Object(react[\"useEffect\"])(() => {\n    if (initialize) loadDocuments({\n      variables: {\n        offset,\n        limit\n      }\n    });\n  }, [initialize]);\n  Object(react[\"useEffect\"])(() => {\n    if (research) onSearch(research);\n  }, [research]);\n  Object(react[\"useEffect\"])(() => {\n    const isCommon = !search && !loading && data;\n    const isSearch = search && !loadingBySearch && dataBySearch;\n    const result = isCommon || isSearch;\n    if (result) setDocuments(prev => [...prev, ...result[Object.keys(result)[0]]]);\n  }, [search, loading, loadingBySearch, data, dataBySearch]);\n  return /*#__PURE__*/react_default.a.createElement(Layout, {\n    title: title,\n    scaffold: scaffold\n  }, /*#__PURE__*/react_default.a.createElement(Wrap, {\n    clear: scaffold || dashboard\n  }, !scaffold && !dashboard && /*#__PURE__*/react_default.a.createElement(SearchBar[\"a\" /* default */], {\n    onChangeFilter: () => setVisibleFilter(!visibleFilter),\n    onSubmit: onSearch\n  }), dashboard && handle && /*#__PURE__*/react_default.a.createElement(HandleBar[\"a\" /* default */], {\n    title: title,\n    icon: handle.icon,\n    buttonCreateText: handle.buttonCreateText,\n    onCreate: handle.onCreate,\n    onChangeVisibleFilter: () => setVisibleFilter(!visibleFilter),\n    onChangeDisplayMethod: handle.onChangeDisplayMethod\n  }), (filters || options) && /*#__PURE__*/react_default.a.createElement(FilterBar[\"a\" /* default */], {\n    isOpen: visibleFilter,\n    filters: getFilters(),\n    options: options\n  }), typeof children === 'function' ? react_default.a.createElement(children, {\n    documents\n  }) : children, search && !loadingBySearch && documents.length === 0 && /*#__PURE__*/react_default.a.createElement(Alert[\"a\" /* default */], {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041F\\u043E \\u0432\\u0430\\u0448\\u0435\\u043C\\u0443 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443 \\u043D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"), (search && errorBySearch || !search && error) && /*#__PURE__*/react_default.a.createElement(Alert[\"a\" /* default */], {\n    appearance: 'error',\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"), (isFetching || !error && loading || search && !errorBySearch && loadingBySearch) && /*#__PURE__*/react_default.a.createElement(Styled[\"d\" /* LowerLoader */], null, /*#__PURE__*/react_default.a.createElement(Spinner[\"a\" /* default */], null))));\n};\n\n/* harmony default export */ var content = __webpack_exports__[\"a\"] = (ContentLayout);\n\n/***/ }),\n\n/***/ \"hDBf\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/articles\",\n        function () {\n          return __webpack_require__(\"yRol\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"yRol\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__N_SSP\", function() { return __N_SSP; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _atomic_ui_utils_functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"NWnW\");\n/* harmony import */ var _layouts_content__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"QX5T\");\n/* harmony import */ var _components_Styled__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"586Q\");\n/* harmony import */ var _components_ArticleList__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"OaTT\");\n/* harmony import */ var _graphql_queries__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"u2Cb\");\n\n\n\n\n\n\nconst TITLE = 'Статьи';\n\nconst Articles = ({\n  store\n}) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_layouts_content__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"], {\n  title: TITLE,\n  filters: [{\n    type: 'DATEPICKER',\n    placeholder: 'Дата публикации'\n  }, {\n    type: 'SELECT',\n    options: store === null || store === void 0 ? void 0 : store.categories.map(category => ({\n      value: category.id,\n      label: Object(_atomic_ui_utils_functions__WEBPACK_IMPORTED_MODULE_1__[/* getLabelCategory */ \"d\"])(category.name)\n    }))\n  }],\n  options: [{\n    label: 'Категория',\n    value: 'category'\n  }, {\n    label: 'Дата публикации',\n    value: 'createdAt'\n  }],\n  query: _graphql_queries__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"].GET_ARTICLES,\n  variables: {\n    status: 'PUBLISHED'\n  },\n  store: {\n    documents: store === null || store === void 0 ? void 0 : store.articles\n  }\n}, ({\n  documents\n}) => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_Styled__WEBPACK_IMPORTED_MODULE_3__[/* GridAside */ \"b\"], null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_ArticleList__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"], {\n  initialList: documents,\n  layout: true\n})));\n\nvar __N_SSP = true;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Articles);\n\n/***/ })\n\n},[[\"hDBf\",0,2,1,3,4,5,6,7]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\components\\SearchBar\\index.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\components\\ArticleList\\index.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\hooks\\useInfiniteScroll.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\layouts\\content.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Farticles&absolutePagePath=private-next-pages%2Farticles.js!","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\pages\\articles.js"],"names":[],"mappings":"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","file":"x","sourcesContent":["import React, { useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport Row from '../../atomic-ui/components/Row';\nimport Button from '../../atomic-ui/components/Button';\nimport Icon from '../../atomic-ui/components/Icon';\nimport SearchField from '../../atomic-ui/components/Search';\nexport const Wrap = styled(Row).withConfig({\n  displayName: \"SearchBar__Wrap\",\n  componentId: \"sc-1ruwjhl-0\"\n})([\"width:100%;\"]);\nexport const WrapSearchField = styled(SearchField).withConfig({\n  displayName: \"SearchBar__WrapSearchField\",\n  componentId: \"sc-1ruwjhl-1\"\n})([\"flex-grow:100;\"]);\nexport const WrapButton = styled(Button).withConfig({\n  displayName: \"SearchBar__WrapButton\",\n  componentId: \"sc-1ruwjhl-2\"\n})([\"background:var(--default-color-accent-dim);border:none;&:hover{svg{path,circle{stroke:white;}}}\", \"\"], ({\n  visibleFilter\n}) => visibleFilter && css([\"background:var(--default-color-accent);\"]));\nexport const Search = ({\n  appearance,\n  onChangeFilter,\n  onSubmit\n}) => {\n  const [visibleFilter, setVisibleFilter] = useState(false);\n\n  const onClick = () => {\n    setVisibleFilter(!visibleFilter);\n    if (onChangeFilter) onChangeFilter(!visibleFilter);\n  };\n\n  return /*#__PURE__*/React.createElement(Wrap, null, /*#__PURE__*/React.createElement(WrapSearchField, {\n    appearance: appearance,\n    placeholder: 'Поиск',\n    onSubmit: onSubmit\n  }), /*#__PURE__*/React.createElement(WrapButton, {\n    type: 'button',\n    kind: 'icon',\n    onClick: onClick,\n    visibleFilter: visibleFilter\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: 'filter2',\n    stroke: visibleFilter ? 'white' : 'var(--default-color-accent)'\n  })));\n};\nexport default Search;","import React, { useState, useEffect } from 'react';\nimport { useQuery } from '@apollo/react-hooks';\nimport { useSelector } from 'react-redux';\nimport Alert from '../../atomic-ui/components/Alert';\nimport Spinner from '../../atomic-ui/components/Spinner';\nimport { Loader } from '../Styled';\nimport LazyLoad from '../LazyLoad';\nimport ArticleCard from '../ArticleCard';\nimport { useHelper } from '../../hooks/useHelper';\nimport { onArticleLink } from '../../store/helpers/article';\nimport queries from '../../graphql/queries';\nexport const ArticleList = ({\n  variables,\n  layout,\n  initialList\n}) => {\n  const recall = useHelper();\n  const user = useSelector(state => state.user);\n  const [articles, setArticles] = useState(initialList || []);\n  const {\n    data,\n    loading,\n    error\n  } = initialList ? {\n    data: null,\n    loading: false,\n    error: false\n  } : useQuery(queries.GET_ARTICLES, {\n    variables\n  });\n  useEffect(() => {\n    if (!loading && data) {\n      setArticles(data.getArticles);\n    }\n  }, [data, loading]);\n  useEffect(() => {\n    if ((initialList === null || initialList === void 0 ? void 0 : initialList.length) > 0) setArticles(initialList);\n  }, [initialList]);\n  return !loading && data || articles.length > 0 ? articles.map(article => {\n    var _user$articles;\n\n    return /*#__PURE__*/React.createElement(LazyLoad, {\n      key: article.id\n    }, /*#__PURE__*/React.createElement(ArticleCard, {\n      article: article,\n      layout: layout || 'column',\n      owned: user === null || user === void 0 ? void 0 : (_user$articles = user.articles) === null || _user$articles === void 0 ? void 0 : _user$articles.find(candidate => candidate.id === article.id),\n      onLink: recall(onArticleLink, {\n        id: article.id,\n        auth: user === null || user === void 0 ? void 0 : user.email\n      })\n    }));\n  }) : error ? /*#__PURE__*/React.createElement(Alert, {\n    appearance: 'error',\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\") : loading ? /*#__PURE__*/React.createElement(Loader, null, /*#__PURE__*/React.createElement(Spinner, null)) : /*#__PURE__*/React.createElement(Alert, {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0435\\u0439 \\u043D\\u0435\\u0442\");\n};\nexport default ArticleList;","import { useState, useEffect } from 'react';\nexport const useInfiniteScroll = ({\n  callbackOnTop,\n  callbackOnBottom,\n  offset = 50\n}) => {\n  const [lastScrollTop, setLastScrollTop] = useState(0);\n  useEffect(() => {\n    const scrollElement = document.documentElement;\n\n    const onScroll = () => {\n      if (!scrollElement) return;\n      const dir = scrollElement.scrollTop - lastScrollTop;\n\n      if (callbackOnBottom && dir > 0 && scrollElement.scrollTop + scrollElement.clientHeight >= scrollElement.scrollHeight - offset) {\n        callbackOnBottom(scrollElement.scrollTop, scrollElement.scrollHeight);\n      }\n\n      if (callbackOnTop && dir < 0 && scrollElement.scrollTop <= offset) {\n        callbackOnTop(scrollElement.scrollTop, scrollElement.scrollHeight);\n      }\n\n      setLastScrollTop(scrollElement.scrollTop);\n    };\n\n    if (scrollElement) {\n      window.addEventListener('scroll', onScroll);\n    }\n\n    return () => {\n      if (scrollElement) {\n        window.removeEventListener('scroll', onScroll);\n      }\n    };\n  }, [callbackOnTop, callbackOnBottom, offset]);\n};\nexport default useInfiniteScroll;","import React, { useState, useEffect } from 'react';\nimport styled, { css } from 'styled-components';\nimport { useLazyQuery } from '@apollo/react-hooks';\nimport { v4 } from 'uuid';\nimport Column from '../atomic-ui/components/Column';\nimport Alert from '../atomic-ui/components/Alert';\nimport DatePicker from '../atomic-ui/components/DatePicker';\nimport Spinner from '../atomic-ui/components/Spinner';\nimport Select from '../atomic-ui/components/Select';\nimport { useInfiniteScroll } from '../hooks/useInfiniteScroll';\nimport DefaultLayout from '../layouts/default';\nimport DashboardLayout from './dashboard';\nimport FilterBar from '../components/FilterBar';\nimport SearchBar from '../components/SearchBar';\nimport HandleBar from '../components/HandleBar';\nimport { LowerLoader } from '../components/Styled';\nconst Wrap = styled(Column).withConfig({\n  displayName: \"content__Wrap\",\n  componentId: \"sc-1afm75p-0\"\n})([\"margin-top:120px;margin-bottom:80px;\", \" @media only screen and (max-width:480px){margin-top:0;}\"], ({\n  clear\n}) => clear && css([\"margin:0;\"]));\n\nconst ContentLayout = ({\n  title,\n  store,\n  query,\n  handle,\n  filters,\n  options,\n  research,\n  scaffold,\n  dashboard,\n  variables = {},\n  limit = 6,\n  startOffset = 6,\n  initialize,\n  children\n}) => {\n  const Layout = dashboard ? DashboardLayout : DefaultLayout;\n  const [date, onChangeDate] = useState();\n  const [select, onChangeSelect] = useState();\n  const [search, setSearch] = useState(null);\n  const [isFetching, setFetching] = useState(false);\n  const [visibleFilter, setVisibleFilter] = useState(false);\n  const [offset, setOffset] = useState(startOffset);\n  const [documents, setDocuments] = useState((store === null || store === void 0 ? void 0 : store.documents) || []);\n  const [loadDocumentsBySearch, {\n    data: dataBySearch,\n    loading: loadingBySearch,\n    error: errorBySearch,\n    refetch: refetchBySearch\n  }] = useLazyQuery(query);\n  const [loadDocuments, {\n    data,\n    loading,\n    error,\n    refetch\n  }] = useLazyQuery(query);\n\n  const getFilters = () => {\n    return filters.map(filter => {\n      switch (filter.type) {\n        case 'DATEPICKER':\n          return /*#__PURE__*/React.createElement(DatePicker, {\n            key: v4(),\n            value: date,\n            placeholder: filter.placeholder || 'Дата публикации',\n            onChange: onChangeDate,\n            withNavigate: true\n          });\n\n        case 'SELECT':\n          return /*#__PURE__*/React.createElement(Select, {\n            key: v4(),\n            options: filter.options,\n            placeholder: filter.placeholder || 'Раздел',\n            selected: select,\n            onChange: item => onChangeSelect(item)\n          });\n\n        default:\n          return null;\n      }\n    });\n  };\n\n  const onSearch = value => {\n    setDocuments([]);\n\n    if (value) {\n      setSearch(value);\n      loadDocumentsBySearch({\n        variables: { ...variables,\n          search: value,\n          offset: 0,\n          limit: startOffset\n        }\n      });\n    } else {\n      const result = { ...variables,\n        offset: 0,\n        limit\n      };\n      setSearch(null);\n      if (refetch) refetch(result);else loadDocuments({\n        variables: result\n      });\n    }\n\n    setOffset(0);\n  };\n\n  useInfiniteScroll({\n    callbackOnBottom: async () => {\n      const updateOffset = () => setOffset(prev => prev + limit);\n\n      if (!loading && !isFetching) {\n        setFetching(true);\n        const result = { ...variables,\n          offset,\n          limit\n        };\n\n        if (search) {\n          await refetchBySearch(variables);\n        } else {\n          if (refetch) {\n            await refetch(result);\n            updateOffset();\n          } else {\n            await loadDocuments({\n              variables: result\n            });\n          }\n        }\n\n        setFetching(false);\n      }\n    },\n    offset: 850\n  });\n  useEffect(() => {\n    if (initialize) loadDocuments({\n      variables: {\n        offset,\n        limit\n      }\n    });\n  }, [initialize]);\n  useEffect(() => {\n    if (research) onSearch(research);\n  }, [research]);\n  useEffect(() => {\n    const isCommon = !search && !loading && data;\n    const isSearch = search && !loadingBySearch && dataBySearch;\n    const result = isCommon || isSearch;\n    if (result) setDocuments(prev => [...prev, ...result[Object.keys(result)[0]]]);\n  }, [search, loading, loadingBySearch, data, dataBySearch]);\n  return /*#__PURE__*/React.createElement(Layout, {\n    title: title,\n    scaffold: scaffold\n  }, /*#__PURE__*/React.createElement(Wrap, {\n    clear: scaffold || dashboard\n  }, !scaffold && !dashboard && /*#__PURE__*/React.createElement(SearchBar, {\n    onChangeFilter: () => setVisibleFilter(!visibleFilter),\n    onSubmit: onSearch\n  }), dashboard && handle && /*#__PURE__*/React.createElement(HandleBar, {\n    title: title,\n    icon: handle.icon,\n    buttonCreateText: handle.buttonCreateText,\n    onCreate: handle.onCreate,\n    onChangeVisibleFilter: () => setVisibleFilter(!visibleFilter),\n    onChangeDisplayMethod: handle.onChangeDisplayMethod\n  }), (filters || options) && /*#__PURE__*/React.createElement(FilterBar, {\n    isOpen: visibleFilter,\n    filters: getFilters(),\n    options: options\n  }), typeof children === 'function' ? React.createElement(children, {\n    documents\n  }) : children, search && !loadingBySearch && documents.length === 0 && /*#__PURE__*/React.createElement(Alert, {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041F\\u043E \\u0432\\u0430\\u0448\\u0435\\u043C\\u0443 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443 \\u043D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"), (search && errorBySearch || !search && error) && /*#__PURE__*/React.createElement(Alert, {\n    appearance: 'error',\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\"), (isFetching || !error && loading || search && !errorBySearch && loadingBySearch) && /*#__PURE__*/React.createElement(LowerLoader, null, /*#__PURE__*/React.createElement(Spinner, null))));\n};\n\nexport default ContentLayout;","\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/articles\",\n        function () {\n          return require(\"private-next-pages/articles.js\");\n        }\n      ]);\n    ","import React from 'react';\nimport { getLabelCategory } from '../atomic-ui/utils/functions';\nimport ContentLayout from '../layouts/content';\nimport { GridAside as Container } from '../components/Styled';\nimport ArticleList from '../components/ArticleList';\nimport queries from '../graphql/queries';\nconst TITLE = 'Статьи';\n\nconst Articles = ({\n  store\n}) => /*#__PURE__*/React.createElement(ContentLayout, {\n  title: TITLE,\n  filters: [{\n    type: 'DATEPICKER',\n    placeholder: 'Дата публикации'\n  }, {\n    type: 'SELECT',\n    options: store === null || store === void 0 ? void 0 : store.categories.map(category => ({\n      value: category.id,\n      label: getLabelCategory(category.name)\n    }))\n  }],\n  options: [{\n    label: 'Категория',\n    value: 'category'\n  }, {\n    label: 'Дата публикации',\n    value: 'createdAt'\n  }],\n  query: queries.GET_ARTICLES,\n  variables: {\n    status: 'PUBLISHED'\n  },\n  store: {\n    documents: store === null || store === void 0 ? void 0 : store.articles\n  }\n}, ({\n  documents\n}) => /*#__PURE__*/React.createElement(Container, null, /*#__PURE__*/React.createElement(ArticleList, {\n  initialList: documents,\n  layout: true\n})));\n\nexport var __N_SSP = true;\nexport default Articles;"]}}