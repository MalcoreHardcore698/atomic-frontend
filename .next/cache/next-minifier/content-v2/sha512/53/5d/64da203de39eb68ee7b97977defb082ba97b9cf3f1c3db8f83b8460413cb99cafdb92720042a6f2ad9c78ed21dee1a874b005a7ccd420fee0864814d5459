{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[24],{\"0RHc\":function(e,t,a){\"use strict\";a.r(t),a.d(t,\"__N_SSP\",(function(){return w}));var n=a(\"q1tI\"),o=a.n(n),c=a(\"/MKj\"),s=a(\"7BXr\"),r=a(\"ZwIX\"),i=a(\"wZgm\"),u=a(\"QclZ\"),l=a(\"EJJs\"),E=a(\"e3uv\"),d=a(\"ApjV\"),p=a(\"lphG\"),m=a(\"p9yE\"),h=a(\"coMr\"),b=a(\"RoTl\"),j=a(\"1zqG\"),_=a(\"IxyI\"),S=a(\"j8/+\"),T=a(\"u2Cb\");const C=\"\\u041f\\u0440\\u043e\\u0435\\u043a\\u0442\\u044b\";var w=!0;t.default=({store:e,companies:t,categories:a,statuses:w})=>{const O=Object(d.a)(),g=Object(p.a)(),{user:f,documents:y}=Object(c.c)((e=>({user:e.user,members:e.root.members,files:e.root.files,screenshots:e.root.screenshots,documents:e.documents}))),R=Object(c.b)(),[k,v]=Object(n.useState)(),[N,P]=Object(n.useState)(),[I,J]=Object(n.useState)(!1),[D,G]=Object(n.useState)(\"grid\"),M=Object(n.useMemo)((()=>f&&\"ADMIN\"===f.role.name),[f]),U=Object(n.useMemo)((()=>y||e.projects),[y,e]);return Object(n.useEffect)((()=>{R(Object(S.a)(null))}),[]),o.a.createElement(m.a,{title:C},o.a.createElement(h.a,{icon:\"work\",title:C,buttonCreateText:\"\\u0421\\u043e\\u0437\\u0434\\u0430\\u0442\\u044c \\u043f\\u0440\\u043e\\u0435\\u043a\\u0442\",onCreate:O(_.b,{companies:t,categories:a,statuses:w,canEditStatus:M,mutation:T.a.CREATE_PROJECT,query:T.a.GET_USERS}),onChangeVisibleFilter:()=>J(!I),onChangeDisplayMethod:e=>G(e.value)}),o.a.createElement(b.a,{isOpen:I,filters:[o.a.createElement(i.a,{key:0,value:k,placeholder:\"\\u0414\\u0430\\u0442\\u0430 \\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u0430\\u0446\\u0438\\u0438\",onChange:v,withNavigate:!0}),o.a.createElement(u.a,{key:1,options:a,placeholder:\"\\u0420\\u0430\\u0437\\u0434\\u0435\\u043b\",selected:N,onChange:e=>P(e)})],options:\"list\"===D?[]:E.a.project.map(((e,t)=>({label:e.header,value:t})))}),0===U.length&&o.a.createElement(r.a,{style:{width:\"100%\",textAlign:\"center\"}},\"\\u041f\\u0440\\u043e\\u0435\\u043a\\u0442\\u043e\\u0432 \\u043d\\u0435\\u0442\"),\"list\"===D&&o.a.createElement(l.b,{data:U,template:E.a.project,onChecked:()=>{},onClick:e=>O(_.e,{id:e.id,auth:f})(),onDelete:e=>O(_.c,{id:e.id,project:e,auth:f,mutation:T.a.DELETE_PROJECT})(),onEdit:e=>O(_.d,{id:e.id,companies:t,categories:a,statuses:w,canEditStatus:M,mutation:T.a.UPDATE_PROJECT,query:T.a.GET_USERS,onCompanyInputChange:g(T.a.GET_USERS,{account:\"ENTITY\"})})(),style:{overflowX:\"auto\",width:\"calc(100vw - 290px)\"}}),\"grid\"===D&&o.a.createElement(s.a,null,U.map((e=>o.a.createElement(j.b,{key:e.id,project:e,onChecked:()=>{},onScreenshotClick:(t,a)=>O(_.f,{screenshots:[e.preview,...e.screenshots],key:a})(),onLink:O(_.e,{id:e.id,user:f}),onDelete:O(_.c,{id:e.id,project:e,auth:f,mutation:T.a.DELETE_PROJECT}),onEdit:O(_.d,{id:e.id,companies:t,categories:a,statuses:w,canEditStatus:M,mutation:T.a.UPDATE_PROJECT,query:T.a.GET_USERS,onCompanyInputChange:g(T.a.GET_USERS,{account:\"ENTITY\"})}),preview:!0})))))}},e0St:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/dashboard/projects\",function(){return a(\"0RHc\")}])},lphG:function(e,t,a){\"use strict\";a.d(t,\"a\",(function(){return c}));var n=a(\"/MKj\"),o=a(\"Sza6\");const c=()=>{const e=Object(n.b)();return(t,a,n)=>()=>e(Object(o.l)(t,a,n))}}},[[\"e0St\",0,2,1,3,4,5,7,8]]]);","map":{"version":3,"sources":["static/chunks/pages/dashboard/projects-29beabcb6296692d1a5a.js"],"names":["_N_E","window","push","0RHc","module","__webpack_exports__","__webpack_require__","r","d","__N_SSP","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","react_redux__WEBPACK_IMPORTED_MODULE_1__","_atomic_ui_components_Grid__WEBPACK_IMPORTED_MODULE_2__","_atomic_ui_components_Alert__WEBPACK_IMPORTED_MODULE_3__","_atomic_ui_components_DatePicker__WEBPACK_IMPORTED_MODULE_4__","_atomic_ui_components_Select__WEBPACK_IMPORTED_MODULE_5__","_atomic_ui_components_Table__WEBPACK_IMPORTED_MODULE_6__","_atomic_ui_components_Table_templates__WEBPACK_IMPORTED_MODULE_7__","_hooks_useHelper__WEBPACK_IMPORTED_MODULE_8__","_hooks_useMutate__WEBPACK_IMPORTED_MODULE_9__","_layouts_dashboard__WEBPACK_IMPORTED_MODULE_10__","_components_HandleBar__WEBPACK_IMPORTED_MODULE_11__","_components_FilterBar__WEBPACK_IMPORTED_MODULE_12__","_components_ProjectCard__WEBPACK_IMPORTED_MODULE_13__","_store_helpers_project__WEBPACK_IMPORTED_MODULE_14__","_store_actions_documents__WEBPACK_IMPORTED_MODULE_15__","_graphql_queries__WEBPACK_IMPORTED_MODULE_16__","TITLE","store","companies","categories","statuses","recall","Object","mutate","user","documents","state","members","root","files","screenshots","dispatch","date","onChangeDate","select","onChangeSelect","visibleFilter","setVisibleFilter","displayMethod","onChangeDisplayMethod","canEditStatus","role","name","projects","a","createElement","title","icon","buttonCreateText","onCreate","mutation","CREATE_PROJECT","query","GET_USERS","onChangeVisibleFilter","item","value","isOpen","filters","key","placeholder","onChange","withNavigate","options","selected","project","map","index","label","header","length","style","width","textAlign","data","template","onChecked","onClick","id","auth","onDelete","DELETE_PROJECT","onEdit","UPDATE_PROJECT","onCompanyInputChange","account","overflowX","onScreenshotClick","_","preview","onLink","e0St","exports","__NEXT_P","lphG","useMutate","react_redux__WEBPACK_IMPORTED_MODULE_0__","_store_actions_root__WEBPACK_IMPORTED_MODULE_1__","variables","callback"],"mappings":"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"},"name":"static/chunks/pages/dashboard/projects-29beabcb6296692d1a5a.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[24],{\n\n/***/ \"0RHc\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"__N_SSP\", function() { return __N_SSP; });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"/MKj\");\n/* harmony import */ var _atomic_ui_components_Grid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"7BXr\");\n/* harmony import */ var _atomic_ui_components_Alert__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"ZwIX\");\n/* harmony import */ var _atomic_ui_components_DatePicker__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"wZgm\");\n/* harmony import */ var _atomic_ui_components_Select__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"QclZ\");\n/* harmony import */ var _atomic_ui_components_Table__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"EJJs\");\n/* harmony import */ var _atomic_ui_components_Table_templates__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"e3uv\");\n/* harmony import */ var _hooks_useHelper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"ApjV\");\n/* harmony import */ var _hooks_useMutate__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"lphG\");\n/* harmony import */ var _layouts_dashboard__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"p9yE\");\n/* harmony import */ var _components_HandleBar__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(\"coMr\");\n/* harmony import */ var _components_FilterBar__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(\"RoTl\");\n/* harmony import */ var _components_ProjectCard__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(\"1zqG\");\n/* harmony import */ var _store_helpers_project__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(\"IxyI\");\n/* harmony import */ var _store_actions_documents__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(\"j8/+\");\n/* harmony import */ var _graphql_queries__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(\"u2Cb\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst TITLE = 'Проекты';\n\nconst Projects = ({\n  store,\n  companies,\n  categories,\n  statuses\n}) => {\n  const recall = Object(_hooks_useHelper__WEBPACK_IMPORTED_MODULE_8__[/* useHelper */ \"a\"])();\n  const mutate = Object(_hooks_useMutate__WEBPACK_IMPORTED_MODULE_9__[/* useMutate */ \"a\"])();\n  const {\n    user,\n    documents\n  } = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useSelector */ \"c\"])(state => ({\n    user: state.user,\n    members: state.root.members,\n    files: state.root.files,\n    screenshots: state.root.screenshots,\n    documents: state.documents\n  }));\n  const dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_1__[/* useDispatch */ \"b\"])();\n  const [date, onChangeDate] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])();\n  const [select, onChangeSelect] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])();\n  const [visibleFilter, setVisibleFilter] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])(false);\n  const [displayMethod, onChangeDisplayMethod] = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useState\"])('grid');\n  const canEditStatus = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => user && user.role.name === 'ADMIN', [user]);\n  const projects = Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useMemo\"])(() => documents || store.projects, [documents, store]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    dispatch(Object(_store_actions_documents__WEBPACK_IMPORTED_MODULE_15__[/* setDocuments */ \"a\"])(null));\n  }, []);\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_layouts_dashboard__WEBPACK_IMPORTED_MODULE_10__[/* default */ \"a\"], {\n    title: TITLE\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_HandleBar__WEBPACK_IMPORTED_MODULE_11__[/* default */ \"a\"], {\n    icon: 'work',\n    title: TITLE,\n    buttonCreateText: 'Создать проект',\n    onCreate: recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_14__[/* onProjectCreate */ \"b\"], {\n      companies,\n      categories,\n      statuses,\n      canEditStatus,\n      mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].CREATE_PROJECT,\n      query: _graphql_queries__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].GET_USERS\n    }),\n    onChangeVisibleFilter: () => setVisibleFilter(!visibleFilter),\n    onChangeDisplayMethod: item => onChangeDisplayMethod(item.value)\n  }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_FilterBar__WEBPACK_IMPORTED_MODULE_12__[/* default */ \"a\"], {\n    isOpen: visibleFilter,\n    filters: [/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_DatePicker__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"], {\n      key: 0,\n      value: date,\n      placeholder: 'Дата публикации',\n      onChange: onChangeDate,\n      withNavigate: true\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Select__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"], {\n      key: 1,\n      options: categories,\n      placeholder: 'Раздел',\n      selected: select,\n      onChange: item => onChangeSelect(item)\n    })],\n    options: displayMethod === 'list' ? [] : _atomic_ui_components_Table_templates__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"].project.map((item, index) => ({\n      label: item.header,\n      value: index\n    }))\n  }), projects.length === 0 && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Alert__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"], {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u043E\\u0432 \\u043D\\u0435\\u0442\"), displayMethod === 'list' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Table__WEBPACK_IMPORTED_MODULE_6__[/* default */ \"b\"], {\n    data: projects,\n    template: _atomic_ui_components_Table_templates__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"].project,\n    onChecked: () => {},\n    onClick: project => recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_14__[/* onProjectLink */ \"e\"], {\n      id: project.id,\n      auth: user\n    })(),\n    onDelete: project => recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_14__[/* onProjectDelete */ \"c\"], {\n      id: project.id,\n      project,\n      auth: user,\n      mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].DELETE_PROJECT\n    })(),\n    onEdit: project => recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_14__[/* onProjectEdit */ \"d\"], {\n      id: project.id,\n      companies,\n      categories,\n      statuses,\n      canEditStatus,\n      mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].UPDATE_PROJECT,\n      query: _graphql_queries__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].GET_USERS,\n      onCompanyInputChange: mutate(_graphql_queries__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].GET_USERS, {\n        account: 'ENTITY'\n      })\n    })(),\n    style: {\n      overflowX: 'auto',\n      width: 'calc(100vw - 290px)'\n    }\n  }), displayMethod === 'grid' && /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Grid__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"], null, projects.map(project => /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_components_ProjectCard__WEBPACK_IMPORTED_MODULE_13__[/* default */ \"b\"], {\n    key: project.id,\n    project: project,\n    onChecked: () => {},\n    onScreenshotClick: (_, key) => recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_14__[/* onProjectScreenshot */ \"f\"], {\n      screenshots: [project.preview, ...project.screenshots],\n      key\n    })(),\n    onLink: recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_14__[/* onProjectLink */ \"e\"], {\n      id: project.id,\n      user\n    }),\n    onDelete: recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_14__[/* onProjectDelete */ \"c\"], {\n      id: project.id,\n      project,\n      auth: user,\n      mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].DELETE_PROJECT\n    }),\n    onEdit: recall(_store_helpers_project__WEBPACK_IMPORTED_MODULE_14__[/* onProjectEdit */ \"d\"], {\n      id: project.id,\n      companies,\n      categories,\n      statuses,\n      canEditStatus,\n      mutation: _graphql_queries__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].UPDATE_PROJECT,\n      query: _graphql_queries__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].GET_USERS,\n      onCompanyInputChange: mutate(_graphql_queries__WEBPACK_IMPORTED_MODULE_16__[/* default */ \"a\"].GET_USERS, {\n        account: 'ENTITY'\n      })\n    }),\n    preview: true\n  }))));\n};\n\nvar __N_SSP = true;\n/* harmony default export */ __webpack_exports__[\"default\"] = (Projects);\n\n/***/ }),\n\n/***/ \"e0St\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/dashboard/projects\",\n        function () {\n          return __webpack_require__(\"0RHc\");\n        }\n      ]);\n    \n\n/***/ }),\n\n/***/ \"lphG\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return useMutate; });\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"/MKj\");\n/* harmony import */ var _store_actions_root__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"Sza6\");\n\n\nconst useMutate = () => {\n  const dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_0__[/* useDispatch */ \"b\"])();\n  return (mutation, variables, callback) => () => dispatch(Object(_store_actions_root__WEBPACK_IMPORTED_MODULE_1__[/* setMutate */ \"l\"])(mutation, variables, callback));\n};\n/* unused harmony default export */ var _unused_webpack_default_export = (useMutate);\n\n/***/ })\n\n},[[\"e0St\",0,2,1,3,4,5,7,8]]]);","inputSourceMap":{"version":3,"sources":["C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\pages\\dashboard\\projects.js","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fdashboard%2Fprojects&absolutePagePath=private-next-pages%2Fdashboard%2Fprojects.js!","C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!C:\\Users\\dan82\\Documents\\workspace\\FREELANCE\\atomic\\atomic-frontend\\hooks\\useMutate.js"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4D;AACL;AACJ;AACE;AACU;AACR;AACF;AACc;AACjB;AACA;AACI;AACH;AACA;AACI;AAC2E;AACrE;AACjB;AAC5C;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB,0EAAS;AAC1B,iBAAiB,0EAAS;AAC1B;AACA;AACA;AACA,GAAG,GAAG,uEAAW;AACjB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,mBAAmB,uEAAW;AAC9B,+BAA+B,sDAAQ;AACvC,mCAAmC,sDAAQ;AAC3C,4CAA4C,sDAAQ;AACpD,iDAAiD,sDAAQ;AACzD,wBAAwB,qDAAO;AAC/B,mBAAmB,qDAAO;AAC1B,EAAE,uDAAS;AACX,aAAa,sFAAY;AACzB,GAAG;AACH,sBAAsB,4CAAK,eAAe,mEAAe;AACzD;AACA,GAAG,eAAe,4CAAK,eAAe,sEAAS;AAC/C;AACA;AACA;AACA,qBAAqB,+EAAe;AACpC;AACA;AACA;AACA;AACA,gBAAgB,iEAAO;AACvB,aAAa,iEAAO;AACpB,KAAK;AACL;AACA;AACA,GAAG,gBAAgB,4CAAK,eAAe,sEAAS;AAChD;AACA,2BAA2B,4CAAK,eAAe,gFAAU;AACzD;AACA;AACA;AACA;AACA;AACA,KAAK,gBAAgB,4CAAK,eAAe,4EAAM;AAC/C;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,6CAA6C,qFAAS;AACtD;AACA;AACA,KAAK;AACL,GAAG,yCAAyC,4CAAK,eAAe,2EAAK;AACrE;AACA;AACA;AACA;AACA,GAAG,mHAAmH,4CAAK,eAAe,2EAAK;AAC/I;AACA,cAAc,qFAAS;AACvB,uBAAuB;AACvB,+BAA+B,6EAAa;AAC5C;AACA;AACA,KAAK;AACL,gCAAgC,+EAAe;AAC/C;AACA;AACA;AACA,gBAAgB,iEAAO;AACvB,KAAK;AACL,8BAA8B,6EAAa;AAC3C;AACA;AACA;AACA;AACA;AACA,gBAAgB,iEAAO;AACvB,aAAa,iEAAO;AACpB,mCAAmC,iEAAO;AAC1C;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG,4CAA4C,4CAAK,eAAe,0EAAI,6CAA6C,4CAAK,eAAe,wEAAW;AACnJ;AACA;AACA,uBAAuB;AACvB,0CAA0C,mFAAmB;AAC7D;AACA;AACA,KAAK;AACL,mBAAmB,6EAAa;AAChC;AACA;AACA,KAAK;AACL,qBAAqB,+EAAe;AACpC;AACA;AACA;AACA,gBAAgB,iEAAO;AACvB,KAAK;AACL,mBAAmB,6EAAa;AAChC;AACA;AACA;AACA;AACA;AACA,gBAAgB,iEAAO;AACvB,aAAa,iEAAO;AACpB,mCAAmC,iEAAO;AAC1C;AACA,OAAO;AACP,KAAK;AACL;AACA,GAAG;AACH;;AAEO;AACQ,uEAAQ,E;;;;;;;;ACvJvB;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,MAA0C;AACnE;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAA0C;AACQ;AAC3C;AACP,mBAAmB,uEAAW;AAC9B,2DAA2D,6EAAS;AACpE;AACe,mFAAS,E","file":"x","sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Grid from '../../atomic-ui/components/Grid';\nimport Alert from '../../atomic-ui/components/Alert';\nimport DatePicker from '../../atomic-ui/components/DatePicker';\nimport Select from '../../atomic-ui/components/Select';\nimport Table from '../../atomic-ui/components/Table';\nimport templates from '../../atomic-ui/components/Table/templates';\nimport { useHelper } from '../../hooks/useHelper';\nimport { useMutate } from '../../hooks/useMutate';\nimport DashboardLayout from '../../layouts/dashboard';\nimport HandleBar from '../../components/HandleBar';\nimport FilterBar from '../../components/FilterBar';\nimport ProjectCard from '../../components/ProjectCard';\nimport { onProjectCreate, onProjectEdit, onProjectDelete, onProjectLink, onProjectScreenshot } from '../../store/helpers/project';\nimport { setDocuments } from '../../store/actions/documents';\nimport queries from '../../graphql/queries';\nconst TITLE = 'Проекты';\n\nconst Projects = ({\n  store,\n  companies,\n  categories,\n  statuses\n}) => {\n  const recall = useHelper();\n  const mutate = useMutate();\n  const {\n    user,\n    documents\n  } = useSelector(state => ({\n    user: state.user,\n    members: state.root.members,\n    files: state.root.files,\n    screenshots: state.root.screenshots,\n    documents: state.documents\n  }));\n  const dispatch = useDispatch();\n  const [date, onChangeDate] = useState();\n  const [select, onChangeSelect] = useState();\n  const [visibleFilter, setVisibleFilter] = useState(false);\n  const [displayMethod, onChangeDisplayMethod] = useState('grid');\n  const canEditStatus = useMemo(() => user && user.role.name === 'ADMIN', [user]);\n  const projects = useMemo(() => documents || store.projects, [documents, store]);\n  useEffect(() => {\n    dispatch(setDocuments(null));\n  }, []);\n  return /*#__PURE__*/React.createElement(DashboardLayout, {\n    title: TITLE\n  }, /*#__PURE__*/React.createElement(HandleBar, {\n    icon: 'work',\n    title: TITLE,\n    buttonCreateText: 'Создать проект',\n    onCreate: recall(onProjectCreate, {\n      companies,\n      categories,\n      statuses,\n      canEditStatus,\n      mutation: queries.CREATE_PROJECT,\n      query: queries.GET_USERS\n    }),\n    onChangeVisibleFilter: () => setVisibleFilter(!visibleFilter),\n    onChangeDisplayMethod: item => onChangeDisplayMethod(item.value)\n  }), /*#__PURE__*/React.createElement(FilterBar, {\n    isOpen: visibleFilter,\n    filters: [/*#__PURE__*/React.createElement(DatePicker, {\n      key: 0,\n      value: date,\n      placeholder: 'Дата публикации',\n      onChange: onChangeDate,\n      withNavigate: true\n    }), /*#__PURE__*/React.createElement(Select, {\n      key: 1,\n      options: categories,\n      placeholder: 'Раздел',\n      selected: select,\n      onChange: item => onChangeSelect(item)\n    })],\n    options: displayMethod === 'list' ? [] : templates.project.map((item, index) => ({\n      label: item.header,\n      value: index\n    }))\n  }), projects.length === 0 && /*#__PURE__*/React.createElement(Alert, {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442\\u043E\\u0432 \\u043D\\u0435\\u0442\"), displayMethod === 'list' && /*#__PURE__*/React.createElement(Table, {\n    data: projects,\n    template: templates.project,\n    onChecked: () => {},\n    onClick: project => recall(onProjectLink, {\n      id: project.id,\n      auth: user\n    })(),\n    onDelete: project => recall(onProjectDelete, {\n      id: project.id,\n      project,\n      auth: user,\n      mutation: queries.DELETE_PROJECT\n    })(),\n    onEdit: project => recall(onProjectEdit, {\n      id: project.id,\n      companies,\n      categories,\n      statuses,\n      canEditStatus,\n      mutation: queries.UPDATE_PROJECT,\n      query: queries.GET_USERS,\n      onCompanyInputChange: mutate(queries.GET_USERS, {\n        account: 'ENTITY'\n      })\n    })(),\n    style: {\n      overflowX: 'auto',\n      width: 'calc(100vw - 290px)'\n    }\n  }), displayMethod === 'grid' && /*#__PURE__*/React.createElement(Grid, null, projects.map(project => /*#__PURE__*/React.createElement(ProjectCard, {\n    key: project.id,\n    project: project,\n    onChecked: () => {},\n    onScreenshotClick: (_, key) => recall(onProjectScreenshot, {\n      screenshots: [project.preview, ...project.screenshots],\n      key\n    })(),\n    onLink: recall(onProjectLink, {\n      id: project.id,\n      user\n    }),\n    onDelete: recall(onProjectDelete, {\n      id: project.id,\n      project,\n      auth: user,\n      mutation: queries.DELETE_PROJECT\n    }),\n    onEdit: recall(onProjectEdit, {\n      id: project.id,\n      companies,\n      categories,\n      statuses,\n      canEditStatus,\n      mutation: queries.UPDATE_PROJECT,\n      query: queries.GET_USERS,\n      onCompanyInputChange: mutate(queries.GET_USERS, {\n        account: 'ENTITY'\n      })\n    }),\n    preview: true\n  }))));\n};\n\nexport var __N_SSP = true;\nexport default Projects;","\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/dashboard/projects\",\n        function () {\n          return require(\"private-next-pages/dashboard/projects.js\");\n        }\n      ]);\n    ","import { useDispatch } from 'react-redux';\nimport { setMutate } from '../store/actions/root';\nexport const useMutate = () => {\n  const dispatch = useDispatch();\n  return (mutation, variables, callback) => () => dispatch(setMutate(mutation, variables, callback));\n};\nexport default useMutate;"]}}