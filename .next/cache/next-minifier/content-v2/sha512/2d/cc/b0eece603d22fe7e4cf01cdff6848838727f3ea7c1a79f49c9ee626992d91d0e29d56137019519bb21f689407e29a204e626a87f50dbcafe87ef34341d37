{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{DTHg:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/auth\",function(){return n(\"yk4J\")}])},yk4J:function(e,t,n){\"use strict\";n.r(t);var a=n(\"q1tI\"),c=n.n(a),i=n(\"20a2\"),o=n(\"vOnD\"),u=n(\"/MKj\"),r=n(\"auMy\"),s=n(\"X+Rt\"),l=n(\"qt3Z\"),p=n(\"rP4V\"),d=n(\"ApjV\"),E=n(\"u2Cb\");const f=o.d.div.withConfig({displayName:\"auth__Wrap\",componentId:\"sc-16eje6u-0\"})([\"display:grid;grid-template-columns:380px;justify-content:center;align-content:center;margin:120px 0;@media only screen and (max-width:480px){grid-template-columns:100%;margin:25px 0;}\"]),m=o.d.div.withConfig({displayName:\"auth__Loader\",componentId:\"sc-16eje6u-1\"})([\"position:fixed;top:0;left:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%;\"]);t.default=()=>{const e=Object(d.b)(),t=Object(i.useRouter)(),{user:n,stepper:o}=Object(u.c)((e=>({user:e.user,stepper:e.stepper}))),_=Object(u.b)();return Object(a.useEffect)((()=>{null!==o&&void 0!==o&&o.content||e(p.b,{mutations:{checkin:E.a.CHECKIN,googleAuth:E.a.GOOGLE_AUTH,facebookAuth:E.a.FACEBOOK_AUTH,login:E.a.LOGIN,register:E.a.REGISTER,forgotEmail:E.a.LOGIN,forgotPassword:E.a.RESET,checkResetToken:E.a.CHECK_RESET_TOKEN}})()}),[o]),Object(a.useEffect)((()=>{n&&n.authenticated&&t.push({pathname:\"/profile\",query:t.query})}),[n]),Object(a.useEffect)((()=>()=>_(Object(l.a)(null))),[_,l.a]),!o||n.authenticated?c.a.createElement(m,null,c.a.createElement(r.a,null)):c.a.createElement(s.a,{title:\"\\u0410\\u0432\\u0442\\u043e\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u044f\"},c.a.createElement(f,{key:o.name},o.content))}}},[[\"DTHg\",1,2,5,6,0,3,4,7]]]);","map":{"version":3,"sources":["static/chunks/pages/auth-a53d6352e4777e9872af.js"],"names":["_N_E","window","push","DTHg","module","exports","__webpack_require__","__NEXT_P","yk4J","__webpack_exports__","r","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","next_router__WEBPACK_IMPORTED_MODULE_1__","styled_components__WEBPACK_IMPORTED_MODULE_2__","react_redux__WEBPACK_IMPORTED_MODULE_3__","_atomic_ui_components_Spinner__WEBPACK_IMPORTED_MODULE_4__","_layouts_default__WEBPACK_IMPORTED_MODULE_5__","_store_actions_stepper__WEBPACK_IMPORTED_MODULE_6__","_store_helpers_user__WEBPACK_IMPORTED_MODULE_7__","_hooks_useHelper__WEBPACK_IMPORTED_MODULE_8__","_graphql_queries__WEBPACK_IMPORTED_MODULE_9__","Wrap","div","withConfig","displayName","componentId","Loader","recall","Object","router","user","stepper","state","dispatch","content","mutations","checkin","CHECKIN","googleAuth","GOOGLE_AUTH","facebookAuth","FACEBOOK_AUTH","login","LOGIN","register","REGISTER","forgotEmail","forgotPassword","RESET","checkResetToken","CHECK_RESET_TOKEN","authenticated","pathname","query","a","createElement","title","key","name"],"mappings":"AAAAA,MACCC,OAAyB,iBAAIA,OAAyB,kBAAK,IAAIC,KAAK,CAAC,CAAC,IAAI,CAErEC,KACA,SAAUC,EAAQC,EAASC,IAG5BL,OAAOM,SAAWN,OAAOM,UAAY,IAAIL,KAAK,CAC7C,QACA,WACE,OAAOI,EAAoB,YAO7BE,KACA,SAAUJ,EAAQK,EAAqBH,GAE7C,aACAA,EAAoBI,EAAED,GACD,IAAIE,EAAqCL,EAAoB,QACzDM,EAA0DN,EAAoBO,EAAEF,GAChFG,EAA2CR,EAAoB,QAE/DS,EAAiDT,EAAoB,QACrEU,EAA2CV,EAAoB,QAC/DW,EAA6DX,EAAoB,QACjFY,EAAgDZ,EAAoB,QACpEa,EAAsDb,EAAoB,QAC1Ec,EAAmDd,EAAoB,QACvEe,EAAgDf,EAAoB,QACpEgB,EAAgDhB,EAAoB,QAW7F,MACMiB,EAAOR,EAAgE,EAAES,IAAIC,WAAW,CAC5FC,YAAa,aACbC,YAAa,gBAFFZ,CAGV,CAAC,4LACEa,EAASb,EAAgE,EAAES,IAAIC,WAAW,CAC9FC,YAAa,eACbC,YAAa,gBAFAZ,CAGZ,CAAC,+GAoDyBN,EAA6B,QAlD7C,KACX,MAAMoB,EAASC,OAAOT,EAAiE,EAAxES,GACTC,EAASD,OAAOhB,EAAoD,UAA3DgB,IACTE,KACJA,EAAIC,QACJA,GACEH,OAAOd,EAA8D,EAArEc,EAAwEI,IAAS,CACnFF,KAAME,EAAMF,KACZC,QAASC,EAAMD,YAEXE,EAAWL,OAAOd,EAA8D,EAArEc,GA6BjB,OA5BAA,OAAOnB,EAA8C,UAArDmB,EAAwD,KACpC,OAAZG,QAAgC,IAAZA,GAAsBA,EAAQG,SACtDP,EAAOT,EAAwE,EAAG,CAChFiB,UAAW,CACTC,QAAShB,EAA+D,EAAEiB,QAC1EC,WAAYlB,EAA+D,EAAEmB,YAC7EC,aAAcpB,EAA+D,EAAEqB,cAC/EC,MAAOtB,EAA+D,EAAEuB,MACxEC,SAAUxB,EAA+D,EAAEyB,SAC3EC,YAAa1B,EAA+D,EAAEuB,MAC9EI,eAAgB3B,EAA+D,EAAE4B,MACjFC,gBAAiB7B,EAA+D,EAAE8B,oBATtFvB,KAaD,CAACI,IACJH,OAAOnB,EAA8C,UAArDmB,EAAwD,KAClDE,GAAQA,EAAKqB,eACftB,EAAO7B,KAAK,CACVoD,SAAU,WACVC,MAAOxB,EAAOwB,UAGjB,CAACvB,IACJF,OAAOnB,EAA8C,UAArDmB,EAAwD,IAC/C,IAAMK,EAASL,OAAOX,EAAwE,EAA/EW,CAAkF,QACvG,CAACK,EAAUhB,EAAwE,KAEjFc,GAAWD,EAAKqB,cACCzC,EAA2C4C,EAAEC,cAAc7B,EAAQ,KAAmBhB,EAA2C4C,EAAEC,cAAcxC,EAA4E,EAAG,OAGlOL,EAA2C4C,EAAEC,cAAcvC,EAA+D,EAAG,CAC/IwC,MAtDU,sEAuDI9C,EAA2C4C,EAAEC,cAAclC,EAAM,CAC/EoC,IAAK1B,EAAQ2B,MACZ3B,EAAQG,aAOX,CAAC,CAAC,OAAO,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE"},"name":"static/chunks/pages/auth-a53d6352e4777e9872af.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[17],{\n\n/***/ \"DTHg\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/auth\",\n      function () {\n        return __webpack_require__(\"yk4J\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"yk4J\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"vOnD\");\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"/MKj\");\n/* harmony import */ var _atomic_ui_components_Spinner__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"auMy\");\n/* harmony import */ var _layouts_default__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"X+Rt\");\n/* harmony import */ var _store_actions_stepper__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"qt3Z\");\n/* harmony import */ var _store_helpers_user__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"rP4V\");\n/* harmony import */ var _hooks_useHelper__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"ApjV\");\n/* harmony import */ var _graphql_queries__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"u2Cb\");\n\n\n\n\n\n\n\n\n\n\nconst TITLE = 'Авторизация';\nconst Wrap = styled_components__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"d\"].div.withConfig({\n  displayName: \"auth__Wrap\",\n  componentId: \"sc-16eje6u-0\"\n})([\"display:grid;grid-template-columns:380px;justify-content:center;align-content:center;margin:120px 0;@media only screen and (max-width:480px){grid-template-columns:100%;margin:25px 0;}\"]);\nconst Loader = styled_components__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"d\"].div.withConfig({\n  displayName: \"auth__Loader\",\n  componentId: \"sc-16eje6u-1\"\n})([\"position:fixed;top:0;left:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%;\"]);\n\nconst Auth = () => {\n  const recall = Object(_hooks_useHelper__WEBPACK_IMPORTED_MODULE_8__[/* useHelper */ \"b\"])();\n  const router = Object(next_router__WEBPACK_IMPORTED_MODULE_1__[\"useRouter\"])();\n  const {\n    user,\n    stepper\n  } = Object(react_redux__WEBPACK_IMPORTED_MODULE_3__[/* useSelector */ \"c\"])(state => ({\n    user: state.user,\n    stepper: state.stepper\n  }));\n  const dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_3__[/* useDispatch */ \"b\"])();\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (!(stepper !== null && stepper !== void 0 && stepper.content)) {\n      recall(_store_helpers_user__WEBPACK_IMPORTED_MODULE_7__[/* onUserCheckin */ \"b\"], {\n        mutations: {\n          checkin: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].CHECKIN,\n          googleAuth: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].GOOGLE_AUTH,\n          facebookAuth: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].FACEBOOK_AUTH,\n          login: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].LOGIN,\n          register: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].REGISTER,\n          forgotEmail: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].LOGIN,\n          forgotPassword: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].RESET,\n          checkResetToken: _graphql_queries__WEBPACK_IMPORTED_MODULE_9__[/* default */ \"a\"].CHECK_RESET_TOKEN\n        }\n      })();\n    }\n  }, [stepper]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    if (user && user.authenticated) {\n      router.push({\n        pathname: '/profile',\n        query: router.query\n      });\n    }\n  }, [user]);\n  Object(react__WEBPACK_IMPORTED_MODULE_0__[\"useEffect\"])(() => {\n    return () => dispatch(Object(_store_actions_stepper__WEBPACK_IMPORTED_MODULE_6__[/* setStepper */ \"a\"])(null));\n  }, [dispatch, _store_actions_stepper__WEBPACK_IMPORTED_MODULE_6__[/* setStepper */ \"a\"]]);\n\n  if (!stepper || user.authenticated) {\n    return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Loader, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_atomic_ui_components_Spinner__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"], null));\n  }\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_layouts_default__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"], {\n    title: TITLE\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(Wrap, {\n    key: stepper.name\n  }, stepper.content));\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Auth);\n\n/***/ })\n\n},[[\"DTHg\",1,2,5,6,0,3,4,7]]]);","inputSourceMap":{"version":3,"sources":["/Users/malcore/Documents/workspace/freelance/atomic/atomic-frontend/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Fauth&absolutePagePath=private-next-pages%2Fauth.js!","/Users/malcore/Documents/workspace/freelance/atomic/atomic-frontend/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/malcore/Documents/workspace/freelance/atomic/atomic-frontend/pages/auth.js"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AACA,eAAe,mBAAO,CAAC,MAA4B;AACnD;AACA;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAyC;AACD;AACD;AACgB;AACD;AACP;AACO;AACA;AACP;AACN;AACzC;AACA,aAAa,iEAAM;AACnB;AACA;AACA,CAAC,iBAAiB,4BAA4B,uBAAuB,qBAAqB,eAAe,yCAAyC,2BAA2B,eAAe;AAC5L,eAAe,iEAAM;AACrB;AACA;AACA,CAAC,mBAAmB,MAAM,OAAO,aAAa,uBAAuB,mBAAmB,WAAW,YAAY;;AAE/G;AACA,iBAAiB,0EAAS;AAC1B,iBAAiB,6DAAS;AAC1B;AACA;AACA;AACA,GAAG,GAAG,uEAAW;AACjB;AACA;AACA,GAAG;AACH,mBAAmB,uEAAW;AAC9B,EAAE,uDAAS;AACX;AACA,aAAa,yEAAa;AAC1B;AACA,mBAAmB,gEAAO;AAC1B,sBAAsB,gEAAO;AAC7B,wBAAwB,gEAAO;AAC/B,iBAAiB,gEAAO;AACxB,oBAAoB,gEAAO;AAC3B,uBAAuB,gEAAO;AAC9B,0BAA0B,gEAAO;AACjC,2BAA2B,gEAAO;AAClC;AACA,OAAO;AACP;AACA,GAAG;AACH,EAAE,uDAAS;AACX;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH,EAAE,uDAAS;AACX,0BAA0B,iFAAU;AACpC,GAAG,aAAa,yEAAU;;AAE1B;AACA,wBAAwB,4CAAK,0CAA0C,4CAAK,eAAe,6EAAO;AAClG;;AAEA,sBAAsB,4CAAK,eAAe,gEAAa;AACvD;AACA,GAAG,eAAe,4CAAK;AACvB;AACA,GAAG;AACH;;AAEe,mEAAI,E","file":"x","sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/auth\",\n      function () {\n        return require(\"private-next-pages/auth.js\");\n      }\n    ]);\n  ","import React, { useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport styled from 'styled-components';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Spinner from '../atomic-ui/components/Spinner';\nimport DefaultLayout from '../layouts/default';\nimport { setStepper } from '../store/actions/stepper';\nimport { onUserCheckin } from '../store/helpers/user';\nimport { useHelper } from '../hooks/useHelper';\nimport queries from '../graphql/queries';\nconst TITLE = 'Авторизация';\nconst Wrap = styled.div.withConfig({\n  displayName: \"auth__Wrap\",\n  componentId: \"sc-16eje6u-0\"\n})([\"display:grid;grid-template-columns:380px;justify-content:center;align-content:center;margin:120px 0;@media only screen and (max-width:480px){grid-template-columns:100%;margin:25px 0;}\"]);\nconst Loader = styled.div.withConfig({\n  displayName: \"auth__Loader\",\n  componentId: \"sc-16eje6u-1\"\n})([\"position:fixed;top:0;left:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%;\"]);\n\nconst Auth = () => {\n  const recall = useHelper();\n  const router = useRouter();\n  const {\n    user,\n    stepper\n  } = useSelector(state => ({\n    user: state.user,\n    stepper: state.stepper\n  }));\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!(stepper !== null && stepper !== void 0 && stepper.content)) {\n      recall(onUserCheckin, {\n        mutations: {\n          checkin: queries.CHECKIN,\n          googleAuth: queries.GOOGLE_AUTH,\n          facebookAuth: queries.FACEBOOK_AUTH,\n          login: queries.LOGIN,\n          register: queries.REGISTER,\n          forgotEmail: queries.LOGIN,\n          forgotPassword: queries.RESET,\n          checkResetToken: queries.CHECK_RESET_TOKEN\n        }\n      })();\n    }\n  }, [stepper]);\n  useEffect(() => {\n    if (user && user.authenticated) {\n      router.push({\n        pathname: '/profile',\n        query: router.query\n      });\n    }\n  }, [user]);\n  useEffect(() => {\n    return () => dispatch(setStepper(null));\n  }, [dispatch, setStepper]);\n\n  if (!stepper || user.authenticated) {\n    return /*#__PURE__*/React.createElement(Loader, null, /*#__PURE__*/React.createElement(Spinner, null));\n  }\n\n  return /*#__PURE__*/React.createElement(DefaultLayout, {\n    title: TITLE\n  }, /*#__PURE__*/React.createElement(Wrap, {\n    key: stepper.name\n  }, stepper.content));\n};\n\nexport default Auth;"]}}