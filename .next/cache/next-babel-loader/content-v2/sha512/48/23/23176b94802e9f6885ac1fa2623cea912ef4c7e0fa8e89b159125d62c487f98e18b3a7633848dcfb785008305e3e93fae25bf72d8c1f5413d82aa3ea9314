{"ast":null,"code":"var _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useMutation } from '@apollo/react-hooks';\nimport { GoogleLogin } from 'react-google-login';\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\nimport Container from '../../atomic-ui/components/Container';\nimport Row from '../../atomic-ui/components/Row';\nimport Column from '../../atomic-ui/components/Column';\nimport Title from '../../atomic-ui/components/Title';\nimport Input from '../../atomic-ui/components/Input';\nimport Button from '../../atomic-ui/components/Button';\nimport Divider from '../../atomic-ui/components/Divider';\nimport Icon from '../../atomic-ui/components/Icon';\nimport Alert from '../../atomic-ui/components/Alert';\nimport Form from '../Form';\nvar GOOGLE_CLIENT_ID = '1008300307671-dvv5no8uimgk2lodr76m9rnnva8g0lii.apps.googleusercontent.com';\nvar FACEBOOK_APP_ID = 697333197849130;\nexport var SocialButtons = styled(Row).withConfig({\n  displayName: \"FormCheckin__SocialButtons\",\n  componentId: \"sc-115b6b6-0\"\n})([\"justify-content:center;\"]);\n_c = SocialButtons;\nexport var GoogleButton = styled(Button).withConfig({\n  displayName: \"FormCheckin__GoogleButton\",\n  componentId: \"sc-115b6b6-1\"\n})([\"background:#c5331e;height:var(--input-height-m);min-height:var(--input-height-m);&:hover{background:#c5331e;opacity:0.65;}\"]);\n_c2 = GoogleButton;\nexport var FacebookButton = styled(Button).withConfig({\n  displayName: \"FormCheckin__FacebookButton\",\n  componentId: \"sc-115b6b6-2\"\n})([\"background:#4e6297;height:var(--input-height-m);min-height:var(--input-height-m);&:hover{background:#4e6297;opacity:0.65;}\"]);\n_c3 = FacebookButton;\nexport var GoogleAuthButton = function GoogleAuthButton(_ref) {\n  _s2();\n\n  var mutation = _ref.mutation,\n      onError = _ref.onError,\n      onFinally = _ref.onFinally,\n      onSubmit = _ref.onSubmit;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      isLoading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  var _useMutation = useMutation(mutation),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      auth = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      data = _useMutation2$.data,\n      error = _useMutation2$.error;\n\n  useEffect(function () {\n    if (data && data.googleAuth && data.googleAuth) {\n      setLoading(false);\n      if (onFinally) onFinally(data.googleAuth);\n    }\n  }, [data, onFinally]);\n  useEffect(function () {\n    if (error) {\n      console.log('GoogleAuthButton error', error);\n      setLoading(false);\n    }\n  }, [error]);\n  return /*#__PURE__*/React.createElement(GoogleLogin, {\n    clientId: GOOGLE_CLIENT_ID,\n    onSuccess: function onSuccess(response) {\n      return onSubmit(response, auth);\n    },\n    onFailure: onError,\n    onRequest: function onRequest() {\n      return setLoading(true);\n    },\n    cookiePolicy: 'single_host_origin',\n    render: function render(_ref2) {\n      var onClick = _ref2.onClick;\n      return /*#__PURE__*/React.createElement(GoogleButton, {\n        type: 'button',\n        kind: 'icon',\n        appearance: 'clear',\n        onClick: onClick,\n        disabled: isLoading\n      }, /*#__PURE__*/React.createElement(Icon, {\n        icon: 'google',\n        stroke: 'none',\n        fill: 'white'\n      }));\n    }\n  });\n};\n\n_s2(GoogleAuthButton, \"S0A/+9XKmvUrum2UElIuGuVkcsw=\", false, function () {\n  return [useMutation];\n});\n\n_c4 = GoogleAuthButton;\nexport var FacebookAuthButton = function FacebookAuthButton(_ref3) {\n  _s3();\n\n  var mutation = _ref3.mutation,\n      onError = _ref3.onError,\n      onFinally = _ref3.onFinally,\n      onSubmit = _ref3.onSubmit;\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      isLoading = _React$useState4[0],\n      setLoading = _React$useState4[1];\n\n  var _useMutation3 = useMutation(mutation),\n      _useMutation4 = _slicedToArray(_useMutation3, 2),\n      auth = _useMutation4[0],\n      _useMutation4$ = _useMutation4[1],\n      error = _useMutation4$.error,\n      data = _useMutation4$.data;\n\n  useEffect(function () {\n    if (data && data.facebookAuth && data.facebookAuth) {\n      setLoading(false);\n      if (onFinally) onFinally(data.facebookAuth);\n    }\n  }, [data, onFinally]);\n  useEffect(function () {\n    if (error) {\n      console.log('FacebookAuthButton error', error);\n      setLoading(false);\n      if (onError) onError(error);\n    }\n  }, [error, onError]);\n\n  var _onClick = function onClick(event, renderProps) {\n    event.preventDefault();\n    renderProps.onClick(event);\n    setLoading(true);\n  };\n\n  return /*#__PURE__*/React.createElement(FacebookLogin, {\n    appId: FACEBOOK_APP_ID,\n    autoLoad: false,\n    callback: function callback(response) {\n      return onSubmit(response, auth);\n    },\n    render: function render(props) {\n      return /*#__PURE__*/React.createElement(FacebookButton, {\n        type: 'button',\n        kind: 'icon',\n        appearance: 'clear',\n        onClick: function onClick(event) {\n          return _onClick(event, props);\n        },\n        disabled: isLoading\n      }, /*#__PURE__*/React.createElement(Icon, {\n        icon: 'facebook',\n        stroke: 'none',\n        fill: 'white'\n      }));\n    }\n  });\n};\n\n_s3(FacebookAuthButton, \"/9Wd3ZseOcDyhodlQxwZBri+0MY=\", false, function () {\n  return [useMutation];\n});\n\n_c5 = FacebookAuthButton;\nexport var Checkin = function Checkin(_ref4) {\n  var _ref4$title = _ref4.title,\n      title = _ref4$title === void 0 ? true : _ref4$title,\n      mutations = _ref4.mutations,\n      appearance = _ref4.appearance,\n      className = _ref4.className,\n      onGoogleError = _ref4.onGoogleError,\n      onFacebookError = _ref4.onFacebookError,\n      onGoogleFinally = _ref4.onGoogleFinally,\n      onFacebookFinally = _ref4.onFacebookFinally,\n      onGoogleSubmit = _ref4.onGoogleSubmit,\n      onFacebookSubmit = _ref4.onFacebookSubmit,\n      onForgot = _ref4.onForgot,\n      onCreate = _ref4.onCreate,\n      onSubmit = _ref4.onSubmit;\n  return /*#__PURE__*/React.createElement(Form, {\n    className: className,\n    appearance: appearance,\n    mutation: mutations.checkin,\n    onSubmit: onSubmit\n  }, function (_ref5) {\n    var register = _ref5.register,\n        errors = _ref5.errors,\n        loading = _ref5.loading;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, title && /*#__PURE__*/React.createElement(Container, null, /*#__PURE__*/React.createElement(Title, {\n      style: {\n        textAlign: 'center'\n      },\n      tag: 'h4'\n    }, \"\\u0412\\u0445\\u043E\\u0434\")), /*#__PURE__*/React.createElement(Column, null, errors && errors.login && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%'\n      },\n      appearance: 'error'\n    }, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u043E \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u043E \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D/\\u044D\\u043B. \\u043F\\u043E\\u0447\\u0442\\u0430\"), /*#__PURE__*/React.createElement(Input, {\n      type: 'text',\n      name: 'login',\n      ref: register({\n        required: true\n      }),\n      placeholder: 'Телефон или адрес эл. почты',\n      appearance: 'ghost',\n      disabled: loading,\n      required: true\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: 'button',\n      appearance: 'link',\n      onClick: onForgot\n    }, \"\\u0417\\u0430\\u0431\\u044B\\u043B\\u0438 \\u0430\\u0434\\u0440\\u0435\\u0441 \\u044D\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u043E\\u0439 \\u043F\\u043E\\u0447\\u0442\\u044B?\")), /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Button, {\n      style: {\n        flexGrow: 1\n      },\n      type: 'button',\n      disabled: loading,\n      onClick: onCreate\n    }, \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\"), /*#__PURE__*/React.createElement(Button, {\n      style: {\n        flexGrow: 1\n      },\n      type: 'submit',\n      disabled: loading\n    }, \"\\u0414\\u0430\\u043B\\u0435\\u0435\")), /*#__PURE__*/React.createElement(Divider, null), /*#__PURE__*/React.createElement(SocialButtons, null, /*#__PURE__*/React.createElement(GoogleAuthButton, {\n      mutation: mutations.googleAuth,\n      onError: onGoogleError,\n      onFinally: onGoogleFinally,\n      onSubmit: onGoogleSubmit\n    }), /*#__PURE__*/React.createElement(FacebookAuthButton, {\n      mutation: mutations.facebookAuth,\n      onError: onFacebookError,\n      onFinally: onFacebookFinally,\n      onSubmit: onFacebookSubmit\n    })));\n  });\n};\n_c6 = Checkin;\nexport default Checkin;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"SocialButtons\");\n$RefreshReg$(_c2, \"GoogleButton\");\n$RefreshReg$(_c3, \"FacebookButton\");\n$RefreshReg$(_c4, \"GoogleAuthButton\");\n$RefreshReg$(_c5, \"FacebookAuthButton\");\n$RefreshReg$(_c6, \"Checkin\");","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/components/FormCheckin/index.js"],"names":["React","useEffect","styled","useMutation","GoogleLogin","FacebookLogin","Container","Row","Column","Title","Input","Button","Divider","Icon","Alert","Form","GOOGLE_CLIENT_ID","FACEBOOK_APP_ID","SocialButtons","GoogleButton","FacebookButton","GoogleAuthButton","mutation","onError","onFinally","onSubmit","useState","isLoading","setLoading","auth","data","error","googleAuth","console","log","response","onClick","FacebookAuthButton","facebookAuth","event","renderProps","preventDefault","props","Checkin","title","mutations","appearance","className","onGoogleError","onFacebookError","onGoogleFinally","onFacebookFinally","onGoogleSubmit","onFacebookSubmit","onForgot","onCreate","checkin","register","errors","loading","textAlign","login","width","required","flexGrow"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport styled from 'styled-components'\nimport { useMutation } from '@apollo/react-hooks'\nimport { GoogleLogin } from 'react-google-login'\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\n\nimport Container from '../../atomic-ui/components/Container'\nimport Row from '../../atomic-ui/components/Row'\nimport Column from '../../atomic-ui/components/Column'\nimport Title from '../../atomic-ui/components/Title'\nimport Input from '../../atomic-ui/components/Input'\nimport Button from '../../atomic-ui/components/Button'\nimport Divider from '../../atomic-ui/components/Divider'\nimport Icon from '../../atomic-ui/components/Icon'\nimport Alert from '../../atomic-ui/components/Alert'\n\nimport Form from '../Form'\n\nconst GOOGLE_CLIENT_ID = '1008300307671-dvv5no8uimgk2lodr76m9rnnva8g0lii.apps.googleusercontent.com'\nconst FACEBOOK_APP_ID = 697333197849130\n\nexport const SocialButtons = styled(Row)`\n  justify-content: center;\n`\n\nexport const GoogleButton = styled(Button)`\n  background: #c5331e;\n  height: var(--input-height-m);\n  min-height: var(--input-height-m);\n\n  &:hover {\n    background: #c5331e;\n    opacity: 0.65;\n  }\n`\n\nexport const FacebookButton = styled(Button)`\n  background: #4e6297;\n  height: var(--input-height-m);\n  min-height: var(--input-height-m);\n\n  &:hover {\n    background: #4e6297;\n    opacity: 0.65;\n  }\n`\n\nexport const GoogleAuthButton = ({ mutation, onError, onFinally, onSubmit }) => {\n  const [isLoading, setLoading] = React.useState(false)\n  const [auth, { data, error }] = useMutation(mutation)\n\n  useEffect(() => {\n    if (data && data.googleAuth && data.googleAuth) {\n      setLoading(false)\n      if (onFinally) onFinally(data.googleAuth)\n    }\n  }, [data, onFinally])\n\n  useEffect(() => {\n    if (error) {\n      console.log('GoogleAuthButton error', error)\n      setLoading(false)\n    }\n  }, [error])\n\n  return (\n    <GoogleLogin\n      clientId={GOOGLE_CLIENT_ID}\n      onSuccess={(response) => onSubmit(response, auth)}\n      onFailure={onError}\n      onRequest={() => setLoading(true)}\n      cookiePolicy={'single_host_origin'}\n      render={({ onClick }) => (\n        <GoogleButton\n          type={'button'}\n          kind={'icon'}\n          appearance={'clear'}\n          onClick={onClick}\n          disabled={isLoading}>\n          <Icon icon={'google'} stroke={'none'} fill={'white'} />\n        </GoogleButton>\n      )}\n    />\n  )\n}\n\nexport const FacebookAuthButton = ({ mutation, onError, onFinally, onSubmit }) => {\n  const [isLoading, setLoading] = React.useState(false)\n  const [auth, { error, data }] = useMutation(mutation)\n\n  useEffect(() => {\n    if (data && data.facebookAuth && data.facebookAuth) {\n      setLoading(false)\n      if (onFinally) onFinally(data.facebookAuth)\n    }\n  }, [data, onFinally])\n\n  useEffect(() => {\n    if (error) {\n      console.log('FacebookAuthButton error', error)\n      setLoading(false)\n      if (onError) onError(error)\n    }\n  }, [error, onError])\n\n  const onClick = (event, renderProps) => {\n    event.preventDefault()\n    renderProps.onClick(event)\n    setLoading(true)\n  }\n\n  return (\n    <FacebookLogin\n      appId={FACEBOOK_APP_ID}\n      autoLoad={false}\n      callback={(response) => onSubmit(response, auth)}\n      render={(props) => (\n        <FacebookButton\n          type={'button'}\n          kind={'icon'}\n          appearance={'clear'}\n          onClick={(event) => onClick(event, props)}\n          disabled={isLoading}>\n          <Icon icon={'facebook'} stroke={'none'} fill={'white'} />\n        </FacebookButton>\n      )}\n    />\n  )\n}\n\nexport const Checkin = ({\n  title = true,\n  mutations,\n  appearance,\n  className,\n  onGoogleError,\n  onFacebookError,\n  onGoogleFinally,\n  onFacebookFinally,\n  onGoogleSubmit,\n  onFacebookSubmit,\n  onForgot,\n  onCreate,\n  onSubmit\n}) => (\n  <Form\n    className={className}\n    appearance={appearance}\n    mutation={mutations.checkin}\n    onSubmit={onSubmit}>\n    {({ register, errors, loading }) => (\n      <React.Fragment>\n        {title && (\n          <Container>\n            <Title style={{ textAlign: 'center' }} tag={'h4'}>\n              Вход\n            </Title>\n          </Container>\n        )}\n\n        <Column>\n          {errors && errors.login && (\n            <Alert style={{ width: '100%' }} appearance={'error'}>\n              Неверно указано или не указано телефон/эл. почта\n            </Alert>\n          )}\n          <Input\n            type={'text'}\n            name={'login'}\n            ref={register({ required: true })}\n            placeholder={'Телефон или адрес эл. почты'}\n            appearance={'ghost'}\n            disabled={loading}\n            required\n          />\n          <Button type={'button'} appearance={'link'} onClick={onForgot}>\n            Забыли адрес электронной почты?\n          </Button>\n        </Column>\n\n        <Row>\n          <Button style={{ flexGrow: 1 }} type={'button'} disabled={loading} onClick={onCreate}>\n            Создать\n          </Button>\n          <Button style={{ flexGrow: 1 }} type={'submit'} disabled={loading}>\n            Далее\n          </Button>\n        </Row>\n\n        <Divider />\n\n        <SocialButtons>\n          <GoogleAuthButton\n            mutation={mutations.googleAuth}\n            onError={onGoogleError}\n            onFinally={onGoogleFinally}\n            onSubmit={onGoogleSubmit}\n          />\n          <FacebookAuthButton\n            mutation={mutations.facebookAuth}\n            onError={onFacebookError}\n            onFinally={onFacebookFinally}\n            onSubmit={onFacebookSubmit}\n          />\n        </SocialButtons>\n      </React.Fragment>\n    )}\n  </Form>\n)\n\nexport default Checkin\n"]},"metadata":{},"sourceType":"module"}