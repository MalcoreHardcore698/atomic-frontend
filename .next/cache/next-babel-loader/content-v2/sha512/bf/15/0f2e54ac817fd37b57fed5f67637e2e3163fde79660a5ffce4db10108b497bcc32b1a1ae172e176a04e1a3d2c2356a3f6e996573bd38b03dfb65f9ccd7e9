{"ast":null,"code":"import _taggedTemplateLiteral from \"C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\dan82\\\\Documents\\\\workspace\\\\FREELANCE\\\\atomic\\\\atomic-frontend\\\\atomic-ui\\\\components\\\\GlobalSearch\\\\index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\\n  width: 100%;\\n  height: 100%;\\n  flex-grow: 1;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: var(--default-gap);\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport Column from '../Column';\nimport Select from '../Select';\nimport Search from '../Search';\nimport Spinner from '../Spinner';\nimport Alert from '../Alert';\nexport var Wrap = styled(Column)(_templateObject());\n_c = Wrap;\nexport var Loader = styled.div(_templateObject2());\n/*\n * const entities: entity[]\n * type entity = {\n *  label: string;\n *  value: ObjectID | string;\n *  render: ReactNode | Element | string;\n * }\n */\n\n_c2 = Loader;\nexport var GlobalSearch = function GlobalSearch(_ref) {\n  _s();\n\n  var result = _ref.result,\n      search = _ref.search,\n      loading = _ref.loading,\n      entities = _ref.entities,\n      initialEntity = _ref.initialEntity,\n      appearance = _ref.appearance,\n      style = _ref.style,\n      className = _ref.className,\n      onChange = _ref.onChange,\n      onSubmit = _ref.onSubmit;\n\n  var _useState = useState(initialEntity),\n      entity = _useState[0],\n      setEntity = _useState[1];\n\n  var searchRef = useRef(null);\n\n  var handleChange = function handleChange(value) {\n    setEntity(value);\n\n    if (searchRef !== null && searchRef !== void 0 && searchRef.current) {\n      searchRef.current.value = '';\n    }\n  };\n\n  var renderContent = function renderContent() {\n    return __jsx(React.Fragment, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 5\n      }\n    }, __jsx(Search, {\n      ref: searchRef,\n      appearance: 'ghost',\n      placeholder: 'Поиск',\n      defaultValue: search,\n      onSubmit: onSubmit,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }\n    }), (result === null || result === void 0 ? void 0 : result.length) > 0 ? result.map(function (item) {\n      return entity.render && __jsx(React.Fragment, {\n        key: item.id || item.email,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 15\n        }\n      }, entity.render(item));\n    }) : __jsx(Alert, {\n      style: {\n        width: '100%',\n        textAlign: 'center',\n        flexGrow: 1\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, \"\\u041D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E\"));\n  };\n\n  useEffect(function () {\n    if (onChange) onChange(entity);\n  }, [entity, onChange]);\n  return __jsx(Wrap, {\n    style: style,\n    className: className,\n    appearance: appearance,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  }, __jsx(Select, {\n    appearance: 'ghost',\n    defaultValue: entity,\n    placeholder: 'Где будем искать?',\n    label: 'Зона поиска',\n    options: entities,\n    onChange: handleChange,\n    isLoading: loading,\n    isSearchable: true,\n    isClearable: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }), !loading && entity && renderContent(), loading && __jsx(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, __jsx(Spinner, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  })));\n};\n\n_s(GlobalSearch, \"n+GBjXtYF0rSlQlVsh/loMI5v68=\");\n\n_c3 = GlobalSearch;\nGlobalSearch.defaultProps = {\n  appearance: 'clear'\n};\nexport default GlobalSearch;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Wrap\");\n$RefreshReg$(_c2, \"Loader\");\n$RefreshReg$(_c3, \"GlobalSearch\");","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/atomic-ui/components/GlobalSearch/index.js"],"names":["React","useState","useEffect","useRef","styled","Column","Select","Search","Spinner","Alert","Wrap","Loader","div","GlobalSearch","result","search","loading","entities","initialEntity","appearance","style","className","onChange","onSubmit","entity","setEntity","searchRef","handleChange","value","current","renderContent","length","map","item","render","id","email","width","textAlign","flexGrow","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\nimport styled from 'styled-components'\n\nimport Column from '../Column'\nimport Select from '../Select'\nimport Search from '../Search'\nimport Spinner from '../Spinner'\nimport Alert from '../Alert'\n\nexport const Wrap = styled(Column)`\n  padding: var(--default-gap);\n`\n\nexport const Loader = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n  flex-grow: 1;\n`\n\n/*\n * const entities: entity[]\n * type entity = {\n *  label: string;\n *  value: ObjectID | string;\n *  render: ReactNode | Element | string;\n * }\n */\n\nexport const GlobalSearch = ({\n  result,\n  search,\n  loading,\n  entities,\n  initialEntity,\n  appearance,\n  style,\n  className,\n  onChange,\n  onSubmit\n}) => {\n  const [entity, setEntity] = useState(initialEntity)\n  const searchRef = useRef(null)\n\n  const handleChange = (value) => {\n    setEntity(value)\n\n    if (searchRef?.current) {\n      searchRef.current.value = ''\n    }\n  }\n\n  const renderContent = () => (\n    <React.Fragment>\n      <Search\n        ref={searchRef}\n        appearance={'ghost'}\n        placeholder={'Поиск'}\n        defaultValue={search}\n        onSubmit={onSubmit}\n      />\n\n      {result?.length > 0 ?\n        result.map(\n          (item) =>\n            entity.render && (\n              <React.Fragment key={item.id || item.email}>{entity.render(item)}</React.Fragment>\n            )\n        ) : (\n          <Alert style={{ width: '100%', textAlign: 'center', flexGrow: 1 }}>\n            Ничего не найдено\n          </Alert>\n        )}\n    </React.Fragment>\n  )\n\n  useEffect(() => {\n    if (onChange) onChange(entity)\n  }, [entity, onChange])\n\n  return (\n    <Wrap style={style} className={className} appearance={appearance}>\n      <Select\n        appearance={'ghost'}\n        defaultValue={entity}\n        placeholder={'Где будем искать?'}\n        label={'Зона поиска'}\n        options={entities}\n        onChange={handleChange}\n        isLoading={loading}\n        isSearchable\n        isClearable\n      />\n\n      {!loading && entity && renderContent()}\n\n      {loading && (\n        <Loader>\n          <Spinner />\n        </Loader>\n      )}\n    </Wrap>\n  )\n}\n\nGlobalSearch.defaultProps = {\n  appearance: 'clear'\n}\n\nexport default GlobalSearch\n"]},"metadata":{},"sourceType":"module"}