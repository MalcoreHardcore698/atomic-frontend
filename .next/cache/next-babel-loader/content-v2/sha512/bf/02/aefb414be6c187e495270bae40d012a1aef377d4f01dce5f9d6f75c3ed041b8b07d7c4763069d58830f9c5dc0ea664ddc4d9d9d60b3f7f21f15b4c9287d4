{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { onArticleCreate, onArticleEdit, onArticleLink } from '../store/helpers/article';\nimport { useHelper } from './useHelper';\nimport queries from '../graphql/queries';\nexport const useArticle = ({\n  isManage\n} = {}) => {\n  _s();\n\n  const recall = useHelper();\n  const user = useSelector(state => state.user);\n  const canEditStatus = useMemo(() => user && user.role.name === 'ADMIN', [user]);\n  const hasOwned = useCallback(article => {\n    var _user$articles;\n\n    return user === null || user === void 0 ? void 0 : (_user$articles = user.articles) === null || _user$articles === void 0 ? void 0 : _user$articles.find(item => item.id === article.id);\n  }, [user]);\n  const onLink = useCallback(article => {\n    recall(onArticleLink, {\n      id: article.id,\n      auth: user === null || user === void 0 ? void 0 : user.email\n    });\n  }, [user, recall]);\n\n  const onEdit = (article, onAfter) => recall(onArticleEdit, {\n    id: article.id,\n    canEditStatus,\n    mutation: queries.UPDATE_ARTICLE,\n    onAfter\n  })();\n\n  const onCreate = onAfter => recall(onArticleCreate, {\n    canEditStatus,\n    mutation: queries.CREATE_ARTICLE,\n    onAfter\n  })();\n\n  return {\n    user,\n    hasOwned,\n    onLink,\n    onEdit: isManage && onEdit,\n    onCreate: isManage && onCreate\n  };\n};\n\n_s(useArticle, \"1GaH9E1I0d0QSicJvO00fksv64g=\", false, function () {\n  return [useHelper, useSelector];\n});","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/hooks/useArticle.js"],"names":["useCallback","useMemo","useSelector","onArticleCreate","onArticleEdit","onArticleLink","useHelper","queries","useArticle","isManage","recall","user","state","canEditStatus","role","name","hasOwned","article","articles","find","item","id","onLink","auth","email","onEdit","onAfter","mutation","UPDATE_ARTICLE","onCreate","CREATE_ARTICLE"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,OAAtB,QAAqC,OAArC;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,SAASC,eAAT,EAA0BC,aAA1B,EAAyCC,aAAzC,QAA8D,0BAA9D;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,OAAP,MAAoB,oBAApB;AAEA,OAAO,MAAMC,UAAU,GAAG,CAAC;AAAEC,EAAAA;AAAF,IAAe,EAAhB,KAAuB;AAAA;;AAC/C,QAAMC,MAAM,GAAGJ,SAAS,EAAxB;AACA,QAAMK,IAAI,GAAGT,WAAW,CAAEU,KAAD,IAAWA,KAAK,CAACD,IAAlB,CAAxB;AAEA,QAAME,aAAa,GAAGZ,OAAO,CAAC,MAAMU,IAAI,IAAIA,IAAI,CAACG,IAAL,CAAUC,IAAV,KAAmB,OAAlC,EAA2C,CAACJ,IAAD,CAA3C,CAA7B;AAEA,QAAMK,QAAQ,GAAGhB,WAAW,CACzBiB,OAAD;AAAA;;AAAA,WAAaN,IAAb,aAAaA,IAAb,yCAAaA,IAAI,CAAEO,QAAnB,mDAAa,eAAgBC,IAAhB,CAAsBC,IAAD,IAAUA,IAAI,CAACC,EAAL,KAAYJ,OAAO,CAACI,EAAnD,CAAb;AAAA,GAD0B,EAE1B,CAACV,IAAD,CAF0B,CAA5B;AAKA,QAAMW,MAAM,GAAGtB,WAAW,CACvBiB,OAAD,IAAa;AACXP,IAAAA,MAAM,CAACL,aAAD,EAAgB;AAAEgB,MAAAA,EAAE,EAAEJ,OAAO,CAACI,EAAd;AAAkBE,MAAAA,IAAI,EAAEZ,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEa;AAA9B,KAAhB,CAAN;AACD,GAHuB,EAIxB,CAACb,IAAD,EAAOD,MAAP,CAJwB,CAA1B;;AAOA,QAAMe,MAAM,GAAG,CAACR,OAAD,EAAUS,OAAV,KACbhB,MAAM,CAACN,aAAD,EAAgB;AACpBiB,IAAAA,EAAE,EAAEJ,OAAO,CAACI,EADQ;AAEpBR,IAAAA,aAFoB;AAGpBc,IAAAA,QAAQ,EAAEpB,OAAO,CAACqB,cAHE;AAIpBF,IAAAA;AAJoB,GAAhB,CAAN,EADF;;AAQA,QAAMG,QAAQ,GAAIH,OAAD,IACfhB,MAAM,CAACP,eAAD,EAAkB;AACtBU,IAAAA,aADsB;AAEtBc,IAAAA,QAAQ,EAAEpB,OAAO,CAACuB,cAFI;AAGtBJ,IAAAA;AAHsB,GAAlB,CAAN,EADF;;AAOA,SAAO;AAAEf,IAAAA,IAAF;AAAQK,IAAAA,QAAR;AAAkBM,IAAAA,MAAlB;AAA0BG,IAAAA,MAAM,EAAEhB,QAAQ,IAAIgB,MAA9C;AAAsDI,IAAAA,QAAQ,EAAEpB,QAAQ,IAAIoB;AAA5E,GAAP;AACD,CAlCM;;GAAMrB,U;UACIF,S,EACFJ,W","sourcesContent":["import { useCallback, useMemo } from 'react'\nimport { useSelector } from 'react-redux'\n\nimport { onArticleCreate, onArticleEdit, onArticleLink } from '../store/helpers/article'\nimport { useHelper } from './useHelper'\nimport queries from '../graphql/queries'\n\nexport const useArticle = ({ isManage } = {}) => {\n  const recall = useHelper()\n  const user = useSelector((state) => state.user)\n\n  const canEditStatus = useMemo(() => user && user.role.name === 'ADMIN', [user])\n\n  const hasOwned = useCallback(\n    (article) => user?.articles?.find((item) => item.id === article.id),\n    [user]\n  )\n\n  const onLink = useCallback(\n    (article) => {\n      recall(onArticleLink, { id: article.id, auth: user?.email })\n    },\n    [user, recall]\n  )\n\n  const onEdit = (article, onAfter) =>\n    recall(onArticleEdit, {\n      id: article.id,\n      canEditStatus,\n      mutation: queries.UPDATE_ARTICLE,\n      onAfter\n    })()\n\n  const onCreate = (onAfter) =>\n    recall(onArticleCreate, {\n      canEditStatus,\n      mutation: queries.CREATE_ARTICLE,\n      onAfter\n    })()\n\n  return { user, hasOwned, onLink, onEdit: isManage && onEdit, onCreate: isManage && onCreate }\n}\n"]},"metadata":{},"sourceType":"module"}