{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState } from 'react';\nimport { Controller } from 'react-hook-form';\nimport styled, { css } from 'styled-components';\nimport { useQuery } from '@apollo/react-hooks';\nimport generator from 'generate-password';\nimport Tooltip, { Wrap as WrapTooltip } from '../../atomic-ui/components/Tooltip';\nimport Row from '../../atomic-ui/components/Row';\nimport Column from '../../atomic-ui/components/Column';\nimport Title from '../../atomic-ui/components/Title';\nimport Text from '../../atomic-ui/components/Text';\nimport Input from '../../atomic-ui/components/Input';\nimport Button from '../../atomic-ui/components/Button';\nimport TextArea from '../../atomic-ui/components/TextArea';\nimport Dropzone from '../../atomic-ui/components/Dropzone';\nimport DatePicker from '../../atomic-ui/components/DatePicker';\nimport Spinner from '../../atomic-ui/components/Spinner';\nimport Switch from '../../atomic-ui/components/Switch';\nimport Icon from '../../atomic-ui/components/Icon';\nimport Alert from '../../atomic-ui/components/Alert';\nimport Select from '../../atomic-ui/components/Select';\nimport Divider from '../../atomic-ui/components/Divider';\nimport { getLabelRole } from '../../atomic-ui/utils/functions';\nimport Form from '../Form';\nimport { Loader } from '../Styled';\nimport queries from '../../graphql/queries';\nvar TAB_TYPES = [{\n  label: 'Основное',\n  value: 'GENERAL'\n}, {\n  label: 'Безопасность',\n  value: 'SECURITY'\n}];\nvar ACCOUNT_TYPES = [{\n  label: 'Физ. лицо',\n  value: 'INDIVIDUAL',\n  tooltip: 'Любое лицо'\n}, {\n  label: 'Оф. лицо',\n  value: 'OFICIAL',\n  tooltip: 'Государственный деятель'\n}, {\n  label: 'Юр. лицо',\n  value: 'ENTITY',\n  tooltip: 'Организация'\n}];\nvar GENDER_TYPES = [{\n  label: 'Мужской',\n  value: 'MALE'\n}, {\n  label: 'Женский',\n  value: 'FEMALE'\n}];\nexport var AdaptiveDropzone = styled(Dropzone).withConfig({\n  displayName: \"FormUser__AdaptiveDropzone\",\n  componentId: \"c1ieix-0\"\n})([\"width:196px;height:276px;@media only screen and (max-width:575px){width:100% !important;height:256px;}\"]);\nexport var AdaptiveRow = styled(Row).withConfig({\n  displayName: \"FormUser__AdaptiveRow\",\n  componentId: \"c1ieix-1\"\n})([\"@media only screen and (max-width:575px){flex-direction:column;grid-gap:var(--default-gap);\", \"{flex-grow:1;button{width:100%;}}}\"], WrapTooltip);\nexport var Tab = styled(Column).withConfig({\n  displayName: \"FormUser__Tab\",\n  componentId: \"c1ieix-2\"\n})([\"display:none;\", \"\"], function (_ref) {\n  var active = _ref.active;\n  return active && css([\"display:flex;\"]);\n});\nexport var detect = function detect(list, value) {\n  return list.find(function (item) {\n    return item.value === value;\n  });\n};\nexport var detectAccountType = function detectAccountType(types, user) {\n  return detect(types, user === null || user === void 0 ? void 0 : user.account);\n};\nexport var detectGender = function detectGender(types, user) {\n  return detect(types, user === null || user === void 0 ? void 0 : user.gender);\n};\nexport var getAccountType = function getAccountType(role) {\n  if (role) {\n    return ACCOUNT_TYPES.find(function (type) {\n      return type.value === role;\n    });\n  }\n\n  return ACCOUNT_TYPES[0];\n};\nexport var getLabelGender = function getLabelGender(gender) {\n  if (gender) {\n    return GENDER_TYPES.find(function (type) {\n      return type.value === gender;\n    });\n  }\n\n  return GENDER_TYPES[0];\n};\nexport var User = function User(_ref2) {\n  var user = _ref2.user,\n      roles = _ref2.roles,\n      mutation = _ref2.mutation,\n      appearance = _ref2.appearance,\n      className = _ref2.className,\n      accountTypes = _ref2.accountTypes,\n      genderTypes = _ref2.genderTypes,\n      canEditRole = _ref2.canEditRole,\n      _onSubmit = _ref2.onSubmit,\n      onChangePassword = _ref2.onChangePassword;\n\n  var _ref3 = user ? useQuery(queries.GET_USER, {\n    variables: {\n      email: user\n    }\n  }) : {\n    data: {\n      getUser: {}\n    },\n    loading: false,\n    error: false\n  },\n      data = _ref3.data,\n      loadingData = _ref3.loading,\n      error = _ref3.error;\n\n  var _useQuery = useQuery(queries.GET_USERS, {\n    variables: {\n      account: ['ENTITY']\n    }\n  }),\n      dataCompanies = _useQuery.data,\n      loadingCompanies = _useQuery.loading;\n\n  var _useState = useState(TAB_TYPES[0]),\n      _useState2 = _slicedToArray(_useState, 2),\n      tab = _useState2[0],\n      setTab = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      account = _useState4[0],\n      setAccount = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      isShowPassword = _useState6[0],\n      setShowPassword = _useState6[1];\n\n  var onTogglePassword = function onTogglePassword() {\n    return setShowPassword(!isShowPassword);\n  };\n\n  return /*#__PURE__*/React.createElement(Form, {\n    className: className,\n    appearance: appearance,\n    mutation: mutation,\n    onSubmit: function onSubmit(form, action) {\n      var _data$getUser;\n\n      return _onSubmit(_objectSpread(_objectSpread({}, form), {}, {\n        account: account || getAccountType(data === null || data === void 0 ? void 0 : (_data$getUser = data.getUser) === null || _data$getUser === void 0 ? void 0 : _data$getUser.account)\n      }), action);\n    }\n  }, function (_ref4) {\n    var _data$getUser2, _data$getUser3, _data$getUser3$role, _data$getUser4, _data$getUser5, _data$getUser6, _data$getUser7, _data$getUser8, _data$getUser8$role, _data$getUser9, _data$getUser9$role, _data$getUser10, _data$getUser11, _data$getUser12, _data$getUser14, _data$getUser15, _data$getUser15$role, _data$getUser16, _data$getUser17, _data$getUser18, _data$getUser18$role, _data$getUser19, _data$getUser20, _data$getUser20$role, _data$getUser21, _data$getUser22, _data$getUser23, _data$getUser24, _data$getUser25, _data$getUser26, _data$getUser27, _data$getUser28, _data$getUser28$role;\n\n    var register = _ref4.register,\n        control = _ref4.control,\n        loading = _ref4.loading,\n        errors = _ref4.errors,\n        setValue = _ref4.setValue,\n        getValues = _ref4.getValues;\n    return !loading && !loadingData && data && data.getUser ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Switch, {\n      defaultValue: tab,\n      options: TAB_TYPES,\n      onChange: setTab,\n      stretch: true\n    }), /*#__PURE__*/React.createElement(Tab, {\n      active: tab.value === 'GENERAL'\n    }, /*#__PURE__*/React.createElement(AdaptiveRow, null, /*#__PURE__*/React.createElement(Controller, {\n      name: 'avatar',\n      control: control,\n      defaultValue: getValues('avatar') || user && (((_data$getUser2 = data.getUser) === null || _data$getUser2 === void 0 ? void 0 : _data$getUser2.avatar) || {\n        path: '/images/avatar-default.png'\n      }) || null,\n      render: function render(_ref5) {\n        var value = _ref5.value,\n            onChange = _ref5.onChange;\n        return /*#__PURE__*/React.createElement(AdaptiveDropzone, {\n          accept: 'image/*',\n          defaultValue: value,\n          onChange: onChange,\n          placeholder: 'Перетащите сюда изображение для превью',\n          tooltip: 'Разрешение: 675x590px. Допустимые форматы: jpeg, jpg, png. Макс. размер: 15 MB'\n        });\n      }\n    }), /*#__PURE__*/React.createElement(Column, {\n      style: {\n        flexGrow: 1\n      }\n    }, ((_data$getUser3 = data.getUser) === null || _data$getUser3 === void 0 ? void 0 : (_data$getUser3$role = _data$getUser3.role) === null || _data$getUser3$role === void 0 ? void 0 : _data$getUser3$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u0410\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"), /*#__PURE__*/React.createElement(Switch, {\n      defaultValue: account !== null && account !== void 0 && account.value ? account : getAccountType((_data$getUser4 = data.getUser) === null || _data$getUser4 === void 0 ? void 0 : _data$getUser4.account),\n      options: (accountTypes === null || accountTypes === void 0 ? void 0 : accountTypes.length) > 1 && accountTypes || ACCOUNT_TYPES,\n      onChange: function onChange(value) {\n        return setAccount(value);\n      },\n      disabled: loading,\n      stretch: true\n    })), /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser5 = data.getUser) === null || _data$getUser5 === void 0 ? void 0 : _data$getUser5.account) === 'ENTITY' ? 'Название компании' : 'ФИО'), canEditRole && errors && errors.name && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%'\n      },\n      appearance: 'error'\n    }, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u043E \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u043E \\u0424\\u0418\\u041E\"), /*#__PURE__*/React.createElement(Input, {\n      type: 'text',\n      name: 'name',\n      ref: register({\n        required: !user\n      }),\n      defaultValue: getValues('name') || ((_data$getUser6 = data.getUser) === null || _data$getUser6 === void 0 ? void 0 : _data$getUser6.name),\n      placeholder: account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser7 = data.getUser) === null || _data$getUser7 === void 0 ? void 0 : _data$getUser7.account) === 'ENTITY' ? 'Название компании' : 'ФИО',\n      appearance: 'ghost',\n      disabled: loading\n    }), ((_data$getUser8 = data.getUser) === null || _data$getUser8 === void 0 ? void 0 : (_data$getUser8$role = _data$getUser8.role) === null || _data$getUser8$role === void 0 ? void 0 : _data$getUser8$role.name) === 'ADMIN' && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%',\n        textAlign: 'center'\n      }\n    }, \"\\u0423 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0430 \\u043E\\u0433\\u0440\\u0430\\u043D\\u0438\\u0447\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0432\\u043E\\u0437\\u043C\\u043E\\u0436\\u043D\\u043E\\u0441\\u0442\\u0438 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F \\u0441\\u043E\\u0431\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u043E\\u0433\\u043E \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"), ((_data$getUser9 = data.getUser) === null || _data$getUser9 === void 0 ? void 0 : (_data$getUser9$role = _data$getUser9.role) === null || _data$getUser9$role === void 0 ? void 0 : _data$getUser9$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser10 = data.getUser) === null || _data$getUser10 === void 0 ? void 0 : _data$getUser10.account) === 'ENTITY' ? 'Дата основания' : 'Дата рождения'), /*#__PURE__*/React.createElement(Controller, {\n      name: 'dateOfBirth',\n      control: control,\n      defaultValue: getValues('dateOfBirth') || ((_data$getUser11 = data.getUser) === null || _data$getUser11 === void 0 ? void 0 : _data$getUser11.dateOfBirth) && new Date((_data$getUser12 = data.getUser) === null || _data$getUser12 === void 0 ? void 0 : _data$getUser12.dateOfBirth) || null,\n      render: function render(_ref6) {\n        var _data$getUser13;\n\n        var value = _ref6.value,\n            onChange = _ref6.onChange;\n        return /*#__PURE__*/React.createElement(DatePicker, {\n          value: value,\n          onChange: onChange,\n          placeholder: account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser13 = data.getUser) === null || _data$getUser13 === void 0 ? void 0 : _data$getUser13.account) === 'ENTITY' ? 'Дата основания' : 'Дата рождения',\n          appearance: 'ghost',\n          withYearDisplay: false,\n          withNavigate: true,\n          canEditYear: true\n        });\n      }\n    })))), ((account === null || account === void 0 ? void 0 : account.value) && (account === null || account === void 0 ? void 0 : account.value) !== 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser14 = data.getUser) === null || _data$getUser14 === void 0 ? void 0 : _data$getUser14.account) !== 'ENTITY') && ((_data$getUser15 = data.getUser) === null || _data$getUser15 === void 0 ? void 0 : (_data$getUser15$role = _data$getUser15.role) === null || _data$getUser15$role === void 0 ? void 0 : _data$getUser15$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(Column, {\n      style: {\n        flexGrow: 1\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u041F\\u043E\\u043B\"), /*#__PURE__*/React.createElement(Controller, {\n      name: 'gender',\n      control: control,\n      defaultValue: getValues('gender') || getLabelGender((_data$getUser16 = data.getUser) === null || _data$getUser16 === void 0 ? void 0 : _data$getUser16.gender),\n      render: function render(_ref7) {\n        var value = _ref7.value,\n            onChange = _ref7.onChange;\n        return /*#__PURE__*/React.createElement(Switch, {\n          defaultValue: value,\n          onChange: onChange,\n          options: (genderTypes === null || genderTypes === void 0 ? void 0 : genderTypes.length) > 1 && genderTypes || GENDER_TYPES,\n          disabled: loading,\n          stretch: true\n        });\n      }\n    })), ((account === null || account === void 0 ? void 0 : account.value) && (account === null || account === void 0 ? void 0 : account.value) !== 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser17 = data.getUser) === null || _data$getUser17 === void 0 ? void 0 : _data$getUser17.account) !== 'ENTITY') && ((_data$getUser18 = data.getUser) === null || _data$getUser18 === void 0 ? void 0 : (_data$getUser18$role = _data$getUser18.role) === null || _data$getUser18$role === void 0 ? void 0 : _data$getUser18$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(Column, null, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u041A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044F\"), /*#__PURE__*/React.createElement(Controller, {\n      name: 'company',\n      control: control,\n      defaultValue: getValues('company') || ((_data$getUser19 = data.getUser) !== null && _data$getUser19 !== void 0 && _data$getUser19.company ? {\n        value: data.getUser.company.id,\n        label: data.getUser.company.name\n      } : null),\n      render: function render(_ref8) {\n        var value = _ref8.value,\n            onChange = _ref8.onChange;\n        return /*#__PURE__*/React.createElement(Select, {\n          appearance: 'ghost',\n          defaultValue: value,\n          placeholder: 'Выберите компанию',\n          options: ((dataCompanies === null || dataCompanies === void 0 ? void 0 : dataCompanies.getUsers) || []).map(function (company) {\n            return {\n              value: company.email,\n              label: company.name\n            };\n          }),\n          onChange: onChange,\n          isLoading: loadingCompanies || loading,\n          isSearchable: true,\n          cacheOptions: true\n        });\n      }\n    })), ((_data$getUser20 = data.getUser) === null || _data$getUser20 === void 0 ? void 0 : (_data$getUser20$role = _data$getUser20.role) === null || _data$getUser20$role === void 0 ? void 0 : _data$getUser20$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(Column, null, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser21 = data.getUser) === null || _data$getUser21 === void 0 ? void 0 : _data$getUser21.account) === 'ENTITY' ? 'О компании' : 'О себе'), /*#__PURE__*/React.createElement(TextArea, {\n      type: 'text',\n      name: 'about',\n      ref: register(),\n      defaultValue: getValues('about') || ((_data$getUser22 = data.getUser) === null || _data$getUser22 === void 0 ? void 0 : _data$getUser22.about) || '',\n      placeholder: 'Расскажите о себе пару слов',\n      disabled: loading,\n      appearance: 'ghost'\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      active: tab.value === 'SECURITY'\n    }, canEditRole && errors && (errors.email || errors.phone) && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%'\n      },\n      appearance: 'error'\n    }, errors.email && /*#__PURE__*/React.createElement(\"p\", null, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430 \\u044D\\u043B. \\u043F\\u043E\\u0447\\u0442\\u0430\"), errors.phone && /*#__PURE__*/React.createElement(\"p\", null, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\")), /*#__PURE__*/React.createElement(AdaptiveRow, null, /*#__PURE__*/React.createElement(Column, {\n      style: {\n        flexGrow: 1\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u042D\\u043B. \\u043F\\u043E\\u0447\\u0442\\u0430\"), /*#__PURE__*/React.createElement(Input, {\n      type: 'email',\n      name: 'email',\n      ref: register({\n        required: !user\n      }),\n      defaultValue: getValues('email') || ((_data$getUser23 = data.getUser) === null || _data$getUser23 === void 0 ? void 0 : _data$getUser23.email),\n      placeholder: 'Эл. почта',\n      appearance: 'ghost',\n      disabled: loading\n    })), /*#__PURE__*/React.createElement(Column, {\n      style: {\n        flexGrow: 1\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"), /*#__PURE__*/React.createElement(Input, {\n      type: 'tel',\n      name: 'phone',\n      ref: register({\n        required: !user\n      }),\n      defaultValue: getValues('phone') || ((_data$getUser24 = data.getUser) === null || _data$getUser24 === void 0 ? void 0 : _data$getUser24.phone),\n      placeholder: 'Телефон',\n      appearance: 'ghost',\n      disabled: loading\n    }))), /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"), canEditRole && errors && errors.password && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%'\n      },\n      appearance: 'error'\n    }, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"), /*#__PURE__*/React.createElement(AdaptiveRow, null, /*#__PURE__*/React.createElement(Input, {\n      name: 'password',\n      ref: register({\n        required: !user\n      }),\n      type: isShowPassword ? 'text' : 'password',\n      defaultValue: getValues('password') || ((_data$getUser25 = data.getUser) === null || _data$getUser25 === void 0 ? void 0 : _data$getUser25.password),\n      appearance: 'ghost',\n      placeholder: 'Пароль',\n      readOnly: !canEditRole\n    }), canEditRole && /*#__PURE__*/React.createElement(Tooltip, {\n      text: 'Генерация пароля'\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: 'button',\n      kind: 'icon',\n      disabled: loading,\n      onClick: function onClick() {\n        return setValue('password', generator.generate());\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      icon: 'password',\n      stroke: 'white'\n    }))), canEditRole && /*#__PURE__*/React.createElement(Tooltip, {\n      text: 'Отображение пароля'\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: 'button',\n      kind: 'icon',\n      disabled: loading,\n      onClick: onTogglePassword,\n      revert: !isShowPassword\n    }, /*#__PURE__*/React.createElement(Icon, {\n      icon: isShowPassword ? 'hide' : 'show',\n      stroke: isShowPassword ? 'white' : 'var(--default-color-accent)'\n    }))), !canEditRole && /*#__PURE__*/React.createElement(Tooltip, {\n      text: 'Смена пароля'\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: 'button',\n      kind: 'icon',\n      disabled: loading,\n      onClick: onChangePassword\n    }, /*#__PURE__*/React.createElement(Icon, {\n      icon: 'edit',\n      stroke: 'white'\n    })))), /*#__PURE__*/React.createElement(Text, null, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0434\\u043E\\u043B\\u0436\\u0435\\u043D \\u0441\\u043E\\u0434\\u0435\\u0440\\u0436\\u0430\\u0442\\u044C \\u043D\\u0435 \\u043C\\u0435\\u043D\\u0435\\u0435 \\u0432\\u043E\\u0441\\u044C\\u043C\\u0438 \\u0437\\u043D\\u0430\\u043A\\u043E\\u0432, \\u0432\\u043A\\u043B\\u044E\\u0447\\u0430\\u0442\\u044C \\u0431\\u0443\\u043A\\u0432\\u044B, \\u0446\\u0438\\u0444\\u0440\\u044B \\u0438 \\u0441\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u044C\\u043D\\u044B\\u0435 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u044B\")), canEditRole && /*#__PURE__*/React.createElement(Divider, {\n      clear: true\n    }), canEditRole && errors && errors.role && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%'\n      },\n      appearance: 'error'\n    }, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430 \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430 \\u0440\\u043E\\u043B\\u044C\"), canEditRole && /*#__PURE__*/React.createElement(Controller, {\n      name: 'role',\n      control: control,\n      defaultValue: getValues('role') || ((_data$getUser26 = data.getUser) === null || _data$getUser26 === void 0 ? void 0 : _data$getUser26.role) && {\n        value: (_data$getUser27 = data.getUser) === null || _data$getUser27 === void 0 ? void 0 : _data$getUser27.role.id,\n        label: getLabelRole((_data$getUser28 = data.getUser) === null || _data$getUser28 === void 0 ? void 0 : (_data$getUser28$role = _data$getUser28.role) === null || _data$getUser28$role === void 0 ? void 0 : _data$getUser28$role.name)\n      } || null,\n      render: function render(_ref9) {\n        var value = _ref9.value,\n            onChange = _ref9.onChange;\n        return /*#__PURE__*/React.createElement(Select, {\n          appearance: 'ghost',\n          defaultValue: value,\n          onChange: onChange,\n          placeholder: 'Выберите роль',\n          options: (roles || []).map(function (item) {\n            return {\n              value: item.id,\n              label: getLabelRole(item.name)\n            };\n          }),\n          menuPlacement: 'top',\n          isLoading: loading,\n          isClearable: true\n        });\n      }\n    }), /*#__PURE__*/React.createElement(Divider, {\n      clear: true\n    }), /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Button, {\n      type: 'submit',\n      style: {\n        flexGrow: 1\n      },\n      disabled: loading\n    }, user ? 'Сохранить' : 'Создать'))) : error ? /*#__PURE__*/React.createElement(Alert, {\n      appearance: 'error',\n      style: {\n        width: '100%',\n        textAlign: 'center'\n      }\n    }, \"\\u0423\\u043F\\u0441! \\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044E \\u043E \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0435\") : /*#__PURE__*/React.createElement(Loader, null, /*#__PURE__*/React.createElement(Spinner, null));\n  });\n};\nUser.defaultProps = {\n  canEditAccount: true\n};\nexport default User;","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/components/FormUser/index.js"],"names":["React","useState","Controller","styled","css","useQuery","generator","Tooltip","Wrap","WrapTooltip","Row","Column","Title","Text","Input","Button","TextArea","Dropzone","DatePicker","Spinner","Switch","Icon","Alert","Select","Divider","getLabelRole","Form","Loader","queries","TAB_TYPES","label","value","ACCOUNT_TYPES","tooltip","GENDER_TYPES","AdaptiveDropzone","AdaptiveRow","Tab","active","detect","list","find","item","detectAccountType","types","user","account","detectGender","gender","getAccountType","role","type","getLabelGender","User","roles","mutation","appearance","className","accountTypes","genderTypes","canEditRole","onSubmit","onChangePassword","GET_USER","variables","email","data","getUser","loading","error","loadingData","GET_USERS","dataCompanies","loadingCompanies","tab","setTab","setAccount","isShowPassword","setShowPassword","onTogglePassword","form","action","register","control","errors","setValue","getValues","avatar","path","onChange","flexGrow","name","length","width","required","textAlign","dateOfBirth","Date","company","id","getUsers","map","about","phone","password","generate","defaultProps","canEditAccount"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Controller } from 'react-hook-form'\nimport styled, { css } from 'styled-components'\nimport { useQuery } from '@apollo/react-hooks'\nimport generator from 'generate-password'\n\nimport Tooltip, { Wrap as WrapTooltip } from '../../atomic-ui/components/Tooltip'\nimport Row from '../../atomic-ui/components/Row'\nimport Column from '../../atomic-ui/components/Column'\nimport Title from '../../atomic-ui/components/Title'\nimport Text from '../../atomic-ui/components/Text'\nimport Input from '../../atomic-ui/components/Input'\nimport Button from '../../atomic-ui/components/Button'\nimport TextArea from '../../atomic-ui/components/TextArea'\nimport Dropzone from '../../atomic-ui/components/Dropzone'\nimport DatePicker from '../../atomic-ui/components/DatePicker'\nimport Spinner from '../../atomic-ui/components/Spinner'\nimport Switch from '../../atomic-ui/components/Switch'\nimport Icon from '../../atomic-ui/components/Icon'\nimport Alert from '../../atomic-ui/components/Alert'\nimport Select from '../../atomic-ui/components/Select'\nimport Divider from '../../atomic-ui/components/Divider'\nimport { getLabelRole } from '../../atomic-ui/utils/functions'\n\nimport Form from '../Form'\nimport { Loader } from '../Styled'\nimport queries from '../../graphql/queries'\n\nconst TAB_TYPES = [\n  { label: 'Основное', value: 'GENERAL' },\n  { label: 'Безопасность', value: 'SECURITY' }\n]\n\nconst ACCOUNT_TYPES = [\n  { label: 'Физ. лицо', value: 'INDIVIDUAL', tooltip: 'Любое лицо' },\n  { label: 'Оф. лицо', value: 'OFICIAL', tooltip: 'Государственный деятель' },\n  { label: 'Юр. лицо', value: 'ENTITY', tooltip: 'Организация' }\n]\n\nconst GENDER_TYPES = [\n  { label: 'Мужской', value: 'MALE' },\n  { label: 'Женский', value: 'FEMALE' }\n]\n\nexport const AdaptiveDropzone = styled(Dropzone)`\n  width: 196px;\n  height: 276px;\n\n  @media only screen and (max-width: 575px) {\n    width: 100% !important;\n    height: 256px;\n  }\n`\n\nexport const AdaptiveRow = styled(Row)`\n  @media only screen and (max-width: 575px) {\n    flex-direction: column;\n    grid-gap: var(--default-gap);\n\n    ${WrapTooltip} {\n      flex-grow: 1;\n\n      button {\n        width: 100%;\n      }\n    }\n  }\n`\n\nexport const Tab = styled(Column)`\n  display: none;\n\n  ${({ active }) =>\n    active &&\n    css`\n      display: flex;\n    `}\n`\n\nexport const detect = (list, value) => {\n  return list.find((item) => item.value === value)\n}\n\nexport const detectAccountType = (types, user) => detect(types, user?.account)\n\nexport const detectGender = (types, user) => detect(types, user?.gender)\n\nexport const getAccountType = (role) => {\n  if (role) {\n    return ACCOUNT_TYPES.find((type) => type.value === role)\n  }\n  return ACCOUNT_TYPES[0]\n}\n\nexport const getLabelGender = (gender) => {\n  if (gender) {\n    return GENDER_TYPES.find((type) => type.value === gender)\n  }\n  return GENDER_TYPES[0]\n}\n\nexport const User = ({\n  user,\n  roles,\n  mutation,\n  appearance,\n  className,\n  accountTypes,\n  genderTypes,\n  canEditRole,\n  onSubmit,\n  onChangePassword\n}) => {\n  const { data, loading: loadingData, error } = user\n    ? useQuery(queries.GET_USER, {\n        variables: {\n          email: user\n        }\n      })\n    : { data: { getUser: {} }, loading: false, error: false }\n  const { data: dataCompanies, loading: loadingCompanies } = useQuery(queries.GET_USERS, {\n    variables: {\n      account: ['ENTITY']\n    }\n  })\n  const [tab, setTab] = useState(TAB_TYPES[0])\n  const [account, setAccount] = useState(null)\n  const [isShowPassword, setShowPassword] = useState(false)\n\n  const onTogglePassword = () => setShowPassword(!isShowPassword)\n\n  return (\n    <Form\n      className={className}\n      appearance={appearance}\n      mutation={mutation}\n      onSubmit={(form, action) =>\n        onSubmit({ ...form, account: account || getAccountType(data?.getUser?.account) }, action)\n      }>\n      {({ register, control, loading, errors, setValue, getValues }) =>\n        !loading && !loadingData && data && data.getUser ? (\n          <React.Fragment>\n            <Switch defaultValue={tab} options={TAB_TYPES} onChange={setTab} stretch />\n\n            <Tab active={tab.value === 'GENERAL'}>\n              <AdaptiveRow>\n                <Controller\n                  name={'avatar'}\n                  control={control}\n                  defaultValue={\n                    getValues('avatar') ||\n                    (user && (data.getUser?.avatar || { path: '/images/avatar-default.png' })) ||\n                    null\n                  }\n                  render={({ value, onChange }) => (\n                    <AdaptiveDropzone\n                      accept={'image/*'}\n                      defaultValue={value}\n                      onChange={onChange}\n                      placeholder={'Перетащите сюда изображение для превью'}\n                      tooltip={\n                        'Разрешение: 675x590px. Допустимые форматы: jpeg, jpg, png. Макс. размер: 15 MB'\n                      }\n                    />\n                  )}\n                />\n\n                <Column style={{ flexGrow: 1 }}>\n                  {data.getUser?.role?.name !== 'ADMIN' && (\n                    <React.Fragment>\n                      <Title tag={'h4'}>Аккаунт</Title>\n                      <Switch\n                        defaultValue={\n                          account?.value ? account : getAccountType(data.getUser?.account)\n                        }\n                        options={(accountTypes?.length > 1 && accountTypes) || ACCOUNT_TYPES}\n                        onChange={(value) => setAccount(value)}\n                        disabled={loading}\n                        stretch\n                      />\n                    </React.Fragment>\n                  )}\n\n                  <Title tag={'h4'}>\n                    {(account?.value && account?.value === 'ENTITY') ||\n                    (!account?.value && data.getUser?.account === 'ENTITY')\n                      ? 'Название компании'\n                      : 'ФИО'}\n                  </Title>\n                  {canEditRole && errors && errors.name && (\n                    <Alert style={{ width: '100%' }} appearance={'error'}>\n                      Неверно указано или не указано ФИО\n                    </Alert>\n                  )}\n                  <Input\n                    type={'text'}\n                    name={'name'}\n                    ref={register({ required: !user })}\n                    defaultValue={getValues('name') || data.getUser?.name}\n                    placeholder={\n                      (account?.value && account?.value === 'ENTITY') ||\n                      (!account?.value && data.getUser?.account === 'ENTITY')\n                        ? 'Название компании'\n                        : 'ФИО'\n                    }\n                    appearance={'ghost'}\n                    disabled={loading}\n                  />\n\n                  {data.getUser?.role?.name === 'ADMIN' && (\n                    <Alert style={{ width: '100%', textAlign: 'center' }}>\n                      У администратора ограниченные возможности изменения собственного аккаунта\n                    </Alert>\n                  )}\n\n                  {data.getUser?.role?.name !== 'ADMIN' && (\n                    <React.Fragment>\n                      <Title tag={'h4'}>\n                        {(account?.value && account?.value === 'ENTITY') ||\n                        (!account?.value && data.getUser?.account === 'ENTITY')\n                          ? 'Дата основания'\n                          : 'Дата рождения'}\n                      </Title>\n                      <Controller\n                        name={'dateOfBirth'}\n                        control={control}\n                        defaultValue={\n                          getValues('dateOfBirth') ||\n                          (data.getUser?.dateOfBirth && new Date(data.getUser?.dateOfBirth)) ||\n                          null\n                        }\n                        render={({ value, onChange }) => (\n                          <DatePicker\n                            value={value}\n                            onChange={onChange}\n                            placeholder={\n                              (account?.value && account?.value === 'ENTITY') ||\n                              (!account?.value && data.getUser?.account === 'ENTITY')\n                                ? 'Дата основания'\n                                : 'Дата рождения'\n                            }\n                            appearance={'ghost'}\n                            withYearDisplay={false}\n                            withNavigate\n                            canEditYear\n                          />\n                        )}\n                      />\n                    </React.Fragment>\n                  )}\n                </Column>\n              </AdaptiveRow>\n\n              {((account?.value && account?.value !== 'ENTITY') ||\n                (!account?.value && data.getUser?.account !== 'ENTITY')) &&\n                data.getUser?.role?.name !== 'ADMIN' && (\n                  <Column style={{ flexGrow: 1 }}>\n                    <Title tag={'h4'}>Пол</Title>\n                    <Controller\n                      name={'gender'}\n                      control={control}\n                      defaultValue={getValues('gender') || getLabelGender(data.getUser?.gender)}\n                      render={({ value, onChange }) => (\n                        <Switch\n                          defaultValue={value}\n                          onChange={onChange}\n                          options={(genderTypes?.length > 1 && genderTypes) || GENDER_TYPES}\n                          disabled={loading}\n                          stretch\n                        />\n                      )}\n                    />\n                  </Column>\n                )}\n\n              {((account?.value && account?.value !== 'ENTITY') ||\n                (!account?.value && data.getUser?.account !== 'ENTITY')) &&\n                data.getUser?.role?.name !== 'ADMIN' && (\n                  <Column>\n                    <Title tag={'h4'}>Компания</Title>\n                    <Controller\n                      name={'company'}\n                      control={control}\n                      defaultValue={\n                        getValues('company') ||\n                        (data.getUser?.company\n                          ? {\n                              value: data.getUser.company.id,\n                              label: data.getUser.company.name\n                            }\n                          : null)\n                      }\n                      render={({ value, onChange }) => (\n                        <Select\n                          appearance={'ghost'}\n                          defaultValue={value}\n                          placeholder={'Выберите компанию'}\n                          options={(dataCompanies?.getUsers || []).map((company) => ({\n                            value: company.email,\n                            label: company.name\n                          }))}\n                          onChange={onChange}\n                          isLoading={loadingCompanies || loading}\n                          isSearchable\n                          cacheOptions\n                        />\n                      )}\n                    />\n                  </Column>\n                )}\n\n              {data.getUser?.role?.name !== 'ADMIN' && (\n                <Column>\n                  <Title tag={'h4'}>\n                    {(account?.value && account?.value === 'ENTITY') ||\n                    (!account?.value && data.getUser?.account === 'ENTITY')\n                      ? 'О компании'\n                      : 'О себе'}\n                  </Title>\n                  <TextArea\n                    type={'text'}\n                    name={'about'}\n                    ref={register()}\n                    defaultValue={getValues('about') || data.getUser?.about || ''}\n                    placeholder={'Расскажите о себе пару слов'}\n                    disabled={loading}\n                    appearance={'ghost'}\n                  />\n                </Column>\n              )}\n            </Tab>\n\n            <Tab active={tab.value === 'SECURITY'}>\n              {canEditRole && errors && (errors.email || errors.phone) && (\n                <Alert style={{ width: '100%' }} appearance={'error'}>\n                  {errors.email && <p>Неверно указан или не указана эл. почта</p>}\n                  {errors.phone && <p>Неверно указан или не указана телефон</p>}\n                </Alert>\n              )}\n              <AdaptiveRow>\n                <Column style={{ flexGrow: 1 }}>\n                  <Title tag={'h4'}>Эл. почта</Title>\n                  <Input\n                    type={'email'}\n                    name={'email'}\n                    ref={register({ required: !user })}\n                    defaultValue={getValues('email') || data.getUser?.email}\n                    placeholder={'Эл. почта'}\n                    appearance={'ghost'}\n                    disabled={loading}\n                  />\n                </Column>\n                <Column style={{ flexGrow: 1 }}>\n                  <Title tag={'h4'}>Телефон</Title>\n                  <Input\n                    type={'tel'}\n                    name={'phone'}\n                    ref={register({ required: !user })}\n                    defaultValue={getValues('phone') || data.getUser?.phone}\n                    placeholder={'Телефон'}\n                    appearance={'ghost'}\n                    disabled={loading}\n                  />\n                </Column>\n              </AdaptiveRow>\n\n              <Title tag={'h4'}>Пароль</Title>\n              {canEditRole && errors && errors.password && (\n                <Alert style={{ width: '100%' }} appearance={'error'}>\n                  Неверно указан или не указан пароль\n                </Alert>\n              )}\n              <AdaptiveRow>\n                <Input\n                  name={'password'}\n                  ref={register({ required: !user })}\n                  type={isShowPassword ? 'text' : 'password'}\n                  defaultValue={getValues('password') || data.getUser?.password}\n                  appearance={'ghost'}\n                  placeholder={'Пароль'}\n                  readOnly={!canEditRole}\n                />\n                {canEditRole && (\n                  <Tooltip text={'Генерация пароля'}>\n                    <Button\n                      type={'button'}\n                      kind={'icon'}\n                      disabled={loading}\n                      onClick={() => setValue('password', generator.generate())}>\n                      <Icon icon={'password'} stroke={'white'} />\n                    </Button>\n                  </Tooltip>\n                )}\n                {canEditRole && (\n                  <Tooltip text={'Отображение пароля'}>\n                    <Button\n                      type={'button'}\n                      kind={'icon'}\n                      disabled={loading}\n                      onClick={onTogglePassword}\n                      revert={!isShowPassword}>\n                      <Icon\n                        icon={isShowPassword ? 'hide' : 'show'}\n                        stroke={isShowPassword ? 'white' : 'var(--default-color-accent)'}\n                      />\n                    </Button>\n                  </Tooltip>\n                )}\n                {!canEditRole && (\n                  <Tooltip text={'Смена пароля'}>\n                    <Button\n                      type={'button'}\n                      kind={'icon'}\n                      disabled={loading}\n                      onClick={onChangePassword}>\n                      <Icon icon={'edit'} stroke={'white'} />\n                    </Button>\n                  </Tooltip>\n                )}\n              </AdaptiveRow>\n\n              <Text>\n                Пароль должен содержать не менее восьми знаков, включать буквы, цифры и специальные\n                символы\n              </Text>\n            </Tab>\n\n            {canEditRole && <Divider clear />}\n\n            {canEditRole && errors && errors.role && (\n              <Alert style={{ width: '100%' }} appearance={'error'}>\n                Неверно указана или не указана роль\n              </Alert>\n            )}\n            {canEditRole && (\n              <Controller\n                name={'role'}\n                control={control}\n                defaultValue={\n                  getValues('role') ||\n                  (data.getUser?.role && {\n                    value: data.getUser?.role.id,\n                    label: getLabelRole(data.getUser?.role?.name)\n                  }) ||\n                  null\n                }\n                render={({ value, onChange }) => (\n                  <Select\n                    appearance={'ghost'}\n                    defaultValue={value}\n                    onChange={onChange}\n                    placeholder={'Выберите роль'}\n                    options={(roles || []).map((item) => ({\n                      value: item.id,\n                      label: getLabelRole(item.name)\n                    }))}\n                    menuPlacement={'top'}\n                    isLoading={loading}\n                    isClearable\n                  />\n                )}\n              />\n            )}\n\n            <Divider clear />\n\n            <Row>\n              <Button type={'submit'} style={{ flexGrow: 1 }} disabled={loading}>\n                {user ? 'Сохранить' : 'Создать'}\n              </Button>\n            </Row>\n          </React.Fragment>\n        ) : error ? (\n          <Alert appearance={'error'} style={{ width: '100%', textAlign: 'center' }}>\n            Упс! Не удалось загрузить информацию о проекте\n          </Alert>\n        ) : (\n          <Loader>\n            <Spinner />\n          </Loader>\n        )\n      }\n    </Form>\n  )\n}\n\nUser.defaultProps = {\n  canEditAccount: true\n}\n\nexport default User\n"]},"metadata":{},"sourceType":"module"}