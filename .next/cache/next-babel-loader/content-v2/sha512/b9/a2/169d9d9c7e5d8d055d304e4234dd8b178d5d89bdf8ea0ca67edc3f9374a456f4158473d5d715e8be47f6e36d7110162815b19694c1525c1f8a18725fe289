{"ast":null,"code":"function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport React from 'react';\nimport ArticleForm from '../../components/FormArticle';\nimport DeleteForm from '../../components/FormDelete';\nimport ArticleCard from '../../components/ArticleCard';\nimport ArticleView from '../../components/ArticleView';\nimport { setDocuments } from '../actions/documents';\nimport { setDrawer } from '../actions/drawer';\nimport { setItem } from '../actions/snacks';\nimport { onUserLink } from '../helpers/user';\nexport function onArticleLink(dispatch, props) {\n  var id = props.id,\n      auth = props.auth;\n  dispatch(setDrawer({\n    icon: 'document',\n    title: 'Статья',\n    content: /*#__PURE__*/React.createElement(ArticleView, {\n      article: id,\n      appearance: 'clear',\n      onCommentLink: function onCommentLink(user) {\n        return onUserLink(dispatch, {\n          email: user,\n          auth: auth\n        });\n      }\n    })\n  }));\n}\nexport function onArticleCreate(dispatch, props) {\n  var categories = props.categories,\n      statuses = props.statuses,\n      canEditStatus = props.canEditStatus,\n      mutation = props.mutation;\n  dispatch(setDrawer({\n    icon: 'document',\n    title: 'Создание статьи',\n    content: /*#__PURE__*/React.createElement(ArticleForm, {\n      mutation: mutation,\n      categories: categories,\n      statuses: statuses,\n      appearance: 'clear',\n      canEditStatus: canEditStatus,\n      onSubmit: /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(form, action) {\n          var _form$preview, _form$preview2, _form$category, _form$status, articles;\n\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  _context.next = 3;\n                  return action({\n                    variables: {\n                      input: {\n                        title: form.title,\n                        body: form.body,\n                        preview: (_form$preview = form.preview) === null || _form$preview === void 0 ? void 0 : _form$preview.file,\n                        previewSize: (_form$preview2 = form.preview) === null || _form$preview2 === void 0 ? void 0 : _form$preview2.file.size,\n                        category: (_form$category = form.category) === null || _form$category === void 0 ? void 0 : _form$category.value,\n                        status: (_form$status = form.status) === null || _form$status === void 0 ? void 0 : _form$status.value\n                      }\n                    }\n                  });\n\n                case 3:\n                  articles = _context.sent;\n                  dispatch(setDocuments(articles.data.createArticle));\n                  dispatch(setDrawer(null));\n                  dispatch(setItem({\n                    type: 'success',\n                    message: 'Статья успешно создана'\n                  }));\n                  _context.next = 13;\n                  break;\n\n                case 9:\n                  _context.prev = 9;\n                  _context.t0 = _context[\"catch\"](0);\n                  dispatch(setDrawer(null));\n                  dispatch(setItem({\n                    type: 'error',\n                    message: 'Не удалось создать статью'\n                  }));\n\n                case 13:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, null, [[0, 9]]);\n        }));\n\n        return function (_x, _x2) {\n          return _ref.apply(this, arguments);\n        };\n      }()\n    })\n  }));\n}\nexport function onArticleEdit(dispatch, props) {\n  var id = props.id,\n      auth = props.auth,\n      categories = props.categories,\n      statuses = props.statuses,\n      canEditStatus = props.canEditStatus,\n      mutation = props.mutation;\n  dispatch(setDrawer({\n    icon: 'document',\n    title: 'Редактирование статьи',\n    content: /*#__PURE__*/React.createElement(ArticleForm, {\n      article: id,\n      mutation: mutation,\n      categories: categories,\n      statuses: statuses,\n      appearance: 'clear',\n      canEditStatus: canEditStatus,\n      onSubmit: /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(form, action) {\n          var _form$preview3, _form$preview4, _form$preview4$file, _form$category2, _form$status2, articles;\n\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.prev = 0;\n                  _context2.next = 3;\n                  return action({\n                    variables: {\n                      id: id,\n                      input: {\n                        title: form.title,\n                        body: form.body,\n                        preview: (_form$preview3 = form.preview) === null || _form$preview3 === void 0 ? void 0 : _form$preview3.file,\n                        previewSize: (_form$preview4 = form.preview) === null || _form$preview4 === void 0 ? void 0 : (_form$preview4$file = _form$preview4.file) === null || _form$preview4$file === void 0 ? void 0 : _form$preview4$file.size,\n                        category: (_form$category2 = form.category) === null || _form$category2 === void 0 ? void 0 : _form$category2.value,\n                        status: (_form$status2 = form.status) === null || _form$status2 === void 0 ? void 0 : _form$status2.value\n                      }\n                    }\n                  });\n\n                case 3:\n                  articles = _context2.sent;\n                  dispatch(setDocuments(articles.data.updateArticle));\n                  dispatch(setItem({\n                    type: 'success',\n                    message: 'Статья успешно отредактирована'\n                  }));\n                  _context2.next = 11;\n                  break;\n\n                case 8:\n                  _context2.prev = 8;\n                  _context2.t0 = _context2[\"catch\"](0);\n                  dispatch(setItem({\n                    type: 'error',\n                    message: 'Не удалось отредактировать статью'\n                  }));\n\n                case 11:\n                  _context2.prev = 11;\n                  dispatch(setDrawer(null));\n                  return _context2.finish(11);\n\n                case 14:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, null, [[0, 8, 11, 14]]);\n        }));\n\n        return function (_x3, _x4) {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onCommentLink: function onCommentLink(user) {\n        return onUserLink(dispatch, {\n          email: user,\n          auth: auth\n        });\n      }\n    })\n  }));\n}\nexport function onArticleDelete(dispatch, props) {\n  var id = props.id,\n      article = props.article,\n      auth = props.auth,\n      mutation = props.mutation;\n  dispatch(setDrawer({\n    icon: 'delete',\n    color: 'red',\n    title: 'Удаление статьи',\n    content: /*#__PURE__*/React.createElement(DeleteForm, {\n      mutation: mutation,\n      appearance: 'clear',\n      onCancel: function onCancel() {\n        return dispatch(setDrawer(null));\n      },\n      onSubmit: /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(_, action) {\n          var articles;\n          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.prev = 0;\n                  _context3.next = 3;\n                  return action({\n                    variables: {\n                      id: id\n                    }\n                  });\n\n                case 3:\n                  articles = _context3.sent;\n                  dispatch(setDocuments(articles.data.deleteArticle));\n                  dispatch(setItem({\n                    type: 'success',\n                    message: 'Статья успешно удалена'\n                  }));\n                  _context3.next = 11;\n                  break;\n\n                case 8:\n                  _context3.prev = 8;\n                  _context3.t0 = _context3[\"catch\"](0);\n                  dispatch(setItem({\n                    type: 'error',\n                    message: 'Не удалось удалить статью'\n                  }));\n\n                case 11:\n                  _context3.prev = 11;\n                  dispatch(setDrawer(null));\n                  return _context3.finish(11);\n\n                case 14:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, null, [[0, 8, 11, 14]]);\n        }));\n\n        return function (_x5, _x6) {\n          return _ref3.apply(this, arguments);\n        };\n      }()\n    }, /*#__PURE__*/React.createElement(ArticleCard, {\n      article: article,\n      appearance: 'clear',\n      onLink: function onLink() {\n        return onArticleLink(dispatch, {\n          id: article.id\n        });\n      },\n      onCommentLink: function onCommentLink(user) {\n        return onUserLink(dispatch, {\n          email: user,\n          auth: auth\n        });\n      }\n    }))\n  }));\n}","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/store/helpers/article.js"],"names":["React","ArticleForm","DeleteForm","ArticleCard","ArticleView","setDocuments","setDrawer","setItem","onUserLink","onArticleLink","dispatch","props","id","auth","icon","title","content","user","email","onArticleCreate","categories","statuses","canEditStatus","mutation","form","action","variables","input","body","preview","file","previewSize","size","category","value","status","articles","data","createArticle","type","message","onArticleEdit","updateArticle","onArticleDelete","article","color","_","deleteArticle"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport ArticleForm from '../../components/FormArticle'\nimport DeleteForm from '../../components/FormDelete'\nimport ArticleCard from '../../components/ArticleCard'\nimport ArticleView from '../../components/ArticleView'\nimport { setDocuments } from '../actions/documents'\nimport { setDrawer } from '../actions/drawer'\nimport { setItem } from '../actions/snacks'\nimport { onUserLink } from '../helpers/user'\n\nexport function onArticleLink(dispatch, props) {\n  const { id, auth } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'document',\n      title: 'Статья',\n      content: (\n        <ArticleView\n          article={id}\n          appearance={'clear'}\n          onCommentLink={(user) => onUserLink(dispatch, { email: user, auth })}\n        />\n      )\n    })\n  )\n}\n\nexport function onArticleCreate(dispatch, props) {\n  const { categories, statuses, canEditStatus, mutation } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'document',\n      title: 'Создание статьи',\n      content: (\n        <ArticleForm\n          mutation={mutation}\n          categories={categories}\n          statuses={statuses}\n          appearance={'clear'}\n          canEditStatus={canEditStatus}\n          onSubmit={async (form, action) => {\n            try {\n              const articles = await action({\n                variables: {\n                  input: {\n                    title: form.title,\n                    body: form.body,\n                    preview: form.preview?.file,\n                    previewSize: form.preview?.file.size,\n                    category: form.category?.value,\n                    status: form.status?.value\n                  }\n                }\n              })\n              dispatch(setDocuments(articles.data.createArticle))\n              dispatch(setDrawer(null))\n              dispatch(\n                setItem({\n                  type: 'success',\n                  message: 'Статья успешно создана'\n                })\n              )\n            } catch (err) {\n              dispatch(setDrawer(null))\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось создать статью'\n                })\n              )\n            }\n          }}\n        />\n      )\n    })\n  )\n}\n\nexport function onArticleEdit(dispatch, props) {\n  const { id, auth, categories, statuses, canEditStatus, mutation } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'document',\n      title: 'Редактирование статьи',\n      content: (\n        <ArticleForm\n          article={id}\n          mutation={mutation}\n          categories={categories}\n          statuses={statuses}\n          appearance={'clear'}\n          canEditStatus={canEditStatus}\n          onSubmit={async (form, action) => {\n            try {\n              const articles = await action({\n                variables: {\n                  id,\n                  input: {\n                    title: form.title,\n                    body: form.body,\n                    preview: form.preview?.file,\n                    previewSize: form.preview?.file?.size,\n                    category: form.category?.value,\n                    status: form.status?.value\n                  }\n                }\n              })\n              dispatch(setDocuments(articles.data.updateArticle))\n              dispatch(\n                setItem({\n                  type: 'success',\n                  message: 'Статья успешно отредактирована'\n                })\n              )\n            } catch (err) {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось отредактировать статью'\n                })\n              )\n            } finally {\n              dispatch(setDrawer(null))\n            }\n          }}\n          onCommentLink={(user) => onUserLink(dispatch, { email: user, auth })}\n        />\n      )\n    })\n  )\n}\n\nexport function onArticleDelete(dispatch, props) {\n  const { id, article, auth, mutation } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'delete',\n      color: 'red',\n      title: 'Удаление статьи',\n      content: (\n        <DeleteForm\n          mutation={mutation}\n          appearance={'clear'}\n          onCancel={() => dispatch(setDrawer(null))}\n          onSubmit={async (_, action) => {\n            try {\n              const articles = await action({\n                variables: { id }\n              })\n              dispatch(setDocuments(articles.data.deleteArticle))\n              dispatch(\n                setItem({\n                  type: 'success',\n                  message: 'Статья успешно удалена'\n                })\n              )\n            } catch {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось удалить статью'\n                })\n              )\n            } finally {\n              dispatch(setDrawer(null))\n            }\n          }}>\n          <ArticleCard\n            article={article}\n            appearance={'clear'}\n            onLink={() => onArticleLink(dispatch, { id: article.id })}\n            onCommentLink={(user) => onUserLink(dispatch, { email: user, auth })}\n          />\n        </DeleteForm>\n      )\n    })\n  )\n}\n"]},"metadata":{},"sourceType":"module"}