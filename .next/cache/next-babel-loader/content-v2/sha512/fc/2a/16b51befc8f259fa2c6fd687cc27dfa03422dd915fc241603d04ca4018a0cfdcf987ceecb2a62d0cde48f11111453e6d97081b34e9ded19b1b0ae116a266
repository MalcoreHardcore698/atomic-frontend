{"ast":null,"code":"import React from 'react';\nimport { useRouter } from 'next/router';\nimport { useLazyQuery } from '@apollo/react-hooks';\nimport GlobalSearch from '../../atomic-ui/components/GlobalSearch';\nimport { b64EncodeUnicode } from '../../atomic-ui/utils/functions';\nimport { Card } from '../../layouts/content';\nexport const QuerySearch = ({\n  search,\n  entity,\n  entities,\n  placeholder,\n  setSearch,\n  onHide,\n  onJump,\n  onChange\n}) => {\n  const router = useRouter();\n  const initialResult = [null, {\n    data: null,\n    loading: false,\n    refetch: null\n  }];\n  const [load, {\n    data,\n    loading,\n    refetch\n  }] = entity ? useLazyQuery(entity.query) : initialResult;\n\n  const redirectById = (item, path) => router.push(`${path}/${b64EncodeUnicode(item.id)}`);\n\n  const onClick = async (item, path, singlePath) => {\n    if (onHide) onHide();\n    await redirectById(item, `${path}/${singlePath}`);\n  };\n\n  const onEdit = async (item, path) => {\n    if (onHide) onHide();\n    await redirectById(item, `${path}/edit`);\n  };\n\n  const onSubmit = value => {\n    const variables = {\n      search: value\n    };\n    if (setSearch) setSearch(value);\n\n    if (refetch) {\n      refetch(variables);\n    }\n\n    if (load) {\n      load({\n        variables\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(GlobalSearch, {\n    result: data && entity && data[entity === null || entity === void 0 ? void 0 : entity.value],\n    loading: loading,\n    initialEntity: entity,\n    entities: (entities || []).map(elem => ({ ...elem,\n      render: item => /*#__PURE__*/React.createElement(Card, {\n        key: item.id || item.email,\n        item: item,\n        component: elem.render(item),\n        onLink: document => onClick(document, (elem === null || elem === void 0 ? void 0 : elem.originPath) || '', (elem === null || elem === void 0 ? void 0 : elem.singlePath) || ''),\n        onEdit: document => onEdit(document, (elem === null || elem === void 0 ? void 0 : elem.originPath) || ''),\n        onDelete: document => onJump('/delete', {\n          item: document,\n          entity: elem\n        }),\n        withoutChecked: true\n      })\n    })),\n    searchDefaultValue: search,\n    searchPlaceholder: placeholder,\n    onSubmit: onSubmit,\n    onChange: onChange\n  });\n};\nexport default QuerySearch;","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/components/QuerySearch/index.js"],"names":["React","useRouter","useLazyQuery","GlobalSearch","b64EncodeUnicode","Card","QuerySearch","search","entity","entities","placeholder","setSearch","onHide","onJump","onChange","router","initialResult","data","loading","refetch","load","query","redirectById","item","path","push","id","onClick","singlePath","onEdit","onSubmit","value","variables","map","elem","render","email","document","originPath"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useRouter } from 'next/router'\nimport { useLazyQuery } from '@apollo/react-hooks'\n\nimport GlobalSearch from '../../atomic-ui/components/GlobalSearch'\nimport { b64EncodeUnicode } from '../../atomic-ui/utils/functions'\n\nimport { Card } from '../../layouts/content'\n\nexport const QuerySearch = ({\n  search,\n  entity,\n  entities,\n  placeholder,\n  setSearch,\n  onHide,\n  onJump,\n  onChange\n}) => {\n  const router = useRouter()\n  const initialResult = [null, { data: null, loading: false, refetch: null }]\n  const [load, { data, loading, refetch }] = entity ? useLazyQuery(entity.query) : initialResult\n\n  const redirectById = (item, path) => router.push(`${path}/${b64EncodeUnicode(item.id)}`)\n\n  const onClick = async (item, path, singlePath) => {\n    if (onHide) onHide()\n    await redirectById(item, `${path}/${singlePath}`)\n  }\n\n  const onEdit = async (item, path) => {\n    if (onHide) onHide()\n    await redirectById(item, `${path}/edit`)\n  }\n\n  const onSubmit = (value) => {\n    const variables = { search: value }\n\n    if (setSearch) setSearch(value)\n\n    if (refetch) {\n      refetch(variables)\n    }\n    if (load) {\n      load({ variables })\n    }\n  }\n\n  return (\n    <GlobalSearch\n      result={data && entity && data[entity?.value]}\n      loading={loading}\n      initialEntity={entity}\n      entities={(entities || []).map((elem) => ({\n        ...elem,\n        render: (item) => (\n          <Card\n            key={item.id || item.email}\n            item={item}\n            component={elem.render(item)}\n            onLink={(document) => onClick(document, elem?.originPath || '', elem?.singlePath || '')}\n            onEdit={(document) => onEdit(document, elem?.originPath || '')}\n            onDelete={(document) => onJump('/delete', { item: document, entity: elem })}\n            withoutChecked\n          />\n        )\n      }))}\n      searchDefaultValue={search}\n      searchPlaceholder={placeholder}\n      onSubmit={onSubmit}\n      onChange={onChange}\n    />\n  )\n}\n\nexport default QuerySearch\n"]},"metadata":{},"sourceType":"module"}