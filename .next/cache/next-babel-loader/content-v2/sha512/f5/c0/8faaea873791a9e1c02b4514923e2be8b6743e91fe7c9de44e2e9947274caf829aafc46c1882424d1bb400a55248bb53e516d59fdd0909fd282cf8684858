{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useMemo } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { onUserAboutMore, onUserLink, onUserMembers, onUserEdit, onUserCreate } from '../store/helpers/user';\nimport { useHelper } from './useHelper';\nimport { useMutate } from './useMutate';\nimport queries from '../graphql/queries';\nexport const useUser = ({\n  isManage\n} = {}) => {\n  _s();\n\n  var _user$members;\n\n  const recall = useHelper();\n  const mutate = useMutate();\n  const user = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  const canEditAccount = useMemo(() => (user === null || user === void 0 ? void 0 : user.account) !== 'ADMIN', [user]);\n  const canEditRole = useMemo(() => {\n    var _user$role;\n\n    return user && (user === null || user === void 0 ? void 0 : (_user$role = user.role) === null || _user$role === void 0 ? void 0 : _user$role.name) === 'ADMIN';\n  }, [user]);\n  const hasOwned = useCallback(author => (author === null || author === void 0 ? void 0 : author.name) === (user === null || user === void 0 ? void 0 : user.name), [user]);\n  const onLink = useCallback(author => {\n    const owned = (author === null || author === void 0 ? void 0 : author.name) === (user === null || user === void 0 ? void 0 : user.name);\n    recall(onUserLink, {\n      id: author === null || author === void 0 ? void 0 : author.email,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      owned,\n      queries: {\n        userChats: queries.GET_USER_CHATS,\n        chat: queries.GET_CHAT\n      },\n      mutations: {\n        addUserChat: queries.ADD_USER_CHAT,\n        sendMessage: queries.SEND_MESSAGE\n      }\n    })();\n  }, [user, dispatch, mutate, recall]);\n  const onChat = useCallback(author => {\n    recall(onChat, {\n      sender: user === null || user === void 0 ? void 0 : user.email,\n      recipient: author.email,\n      queries: {\n        userChats: queries.GET_USER_CHATS,\n        chat: queries.GET_CHAT\n      },\n      mutations: {\n        addUserChat: queries.ADD_USER_CHAT,\n        sendMessage: queries.SEND_MESSAGE\n      }\n    })();\n  }, [user, mutate, dispatch]);\n  const onMembers = useCallback(author => {\n    recall(onUserMembers, {\n      id: author === null || author === void 0 ? void 0 : author.email,\n      auth: user === null || user === void 0 ? void 0 : user.email\n    })();\n  }, [user, recall]);\n  const onAboutMore = useCallback(author => {\n    recall(onUserAboutMore, {\n      user: author\n    })();\n  }, [recall]);\n  const onCompanyLink = useCallback(author => {\n    var _author$company;\n\n    recall(onUserLink, {\n      id: (_author$company = author.company) === null || _author$company === void 0 ? void 0 : _author$company.email,\n      auth: user === null || user === void 0 ? void 0 : user.email,\n      queries: {\n        userChats: queries.GET_USER_CHATS,\n        chat: queries.GET_CHAT\n      },\n      mutations: {\n        addUserChat: queries.ADD_USER_CHAT,\n        sendMessage: queries.SEND_MESSAGE\n      }\n    })();\n  }, [user, recall]);\n\n  const onEdit = (author, onAfter) => recall(onUserEdit, {\n    user: author.email,\n    auth: user === null || user === void 0 ? void 0 : user.email,\n    canEditAccount,\n    canEditRole,\n    mutations: {\n      del: queries.DELETE_USER,\n      update: queries.UPDATE_USER\n    },\n    onAfter\n  })();\n\n  const onCreate = onAfter => recall(onUserCreate, {\n    canEditRole,\n    mutation: queries.CREATE_USER,\n    onAfter\n  })();\n\n  return {\n    user,\n    hasOwned,\n    onLink,\n    onChat,\n    onAboutMore,\n    onMembers: (user === null || user === void 0 ? void 0 : (_user$members = user.members) === null || _user$members === void 0 ? void 0 : _user$members.length) > 0 && onMembers,\n    onCompanyLink: (user === null || user === void 0 ? void 0 : user.company) && onCompanyLink,\n    onEdit: isManage && onEdit,\n    onCreate: isManage && onCreate\n  };\n};\n\n_s(useUser, \"ZMwu7DXTgIFsJe63hziIaKTwRA4=\", false, function () {\n  return [useHelper, useMutate, useSelector, useDispatch];\n});","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/hooks/useUser.js"],"names":["useCallback","useMemo","useDispatch","useSelector","onUserAboutMore","onUserLink","onUserMembers","onUserEdit","onUserCreate","useHelper","useMutate","queries","useUser","isManage","recall","mutate","user","state","dispatch","canEditAccount","account","canEditRole","role","name","hasOwned","author","onLink","owned","id","email","auth","userChats","GET_USER_CHATS","chat","GET_CHAT","mutations","addUserChat","ADD_USER_CHAT","sendMessage","SEND_MESSAGE","onChat","sender","recipient","onMembers","onAboutMore","onCompanyLink","company","onEdit","onAfter","del","DELETE_USER","update","UPDATE_USER","onCreate","mutation","CREATE_USER","members","length"],"mappings":"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","sourcesContent":["import { useCallback, useMemo } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport {\n  onUserAboutMore,\n  onUserLink,\n  onUserMembers,\n  onUserEdit,\n  onUserCreate\n} from '../store/helpers/user'\nimport { useHelper } from './useHelper'\nimport { useMutate } from './useMutate'\nimport queries from '../graphql/queries'\n\nexport const useUser = ({ isManage } = {}) => {\n  const recall = useHelper()\n  const mutate = useMutate()\n  const user = useSelector((state) => state.user)\n  const dispatch = useDispatch()\n\n  const canEditAccount = useMemo(() => user?.account !== 'ADMIN', [user])\n\n  const canEditRole = useMemo(() => user && user?.role?.name === 'ADMIN', [user])\n\n  const hasOwned = useCallback((author) => author?.name === user?.name, [user])\n\n  const onLink = useCallback(\n    (author) => {\n      const owned = author?.name === user?.name\n      recall(onUserLink, {\n        id: author?.email,\n        auth: user?.email,\n        owned,\n        queries: {\n          userChats: queries.GET_USER_CHATS,\n          chat: queries.GET_CHAT\n        },\n        mutations: {\n          addUserChat: queries.ADD_USER_CHAT,\n          sendMessage: queries.SEND_MESSAGE\n        }\n      })()\n    },\n    [user, dispatch, mutate, recall]\n  )\n\n  const onChat = useCallback(\n    (author) => {\n      recall(onChat, {\n        sender: user?.email,\n        recipient: author.email,\n        queries: {\n          userChats: queries.GET_USER_CHATS,\n          chat: queries.GET_CHAT\n        },\n        mutations: {\n          addUserChat: queries.ADD_USER_CHAT,\n          sendMessage: queries.SEND_MESSAGE\n        }\n      })()\n    },\n    [user, mutate, dispatch]\n  )\n\n  const onMembers = useCallback(\n    (author) => {\n      recall(onUserMembers, { id: author?.email, auth: user?.email })()\n    },\n    [user, recall]\n  )\n\n  const onAboutMore = useCallback(\n    (author) => {\n      recall(onUserAboutMore, { user: author })()\n    },\n    [recall]\n  )\n\n  const onCompanyLink = useCallback(\n    (author) => {\n      recall(onUserLink, {\n        id: author.company?.email,\n        auth: user?.email,\n        queries: {\n          userChats: queries.GET_USER_CHATS,\n          chat: queries.GET_CHAT\n        },\n        mutations: {\n          addUserChat: queries.ADD_USER_CHAT,\n          sendMessage: queries.SEND_MESSAGE\n        }\n      })()\n    },\n    [user, recall]\n  )\n\n  const onEdit = (author, onAfter) =>\n    recall(onUserEdit, {\n      user: author.email,\n      auth: user?.email,\n      canEditAccount,\n      canEditRole,\n      mutations: {\n        del: queries.DELETE_USER,\n        update: queries.UPDATE_USER\n      },\n      onAfter\n    })()\n\n  const onCreate = (onAfter) =>\n    recall(onUserCreate, {\n      canEditRole,\n      mutation: queries.CREATE_USER,\n      onAfter\n    })()\n\n  return {\n    user,\n    hasOwned,\n    onLink,\n    onChat,\n    onAboutMore,\n    onMembers: user?.members?.length > 0 && onMembers,\n    onCompanyLink: user?.company && onCompanyLink,\n    onEdit: isManage && onEdit,\n    onCreate: isManage && onCreate\n  }\n}\n"]},"metadata":{},"sourceType":"module"}