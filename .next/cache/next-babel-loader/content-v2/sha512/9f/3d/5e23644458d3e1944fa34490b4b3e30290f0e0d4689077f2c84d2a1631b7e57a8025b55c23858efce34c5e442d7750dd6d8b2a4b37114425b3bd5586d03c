{"ast":null,"code":"import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useDispatch } from 'react-redux';\nimport { useQuery } from '@apollo/react-hooks';\nimport Difinition from '../../atomic-ui/components/Difinition';\nimport DashboardLayout from '../../layouts/dashboard';\nimport FormSettings from '../../components/FormSettings';\nimport Processed from '../../components/Processed';\nimport { setItem } from '../../store/actions/snacks';\nimport { setSettings } from '../../store/actions/root';\nimport queries from '../../graphql/queries';\nconst TITLE = 'Настройки';\nconst Container = styled.div.withConfig({\n  displayName: \"settings__Container\",\n  componentId: \"mgp0x9-0\"\n})([\"width:100%;max-width:745px;@media only screen and (max-width:768px){max-width:100%;}\"]);\n\nconst Settings = () => {\n  const {\n    data,\n    loading,\n    error\n  } = useQuery(queries.GET_META_DASHBOARD_SETTINGS);\n  const [settings, setCurrentSettings] = useState(null);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!loading && data) {\n      setCurrentSettings(data.getDashboardSettings);\n    }\n  }, [data, loading]);\n  return /*#__PURE__*/React.createElement(DashboardLayout, {\n    title: TITLE\n  }, /*#__PURE__*/React.createElement(Difinition, {\n    icon: 'setting',\n    text: TITLE\n  }), /*#__PURE__*/React.createElement(Container, null, /*#__PURE__*/React.createElement(Processed, {\n    data: data === null || data === void 0 ? void 0 : data.getDashboardSettings,\n    loading: loading,\n    error: error,\n    errorMessage: 'Упс! Не удалось получить настройки',\n    emptyMessage: 'Кажется настройки не были созданы'\n  }, /*#__PURE__*/React.createElement(FormSettings, {\n    settings: settings,\n    mutation: queries.UPDATE_META_DASHBOARD_SETTINGS,\n    onSubmit: async (form, action) => {\n      try {\n        var _form$general, _form$general$logotyp, _form$general2, _form$general2$logoty, _form$scaffold, _form$scaffold2, _form$scaffold2$prima, _form$scaffold3, _form$scaffold3$resid, _form$scaffold4, _form$scaffold4$backg, _form$scaffold5, _form$scaffold5$backg, _form$meta, _form$meta2;\n\n        const result = await action({\n          variables: {\n            input: {\n              general: {\n                logotype: (_form$general = form.general) === null || _form$general === void 0 ? void 0 : (_form$general$logotyp = _form$general.logotype) === null || _form$general$logotyp === void 0 ? void 0 : _form$general$logotyp.file,\n                logotypeSize: (_form$general2 = form.general) === null || _form$general2 === void 0 ? void 0 : (_form$general2$logoty = _form$general2.logotype) === null || _form$general2$logoty === void 0 ? void 0 : _form$general2$logoty.size\n              },\n              scaffold: {\n                title: (_form$scaffold = form.scaffold) === null || _form$scaffold === void 0 ? void 0 : _form$scaffold.title,\n                primary: (_form$scaffold2 = form.scaffold) === null || _form$scaffold2 === void 0 ? void 0 : (_form$scaffold2$prima = _form$scaffold2.primary) === null || _form$scaffold2$prima === void 0 ? void 0 : _form$scaffold2$prima.value,\n                residues: (_form$scaffold3 = form.scaffold) === null || _form$scaffold3 === void 0 ? void 0 : (_form$scaffold3$resid = _form$scaffold3.residues) === null || _form$scaffold3$resid === void 0 ? void 0 : _form$scaffold3$resid.map(residue => residue.value),\n                background: (_form$scaffold4 = form.scaffold) === null || _form$scaffold4 === void 0 ? void 0 : (_form$scaffold4$backg = _form$scaffold4.background) === null || _form$scaffold4$backg === void 0 ? void 0 : _form$scaffold4$backg.file,\n                backgroundSize: (_form$scaffold5 = form.scaffold) === null || _form$scaffold5 === void 0 ? void 0 : (_form$scaffold5$backg = _form$scaffold5.background) === null || _form$scaffold5$backg === void 0 ? void 0 : _form$scaffold5$backg.size\n              },\n              meta: {\n                title: (_form$meta = form.meta) === null || _form$meta === void 0 ? void 0 : _form$meta.title,\n                description: (_form$meta2 = form.meta) === null || _form$meta2 === void 0 ? void 0 : _form$meta2.description\n              }\n            }\n          }\n        });\n        setCurrentSettings(result.data.updateDashboardSettings);\n        dispatch(setSettings(result.data.updateDashboardSettings));\n        dispatch(setItem({\n          type: 'success',\n          message: 'Настройки успешно изменены'\n        }));\n      } catch (_unused) {\n        dispatch(setItem({\n          type: 'error',\n          message: 'Не удалось изменить настройки'\n        }));\n      }\n    }\n  }))));\n};\n\nexport default Settings;","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/pages/dashboard/settings.js"],"names":["React","useState","useEffect","styled","useDispatch","useQuery","Difinition","DashboardLayout","FormSettings","Processed","setItem","setSettings","queries","TITLE","Container","div","Settings","data","loading","error","GET_META_DASHBOARD_SETTINGS","settings","setCurrentSettings","dispatch","getDashboardSettings","UPDATE_META_DASHBOARD_SETTINGS","form","action","result","variables","input","general","logotype","file","logotypeSize","size","scaffold","title","primary","value","residues","map","residue","background","backgroundSize","meta","description","updateDashboardSettings","type","message"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,QAAT,QAAyB,qBAAzB;AAEA,OAAOC,UAAP,MAAuB,uCAAvB;AAEA,OAAOC,eAAP,MAA4B,yBAA5B;AACA,OAAOC,YAAP,MAAyB,+BAAzB;AACA,OAAOC,SAAP,MAAsB,4BAAtB;AACA,SAASC,OAAT,QAAwB,4BAAxB;AACA,SAASC,WAAT,QAA4B,0BAA5B;AACA,OAAOC,OAAP,MAAoB,uBAApB;AAEA,MAAMC,KAAK,GAAG,WAAd;AAEA,MAAMC,SAAS,GAAGX,MAAM,CAACY,GAAV;AAAA;AAAA;AAAA,4FAAf;;AASA,MAAMC,QAAQ,GAAG,MAAM;AACrB,QAAM;AAAEC,IAAAA,IAAF;AAAQC,IAAAA,OAAR;AAAiBC,IAAAA;AAAjB,MAA2Bd,QAAQ,CAACO,OAAO,CAACQ,2BAAT,CAAzC;AACA,QAAM,CAACC,QAAD,EAAWC,kBAAX,IAAiCrB,QAAQ,CAAC,IAAD,CAA/C;AACA,QAAMsB,QAAQ,GAAGnB,WAAW,EAA5B;AAEAF,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACgB,OAAD,IAAYD,IAAhB,EAAsB;AACpBK,MAAAA,kBAAkB,CAACL,IAAI,CAACO,oBAAN,CAAlB;AACD;AACF,GAJQ,EAIN,CAACP,IAAD,EAAOC,OAAP,CAJM,CAAT;AAMA,sBACE,oBAAC,eAAD;AAAiB,IAAA,KAAK,EAAEL;AAAxB,kBACE,oBAAC,UAAD;AAAY,IAAA,IAAI,EAAE,SAAlB;AAA6B,IAAA,IAAI,EAAEA;AAAnC,IADF,eAGE,oBAAC,SAAD,qBACE,oBAAC,SAAD;AACE,IAAA,IAAI,EAAEI,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEO,oBADd;AAEE,IAAA,OAAO,EAAEN,OAFX;AAGE,IAAA,KAAK,EAAEC,KAHT;AAIE,IAAA,YAAY,EAAE,oCAJhB;AAKE,IAAA,YAAY,EAAE;AALhB,kBAME,oBAAC,YAAD;AACE,IAAA,QAAQ,EAAEE,QADZ;AAEE,IAAA,QAAQ,EAAET,OAAO,CAACa,8BAFpB;AAGE,IAAA,QAAQ,EAAE,OAAOC,IAAP,EAAaC,MAAb,KAAwB;AAChC,UAAI;AAAA;;AACF,cAAMC,MAAM,GAAG,MAAMD,MAAM,CAAC;AAC1BE,UAAAA,SAAS,EAAE;AACTC,YAAAA,KAAK,EAAE;AACLC,cAAAA,OAAO,EAAE;AACPC,gBAAAA,QAAQ,mBAAEN,IAAI,CAACK,OAAP,2EAAE,cAAcC,QAAhB,0DAAE,sBAAwBC,IAD3B;AAEPC,gBAAAA,YAAY,oBAAER,IAAI,CAACK,OAAP,4EAAE,eAAcC,QAAhB,0DAAE,sBAAwBG;AAF/B,eADJ;AAKLC,cAAAA,QAAQ,EAAE;AACRC,gBAAAA,KAAK,oBAAEX,IAAI,CAACU,QAAP,mDAAE,eAAeC,KADd;AAERC,gBAAAA,OAAO,qBAAEZ,IAAI,CAACU,QAAP,6EAAE,gBAAeE,OAAjB,0DAAE,sBAAwBC,KAFzB;AAGRC,gBAAAA,QAAQ,qBAAEd,IAAI,CAACU,QAAP,6EAAE,gBAAeI,QAAjB,0DAAE,sBAAyBC,GAAzB,CAA8BC,OAAD,IAAaA,OAAO,CAACH,KAAlD,CAHF;AAIRI,gBAAAA,UAAU,qBAAEjB,IAAI,CAACU,QAAP,6EAAE,gBAAeO,UAAjB,0DAAE,sBAA2BV,IAJ/B;AAKRW,gBAAAA,cAAc,qBAAElB,IAAI,CAACU,QAAP,6EAAE,gBAAeO,UAAjB,0DAAE,sBAA2BR;AALnC,eALL;AAYLU,cAAAA,IAAI,EAAE;AACJR,gBAAAA,KAAK,gBAAEX,IAAI,CAACmB,IAAP,+CAAE,WAAWR,KADd;AAEJS,gBAAAA,WAAW,iBAAEpB,IAAI,CAACmB,IAAP,gDAAE,YAAWC;AAFpB;AAZD;AADE;AADe,SAAD,CAA3B;AAqBAxB,QAAAA,kBAAkB,CAACM,MAAM,CAACX,IAAP,CAAY8B,uBAAb,CAAlB;AACAxB,QAAAA,QAAQ,CAACZ,WAAW,CAACiB,MAAM,CAACX,IAAP,CAAY8B,uBAAb,CAAZ,CAAR;AACAxB,QAAAA,QAAQ,CACNb,OAAO,CAAC;AACNsC,UAAAA,IAAI,EAAE,SADA;AAENC,UAAAA,OAAO,EAAE;AAFH,SAAD,CADD,CAAR;AAMD,OA9BD,CA8BE,gBAAM;AACN1B,QAAAA,QAAQ,CACNb,OAAO,CAAC;AACNsC,UAAAA,IAAI,EAAE,OADA;AAENC,UAAAA,OAAO,EAAE;AAFH,SAAD,CADD,CAAR;AAMD;AACF;AA1CH,IANF,CADF,CAHF,CADF;AA2DD,CAtED;;AAwEA,eAAejC,QAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport styled from 'styled-components'\nimport { useDispatch } from 'react-redux'\nimport { useQuery } from '@apollo/react-hooks'\n\nimport Difinition from '../../atomic-ui/components/Difinition'\n\nimport DashboardLayout from '../../layouts/dashboard'\nimport FormSettings from '../../components/FormSettings'\nimport Processed from '../../components/Processed'\nimport { setItem } from '../../store/actions/snacks'\nimport { setSettings } from '../../store/actions/root'\nimport queries from '../../graphql/queries'\n\nconst TITLE = 'Настройки'\n\nconst Container = styled.div`\n  width: 100%;\n  max-width: 745px;\n\n  @media only screen and (max-width: 768px) {\n    max-width: 100%;\n  }\n`\n\nconst Settings = () => {\n  const { data, loading, error } = useQuery(queries.GET_META_DASHBOARD_SETTINGS)\n  const [settings, setCurrentSettings] = useState(null)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if (!loading && data) {\n      setCurrentSettings(data.getDashboardSettings)\n    }\n  }, [data, loading])\n\n  return (\n    <DashboardLayout title={TITLE}>\n      <Difinition icon={'setting'} text={TITLE} />\n\n      <Container>\n        <Processed\n          data={data?.getDashboardSettings}\n          loading={loading}\n          error={error}\n          errorMessage={'Упс! Не удалось получить настройки'}\n          emptyMessage={'Кажется настройки не были созданы'}>\n          <FormSettings\n            settings={settings}\n            mutation={queries.UPDATE_META_DASHBOARD_SETTINGS}\n            onSubmit={async (form, action) => {\n              try {\n                const result = await action({\n                  variables: {\n                    input: {\n                      general: {\n                        logotype: form.general?.logotype?.file,\n                        logotypeSize: form.general?.logotype?.size\n                      },\n                      scaffold: {\n                        title: form.scaffold?.title,\n                        primary: form.scaffold?.primary?.value,\n                        residues: form.scaffold?.residues?.map((residue) => residue.value),\n                        background: form.scaffold?.background?.file,\n                        backgroundSize: form.scaffold?.background?.size\n                      },\n                      meta: {\n                        title: form.meta?.title,\n                        description: form.meta?.description\n                      }\n                    }\n                  }\n                })\n                setCurrentSettings(result.data.updateDashboardSettings)\n                dispatch(setSettings(result.data.updateDashboardSettings))\n                dispatch(\n                  setItem({\n                    type: 'success',\n                    message: 'Настройки успешно изменены'\n                  })\n                )\n              } catch {\n                dispatch(\n                  setItem({\n                    type: 'error',\n                    message: 'Не удалось изменить настройки'\n                  })\n                )\n              }\n            }}\n          />\n        </Processed>\n      </Container>\n    </DashboardLayout>\n  )\n}\n\nexport default Settings\n"]},"metadata":{},"sourceType":"module"}