{"ast":null,"code":"import _slicedToArray from \"/Users/alicefromwonderland/Desktop/branches/atomic/atomic-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/Users/alicefromwonderland/Desktop/branches/atomic/atomic-frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"/Users/alicefromwonderland/Desktop/branches/atomic/atomic-frontend/atomic-ui/components/DatePicker/index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 10px;\\n  right: 10px;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: calc(var(--input-height-m) + 10px);\\n  left: 0;\\n  z-index: 15;\\n  padding: var(--default-gap);\\n  background: var(--surface-background);\\n  border: var(--surface-border);\\n  border-radius: var(--surface-border-radius);\\n  box-shadow: var(--default-shadow);\\n\\n  &.fade-enter {\\n    opacity: 0;\\n  }\\n\\n  &.fade-enter-active {\\n    opacity: 1;\\n    transition: opacity 100ms, blur 100ms;\\n  }\\n\\n  &.fade-exit {\\n    opacity: 1;\\n  }\\n\\n  &.fade-exit-active {\\n    opacity: 0;\\n    transition: opacity 100ms, blur 100ms;\\n  }\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  flex-grow: 1;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  position: relative;\\n  display: flex;\\n  flex-grow: 1;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { getDateLabel, parseDate } from '../../assets/scripts/date';\nimport useClickOutside from '../../hooks/useClickOutside';\nimport Transition from '../Transition';\nimport DateSheet from '../DateSheet';\nimport Input from '../Input';\nimport Icon from '../Icon';\nvar DURATION = 100;\nexport var Wrap = styled.div(_templateObject());\n_c = Wrap;\nexport var TextField = styled.div(_templateObject2());\n_c2 = TextField;\nexport var Popout = styled(Transition)(_templateObject3());\n_c3 = Popout;\nexport var DateIcon = styled(Icon)(_templateObject4());\n_c4 = DateIcon;\nexport var DatePicker = function DatePicker(_ref) {\n  _s();\n\n  var id = _ref.id,\n      name = _ref.name,\n      style = _ref.style,\n      sheets = _ref.sheets,\n      inputRef = _ref.inputRef,\n      placeholder = _ref.placeholder,\n      _ref$value = _ref.value,\n      value = _ref$value === void 0 ? null : _ref$value,\n      className = _ref.className,\n      appearance = _ref.appearance,\n      canEditYear = _ref.canEditYear,\n      withNavigate = _ref.withNavigate,\n      withMarkers = _ref.withMarkers,\n      withYearDisplay = _ref.withYearDisplay,\n      onChange = _ref.onChange,\n      onCompare = _ref.onCompare;\n\n  var _useState = useState(false),\n      isOpen = _useState[0],\n      setIsOpen = _useState[1];\n\n  var _useState2 = useState(parseDate(value)),\n      selected = _useState2[0],\n      setSelected = _useState2[1];\n\n  var _useClickOutside = useClickOutside(function () {\n    return setIsOpen(false);\n  }),\n      _useClickOutside2 = _slicedToArray(_useClickOutside, 1),\n      label = _useClickOutside2[0];\n\n  var handleChange = function handleChange(newVal) {\n    setSelected(newVal);\n    if (onChange) onChange(newVal);\n  };\n\n  var handleInputClick = function handleInputClick() {\n    setIsOpen(!isOpen);\n  };\n\n  return __jsx(Wrap, {\n    ref: label,\n    className: className,\n    style: style,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, __jsx(TextField, {\n    onClick: handleInputClick,\n    className: className,\n    style: style,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, __jsx(Input, {\n    id: id,\n    name: name,\n    type: 'text',\n    inputRef: inputRef !== null && inputRef !== void 0 ? inputRef : null,\n    defaultValue: getDateLabel(selected),\n    placeholder: placeholder || 'Выберите дату',\n    appearance: appearance,\n    readOnly: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }), __jsx(DateIcon, {\n    icon: 'calendar',\n    stroke: 'var(--ghost-color-text)',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  })), __jsx(Popout, {\n    in: isOpen,\n    animation: 'fade',\n    timeout: DURATION,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, __jsx(DateSheet, {\n    value: selected,\n    sheets: sheets,\n    style: {\n      width: 282\n    },\n    canEditYear: canEditYear,\n    withNavigate: withNavigate,\n    withMarkers: withMarkers,\n    withYearDisplay: withYearDisplay,\n    onChange: handleChange,\n    onCompare: onCompare,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  })));\n};\n\n_s(DatePicker, \"XCX2nvexcV20MLmT++ezCpv822E=\", false, function () {\n  return [useClickOutside];\n});\n\n_c5 = DatePicker;\nexport default DatePicker;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Wrap\");\n$RefreshReg$(_c2, \"TextField\");\n$RefreshReg$(_c3, \"Popout\");\n$RefreshReg$(_c4, \"DateIcon\");\n$RefreshReg$(_c5, \"DatePicker\");","map":{"version":3,"sources":["/Users/alicefromwonderland/Desktop/branches/atomic/atomic-frontend/atomic-ui/components/DatePicker/index.js"],"names":["React","useState","styled","getDateLabel","parseDate","useClickOutside","Transition","DateSheet","Input","Icon","DURATION","Wrap","div","TextField","Popout","DateIcon","DatePicker","id","name","style","sheets","inputRef","placeholder","value","className","appearance","canEditYear","withNavigate","withMarkers","withYearDisplay","onChange","onCompare","isOpen","setIsOpen","selected","setSelected","label","handleChange","newVal","handleInputClick","width"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport styled from 'styled-components'\n\nimport { getDateLabel, parseDate } from '../../assets/scripts/date'\nimport useClickOutside from '../../hooks/useClickOutside'\nimport Transition from '../Transition'\nimport DateSheet from '../DateSheet'\nimport Input from '../Input'\nimport Icon from '../Icon'\n\nconst DURATION = 100\n\nexport const Wrap = styled.div`\n  position: relative;\n  display: flex;\n  flex-grow: 1;\n`\n\nexport const TextField = styled.div`\n  position: relative;\n  flex-grow: 1;\n`\n\nexport const Popout = styled(Transition)`\n  position: absolute;\n  top: calc(var(--input-height-m) + 10px);\n  left: 0;\n  z-index: 15;\n  padding: var(--default-gap);\n  background: var(--surface-background);\n  border: var(--surface-border);\n  border-radius: var(--surface-border-radius);\n  box-shadow: var(--default-shadow);\n\n  &.fade-enter {\n    opacity: 0;\n  }\n\n  &.fade-enter-active {\n    opacity: 1;\n    transition: opacity 100ms, blur 100ms;\n  }\n\n  &.fade-exit {\n    opacity: 1;\n  }\n\n  &.fade-exit-active {\n    opacity: 0;\n    transition: opacity 100ms, blur 100ms;\n  }\n`\n\nexport const DateIcon = styled(Icon)`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n`\n\nexport const DatePicker = ({\n  id,\n  name,\n  style,\n  sheets,\n  inputRef,\n  placeholder,\n  value = null,\n  className,\n  appearance,\n  canEditYear,\n  withNavigate,\n  withMarkers,\n  withYearDisplay,\n  onChange,\n  onCompare\n}) => {\n  const [isOpen, setIsOpen] = useState(false)\n  const [selected, setSelected] = useState(parseDate(value))\n  const [label] = useClickOutside(() => setIsOpen(false))\n\n  const handleChange = (newVal) => {\n    setSelected(newVal)\n    if (onChange) onChange(newVal)\n  }\n\n  const handleInputClick = () => {\n    setIsOpen(!isOpen)\n  }\n\n  return (\n    <Wrap ref={label} className={className} style={style}>\n      <TextField onClick={handleInputClick} className={className} style={style}>\n        <Input\n          id={id}\n          name={name}\n          type={'text'}\n          inputRef={inputRef ?? null}\n          defaultValue={getDateLabel(selected)}\n          placeholder={placeholder || 'Выберите дату'}\n          appearance={appearance}\n          readOnly\n        />\n        <DateIcon icon={'calendar'} stroke={'var(--ghost-color-text)'} />\n      </TextField>\n\n      <Popout in={isOpen} animation={'fade'} timeout={DURATION}>\n        <DateSheet\n          value={selected}\n          sheets={sheets}\n          style={{ width: 282 }}\n          canEditYear={canEditYear}\n          withNavigate={withNavigate}\n          withMarkers={withMarkers}\n          withYearDisplay={withYearDisplay}\n          onChange={handleChange}\n          onCompare={onCompare}\n        />\n      </Popout>\n    </Wrap>\n  )\n}\n\nexport default DatePicker\n"]},"metadata":{},"sourceType":"module"}