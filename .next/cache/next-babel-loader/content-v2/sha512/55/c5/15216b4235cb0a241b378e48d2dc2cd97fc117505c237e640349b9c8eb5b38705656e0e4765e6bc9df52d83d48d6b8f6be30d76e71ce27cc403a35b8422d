{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dan82\\\\Documents\\\\workspace\\\\FREELANCE\\\\atomic\\\\atomic-frontend\\\\atomic-ui\\\\components\\\\Table\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport { v4 } from 'uuid';\nimport Row from '../Row';\nimport Column from '../Column';\nimport Icon from '../Icon';\nimport Button from '../Button';\nimport Switch from '../Switch';\nimport Difinition from '../Difinition';\nimport Checkbox from '../Checkbox';\nimport Tooltip from '../Tooltip';\nimport Popper from '../Popper';\nexport const Wrap = styled(Column)``;\nexport const Manage = styled(Row)``;\nexport const Headers = styled(Switch)`\n  ${({\n  width\n}) => width && css`\n      span {\n        width: ${width};\n      }\n    `}\n\n  ${({\n  first,\n  width\n}) => first && width && css`\n      span:first-child {\n        width: calc(${width} + 45px);\n      }\n    `}\n`;\nexport const Track = styled(Row)`\n  transition: opacity 150ms ease;\n\n  ${({\n  checked\n}) => checked && css`\n      opacity: 0.45;\n    `}\n`;\nexport const Content = styled(Row)`\n  padding: 5px 15px;\n  width: calc(100% - 55px);\n\n  ${({\n  appearance\n}) => appearance === 'default' && css`\n      border: 1px solid var(--surface-border);\n      background: var(--surface-background);\n      box-shadow: 1px solid var(--surface-shadow);\n      border-radius: var(--surface-border-radius);\n    `}\n\n  ${({\n  appearance\n}) => appearance === 'clear' && css`\n      border: none;\n      background: none;\n      box-shadow: none;\n      border-radius: 0;\n    `}\n\n  & > label {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: calc(var(--input-height-m) - 15px);\n    margin-left: 5px;\n\n    & > span {\n      margin: 0;\n    }\n  }\n`;\nexport const Container = styled(Row)`\n  width: 100%;\n\n  ${({\n  onClick\n}) => onClick && css`\n      cursor: pointer;\n    `}\n`;\nexport const Actions = styled(Column)`\n  padding: 5px;\n  width: var(--input-height-m);\n  grid-gap: 5px;\n\n  button {\n    width: 100%;\n    flex-grow: 1;\n  }\n\n  ${({\n  appearance\n}) => appearance === 'default' && css`\n      border: 1px solid var(--surface-border);\n      background: var(--surface-background);\n      box-shadow: 1px solid var(--surface-shadow);\n      border-radius: var(--surface-border-radius);\n    `}\n\n  ${({\n  appearance\n}) => appearance === 'clear' && css`\n      border: none;\n      background: none;\n      box-shadow: none;\n      border-radius: 0;\n      padding: 0;\n    `}\n`;\nexport const Cell = styled(Difinition)`\n  align-items: center;\n  flex-grow: 1;\n\n  width: ${({\n  width\n}) => width};\n  overflow: hidden;\n\n  & > div {\n    width: 100%;\n  }\n\n  h4 {\n    font-size: var(--font-size-m);\n    font-weight: var(--font-weight-bold);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n`;\nexport const HeaderList = styled(Column)`\n  border: 1px solid var(--surface-border);\n  background: var(--surface-background);\n  box-shadow: var(--surface-shadow);\n  border-radius: var(--surface-border-radius);\n  padding: 10px;\n  grid-gap: 10px;\n`;\nexport const CheckboxTooltip = styled(Tooltip)`\n  display: flex;\n  align-items: center;\n`;\nexport const Table = ({\n  data,\n  template,\n  className,\n  style,\n  appearance,\n  onClick,\n  onChecked,\n  onDelete,\n  onEdit\n}) => {\n  const {\n    0: documents,\n    1: setDocuments\n  } = useState((data || []).map(item => _objectSpread(_objectSpread({}, item), {}, {\n    id: v4(),\n    checked: false\n  })));\n  const defaultWidth = `${Math.floor(100 / template.length)}%`;\n  /* eslint-disable-next-line */\n\n  const {\n    0: headers,\n    1: setHeaders\n  } = useState((template || []).map(item => ({\n    value: v4(),\n    label: item.header,\n    width: item.width || defaultWidth,\n    tooltip: item.tooltip || `Сортировка по «${item.header}‎»`,\n    visible: !item.hidden\n  })));\n  /* eslint-disable-next-line */\n\n  const {\n    0: header,\n    1: setHeader\n  } = useState(headers[0] || null);\n\n  const handleChecked = document => {\n    setDocuments(prev => prev.map(item => item.id === document.id ? _objectSpread(_objectSpread({}, document), {}, {\n      checked: !item.checked\n    }) : item));\n  };\n\n  return __jsx(Wrap, {\n    className: className,\n    style: style,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 5\n    }\n  }, __jsx(Manage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }\n  }, __jsx(Headers, {\n    defaultValue: headers[0],\n    options: headers.filter(h => h.visible),\n    onChange: item => setHeader(item),\n    first: onChecked,\n    stretch: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }), __jsx(Popper, {\n    place: 'left',\n    offset: {\n      bottom: 80\n    },\n    body: __jsx(HeaderList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 13\n      }\n    }, headers.map((header, index) => __jsx(Checkbox, {\n      key: index,\n      size: 's',\n      label: header.label,\n      checked: header.visible,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }\n    }))),\n    appearance: 'clear',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }\n  }, __jsx(Tooltip, {\n    text: 'Отображение полей',\n    place: 'left',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 11\n    }\n  }, __jsx(Button, {\n    kind: 'icon',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }, __jsx(Icon, {\n    icon: 'show',\n    stroke: 'white',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 15\n    }\n  }))))), documents.map((document, index) => __jsx(Track, {\n    key: index,\n    checked: document.checked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }, __jsx(Content, {\n    appearance: appearance,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 11\n    }\n  }, __jsx(CheckboxTooltip, {\n    text: 'Отметить документ',\n    self: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 13\n    }\n  }, onChecked && __jsx(Checkbox, {\n    size: 's',\n    onChange: () => handleChecked(document),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 29\n    }\n  })), __jsx(Container, {\n    onClick: () => onClick(document),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 13\n    }\n  }, template.map((cell, index) => headers[index].visible ? /*#__PURE__*/React.cloneElement(cell.content(document), {\n    key: index,\n    label: cell.header,\n    width: (cell === null || cell === void 0 ? void 0 : cell.width) || defaultWidth\n  }) : null))), (onEdit || onDelete) && __jsx(Actions, {\n    appearance: appearance,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 13\n    }\n  }, onEdit && __jsx(Tooltip, {\n    text: 'Редактирование',\n    place: 'left',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    size: 'xs',\n    kind: 'icon',\n    onClick: () => onEdit(document),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 19\n    }\n  }, __jsx(Icon, {\n    icon: 'edit',\n    size: 'xs',\n    stroke: 'white',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 21\n    }\n  }))), onDelete && __jsx(Tooltip, {\n    text: 'Удаление',\n    place: 'left',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 17\n    }\n  }, __jsx(Button, {\n    size: 'xs',\n    kind: 'icon',\n    appearance: 'red',\n    onClick: () => onDelete(document),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 19\n    }\n  }, __jsx(Icon, {\n    icon: 'delete',\n    size: 'xs',\n    stroke: 'white',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 21\n    }\n  })))))));\n};\nTable.defaultProps = {\n  appearance: 'default'\n};\nexport default Table;","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/atomic-ui/components/Table/index.js"],"names":["React","useState","styled","css","v4","Row","Column","Icon","Button","Switch","Difinition","Checkbox","Tooltip","Popper","Wrap","Manage","Headers","width","first","Track","checked","Content","appearance","Container","onClick","Actions","Cell","HeaderList","CheckboxTooltip","Table","data","template","className","style","onChecked","onDelete","onEdit","documents","setDocuments","map","item","id","defaultWidth","Math","floor","length","headers","setHeaders","value","label","header","tooltip","visible","hidden","setHeader","handleChecked","document","prev","filter","h","bottom","index","cell","cloneElement","content","key","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport styled, { css } from 'styled-components'\nimport { v4 } from 'uuid'\n\nimport Row from '../Row'\nimport Column from '../Column'\nimport Icon from '../Icon'\nimport Button from '../Button'\nimport Switch from '../Switch'\nimport Difinition from '../Difinition'\nimport Checkbox from '../Checkbox'\nimport Tooltip from '../Tooltip'\nimport Popper from '../Popper'\n\nexport const Wrap = styled(Column)``\n\nexport const Manage = styled(Row)``\n\nexport const Headers = styled(Switch)`\n  ${({ width }) =>\n    width &&\n    css`\n      span {\n        width: ${width};\n      }\n    `}\n\n  ${({ first, width }) =>\n    first &&\n    width &&\n    css`\n      span:first-child {\n        width: calc(${width} + 45px);\n      }\n    `}\n`\n\nexport const Track = styled(Row)`\n  transition: opacity 150ms ease;\n\n  ${({ checked }) =>\n    checked &&\n    css`\n      opacity: 0.45;\n    `}\n`\n\nexport const Content = styled(Row)`\n  padding: 5px 15px;\n  width: calc(100% - 55px);\n\n  ${({ appearance }) =>\n    appearance === 'default' &&\n    css`\n      border: 1px solid var(--surface-border);\n      background: var(--surface-background);\n      box-shadow: 1px solid var(--surface-shadow);\n      border-radius: var(--surface-border-radius);\n    `}\n\n  ${({ appearance }) =>\n    appearance === 'clear' &&\n    css`\n      border: none;\n      background: none;\n      box-shadow: none;\n      border-radius: 0;\n    `}\n\n  & > label {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: calc(var(--input-height-m) - 15px);\n    margin-left: 5px;\n\n    & > span {\n      margin: 0;\n    }\n  }\n`\n\nexport const Container = styled(Row)`\n  width: 100%;\n\n  ${({ onClick }) =>\n    onClick &&\n    css`\n      cursor: pointer;\n    `}\n`\n\nexport const Actions = styled(Column)`\n  padding: 5px;\n  width: var(--input-height-m);\n  grid-gap: 5px;\n\n  button {\n    width: 100%;\n    flex-grow: 1;\n  }\n\n  ${({ appearance }) =>\n    appearance === 'default' &&\n    css`\n      border: 1px solid var(--surface-border);\n      background: var(--surface-background);\n      box-shadow: 1px solid var(--surface-shadow);\n      border-radius: var(--surface-border-radius);\n    `}\n\n  ${({ appearance }) =>\n    appearance === 'clear' &&\n    css`\n      border: none;\n      background: none;\n      box-shadow: none;\n      border-radius: 0;\n      padding: 0;\n    `}\n`\n\nexport const Cell = styled(Difinition)`\n  align-items: center;\n  flex-grow: 1;\n\n  width: ${({ width }) => width};\n  overflow: hidden;\n\n  & > div {\n    width: 100%;\n  }\n\n  h4 {\n    font-size: var(--font-size-m);\n    font-weight: var(--font-weight-bold);\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n`\n\nexport const HeaderList = styled(Column)`\n  border: 1px solid var(--surface-border);\n  background: var(--surface-background);\n  box-shadow: var(--surface-shadow);\n  border-radius: var(--surface-border-radius);\n  padding: 10px;\n  grid-gap: 10px;\n`\n\nexport const CheckboxTooltip = styled(Tooltip)`\n  display: flex;\n  align-items: center;\n`\n\nexport const Table = ({\n  data,\n  template,\n  className,\n  style,\n  appearance,\n  onClick,\n  onChecked,\n  onDelete,\n  onEdit\n}) => {\n  const [documents, setDocuments] = useState(\n    (data || []).map((item) => ({\n      ...item,\n      id: v4(),\n      checked: false\n    }))\n  )\n  const defaultWidth = `${Math.floor(100 / template.length)}%`\n  /* eslint-disable-next-line */\n  const [headers, setHeaders] = useState(\n    (template || []).map((item) => ({\n      value: v4(),\n      label: item.header,\n      width: item.width || defaultWidth,\n      tooltip: item.tooltip || `Сортировка по «${item.header}‎»`,\n      visible: !item.hidden\n    }))\n  )\n  /* eslint-disable-next-line */\n  const [header, setHeader] = useState(headers[0] || null)\n\n  const handleChecked = (document) => {\n    setDocuments((prev) =>\n      prev.map((item) =>\n        item.id === document.id\n          ? {\n              ...document,\n              checked: !item.checked\n            }\n          : item\n      )\n    )\n  }\n\n  return (\n    <Wrap className={className} style={style}>\n      <Manage>\n        <Headers\n          defaultValue={headers[0]}\n          options={headers.filter((h) => h.visible)}\n          onChange={(item) => setHeader(item)}\n          first={onChecked}\n          stretch\n        />\n\n        <Popper\n          place={'left'}\n          offset={{ bottom: 80 }}\n          body={\n            <HeaderList>\n              {headers.map((header, index) => (\n                <Checkbox key={index} size={'s'} label={header.label} checked={header.visible} />\n              ))}\n            </HeaderList>\n          }\n          appearance={'clear'}>\n          <Tooltip text={'Отображение полей'} place={'left'}>\n            <Button kind={'icon'}>\n              <Icon icon={'show'} stroke={'white'} />\n            </Button>\n          </Tooltip>\n        </Popper>\n      </Manage>\n\n      {documents.map((document, index) => (\n        <Track key={index} checked={document.checked}>\n          <Content appearance={appearance}>\n            <CheckboxTooltip text={'Отметить документ'} self>\n              {onChecked && <Checkbox size={'s'} onChange={() => handleChecked(document)} />}\n            </CheckboxTooltip>\n            <Container onClick={() => onClick(document)}>\n              {template.map((cell, index) =>\n                headers[index].visible\n                  ? React.cloneElement(cell.content(document), {\n                      key: index,\n                      label: cell.header,\n                      width: cell?.width || defaultWidth\n                    })\n                  : null\n              )}\n            </Container>\n          </Content>\n\n          {(onEdit || onDelete) && (\n            <Actions appearance={appearance}>\n              {onEdit && (\n                <Tooltip text={'Редактирование'} place={'left'}>\n                  <Button size={'xs'} kind={'icon'} onClick={() => onEdit(document)}>\n                    <Icon icon={'edit'} size={'xs'} stroke={'white'} />\n                  </Button>\n                </Tooltip>\n              )}\n              {onDelete && (\n                <Tooltip text={'Удаление'} place={'left'}>\n                  <Button\n                    size={'xs'}\n                    kind={'icon'}\n                    appearance={'red'}\n                    onClick={() => onDelete(document)}>\n                    <Icon icon={'delete'} size={'xs'} stroke={'white'} />\n                  </Button>\n                </Tooltip>\n              )}\n            </Actions>\n          )}\n        </Track>\n      ))}\n    </Wrap>\n  )\n}\n\nTable.defaultProps = {\n  appearance: 'default'\n}\n\nexport default Table\n"]},"metadata":{},"sourceType":"module"}