{"ast":null,"code":"import React, { useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport { getDateLabel, parseDate } from '../../assets/scripts/date';\nimport useClickOutside from '../../hooks/useClickOutside';\nimport Transition from '../Transition';\nimport DateSheet from '../DateSheet';\nimport Input from '../Input';\nimport Icon from '../Icon';\nconst DURATION = 100;\nexport const Wrap = styled.div.withConfig({\n  displayName: \"DatePicker__Wrap\",\n  componentId: \"iku3jj-0\"\n})([\"position:relative;display:flex;flex-grow:1;\"]);\nexport const TextField = styled.div.withConfig({\n  displayName: \"DatePicker__TextField\",\n  componentId: \"iku3jj-1\"\n})([\"position:relative;flex-grow:1;\"]);\nexport const Popout = styled(Transition).withConfig({\n  displayName: \"DatePicker__Popout\",\n  componentId: \"iku3jj-2\"\n})([\"position:absolute;top:calc(var(--input-height-m) + 10px);left:0;z-index:15;padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--default-shadow);&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;transition:opacity 100ms,blur 100ms;}&.fade-exit{opacity:1;}&.fade-exit-active{opacity:0;transition:opacity 100ms,blur 100ms;}\"]);\nexport const DateIcon = styled(Icon).withConfig({\n  displayName: \"DatePicker__DateIcon\",\n  componentId: \"iku3jj-3\"\n})([\"position:absolute;top:9px;right:10px;\", \"\"], ({\n  onClick\n}) => onClick && css([\"cursor:pointer;&:hover{opacity:0.45;}\"]));\nexport const DatePicker = ({\n  id,\n  name,\n  style,\n  sheets,\n  inputRef,\n  placeholder,\n  value = null,\n  className,\n  appearance,\n  canEditYear,\n  withNavigate,\n  withMarkers,\n  withYearDisplay,\n  onChange,\n  onCompare\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [selected, setSelected] = useState(parseDate(value));\n  const [label] = useClickOutside(() => setIsOpen(false));\n\n  const handleChange = newVal => {\n    setSelected(newVal);\n    if (onChange) onChange(newVal);\n  };\n\n  const handleInputClick = () => {\n    setIsOpen(!isOpen);\n  };\n\n  return /*#__PURE__*/React.createElement(Wrap, {\n    ref: label,\n    className: className,\n    style: style\n  }, /*#__PURE__*/React.createElement(TextField, {\n    onClick: handleInputClick,\n    className: className,\n    style: style\n  }, /*#__PURE__*/React.createElement(Input, {\n    id: id,\n    name: name,\n    type: 'text',\n    inputRef: inputRef !== null && inputRef !== void 0 ? inputRef : null,\n    defaultValue: getDateLabel(selected),\n    placeholder: placeholder || 'Выберите дату',\n    appearance: appearance,\n    readOnly: true\n  }), /*#__PURE__*/React.createElement(DateIcon, {\n    size: 'xs',\n    stroke: 'var(--ghost-color-text)',\n    icon: selected ? 'delete' : 'calendar',\n    onClick: selected && (() => handleChange(null))\n  })), /*#__PURE__*/React.createElement(Popout, {\n    in: isOpen,\n    animation: 'fade',\n    timeout: DURATION\n  }, /*#__PURE__*/React.createElement(DateSheet, {\n    value: selected,\n    sheets: sheets,\n    style: {\n      width: 282\n    },\n    canEditYear: canEditYear,\n    withNavigate: withNavigate,\n    withMarkers: withMarkers,\n    withYearDisplay: withYearDisplay,\n    onChange: handleChange,\n    onCompare: onCompare\n  })));\n};\nexport default DatePicker;","map":null,"metadata":{},"sourceType":"module"}