{"ast":null,"code":"import React from 'react';\nimport styled from 'styled-components';\nimport sanitize from 'sanitize-filename';\nimport Grid from '../../atomic-ui/components/Grid';\nimport Column from '../../atomic-ui/components/Column';\nimport Button from '../../atomic-ui/components/Button';\nimport Alert from '../../atomic-ui/components/Alert';\nimport Icon from '../../atomic-ui/components/Icon';\nimport Screenshot from '../../atomic-ui/components/Screenshot';\nimport Difinition from '../../atomic-ui/components/Difinition';\nimport { b64EncodeUnicode } from '../../atomic-ui/utils/functions';\nimport AddMemberForm from '../../components/FormAddMember';\nimport AddFileForm from '../../components/FormAddFile';\nimport ProjectForm from '../../components/FormProject';\nimport DeleteForm from '../../components/FormDelete';\nimport SureDeleteForm, { Content as ContentSureDelete } from '../../components/FormSureDelete';\nimport ProjectCard from '../../components/ProjectCard';\nimport ProjectView from '../../components/ProjectView';\nimport { setDocuments } from '../actions/documents';\nimport { setMutate, addProjectMember, addProjectScreenshot, addProjectFile, removeProjectMember, removeProjectScreenshot, removeProjectFromFolder, removeProjectFile, clearProjectMembers, clearProjectScreenshots, clearProjectFiles } from '../actions/root';\nimport { setModal } from '../actions/modal';\nimport { setDrawer } from '../actions/drawer';\nimport { setItem } from '../actions/snacks';\nimport { removeProjectFromUserFolder } from '../actions/user';\nimport { onUserLink, onUserFolderAdd, onUserAboutMore } from './user';\nimport { onFileLink } from '.';\nconst CreateButton = styled(Button).withConfig({\n  displayName: \"project__CreateButton\",\n  componentId: \"a72d83-0\"\n})([\"display:flex;justify-content:center;align-items:center;grid-gap:10px;span{white-space:nowrap;}\"]);\n_c = CreateButton;\nexport function onProjectLink(dispatch, props) {\n  const {\n    id,\n    auth,\n    liked,\n    onAdd,\n    onLike,\n    owned\n  } = props;\n  dispatch(setDrawer({\n    icon: 'work',\n    title: 'Проект',\n    pdfName: sanitize((b64EncodeUnicode(id) || Date.now()).toString()),\n    content: /*#__PURE__*/React.createElement(ProjectView, {\n      appearance: 'clear',\n      project: id,\n      owned: owned,\n      liked: liked,\n      onLike: onLike,\n      onAdd: onAdd,\n      onFileLink: () => onFileLink(dispatch, {\n        id\n      }),\n      onAboutMore: project => onUserAboutMore(dispatch, {\n        project\n      }),\n      onMemberLink: member => onUserLink(dispatch, {\n        id: member,\n        auth,\n        owned\n      }),\n      onCompanyLink: company => onUserLink(dispatch, {\n        id: company,\n        auth,\n        owned\n      }),\n      onScreenshotClick: (_, key, screenshots) => onProjectScreenshot(dispatch, {\n        screenshots,\n        key\n      })\n    })\n  }));\n}\nexport function onProjectCreate(dispatch, props) {\n  const {\n    companies,\n    categories,\n    statuses,\n    canEditStatus,\n    mutation,\n    query,\n    onCompanyInputChange,\n    isPurpose,\n    onAfter\n  } = props;\n  dispatch(clearProjectMembers());\n  dispatch(clearProjectScreenshots());\n  dispatch(clearProjectFiles());\n  dispatch(setDrawer({\n    icon: 'work',\n    title: `${isPurpose ? 'Предложение' : 'Создание'} проекта`,\n    content: /*#__PURE__*/React.createElement(ProjectForm, {\n      mutation: mutation,\n      companies: companies,\n      categories: categories,\n      statuses: statuses,\n      appearance: 'clear',\n      canEditStatus: canEditStatus,\n      onMemberAdd: () => onMemberAdd(dispatch, {\n        query\n      }),\n      onScreenshotAdd: () => onScreenshotAdd(dispatch),\n      onFileAdd: () => onFileAdd(dispatch),\n      onMemberRemove: name => dispatch(removeProjectMember(name)),\n      onScreenshotRemove: id => onSureDelete(dispatch, {\n        id,\n        text: 'Вы действительно хотите удалить изображение?',\n        removeAction: removeProjectScreenshot\n      }),\n      onFileRemove: id => onSureDelete(dispatch, {\n        id,\n        text: 'Вы действительно хотите удалить файл?',\n        removeAction: removeProjectFile\n      }),\n      onCompanyInputChange: onCompanyInputChange,\n      onSubmit: async (form, action) => {\n        try {\n          var _form$preview, _form$company, _form$company$value, _form$preview2, _form$preview2$file, _form$category, _form$status;\n\n          const members = form.members.map(member => member.value.email);\n          const files = form.files.map(file => file.file);\n          const fileSizes = form.files.map(file => file.size);\n          const screenshots = form.screenshots.map(screenshot => screenshot.file);\n          const screenshotSizes = form.screenshots.map(screenshot => screenshot.size);\n          const projects = await action({\n            variables: {\n              input: {\n                title: form.title,\n                body: form.body,\n                characteristics: (form.characteristics || []).map(characteristic => ({\n                  name: characteristic.name,\n                  value: characteristic.value,\n                  isVisualize: characteristic.isVisualize\n                })),\n                description: form.description,\n                preview: (_form$preview = form.preview) === null || _form$preview === void 0 ? void 0 : _form$preview.file,\n                company: (_form$company = form.company) === null || _form$company === void 0 ? void 0 : (_form$company$value = _form$company.value) === null || _form$company$value === void 0 ? void 0 : _form$company$value.email,\n                previewSize: (_form$preview2 = form.preview) === null || _form$preview2 === void 0 ? void 0 : (_form$preview2$file = _form$preview2.file) === null || _form$preview2$file === void 0 ? void 0 : _form$preview2$file.size,\n                members: members.length > 0 ? members : [],\n                files: files.length > 0 ? files : [],\n                fileSizes: fileSizes.length > 0 ? fileSizes : [],\n                screenshots: screenshots.length > 0 ? screenshots : [],\n                screenshotSizes: screenshotSizes.length > 0 ? screenshotSizes : [],\n                presentation: form.presentation,\n                category: (_form$category = form.category) === null || _form$category === void 0 ? void 0 : _form$category.value,\n                status: (_form$status = form.status) === null || _form$status === void 0 ? void 0 : _form$status.value\n              }\n            }\n          });\n          dispatch(setDocuments(projects.data.createProject));\n          dispatch(setItem({\n            type: 'success',\n            message: 'Проект успешно создан'\n          }));\n          if (onAfter) onAfter();\n        } catch (err) {\n          dispatch(setItem({\n            type: 'error',\n            message: 'Не удалось создать проект'\n          }));\n        } finally {\n          dispatch(setDrawer(null));\n          dispatch(clearProjectMembers());\n          dispatch(clearProjectScreenshots());\n          dispatch(clearProjectFiles());\n        }\n      },\n      isPurpose: isPurpose\n    })\n  }));\n}\nexport function onProjectEdit(dispatch, props) {\n  const {\n    id,\n    auth,\n    companies,\n    categories,\n    statuses,\n    canEditStatus,\n    mutation,\n    query,\n    onAfter\n  } = props;\n  dispatch(setDrawer({\n    icon: 'work',\n    title: 'Редактирование проекта',\n    content: /*#__PURE__*/React.createElement(ProjectForm, {\n      project: id,\n      mutation: mutation,\n      companies: companies,\n      categories: categories,\n      statuses: statuses,\n      appearance: 'clear',\n      canEditStatus: canEditStatus,\n      onMemberAdd: () => onMemberAdd(dispatch, {\n        query\n      }),\n      onScreenshotAdd: () => onScreenshotAdd(dispatch),\n      onFileAdd: () => onFileAdd(dispatch),\n      onMemberRemove: name => dispatch(removeProjectMember(name)),\n      onScreenshotRemove: id => onSureDelete(dispatch, {\n        id,\n        text: 'Вы действительно хотите удалить изображение?',\n        removeAction: removeProjectScreenshot\n      }),\n      onFileRemove: id => onSureDelete(dispatch, {\n        id,\n        text: 'Вы действительно хотите удалить файл?',\n        removeAction: removeProjectFile\n      }),\n      onSubmit: async (form, action) => {\n        try {\n          var _form$preview3, _form$company2, _form$company2$value, _form$preview4, _form$preview4$file, _form$category2, _form$status2;\n\n          const members = form.members.map(member => {\n            var _member$value;\n\n            return member.email || ((_member$value = member.value) === null || _member$value === void 0 ? void 0 : _member$value.email);\n          });\n          const files = form.files.filter(screenshot => {\n            var _screenshot$file;\n\n            return !((_screenshot$file = screenshot.file) !== null && _screenshot$file !== void 0 && _screenshot$file.id);\n          }).map(file => {\n            var _file$file;\n\n            return (_file$file = file.file) !== null && _file$file !== void 0 && _file$file.type ? file.file : null;\n          });\n          const screenshots = form.screenshots.filter(screenshot => {\n            var _screenshot$file2;\n\n            return !((_screenshot$file2 = screenshot.file) !== null && _screenshot$file2 !== void 0 && _screenshot$file2.id);\n          }).map(screenshot => {\n            var _screenshot$file3;\n\n            return (_screenshot$file3 = screenshot.file) !== null && _screenshot$file3 !== void 0 && _screenshot$file3.type ? screenshot.file : null;\n          });\n          const fileSizes = form.files.map(file => file.size);\n          const screenshotSizes = form.screenshots.map(screenshot => screenshot.size);\n          const projects = await action({\n            variables: {\n              id,\n              input: {\n                title: form.title,\n                body: form.body,\n                characteristics: (form.characteristics || []).map(characteristic => ({\n                  name: characteristic.name,\n                  value: characteristic.value,\n                  isVisualize: characteristic.isVisualize\n                })),\n                description: form.description,\n                preview: (_form$preview3 = form.preview) === null || _form$preview3 === void 0 ? void 0 : _form$preview3.file,\n                company: (_form$company2 = form.company) === null || _form$company2 === void 0 ? void 0 : (_form$company2$value = _form$company2.value) === null || _form$company2$value === void 0 ? void 0 : _form$company2$value.email,\n                previewSize: (_form$preview4 = form.preview) === null || _form$preview4 === void 0 ? void 0 : (_form$preview4$file = _form$preview4.file) === null || _form$preview4$file === void 0 ? void 0 : _form$preview4$file.size,\n                members: members,\n                files: files,\n                fileSizes: fileSizes,\n                screenshots: screenshots,\n                screenshotSizes: screenshotSizes,\n                presentation: form.presentation,\n                category: (_form$category2 = form.category) === null || _form$category2 === void 0 ? void 0 : _form$category2.value,\n                status: (_form$status2 = form.status) === null || _form$status2 === void 0 ? void 0 : _form$status2.value\n              }\n            }\n          });\n          dispatch(setDocuments(projects.data.updateProject));\n          dispatch(setItem({\n            type: 'success',\n            message: 'Проект успешно отредактирован'\n          }));\n          if (onAfter) onAfter();\n        } catch (err) {\n          dispatch(setItem({\n            type: 'error',\n            message: 'Не удалось отредактирвоать проект'\n          }));\n        } finally {\n          dispatch(setDrawer(null));\n          dispatch(clearProjectMembers());\n          dispatch(clearProjectScreenshots());\n          dispatch(clearProjectFiles());\n        }\n      },\n      onCommentLink: user => onUserLink(dispatch, {\n        email: user,\n        auth\n      })\n    })\n  }));\n}\nexport function onProjectDelete(dispatch, props) {\n  const {\n    id,\n    auth,\n    project,\n    mutation\n  } = props;\n  dispatch(setDrawer({\n    icon: 'delete',\n    color: 'red',\n    title: 'Удаление проекта',\n    content: /*#__PURE__*/React.createElement(DeleteForm, {\n      mutation: mutation,\n      appearance: 'clear',\n      onCancel: () => dispatch(setDrawer(null)),\n      onSubmit: async (_, action) => {\n        try {\n          const projects = await action({\n            variables: {\n              id\n            }\n          });\n          dispatch(setDocuments(projects.data.deleteProject));\n          dispatch(setItem({\n            type: 'success',\n            message: 'Проект успешно удален'\n          }));\n        } catch (_unused) {\n          dispatch(setItem({\n            type: 'error',\n            message: 'Не удалось удалить проект'\n          }));\n        } finally {\n          dispatch(setDrawer(null));\n        }\n      }\n    }, /*#__PURE__*/React.createElement(ProjectCard, {\n      project: project,\n      appearance: 'clear',\n      onLink: () => onProjectLink(dispatch, {\n        id: project.id\n      }),\n      onAdd: () => onProjectAdd(dispatch, {\n        id: project.id\n      }),\n      onCompanyLink: company => onUserLink(dispatch, {\n        id: company,\n        auth\n      }),\n      onScreenshotClick: (_, key) => onProjectScreenshot(dispatch, {\n        screenshots: [project.preview, ...project.screenshots],\n        key\n      })\n    }))\n  }));\n}\nexport function onProjectAdd(dispatch, props) {\n  const {\n    id,\n    folders,\n    mutations,\n    callback\n  } = props;\n  dispatch(setModal([{\n    path: '/',\n    title: 'В какую папку добавить проект?',\n    component: () => /*#__PURE__*/React.createElement(Column, {\n      style: {\n        padding: '15px'\n      }\n    }, folders && folders.length > 0 ? /*#__PURE__*/React.createElement(Grid, {\n      length: 'auto-fit',\n      percentage: 'minmax(225px, 1fr)'\n    }, folders.map(folder => {\n      const length = folder.projects.length;\n      const label = length === 1 ? 'проект' : length > 1 && length < 5 ? 'проекта' : 'проектов';\n      const disabled = folder.projects.find(item => item === id);\n      return /*#__PURE__*/React.createElement(Difinition, {\n        key: folder.id,\n        icon: 'paper',\n        text: folder.name,\n        label: `${length} ${label}${disabled ? ' (уже есть)' : ''}`,\n        disabled: disabled,\n        onLink: () => {\n          dispatch(setMutate(mutations.addProject, {\n            project: id,\n            folder: folder.id\n          }));\n          dispatch(setModal(null));\n          if (callback) callback(folder);\n        },\n        revert: true\n      });\n    })) : /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        textAlign: 'center'\n      },\n      width: '100%'\n    }, \"\\u041F\\u0430\\u043F\\u043E\\u043A \\u043D\\u0435\\u0442\"), /*#__PURE__*/React.createElement(CreateButton, {\n      onClick: () => onUserFolderAdd(dispatch, {\n        mutation: mutations.createFolder,\n        onCancel: () => onProjectAdd(dispatch, props),\n        callback: items => onProjectAdd(dispatch, { ...props,\n          folders: items || folders\n        })\n      })\n    }, /*#__PURE__*/React.createElement(\"span\", null, \"\\u041D\\u043E\\u0432\\u0430\\u044F \\u043F\\u0430\\u043F\\u043A\\u0430\"), /*#__PURE__*/React.createElement(Icon, {\n      icon: 'add',\n      stroke: 'white'\n    })))\n  }]));\n}\nexport function onProjectRemove(dispatch, props) {\n  const {\n    id,\n    folder,\n    mutation,\n    callback\n  } = props;\n  dispatch(setModal([{\n    path: '/',\n    title: 'Удаление проекта из папки',\n    component: () => /*#__PURE__*/React.createElement(SureDeleteForm, {\n      text: 'Вы действительно хотите удалить этот проект?',\n      mutation: mutation,\n      padding: false,\n      onCancel: () => dispatch(setModal(null)),\n      onSubmit: async (_, action) => {\n        if (action) {\n          await action({\n            variables: {\n              project: id,\n              folder: folder.id\n            }\n          });\n          dispatch(removeProjectFromUserFolder(folder.id, id));\n          dispatch(removeProjectFromFolder(id));\n          dispatch(setModal(null));\n          if (callback) callback();\n        }\n      }\n    })\n  }]));\n}\nexport function onMemberAdd(dispatch, props) {\n  const {\n    query\n  } = props;\n  dispatch(setModal([{\n    path: '/',\n    title: 'Добавление участника',\n    component: () => /*#__PURE__*/React.createElement(AddMemberForm, {\n      query: query,\n      onSubmit: member => {\n        dispatch(addProjectMember(member));\n        dispatch(setModal(null));\n      }\n    })\n  }]));\n}\nexport function onScreenshotAdd(dispatch) {\n  dispatch(setModal([{\n    path: '/',\n    title: 'Добавление изображений',\n    component: () => /*#__PURE__*/React.createElement(AddFileForm, {\n      placeholder: 'Перетащите сюда изображения',\n      submitText: 'Добавить изображения',\n      onSubmit: files => {\n        for (let file of files) {\n          dispatch(addProjectScreenshot(file));\n        }\n\n        dispatch(setModal(null));\n      }\n    })\n  }]));\n}\nexport function onFileAdd(dispatch) {\n  dispatch(setModal([{\n    path: '/',\n    title: 'Добавление файлов',\n    component: () => /*#__PURE__*/React.createElement(AddFileForm, {\n      accept: 'application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint, text/plain, application/pdf, image/*',\n      onSubmit: files => {\n        for (let file of files) {\n          dispatch(addProjectFile(file));\n        }\n\n        dispatch(setModal(null));\n      }\n    })\n  }]));\n}\nexport function onSureDelete(dispatch, props) {\n  const {\n    id,\n    text,\n    removeAction\n  } = props;\n  dispatch(setModal([{\n    path: '/',\n    title: 'Удаление',\n    component: () => /*#__PURE__*/React.createElement(ContentSureDelete, {\n      text: text,\n      type: 'button',\n      onCancel: () => dispatch(setModal(null)),\n      onSubmit: async () => {\n        dispatch(removeAction(id));\n        dispatch(setModal(null));\n      },\n      padding: true\n    })\n  }]));\n}\nexport function onProjectScreenshot(dispatch, props) {\n  const {\n    key,\n    screenshots\n  } = props;\n  dispatch(setModal(screenshots.map((screenshot, index) => ({\n    title: 'Изображение',\n    path: `/${screenshot.id}`,\n    home: screenshot.id === key,\n    component: ({\n      jump\n    }) => /*#__PURE__*/React.createElement(Screenshot, {\n      index: index,\n      screenshot: screenshot,\n      screenshots: screenshots,\n      onClick: jump\n    }),\n    back: false\n  })), 'l'));\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateButton\");","map":{"version":3,"sources":["D:/Documents/Workspace/FREELANCE/atomic/atomic-frontend/store/helpers/project.js"],"names":["React","styled","sanitize","Grid","Column","Button","Alert","Icon","Screenshot","Difinition","b64EncodeUnicode","AddMemberForm","AddFileForm","ProjectForm","DeleteForm","SureDeleteForm","Content","ContentSureDelete","ProjectCard","ProjectView","setDocuments","setMutate","addProjectMember","addProjectScreenshot","addProjectFile","removeProjectMember","removeProjectScreenshot","removeProjectFromFolder","removeProjectFile","clearProjectMembers","clearProjectScreenshots","clearProjectFiles","setModal","setDrawer","setItem","removeProjectFromUserFolder","onUserLink","onUserFolderAdd","onUserAboutMore","onFileLink","CreateButton","onProjectLink","dispatch","props","id","auth","liked","onAdd","onLike","owned","icon","title","pdfName","Date","now","toString","content","project","member","company","_","key","screenshots","onProjectScreenshot","onProjectCreate","companies","categories","statuses","canEditStatus","mutation","query","onCompanyInputChange","isPurpose","onAfter","onMemberAdd","onScreenshotAdd","onFileAdd","name","onSureDelete","text","removeAction","form","action","members","map","value","email","files","file","fileSizes","size","screenshot","screenshotSizes","projects","variables","input","body","characteristics","characteristic","isVisualize","description","preview","previewSize","length","presentation","category","status","data","createProject","type","message","err","onProjectEdit","filter","updateProject","user","onProjectDelete","color","deleteProject","onProjectAdd","folders","mutations","callback","path","component","padding","folder","label","disabled","find","item","addProject","textAlign","createFolder","onCancel","items","onProjectRemove","index","home","jump","back"],"mappings":"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","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\nimport sanitize from 'sanitize-filename'\n\nimport Grid from '../../atomic-ui/components/Grid'\nimport Column from '../../atomic-ui/components/Column'\nimport Button from '../../atomic-ui/components/Button'\nimport Alert from '../../atomic-ui/components/Alert'\nimport Icon from '../../atomic-ui/components/Icon'\nimport Screenshot from '../../atomic-ui/components/Screenshot'\nimport Difinition from '../../atomic-ui/components/Difinition'\nimport { b64EncodeUnicode } from '../../atomic-ui/utils/functions'\n\nimport AddMemberForm from '../../components/FormAddMember'\nimport AddFileForm from '../../components/FormAddFile'\nimport ProjectForm from '../../components/FormProject'\nimport DeleteForm from '../../components/FormDelete'\nimport SureDeleteForm, { Content as ContentSureDelete } from '../../components/FormSureDelete'\nimport ProjectCard from '../../components/ProjectCard'\nimport ProjectView from '../../components/ProjectView'\nimport { setDocuments } from '../actions/documents'\nimport {\n  setMutate,\n  addProjectMember,\n  addProjectScreenshot,\n  addProjectFile,\n  removeProjectMember,\n  removeProjectScreenshot,\n  removeProjectFromFolder,\n  removeProjectFile,\n  clearProjectMembers,\n  clearProjectScreenshots,\n  clearProjectFiles\n} from '../actions/root'\nimport { setModal } from '../actions/modal'\nimport { setDrawer } from '../actions/drawer'\nimport { setItem } from '../actions/snacks'\nimport { removeProjectFromUserFolder } from '../actions/user'\nimport { onUserLink, onUserFolderAdd, onUserAboutMore } from './user'\nimport { onFileLink } from '.'\n\nconst CreateButton = styled(Button)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  grid-gap: 10px;\n\n  span {\n    white-space: nowrap;\n  }\n`\n\nexport function onProjectLink(dispatch, props) {\n  const { id, auth, liked, onAdd, onLike, owned } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'work',\n      title: 'Проект',\n      pdfName: sanitize((b64EncodeUnicode(id) || Date.now()).toString()),\n      content: (\n        <ProjectView\n          appearance={'clear'}\n          project={id}\n          owned={owned}\n          liked={liked}\n          onLike={onLike}\n          onAdd={onAdd}\n          onFileLink={() => onFileLink(dispatch, { id })}\n          onAboutMore={(project) => onUserAboutMore(dispatch, { project })}\n          onMemberLink={(member) => onUserLink(dispatch, { id: member, auth, owned })}\n          onCompanyLink={(company) => onUserLink(dispatch, { id: company, auth, owned })}\n          onScreenshotClick={(_, key, screenshots) =>\n            onProjectScreenshot(dispatch, {\n              screenshots,\n              key\n            })\n          }\n        />\n      )\n    })\n  )\n}\n\nexport function onProjectCreate(dispatch, props) {\n  const {\n    companies,\n    categories,\n    statuses,\n    canEditStatus,\n    mutation,\n    query,\n    onCompanyInputChange,\n    isPurpose,\n    onAfter\n  } = props\n\n  dispatch(clearProjectMembers())\n  dispatch(clearProjectScreenshots())\n  dispatch(clearProjectFiles())\n\n  dispatch(\n    setDrawer({\n      icon: 'work',\n      title: `${isPurpose ? 'Предложение' : 'Создание'} проекта`,\n      content: (\n        <ProjectForm\n          mutation={mutation}\n          companies={companies}\n          categories={categories}\n          statuses={statuses}\n          appearance={'clear'}\n          canEditStatus={canEditStatus}\n          onMemberAdd={() => onMemberAdd(dispatch, { query })}\n          onScreenshotAdd={() => onScreenshotAdd(dispatch)}\n          onFileAdd={() => onFileAdd(dispatch)}\n          onMemberRemove={(name) => dispatch(removeProjectMember(name))}\n          onScreenshotRemove={(id) =>\n            onSureDelete(dispatch, {\n              id,\n              text: 'Вы действительно хотите удалить изображение?',\n              removeAction: removeProjectScreenshot\n            })\n          }\n          onFileRemove={(id) =>\n            onSureDelete(dispatch, {\n              id,\n              text: 'Вы действительно хотите удалить файл?',\n              removeAction: removeProjectFile\n            })\n          }\n          onCompanyInputChange={onCompanyInputChange}\n          onSubmit={async (form, action) => {\n            try {\n              const members = form.members.map((member) => member.value.email)\n              const files = form.files.map((file) => file.file)\n              const fileSizes = form.files.map((file) => file.size)\n              const screenshots = form.screenshots.map((screenshot) => screenshot.file)\n              const screenshotSizes = form.screenshots.map((screenshot) => screenshot.size)\n\n              const projects = await action({\n                variables: {\n                  input: {\n                    title: form.title,\n                    body: form.body,\n                    characteristics: (form.characteristics || []).map((characteristic) => ({\n                      name: characteristic.name,\n                      value: characteristic.value,\n                      isVisualize: characteristic.isVisualize\n                    })),\n                    description: form.description,\n                    preview: form.preview?.file,\n                    company: form.company?.value?.email,\n                    previewSize: form.preview?.file?.size,\n                    members: members.length > 0 ? members : [],\n                    files: files.length > 0 ? files : [],\n                    fileSizes: fileSizes.length > 0 ? fileSizes : [],\n                    screenshots: screenshots.length > 0 ? screenshots : [],\n                    screenshotSizes: screenshotSizes.length > 0 ? screenshotSizes : [],\n                    presentation: form.presentation,\n                    category: form.category?.value,\n                    status: form.status?.value\n                  }\n                }\n              })\n              dispatch(setDocuments(projects.data.createProject))\n              dispatch(\n                setItem({\n                  type: 'success',\n                  message: 'Проект успешно создан'\n                })\n              )\n              if (onAfter) onAfter()\n            } catch (err) {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось создать проект'\n                })\n              )\n            } finally {\n              dispatch(setDrawer(null))\n              dispatch(clearProjectMembers())\n              dispatch(clearProjectScreenshots())\n              dispatch(clearProjectFiles())\n            }\n          }}\n          isPurpose={isPurpose}\n        />\n      )\n    })\n  )\n}\n\nexport function onProjectEdit(dispatch, props) {\n  const {\n    id,\n    auth,\n    companies,\n    categories,\n    statuses,\n    canEditStatus,\n    mutation,\n    query,\n    onAfter\n  } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'work',\n      title: 'Редактирование проекта',\n      content: (\n        <ProjectForm\n          project={id}\n          mutation={mutation}\n          companies={companies}\n          categories={categories}\n          statuses={statuses}\n          appearance={'clear'}\n          canEditStatus={canEditStatus}\n          onMemberAdd={() => onMemberAdd(dispatch, { query })}\n          onScreenshotAdd={() => onScreenshotAdd(dispatch)}\n          onFileAdd={() => onFileAdd(dispatch)}\n          onMemberRemove={(name) => dispatch(removeProjectMember(name))}\n          onScreenshotRemove={(id) =>\n            onSureDelete(dispatch, {\n              id,\n              text: 'Вы действительно хотите удалить изображение?',\n              removeAction: removeProjectScreenshot\n            })\n          }\n          onFileRemove={(id) =>\n            onSureDelete(dispatch, {\n              id,\n              text: 'Вы действительно хотите удалить файл?',\n              removeAction: removeProjectFile\n            })\n          }\n          onSubmit={async (form, action) => {\n            try {\n              const members = form.members.map((member) => member.email || member.value?.email)\n              const files = form.files\n                .filter((screenshot) => !screenshot.file?.id)\n                .map((file) => (file.file?.type ? file.file : null))\n              const screenshots = form.screenshots\n                .filter((screenshot) => !screenshot.file?.id)\n                .map((screenshot) => (screenshot.file?.type ? screenshot.file : null))\n              const fileSizes = form.files.map((file) => file.size)\n              const screenshotSizes = form.screenshots.map((screenshot) => screenshot.size)\n\n              const projects = await action({\n                variables: {\n                  id,\n                  input: {\n                    title: form.title,\n                    body: form.body,\n                    characteristics: (form.characteristics || []).map((characteristic) => ({\n                      name: characteristic.name,\n                      value: characteristic.value,\n                      isVisualize: characteristic.isVisualize\n                    })),\n                    description: form.description,\n                    preview: form.preview?.file,\n                    company: form.company?.value?.email,\n                    previewSize: form.preview?.file?.size,\n                    members: members,\n                    files: files,\n                    fileSizes: fileSizes,\n                    screenshots: screenshots,\n                    screenshotSizes: screenshotSizes,\n                    presentation: form.presentation,\n                    category: form.category?.value,\n                    status: form.status?.value\n                  }\n                }\n              })\n              dispatch(setDocuments(projects.data.updateProject))\n              dispatch(\n                setItem({\n                  type: 'success',\n                  message: 'Проект успешно отредактирован'\n                })\n              )\n              if (onAfter) onAfter()\n            } catch (err) {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось отредактирвоать проект'\n                })\n              )\n            } finally {\n              dispatch(setDrawer(null))\n              dispatch(clearProjectMembers())\n              dispatch(clearProjectScreenshots())\n              dispatch(clearProjectFiles())\n            }\n          }}\n          onCommentLink={(user) => onUserLink(dispatch, { email: user, auth })}\n        />\n      )\n    })\n  )\n}\n\nexport function onProjectDelete(dispatch, props) {\n  const { id, auth, project, mutation } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'delete',\n      color: 'red',\n      title: 'Удаление проекта',\n      content: (\n        <DeleteForm\n          mutation={mutation}\n          appearance={'clear'}\n          onCancel={() => dispatch(setDrawer(null))}\n          onSubmit={async (_, action) => {\n            try {\n              const projects = await action({\n                variables: { id }\n              })\n              dispatch(setDocuments(projects.data.deleteProject))\n              dispatch(\n                setItem({\n                  type: 'success',\n                  message: 'Проект успешно удален'\n                })\n              )\n            } catch {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось удалить проект'\n                })\n              )\n            } finally {\n              dispatch(setDrawer(null))\n            }\n          }}>\n          <ProjectCard\n            project={project}\n            appearance={'clear'}\n            onLink={() => onProjectLink(dispatch, { id: project.id })}\n            onAdd={() => onProjectAdd(dispatch, { id: project.id })}\n            onCompanyLink={(company) => onUserLink(dispatch, { id: company, auth })}\n            onScreenshotClick={(_, key) =>\n              onProjectScreenshot(dispatch, {\n                screenshots: [project.preview, ...project.screenshots],\n                key\n              })\n            }\n          />\n        </DeleteForm>\n      )\n    })\n  )\n}\n\nexport function onProjectAdd(dispatch, props) {\n  const { id, folders, mutations, callback } = props\n\n  dispatch(\n    setModal([\n      {\n        path: '/',\n        title: 'В какую папку добавить проект?',\n        component: () => (\n          <Column style={{ padding: '15px' }}>\n            {folders && folders.length > 0 ? (\n              <Grid length={'auto-fit'} percentage={'minmax(225px, 1fr)'}>\n                {folders.map((folder) => {\n                  const length = folder.projects.length\n                  const label =\n                    length === 1 ? 'проект' : length > 1 && length < 5 ? 'проекта' : 'проектов'\n                  const disabled = folder.projects.find((item) => item === id)\n\n                  return (\n                    <Difinition\n                      key={folder.id}\n                      icon={'paper'}\n                      text={folder.name}\n                      label={`${length} ${label}${disabled ? ' (уже есть)' : ''}`}\n                      disabled={disabled}\n                      onLink={() => {\n                        dispatch(\n                          setMutate(mutations.addProject, { project: id, folder: folder.id })\n                        )\n                        dispatch(setModal(null))\n                        if (callback) callback(folder)\n                      }}\n                      revert\n                    />\n                  )\n                })}\n              </Grid>\n            ) : (\n              <Alert style={{ textAlign: 'center' }} width={'100%'}>\n                Папок нет\n              </Alert>\n            )}\n            <CreateButton\n              onClick={() =>\n                onUserFolderAdd(dispatch, {\n                  mutation: mutations.createFolder,\n                  onCancel: () => onProjectAdd(dispatch, props),\n                  callback: (items) =>\n                    onProjectAdd(dispatch, { ...props, folders: items || folders })\n                })\n              }>\n              <span>Новая папка</span>\n              <Icon icon={'add'} stroke={'white'} />\n            </CreateButton>\n          </Column>\n        )\n      }\n    ])\n  )\n}\n\nexport function onProjectRemove(dispatch, props) {\n  const { id, folder, mutation, callback } = props\n\n  dispatch(\n    setModal([\n      {\n        path: '/',\n        title: 'Удаление проекта из папки',\n        component: () => (\n          <SureDeleteForm\n            text={'Вы действительно хотите удалить этот проект?'}\n            mutation={mutation}\n            padding={false}\n            onCancel={() => dispatch(setModal(null))}\n            onSubmit={async (_, action) => {\n              if (action) {\n                await action({\n                  variables: {\n                    project: id,\n                    folder: folder.id\n                  }\n                })\n                dispatch(removeProjectFromUserFolder(folder.id, id))\n                dispatch(removeProjectFromFolder(id))\n                dispatch(setModal(null))\n                if (callback) callback()\n              }\n            }}\n          />\n        )\n      }\n    ])\n  )\n}\n\nexport function onMemberAdd(dispatch, props) {\n  const { query } = props\n\n  dispatch(\n    setModal([\n      {\n        path: '/',\n        title: 'Добавление участника',\n        component: () => (\n          <AddMemberForm\n            query={query}\n            onSubmit={(member) => {\n              dispatch(addProjectMember(member))\n              dispatch(setModal(null))\n            }}\n          />\n        )\n      }\n    ])\n  )\n}\n\nexport function onScreenshotAdd(dispatch) {\n  dispatch(\n    setModal([\n      {\n        path: '/',\n        title: 'Добавление изображений',\n        component: () => (\n          <AddFileForm\n            placeholder={'Перетащите сюда изображения'}\n            submitText={'Добавить изображения'}\n            onSubmit={(files) => {\n              for (let file of files) {\n                dispatch(addProjectScreenshot(file))\n              }\n              dispatch(setModal(null))\n            }}\n          />\n        )\n      }\n    ])\n  )\n}\n\nexport function onFileAdd(dispatch) {\n  dispatch(\n    setModal([\n      {\n        path: '/',\n        title: 'Добавление файлов',\n        component: () => (\n          <AddFileForm\n            accept={\n              'application/msword, application/vnd.ms-excel, application/vnd.ms-powerpoint, text/plain, application/pdf, image/*'\n            }\n            onSubmit={(files) => {\n              for (let file of files) {\n                dispatch(addProjectFile(file))\n              }\n              dispatch(setModal(null))\n            }}\n          />\n        )\n      }\n    ])\n  )\n}\n\nexport function onSureDelete(dispatch, props) {\n  const { id, text, removeAction } = props\n\n  dispatch(\n    setModal([\n      {\n        path: '/',\n        title: 'Удаление',\n        component: () => (\n          <ContentSureDelete\n            text={text}\n            type={'button'}\n            onCancel={() => dispatch(setModal(null))}\n            onSubmit={async () => {\n              dispatch(removeAction(id))\n              dispatch(setModal(null))\n            }}\n            padding\n          />\n        )\n      }\n    ])\n  )\n}\n\nexport function onProjectScreenshot(dispatch, props) {\n  const { key, screenshots } = props\n\n  dispatch(\n    setModal(\n      screenshots.map((screenshot, index) => ({\n        title: 'Изображение',\n        path: `/${screenshot.id}`,\n        home: screenshot.id === key,\n        component: ({ jump }) => (\n          <Screenshot\n            index={index}\n            screenshot={screenshot}\n            screenshots={screenshots}\n            onClick={jump}\n          />\n        ),\n        back: false\n      })),\n      'l'\n    )\n  )\n}\n"]},"metadata":{},"sourceType":"module"}