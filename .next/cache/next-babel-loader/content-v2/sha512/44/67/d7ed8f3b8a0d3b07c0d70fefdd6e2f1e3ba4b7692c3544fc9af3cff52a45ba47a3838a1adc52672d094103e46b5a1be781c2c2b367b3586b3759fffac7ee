{"ast":null,"code":"import React, { useState, useEffect } from 'react';\nimport { useQuery } from '@apollo/react-hooks';\nimport { useSelector } from 'react-redux';\nimport Alert from '../../atomic-ui/components/Alert';\nimport Spinner from '../../atomic-ui/components/Spinner';\nimport { Loader } from '../Styled';\nimport FadeLoad from '../FadeLoad';\nimport LazyLoad from '../LazyLoad';\nimport ArticleCard from '../ArticleCard';\nimport { useHelper } from '../../hooks/useHelper';\nimport { onArticleLink } from '../../store/helpers/article';\nimport queries from '../../graphql/queries';\nexport const ArticleList = ({\n  variables,\n  initialList = []\n}) => {\n  const recall = useHelper();\n  const user = useSelector(state => state.user);\n  const [articles, setArticles] = useState(initialList);\n  const {\n    data,\n    loading,\n    error\n  } = !initialList ? useQuery(queries.GET_ARTICLES, {\n    variables\n  }) : {\n    data: null,\n    loading: false,\n    error: false\n  };\n  useEffect(() => {\n    if (!loading && data) {\n      setArticles(data.getArticles);\n    }\n  }, [data, loading]);\n  return !loading && data ? articles.map(article => {\n    var _user$articles;\n\n    return /*#__PURE__*/React.createElement(FadeLoad, {\n      key: article.id\n    }, /*#__PURE__*/React.createElement(LazyLoad, null, /*#__PURE__*/React.createElement(ArticleCard, {\n      layout: 'column',\n      article: article,\n      owned: user === null || user === void 0 ? void 0 : (_user$articles = user.articles) === null || _user$articles === void 0 ? void 0 : _user$articles.find(candidate => candidate.id === article.id),\n      onLink: recall(onArticleLink, {\n        id: article.id,\n        auth: user === null || user === void 0 ? void 0 : user.email\n      })\n    })));\n  }) : error ? /*#__PURE__*/React.createElement(Alert, {\n    appearance: 'error',\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u044B\\u0435\") : loading ? /*#__PURE__*/React.createElement(Loader, null, /*#__PURE__*/React.createElement(Spinner, null)) : /*#__PURE__*/React.createElement(Alert, {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041D\\u043E\\u0432\\u043E\\u0441\\u0442\\u0435\\u0439 \\u043D\\u0435\\u0442\");\n};\nexport default ArticleList;","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/components/ArticleList/index.js"],"names":["React","useState","useEffect","useQuery","useSelector","Alert","Spinner","Loader","FadeLoad","LazyLoad","ArticleCard","useHelper","onArticleLink","queries","ArticleList","variables","initialList","recall","user","state","articles","setArticles","data","loading","error","GET_ARTICLES","getArticles","map","article","id","find","candidate","auth","email","width","textAlign"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,OAAOC,KAAP,MAAkB,kCAAlB;AACA,OAAOC,OAAP,MAAoB,oCAApB;AAEA,SAASC,MAAT,QAAuB,WAAvB;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,SAASC,SAAT,QAA0B,uBAA1B;AACA,SAASC,aAAT,QAA8B,6BAA9B;AACA,OAAOC,OAAP,MAAoB,uBAApB;AAEA,OAAO,MAAMC,WAAW,GAAG,CAAC;AAAEC,EAAAA,SAAF;AAAaC,EAAAA,WAAW,GAAG;AAA3B,CAAD,KAAqC;AAC9D,QAAMC,MAAM,GAAGN,SAAS,EAAxB;AACA,QAAMO,IAAI,GAAGd,WAAW,CAAEe,KAAD,IAAWA,KAAK,CAACD,IAAlB,CAAxB;AACA,QAAM,CAACE,QAAD,EAAWC,WAAX,IAA0BpB,QAAQ,CAACe,WAAD,CAAxC;AAEA,QAAM;AAAEM,IAAAA,IAAF;AAAQC,IAAAA,OAAR;AAAiBC,IAAAA;AAAjB,MAA2B,CAACR,WAAD,GAC7Bb,QAAQ,CAACU,OAAO,CAACY,YAAT,EAAuB;AAAEV,IAAAA;AAAF,GAAvB,CADqB,GAE7B;AAAEO,IAAAA,IAAI,EAAE,IAAR;AAAcC,IAAAA,OAAO,EAAE,KAAvB;AAA8BC,IAAAA,KAAK,EAAE;AAArC,GAFJ;AAIAtB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACqB,OAAD,IAAYD,IAAhB,EAAsB;AACpBD,MAAAA,WAAW,CAACC,IAAI,CAACI,WAAN,CAAX;AACD;AACF,GAJQ,EAIN,CAACJ,IAAD,EAAOC,OAAP,CAJM,CAAT;AAMA,SAAO,CAACA,OAAD,IAAYD,IAAZ,GACLF,QAAQ,CAACO,GAAT,CAAcC,OAAD;AAAA;;AAAA,wBACX,oBAAC,QAAD;AAAU,MAAA,GAAG,EAAEA,OAAO,CAACC;AAAvB,oBACE,oBAAC,QAAD,qBACE,oBAAC,WAAD;AACE,MAAA,MAAM,EAAE,QADV;AAEE,MAAA,OAAO,EAAED,OAFX;AAGE,MAAA,KAAK,EAAEV,IAAF,aAAEA,IAAF,yCAAEA,IAAI,CAAEE,QAAR,mDAAE,eAAgBU,IAAhB,CAAsBC,SAAD,IAAeA,SAAS,CAACF,EAAV,KAAiBD,OAAO,CAACC,EAA7D,CAHT;AAIE,MAAA,MAAM,EAAEZ,MAAM,CAACL,aAAD,EAAgB;AAAEiB,QAAAA,EAAE,EAAED,OAAO,CAACC,EAAd;AAAkBG,QAAAA,IAAI,EAAEd,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEe;AAA9B,OAAhB;AAJhB,MADF,CADF,CADW;AAAA,GAAb,CADK,GAaHT,KAAK,gBACP,oBAAC,KAAD;AAAO,IAAA,UAAU,EAAE,OAAnB;AAA4B,IAAA,KAAK,EAAE;AAAEU,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,SAAS,EAAE;AAA5B;AAAnC,2JADO,GAILZ,OAAO,gBACT,oBAAC,MAAD,qBACE,oBAAC,OAAD,OADF,CADS,gBAKT,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAE;AAAEW,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,SAAS,EAAE;AAA5B;AAAd,2EAtBF;AAwBD,CAvCM;AAyCP,eAAerB,WAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useQuery } from '@apollo/react-hooks'\nimport { useSelector } from 'react-redux'\n\nimport Alert from '../../atomic-ui/components/Alert'\nimport Spinner from '../../atomic-ui/components/Spinner'\n\nimport { Loader } from '../Styled'\nimport FadeLoad from '../FadeLoad'\nimport LazyLoad from '../LazyLoad'\nimport ArticleCard from '../ArticleCard'\nimport { useHelper } from '../../hooks/useHelper'\nimport { onArticleLink } from '../../store/helpers/article'\nimport queries from '../../graphql/queries'\n\nexport const ArticleList = ({ variables, initialList = [] }) => {\n  const recall = useHelper()\n  const user = useSelector((state) => state.user)\n  const [articles, setArticles] = useState(initialList)\n\n  const { data, loading, error } = !initialList\n    ? useQuery(queries.GET_ARTICLES, { variables })\n    : { data: null, loading: false, error: false }\n\n  useEffect(() => {\n    if (!loading && data) {\n      setArticles(data.getArticles)\n    }\n  }, [data, loading])\n\n  return !loading && data ? (\n    articles.map((article) => (\n      <FadeLoad key={article.id}>\n        <LazyLoad>\n          <ArticleCard\n            layout={'column'}\n            article={article}\n            owned={user?.articles?.find((candidate) => candidate.id === article.id)}\n            onLink={recall(onArticleLink, { id: article.id, auth: user?.email })}\n          />\n        </LazyLoad>\n      </FadeLoad>\n    ))\n  ) : error ? (\n    <Alert appearance={'error'} style={{ width: '100%', textAlign: 'center' }}>\n      Не удалось загрузить данные\n    </Alert>\n  ) : loading ? (\n    <Loader>\n      <Spinner />\n    </Loader>\n  ) : (\n    <Alert style={{ width: '100%', textAlign: 'center' }}>Новостей нет</Alert>\n  )\n}\n\nexport default ArticleList\n"]},"metadata":{},"sourceType":"module"}