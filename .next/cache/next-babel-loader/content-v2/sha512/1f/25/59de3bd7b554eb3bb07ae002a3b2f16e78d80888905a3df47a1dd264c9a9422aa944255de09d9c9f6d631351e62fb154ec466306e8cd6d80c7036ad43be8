{"ast":null,"code":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useEffect, useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport Transition from '../Transition';\nimport Icon from '../Icon';\nimport Button from '../Button';\nimport Title from '../Title';\nconst DURATION = 100;\nexport function getPath(navigator) {\n  if (!navigator || navigator.length === 0) return null;\n  return navigator[navigator.length - 1];\n}\nexport const Wrap = styled.div.withConfig({\n  displayName: \"Modal__Wrap\",\n  componentId: \"sdkjxs-0\"\n})([\"display:flex;justify-content:center;align-items:flex-start;position:fixed;top:0;left:0;width:100%;height:100%;z-index:var(--z-override);overflow:auto;&.fade-enter{opacity:0;}&.fade-enter-active{opacity:1;transition:opacity 100ms,blur 100ms;}&.fade-exit{opacity:1;}&.fade-exit-active{opacity:0;transition:opacity 100ms,blur 100ms;}\"]);\nexport const Overlay = styled.div.withConfig({\n  displayName: \"Modal__Overlay\",\n  componentId: \"sdkjxs-1\"\n})([\"position:fixed;top:0;left:0;width:100%;height:100%;z-index:var(--z-100);background:var(--default-color-overlay);cursor:pointer;\"]);\nexport const Content = styled.div.withConfig({\n  displayName: \"Modal__Content\",\n  componentId: \"sdkjxs-2\"\n})([\"position:relative;top:15%;left:0;right:0;z-index:var(--z-101);min-width:480px;max-width:80%;width:min-content;margin-block-end:150px;background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);&.swing-enter{opacity:0;transform:scale(0.9);}&.swing-enter-active{opacity:1;transform:translateX(0);transition:opacity 100ms,transform 100ms;}&.swing-exit{opacity:1;}&.swing-exit-active{opacity:0;transform:scale(0.9);transition:opacity 100ms,transform 100ms;}\", \" @media only screen and (max-width:768px){min-width:320px;}@media only screen and (max-width:480px){min-width:285px;max-width:100%;width:auto;margin:0 var(--default-gap);}\"], ({\n  size\n}) => size === 'l' && css([\"top:5%;min-width:65%;\"]));\nexport const Headline = styled.div.withConfig({\n  displayName: \"Modal__Headline\",\n  componentId: \"sdkjxs-3\"\n})([\"position:relative;display:flex;border-bottom:var(--default-border);padding:var(--default-gap);line-height:1;\"]);\nexport const BackButton = styled(Button).withConfig({\n  displayName: \"Modal__BackButton\",\n  componentId: \"sdkjxs-4\"\n})([\"position:absolute;top:0;left:10px;height:100%;\"]);\nexport const StyledTitle = styled(Title).withConfig({\n  displayName: \"Modal__StyledTitle\",\n  componentId: \"sdkjxs-5\"\n})([\"text-align:center;width:100%;@media only screen and (max-width:480px){font-size:var(--font-size-l);}\"]);\nexport const Switch = props => {\n  const Childrens = props.children;\n  if (!Childrens) return null;\n  const path = props.path;\n  let Child = null;\n\n  for (const child of Childrens) {\n    if (path === child.props.path) {\n      Child = child;\n      break;\n    }\n  }\n\n  return Child;\n};\nexport const Route = ({\n  component,\n  data,\n  close,\n  back,\n  jump\n}) => {\n  const Compoent = component;\n  return /*#__PURE__*/React.createElement(Compoent, {\n    data: data,\n    close: close,\n    back: back,\n    jump: jump\n  });\n};\nexport const Modal = ({\n  size,\n  routes,\n  closeByBackground,\n  onHide\n}) => {\n  const [navigator, setNavigator] = useState(['/']);\n  const [content, setContent] = useState(false);\n  const [animation, setAnimation] = useState(null);\n  const [data, setData] = useState(null);\n  const transitions = {\n    fade: {\n      in: routes ? true : false,\n      animation: 'fade',\n      onEnter: () => setContent(true),\n      onExited: () => setContent(false),\n      timeout: DURATION\n    },\n    swing: {\n      in: content,\n      animation: 'swing',\n      timeout: DURATION\n    }\n  };\n\n  const getTitle = () => {\n    var _routes$find;\n\n    function compare(route) {\n      return route.path === getPath(navigator);\n    }\n\n    const title = routes === null || routes === void 0 ? void 0 : (_routes$find = routes.find(route => compare(route))) === null || _routes$find === void 0 ? void 0 : _routes$find.title;\n    return title || '';\n  };\n\n  const getRoute = () => {\n    const defaultState = {\n      back: true\n    };\n    const current = navigator[navigator.length - 1];\n    const candidate = routes.find(route => route.path === current);\n\n    if (candidate) {\n      var _candidate$back;\n\n      return (_candidate$back = candidate === null || candidate === void 0 ? void 0 : candidate.back) !== null && _candidate$back !== void 0 ? _candidate$back : defaultState;\n    }\n\n    return defaultState;\n  };\n\n  const handleBack = () => {\n    setAnimation('slideOutRight');\n    setTimeout(() => {\n      setNavigator([...navigator.filter((e, i) => i !== navigator.length - 1)]);\n      setAnimation('slideInLeft');\n    }, DURATION);\n  };\n\n  const handleJump = (path, data) => {\n    setData(data);\n    setAnimation('slideOutLeft');\n    setTimeout(() => {\n      setNavigator([...navigator, path]);\n      setAnimation('slideInRight');\n    }, DURATION);\n  };\n\n  const handleClose = () => {\n    setContent(false);\n    setAnimation(null);\n    setTimeout(() => {\n      setNavigator(['/']);\n      onHide();\n    }, DURATION);\n  };\n\n  useEffect(() => {\n    if (routes && routes.length > 0) {\n      const route = routes.find(route => route.home);\n      setNavigator([(route === null || route === void 0 ? void 0 : route.path) || '/']);\n    }\n  }, [routes]);\n  return /*#__PURE__*/React.createElement(Transition, transitions.fade, /*#__PURE__*/React.createElement(Wrap, null, /*#__PURE__*/React.createElement(Overlay, {\n    className: !closeByBackground ? 'clear' : '',\n    onClick: closeByBackground ? handleClose : () => {}\n  }), /*#__PURE__*/React.createElement(Transition, transitions.swing, /*#__PURE__*/React.createElement(Content, {\n    className: `animate${animation ? ` ${animation}` : ''}`,\n    size: size\n  }, getTitle() && /*#__PURE__*/React.createElement(Headline, null, navigator.length > 1 && getRoute().back && /*#__PURE__*/React.createElement(BackButton, {\n    onClick: handleBack,\n    appearance: 'clear'\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: 'arrowLeft'\n  })), /*#__PURE__*/React.createElement(StyledTitle, {\n    tag: 'h3'\n  }, getTitle())), /*#__PURE__*/React.createElement(Switch, {\n    path: getPath(navigator)\n  }, (routes || []).map((props, key) => /*#__PURE__*/React.createElement(Route, _extends({\n    key: key\n  }, props, {\n    data: data,\n    close: handleClose,\n    back: handleBack,\n    jump: handleJump\n  }))))))));\n};\nModal.defaultProps = {\n  title: 'Modal Title',\n  routes: [],\n  onHide: () => {},\n  closeByBackground: true\n};\nexport default Modal;","map":null,"metadata":{},"sourceType":"module"}