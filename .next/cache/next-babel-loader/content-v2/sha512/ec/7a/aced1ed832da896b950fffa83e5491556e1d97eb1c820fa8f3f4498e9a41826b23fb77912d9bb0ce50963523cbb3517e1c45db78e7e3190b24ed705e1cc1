{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useEffect } from 'react';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport styled from 'styled-components';\nimport { useLazyQuery } from '@apollo/react-hooks';\nimport { useDispatch, useSelector } from 'react-redux';\nimport Row from '../../atomic-ui/components/Row';\nimport Container from '../../atomic-ui/components/Container';\nimport Spinner from '../../atomic-ui/components/Spinner';\nimport Column from '../../atomic-ui/components/Column';\nimport Button from '../../atomic-ui/components/Button';\nimport Image from '../../atomic-ui/components/Image';\nimport Icon from '../../atomic-ui/components/Icon';\nimport Tooltip from '../../atomic-ui/components/Tooltip';\nimport { useHelper } from '../../hooks/useHelper';\nimport MainLayout from '../main';\nimport { FixedLoader } from '../../components/Styled';\nimport BaseSideBar from '../../components/SideBar';\nimport SearchBar from '../../components/SearchBar';\nimport { onMenu } from '../../store/helpers';\nimport { setUser } from '../../store/actions/user';\nimport getLinks from './links';\nimport queries from '../../graphql/queries';\nimport config from '../../config';\nvar Main = styled.main.withConfig({\n  displayName: \"dashboard__Main\",\n  componentId: \"sc-9r28sr-0\"\n})([\"display:flex;grid-gap:var(--default-gap);width:100%;\"]);\nvar Header = styled.header.withConfig({\n  displayName: \"dashboard__Header\",\n  componentId: \"sc-9r28sr-1\"\n})([\"position:fixed;top:0;left:0;z-index:var(--z-15);display:flex;grid-gap:var(--default-gap);background:var(--surface-background);border:var(--surface-border);box-shadow:var(--surface-shadow);padding:var(--default-gap);width:100%;flex-grow:100;\"]);\nvar SideBar = styled(BaseSideBar).withConfig({\n  displayName: \"dashboard__SideBar\",\n  componentId: \"sc-9r28sr-2\"\n})([\"position:fixed;top:70px;left:0;height:calc(100vh - 70px);z-index:var(--z-12);@media only screen and (max-width:480px){display:none;}\"]);\nvar MenuButton = styled(Button).withConfig({\n  displayName: \"dashboard__MenuButton\",\n  componentId: \"sc-9r28sr-3\"\n})([\"display:none;@media only screen and (max-width:768px){display:flex;justify-content:center;align-items:center;}\"]);\nvar LogoZone = styled(Row).withConfig({\n  displayName: \"dashboard__LogoZone\",\n  componentId: \"sc-9r28sr-4\"\n})([\"justify-content:space-between;@media only screen and (max-width:996px){width:auto;}\"]);\nvar Logotype = styled.div.withConfig({\n  displayName: \"dashboard__Logotype\",\n  componentId: \"sc-9r28sr-5\"\n})([\"display:flex;justify-content:flex-start;align-items:center;img{height:30px;object-fit:contain;}@media only screen and (max-width:996px){min-width:auto;}@media only screen and (max-width:480px){display:none;}\"]);\nvar Content = styled(Container).withConfig({\n  displayName: \"dashboard__Content\",\n  componentId: \"sc-9r28sr-6\"\n})([\"padding:70px 15px 15px 255px;flex-grow:1;@media only screen and (max-width:996px){padding:70px 15px 15px 80px;}@media only screen and (max-width:480px){padding:70px 15px 15px 15px;}\"]);\nexport var DashboardLayout = function DashboardLayout(_ref) {\n  var _user$avatar;\n\n  var children = _ref.children,\n      _ref$title = _ref.title,\n      title = _ref$title === void 0 ? 'Панель администрирования' : _ref$title;\n  var recall = useHelper();\n  var router = useRouter();\n  var user = useSelector(function (state) {\n    return state.user;\n  });\n\n  var _useLazyQuery = useLazyQuery(queries.GET_USER),\n      _useLazyQuery2 = _slicedToArray(_useLazyQuery, 2),\n      getUser = _useLazyQuery2[0],\n      _useLazyQuery2$ = _useLazyQuery2[1],\n      data = _useLazyQuery2$.data,\n      loading = _useLazyQuery2$.loading;\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    if (false) {\n      var token = localStorage.getItem(config.get('secret'));\n      if (token) getUser();else router.push('/');\n    }\n  }, []);\n  useEffect(function () {\n    if (data && data.getUser) {\n      var _data$getUser$role;\n\n      var isAccept = (_data$getUser$role = data.getUser.role) === null || _data$getUser$role === void 0 ? void 0 : _data$getUser$role.permissions.find(function (permission) {\n        return permission === 'ACCESS_DASHBOARD';\n      });\n\n      if (isAccept) {\n        dispatch(setUser(data.getUser));\n      } else {\n        router.push('/');\n      }\n    }\n  }, [data, dispatch]);\n\n  if (loading || !user.authenticated) {\n    return /*#__PURE__*/React.createElement(FixedLoader, null, /*#__PURE__*/React.createElement(Spinner, null));\n  }\n\n  return /*#__PURE__*/React.createElement(MainLayout, null, /*#__PURE__*/React.createElement(Head, null, /*#__PURE__*/React.createElement(\"meta\", {\n    name: \"keywords\",\n    content: \"next,javascript,nextjs,react\"\n  }), /*#__PURE__*/React.createElement(\"meta\", {\n    name: \"description\",\n    content: \"primar project description\"\n  }), /*#__PURE__*/React.createElement(\"title\", null, title)), /*#__PURE__*/React.createElement(Header, null, /*#__PURE__*/React.createElement(MenuButton, {\n    kind: 'icon',\n    appearance: 'clear',\n    onClick: recall(onMenu, {\n      links: getLinks((user === null || user === void 0 ? void 0 : user.role.permissions) || []).map(function (link, index) {\n        return {\n          id: index,\n          text: link.component,\n          onClick: function onClick() {\n            return router.push(\"/dashboard\".concat(link.path));\n          }\n        };\n      })\n    })\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: 'menu'\n  })), /*#__PURE__*/React.createElement(LogoZone, null, /*#__PURE__*/React.createElement(Tooltip, {\n    text: 'Атомик – портал для формирования новой сферы образования',\n    offset: {\n      bottom: 5\n    },\n    place: 'bottom',\n    maxWidth: 256,\n    multiline: true\n  }, /*#__PURE__*/React.createElement(Logotype, null, /*#__PURE__*/React.createElement(Link, {\n    href: '/'\n  }, /*#__PURE__*/React.createElement(\"a\", null, /*#__PURE__*/React.createElement(Image, {\n    src: '/images/logo.png',\n    alt: 'Logotype'\n  })))))), /*#__PURE__*/React.createElement(SearchBar, {\n    appearance: 'ghost'\n  })), /*#__PURE__*/React.createElement(Main, null, /*#__PURE__*/React.createElement(SideBar, {\n    user: {\n      name: user.name,\n      role: user.role.name,\n      avatar: (user === null || user === void 0 ? void 0 : (_user$avatar = user.avatar) === null || _user$avatar === void 0 ? void 0 : _user$avatar.path) || '/images/avatar-default.png'\n    },\n    link: Link,\n    links: getLinks((user === null || user === void 0 ? void 0 : user.role.permissions) || []).map(function (link, index) {\n      var path = \"/dashboard\".concat(link.path.length > 1 ? link.path : '');\n      return _objectSpread(_objectSpread({}, link), {}, {\n        path: path,\n        component: /*#__PURE__*/React.createElement(\"a\", {\n          key: index,\n          className: router.pathname === path ? 'active' : ''\n        }, React.cloneElement(link.component, {\n          active: router.pathname === path\n        }))\n      });\n    })\n  }), /*#__PURE__*/React.createElement(Content, null, /*#__PURE__*/React.createElement(Column, null, children))));\n};\nexport default DashboardLayout;","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/layouts/dashboard/index.js"],"names":["React","useEffect","Head","Link","useRouter","styled","useLazyQuery","useDispatch","useSelector","Row","Container","Spinner","Column","Button","Image","Icon","Tooltip","useHelper","MainLayout","FixedLoader","BaseSideBar","SearchBar","onMenu","setUser","getLinks","queries","config","Main","main","Header","header","SideBar","MenuButton","LogoZone","Logotype","div","Content","DashboardLayout","children","title","recall","router","user","state","GET_USER","getUser","data","loading","dispatch","token","localStorage","getItem","get","push","isAccept","role","permissions","find","permission","authenticated","links","map","link","index","id","text","component","onClick","path","bottom","name","avatar","length","pathname","cloneElement","active"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport Head from 'next/head'\nimport Link from 'next/link'\nimport { useRouter } from 'next/router'\nimport styled from 'styled-components'\nimport { useLazyQuery } from '@apollo/react-hooks'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport Row from '../../atomic-ui/components/Row'\nimport Container from '../../atomic-ui/components/Container'\nimport Spinner from '../../atomic-ui/components/Spinner'\nimport Column from '../../atomic-ui/components/Column'\nimport Button from '../../atomic-ui/components/Button'\nimport Image from '../../atomic-ui/components/Image'\nimport Icon from '../../atomic-ui/components/Icon'\nimport Tooltip from '../../atomic-ui/components/Tooltip'\n\nimport { useHelper } from '../../hooks/useHelper'\nimport MainLayout from '../main'\nimport { FixedLoader } from '../../components/Styled'\nimport BaseSideBar from '../../components/SideBar'\nimport SearchBar from '../../components/SearchBar'\nimport { onMenu } from '../../store/helpers'\nimport { setUser } from '../../store/actions/user'\nimport getLinks from './links'\nimport queries from '../../graphql/queries'\nimport config from '../../config'\n\nconst Main = styled.main`\n  display: flex;\n  grid-gap: var(--default-gap);\n  width: 100%;\n`\n\nconst Header = styled.header`\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: var(--z-15);\n\n  display: flex;\n  grid-gap: var(--default-gap);\n\n  background: var(--surface-background);\n  border: var(--surface-border);\n  box-shadow: var(--surface-shadow);\n  padding: var(--default-gap);\n\n  width: 100%;\n  flex-grow: 100;\n`\n\nconst SideBar = styled(BaseSideBar)`\n  position: fixed;\n  top: 70px;\n  left: 0;\n  height: calc(100vh - 70px);\n  z-index: var(--z-12);\n\n  @media only screen and (max-width: 480px) {\n    display: none;\n  }\n`\n\nconst MenuButton = styled(Button)`\n  display: none;\n\n  @media only screen and (max-width: 768px) {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n`\n\nconst LogoZone = styled(Row)`\n  justify-content: space-between;\n\n  @media only screen and (max-width: 996px) {\n    width: auto;\n  }\n`\n\nconst Logotype = styled.div`\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n\n  img {\n    height: 30px;\n    object-fit: contain;\n  }\n\n  @media only screen and (max-width: 996px) {\n    min-width: auto;\n  }\n\n  @media only screen and (max-width: 480px) {\n    display: none;\n  }\n`\n\nconst Content = styled(Container)`\n  padding: 70px 15px 15px 255px;\n  flex-grow: 1;\n\n  @media only screen and (max-width: 996px) {\n    padding: 70px 15px 15px 80px;\n  }\n\n  @media only screen and (max-width: 480px) {\n    padding: 70px 15px 15px 15px;\n  }\n`\n\nexport const DashboardLayout = ({ children, title = 'Панель администрирования' }) => {\n  const recall = useHelper()\n  const router = useRouter()\n  const user = useSelector((state) => state.user)\n  const [getUser, { data, loading }] = useLazyQuery(queries.GET_USER)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const token = localStorage.getItem(config.get('secret'))\n      if (token) getUser()\n      else router.push('/')\n    }\n  }, [])\n\n  useEffect(() => {\n    if (data && data.getUser) {\n      const isAccept = data.getUser.role?.permissions.find(\n        (permission) => permission === 'ACCESS_DASHBOARD'\n      )\n      if (isAccept) {\n        dispatch(setUser(data.getUser))\n      } else {\n        router.push('/')\n      }\n    }\n  }, [data, dispatch])\n\n  if (loading || !user.authenticated) {\n    return (\n      <FixedLoader>\n        <Spinner />\n      </FixedLoader>\n    )\n  }\n\n  return (\n    <MainLayout>\n      <Head>\n        <meta name=\"keywords\" content=\"next,javascript,nextjs,react\" />\n        <meta name=\"description\" content=\"primar project description\" />\n        <title>{title}</title>\n      </Head>\n\n      <Header>\n        <MenuButton\n          kind={'icon'}\n          appearance={'clear'}\n          onClick={recall(onMenu, {\n            links: getLinks(user?.role.permissions || []).map((link, index) => ({\n              id: index,\n              text: link.component,\n              onClick: () => router.push(`/dashboard${link.path}`)\n            }))\n          })}>\n          <Icon icon={'menu'} />\n        </MenuButton>\n        <LogoZone>\n          <Tooltip\n            text={'Атомик – портал для формирования новой сферы образования'}\n            offset={{ bottom: 5 }}\n            place={'bottom'}\n            maxWidth={256}\n            multiline>\n            <Logotype>\n              <Link href={'/'}>\n                <a>\n                  <Image src={'/images/logo.png'} alt={'Logotype'} />\n                </a>\n              </Link>\n            </Logotype>\n          </Tooltip>\n        </LogoZone>\n        <SearchBar appearance={'ghost'} />\n      </Header>\n\n      <Main>\n        <SideBar\n          user={{\n            name: user.name,\n            role: user.role.name,\n            avatar: user?.avatar?.path || '/images/avatar-default.png'\n          }}\n          link={Link}\n          links={getLinks(user?.role.permissions || []).map((link, index) => {\n            const path = `/dashboard${link.path.length > 1 ? link.path : ''}`\n            return {\n              ...link,\n              path,\n              component: (\n                <a key={index} className={router.pathname === path ? 'active' : ''}>\n                  {React.cloneElement(link.component, { active: router.pathname === path })}\n                </a>\n              )\n            }\n          })}\n        />\n\n        <Content>\n          <Column>{children}</Column>\n        </Content>\n      </Main>\n    </MainLayout>\n  )\n}\n\nexport default DashboardLayout\n"]},"metadata":{},"sourceType":"module"}