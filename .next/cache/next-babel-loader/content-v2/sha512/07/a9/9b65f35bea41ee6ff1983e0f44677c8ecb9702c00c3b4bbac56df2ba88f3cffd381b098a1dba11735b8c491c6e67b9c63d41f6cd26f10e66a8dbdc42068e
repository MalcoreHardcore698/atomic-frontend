{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport DefaultLayout from '../layouts/default';\nimport Spinner from '../atomic-ui/components/Spinner';\nimport { onUserResetPassword } from '../store/helpers/user';\nimport { setStepper } from '../store/actions/stepper';\nimport { useHelper } from '../hooks/useHelper';\nimport queries from '../graphql/queries';\nconst TITLE = 'Сброс пароля';\nconst Wrap = styled.div.withConfig({\n  displayName: \"reset-password__Wrap\",\n  componentId: \"x81915-0\"\n})([\"display:grid;grid-template-columns:380px;justify-content:center;align-content:center;margin:120px 0;@media only screen and (max-width:480px){grid-template-columns:100%;margin:25px 0;}\"]);\n_c = Wrap;\nconst Loader = styled.div.withConfig({\n  displayName: \"reset-password__Loader\",\n  componentId: \"x81915-1\"\n})([\"position:fixed;top:0;left:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%;\"]);\n_c2 = Loader;\nexport const SecureRoute = ({\n  children\n}) => {\n  _s();\n\n  const user = useSelector(state => state.user);\n  const router = useRouter();\n  useEffect(() => {\n    if (user && !user.authenticated) {\n      router.push({\n        pathname: '/auth',\n        query: router.query\n      });\n    }\n  }, [user, router]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n};\n\n_s(SecureRoute, \"QdCw72MRKOVKG0pFpSFYI/hF01A=\", false, function () {\n  return [useSelector, useRouter];\n});\n\n_c3 = SecureRoute;\nexport const Support = () => {\n  _s2();\n\n  const recall = useHelper();\n  const stepper = useSelector(state => state.stepper);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!(stepper !== null && stepper !== void 0 && stepper.content)) {\n      recall(onUserResetPassword, {\n        withoutBack: true,\n        mutations: {\n          forgotPassword: queries.RESET,\n          checkResetToken: queries.CHECK_RESET_TOKEN\n        }\n      })();\n    }\n  }, [stepper]);\n  useEffect(() => {\n    return () => dispatch(setStepper(null));\n  }, [dispatch, setStepper]);\n\n  if (!stepper) {\n    return /*#__PURE__*/React.createElement(Loader, null, /*#__PURE__*/React.createElement(Spinner, null));\n  }\n\n  return /*#__PURE__*/React.createElement(DefaultLayout, {\n    title: TITLE\n  }, /*#__PURE__*/React.createElement(SecureRoute, null, /*#__PURE__*/React.createElement(Wrap, {\n    key: stepper.name\n  }, stepper.content)));\n};\n\n_s2(Support, \"/fWlQI8ZV0eX/KlTzbJd79Kqvlk=\", false, function () {\n  return [useHelper, useSelector, useDispatch];\n});\n\n_c4 = Support;\nexport default Support;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Wrap\");\n$RefreshReg$(_c2, \"Loader\");\n$RefreshReg$(_c3, \"SecureRoute\");\n$RefreshReg$(_c4, \"Support\");","map":{"version":3,"sources":["/Users/malcore/Documents/workspace/freelance/atomic/atomic-frontend/pages/reset-password.js"],"names":["React","useEffect","styled","useSelector","useDispatch","useRouter","DefaultLayout","Spinner","onUserResetPassword","setStepper","useHelper","queries","TITLE","Wrap","div","Loader","SecureRoute","children","user","state","router","authenticated","push","pathname","query","Support","recall","stepper","dispatch","content","withoutBack","mutations","forgotPassword","RESET","checkResetToken","CHECK_RESET_TOKEN","name"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,SAAT,QAA0B,aAA1B;AAEA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,OAAOC,OAAP,MAAoB,iCAApB;AACA,SAASC,mBAAT,QAAoC,uBAApC;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,OAAOC,OAAP,MAAoB,oBAApB;AAEA,MAAMC,KAAK,GAAG,cAAd;AAEA,MAAMC,IAAI,GAAGX,MAAM,CAACY,GAAV;AAAA;AAAA;AAAA,+LAAV;KAAMD,I;AAaN,MAAME,MAAM,GAAGb,MAAM,CAACY,GAAV;AAAA;AAAA;AAAA,kHAAZ;MAAMC,M;AAaN,OAAO,MAAMC,WAAW,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAAA;;AAC3C,QAAMC,IAAI,GAAGf,WAAW,CAAEgB,KAAD,IAAWA,KAAK,CAACD,IAAlB,CAAxB;AACA,QAAME,MAAM,GAAGf,SAAS,EAAxB;AAEAJ,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIiB,IAAI,IAAI,CAACA,IAAI,CAACG,aAAlB,EAAiC;AAC/BD,MAAAA,MAAM,CAACE,IAAP,CAAY;AAAEC,QAAAA,QAAQ,EAAE,OAAZ;AAAqBC,QAAAA,KAAK,EAAEJ,MAAM,CAACI;AAAnC,OAAZ;AACD;AACF,GAJQ,EAIN,CAACN,IAAD,EAAOE,MAAP,CAJM,CAAT;AAMA,sBAAO,0CAAGH,QAAH,CAAP;AACD,CAXM;;GAAMD,W;UACEb,W,EACEE,S;;;MAFJW,W;AAab,OAAO,MAAMS,OAAO,GAAG,MAAM;AAAA;;AAC3B,QAAMC,MAAM,GAAGhB,SAAS,EAAxB;AACA,QAAMiB,OAAO,GAAGxB,WAAW,CAAEgB,KAAD,IAAWA,KAAK,CAACQ,OAAlB,CAA3B;AACA,QAAMC,QAAQ,GAAGxB,WAAW,EAA5B;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,EAAC0B,OAAD,aAACA,OAAD,eAACA,OAAO,CAAEE,OAAV,CAAJ,EAAuB;AACrBH,MAAAA,MAAM,CAAClB,mBAAD,EAAsB;AAC1BsB,QAAAA,WAAW,EAAE,IADa;AAE1BC,QAAAA,SAAS,EAAE;AACTC,UAAAA,cAAc,EAAErB,OAAO,CAACsB,KADf;AAETC,UAAAA,eAAe,EAAEvB,OAAO,CAACwB;AAFhB;AAFe,OAAtB,CAAN;AAOD;AACF,GAVQ,EAUN,CAACR,OAAD,CAVM,CAAT;AAYA1B,EAAAA,SAAS,CAAC,MAAM;AACd,WAAO,MAAM2B,QAAQ,CAACnB,UAAU,CAAC,IAAD,CAAX,CAArB;AACD,GAFQ,EAEN,CAACmB,QAAD,EAAWnB,UAAX,CAFM,CAAT;;AAIA,MAAI,CAACkB,OAAL,EAAc;AACZ,wBACE,oBAAC,MAAD,qBACE,oBAAC,OAAD,OADF,CADF;AAKD;;AAED,sBACE,oBAAC,aAAD;AAAe,IAAA,KAAK,EAAEf;AAAtB,kBACE,oBAAC,WAAD,qBACE,oBAAC,IAAD;AAAM,IAAA,GAAG,EAAEe,OAAO,CAACS;AAAnB,KAA0BT,OAAO,CAACE,OAAlC,CADF,CADF,CADF;AAOD,CApCM;;IAAMJ,O;UACIf,S,EACCP,W,EACCC,W;;;MAHNqB,O;AAsCb,eAAeA,OAAf","sourcesContent":["import React, { useEffect } from 'react'\nimport styled from 'styled-components'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { useRouter } from 'next/router'\n\nimport DefaultLayout from '../layouts/default'\nimport Spinner from '../atomic-ui/components/Spinner'\nimport { onUserResetPassword } from '../store/helpers/user'\nimport { setStepper } from '../store/actions/stepper'\nimport { useHelper } from '../hooks/useHelper'\nimport queries from '../graphql/queries'\n\nconst TITLE = 'Сброс пароля'\n\nconst Wrap = styled.div`\n  display: grid;\n  grid-template-columns: 380px;\n  justify-content: center;\n  align-content: center;\n  margin: 120px 0;\n\n  @media only screen and (max-width: 480px) {\n    grid-template-columns: 100%;\n    margin: 25px 0;\n  }\n`\n\nconst Loader = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n`\n\nexport const SecureRoute = ({ children }) => {\n  const user = useSelector((state) => state.user)\n  const router = useRouter()\n\n  useEffect(() => {\n    if (user && !user.authenticated) {\n      router.push({ pathname: '/auth', query: router.query })\n    }\n  }, [user, router])\n\n  return <>{children}</>\n}\n\nexport const Support = () => {\n  const recall = useHelper()\n  const stepper = useSelector((state) => state.stepper)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if (!stepper?.content) {\n      recall(onUserResetPassword, {\n        withoutBack: true,\n        mutations: {\n          forgotPassword: queries.RESET,\n          checkResetToken: queries.CHECK_RESET_TOKEN\n        }\n      })()\n    }\n  }, [stepper])\n\n  useEffect(() => {\n    return () => dispatch(setStepper(null))\n  }, [dispatch, setStepper])\n\n  if (!stepper) {\n    return (\n      <Loader>\n        <Spinner />\n      </Loader>\n    )\n  }\n\n  return (\n    <DefaultLayout title={TITLE}>\n      <SecureRoute>\n        <Wrap key={stepper.name}>{stepper.content}</Wrap>\n      </SecureRoute>\n    </DefaultLayout>\n  )\n}\n\nexport default Support\n"]},"metadata":{},"sourceType":"module"}