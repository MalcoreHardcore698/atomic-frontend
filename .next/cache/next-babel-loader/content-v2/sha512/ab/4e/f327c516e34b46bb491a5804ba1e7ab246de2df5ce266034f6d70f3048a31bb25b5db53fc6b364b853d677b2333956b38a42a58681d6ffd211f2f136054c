{"ast":null,"code":"import _toConsumableArray from \"C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _templateObject13() {\n  var data = _taggedTemplateLiteral([\"\\n  font-weight: var(--font-weight-bold);\\n  line-height: 1;\\n\\n  @media only screen and (max-width: 480px) {\\n    font-size: var(--font-size-l);\\n  }\\n\"]);\n\n  _templateObject13 = function _templateObject13() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteral([\"\\n        width: 12px;\\n        border-radius: 4px;\\n      \"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  flex-wrap: wrap;\\n  grid-gap: 5px;\\n\\n  span {\\n    background: var(--default-color-accent);\\n    border-radius: var(--surface-border-radius);\\n    width: 4px;\\n    min-height: 16px;\\n\\n    \", \"\\n  }\\n\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  grid-gap: 10px;\\n\\n  span {\\n    white-space: nowrap;\\n  }\\n\\n  @media only screen and (max-width: 996px) {\\n    width: 100%;\\n  }\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n  align-items: center;\\n  grid-gap: 5px;\\n\\n  button {\\n    width: 100%;\\n    flex-grow: 1;\\n\\n    & > i {\\n      height: 100%;\\n      width: 100%;\\n\\n      & > svg {\\n        transform: scale(0.35);\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n      flex-direction: column;\\n    \"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  flex-grow: 1;\\n  grid-gap: 10px;\\n\\n  label:first-child {\\n    flex-grow: 1;\\n  }\\n\\n  label:last-child {\\n    flex-grow: 4;\\n  }\\n\\n  \", \"\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  justify-content: space-between;\\n  align-items: center;\\n  flex-grow: 1;\\n  grid-gap: 5px;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: var(--font-size-s);\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n      display: grid;\\n      grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));\\n      padding: 2px;\\n      grid-gap: 15px;\\n    \"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  grid-gap: 5px 0;\\n\\n  \", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 100%;\\n  max-width: 100%;\\n  flex-grow: 1;\\n  grid-gap: 5px;\\n  margin-bottom: var(--default-gap);\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  grid-gap: 0;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from 'react';\nimport styled, { css } from 'styled-components';\nimport { v4 } from 'uuid';\nimport Row from '../Row';\nimport Column from '../Column';\nimport Button from '../Button';\nimport Tooltip from '../Tooltip';\nimport Divider from '../Divider';\nimport { Label } from '../Difinition';\nimport Input from '../Input';\nimport Alert from '../Alert';\nimport Text from '../Text';\nimport Icon from '../Icon';\nimport Title from '../Title';\nvar MAX_LIMIT_VALUE = 256;\nvar MIN_LIMIT_VALUE = 0;\nexport var Wrap = styled(Column)(_templateObject());\nexport var Container = styled(Column)(_templateObject2());\nexport var List = styled(Column)(_templateObject3(), function (_ref) {\n  var readOnly = _ref.readOnly;\n  return readOnly && css(_templateObject4());\n});\nexport var InputLabel = styled(Text)(_templateObject5());\nexport var Item = styled(Row)(_templateObject6());\nexport var Header = styled(Row)(_templateObject7(), function (_ref2) {\n  var readOnly = _ref2.readOnly;\n  return readOnly && css(_templateObject8());\n});\nexport var Actions = styled(Row)(_templateObject9());\nexport var AddButton = styled(Button)(_templateObject10());\nexport var Trunks = styled.div(_templateObject11(), function (_ref3) {\n  var value = _ref3.value;\n  return value < 9 && css(_templateObject12());\n});\nexport var Value = styled(Title)(_templateObject13());\n\nvar getValue = function getValue(val) {\n  var number = Number(val);\n  if (number > MAX_LIMIT_VALUE) return MAX_LIMIT_VALUE;\n  if (number < MIN_LIMIT_VALUE) return MIN_LIMIT_VALUE;\n  return val;\n};\n\nexport var ListItem = function ListItem(_ref4) {\n  var item = _ref4.item,\n      readOnly = _ref4.readOnly,\n      divided = _ref4.divided,\n      onEdit = _ref4.onEdit,\n      onDelete = _ref4.onDelete;\n  return __jsx(React.Fragment, null, __jsx(Item, {\n    readOnly: readOnly\n  }, __jsx(Header, {\n    readOnly: readOnly\n  }, readOnly && item.isVisualize && !isNaN(item.value) ? __jsx(Trunks, {\n    value: item.value\n  }, new Array(Number(item.value)).fill(null).map(function (_, i) {\n    return __jsx(\"span\", {\n      key: i\n    });\n  })) : null, readOnly && !item.isVisualize ? __jsx(Label, null, item.name) : null, readOnly ? __jsx(Value, {\n    tag: 'h4'\n  }, item.isVisualize ? \"\".concat(item.value, \" \").concat(item.name) : item.value) : null, !readOnly && __jsx(Input, {\n    type: 'text',\n    defaultValue: item.value,\n    appearance: 'ghost',\n    placeholder: 'Значение',\n    onChange: function onChange(e) {\n      return onEdit && onEdit(_objectSpread(_objectSpread({}, item), {}, {\n        value: getValue(e.target.value),\n        isVisualize: !isNaN(item.value)\n      }));\n    }\n  }), !readOnly && __jsx(Input, {\n    type: 'text',\n    defaultValue: item.name,\n    appearance: 'ghost',\n    placeholder: 'Введите название',\n    onChange: function onChange(e) {\n      return onEdit && onEdit(_objectSpread(_objectSpread({}, item), {}, {\n        name: e.target.value\n      }));\n    }\n  })), !readOnly && __jsx(Actions, null, __jsx(Tooltip, {\n    text: 'Визуализировать (только цифры)'\n  }, __jsx(Button, {\n    size: 'xs',\n    kind: 'icon',\n    type: 'button',\n    revert: !item.isVisualize,\n    onClick: function onClick() {\n      return onEdit && onEdit(_objectSpread(_objectSpread({}, item), {}, {\n        value: !isNaN(item.value) ? item.value : MIN_LIMIT_VALUE,\n        isVisualize: !item.isVisualize\n      }));\n    }\n  }, __jsx(Icon, {\n    size: 'xs',\n    icon: 'graph',\n    stroke: item.isVisualize ? 'white' : 'var(--default-color-accent)',\n    fill: 'var(--default-color-accent)'\n  }))), onDelete && __jsx(Tooltip, {\n    text: 'Удалить'\n  }, __jsx(Button, {\n    size: 'xs',\n    kind: 'icon',\n    type: 'button',\n    appearance: 'ghost',\n    stroke: 'none',\n    onClick: function onClick() {\n      return onDelete(item);\n    }\n  }, __jsx(Icon, {\n    icon: 'delete',\n    stroke: 'none',\n    fill: 'var(--default-color-red)',\n    size: 'xs'\n  }))))), !readOnly && divided && __jsx(Divider, {\n    clear: true\n  }));\n};\nexport var InteractiveList = function InteractiveList(_ref5) {\n  var list = _ref5.list,\n      readOnly = _ref5.readOnly,\n      onChange = _ref5.onChange;\n\n  var onEdit = function onEdit(edited) {\n    var mapped = function mapped(prev) {\n      return prev.map(function (item) {\n        return (item === null || item === void 0 ? void 0 : item.id) === (edited === null || edited === void 0 ? void 0 : edited.id) ? edited : item;\n      });\n    };\n\n    if (onChange) onChange(mapped);\n  };\n\n  var onDelete = function onDelete(deleted) {\n    var filtered = function filtered(prev) {\n      return prev.filter(function (item) {\n        return (item === null || item === void 0 ? void 0 : item.id) !== (deleted === null || deleted === void 0 ? void 0 : deleted.id);\n      });\n    };\n\n    if (onChange) onChange(filtered);\n  };\n\n  return __jsx(List, {\n    readOnly: readOnly\n  }, (list || []).length === 0 && __jsx(Alert, {\n    style: {\n      width: '100%',\n      textAlign: 'center',\n      flexGrow: 1\n    }\n  }, \"\\u041F\\u0443\\u0441\\u0442\\u043E\"), (list || []).map(function (item, index) {\n    return __jsx(ListItem, {\n      key: item === null || item === void 0 ? void 0 : item.id,\n      item: item,\n      readOnly: readOnly,\n      divided: (list || []).length - 1 !== index,\n      onDelete: onDelete,\n      onEdit: onEdit\n    });\n  }));\n};\nexport var CharacteristicEditor = function CharacteristicEditor(_ref6) {\n  var label = _ref6.label,\n      defaultValue = _ref6.defaultValue,\n      readOnly = _ref6.readOnly,\n      onChange = _ref6.onChange;\n\n  var _useState = useState(defaultValue || []),\n      characteristics = _useState[0],\n      setCharacteristics = _useState[1];\n\n  var onAdd = function onAdd() {\n    var name = 'Новое учебное помещение';\n    var item = {\n      id: v4(),\n      name: name,\n      value: null,\n      isVisualize: null\n    };\n    setCharacteristics(function (prev) {\n      return [].concat(_toConsumableArray(prev), [item]);\n    });\n  };\n\n  useEffect(function () {\n    if (onChange) onChange(characteristics);\n  }, [characteristics, onChange]);\n  useEffect(function () {\n    setCharacteristics(defaultValue);\n  }, [defaultValue]);\n\n  if (readOnly && characteristics.length === 0) {\n    return null;\n  }\n\n  return __jsx(Wrap, null, __jsx(Container, null, label && __jsx(InputLabel, null, label), __jsx(InteractiveList, {\n    list: characteristics,\n    onChange: setCharacteristics,\n    readOnly: readOnly\n  }), !readOnly && __jsx(AddButton, {\n    type: 'button',\n    onClick: onAdd\n  }, __jsx(\"span\", null, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"), __jsx(Icon, {\n    type: 'button',\n    icon: 'add',\n    stroke: 'white'\n  }))));\n};\nexport default CharacteristicEditor;","map":null,"metadata":{},"sourceType":"module"}