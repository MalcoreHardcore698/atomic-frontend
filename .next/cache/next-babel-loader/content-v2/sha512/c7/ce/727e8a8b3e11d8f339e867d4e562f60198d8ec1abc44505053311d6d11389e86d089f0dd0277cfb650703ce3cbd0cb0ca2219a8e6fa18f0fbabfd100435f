{"ast":null,"code":"import React, { useState } from 'react';\nimport { Controller } from 'react-hook-form';\nimport styled, { css } from 'styled-components';\nimport { useQuery } from '@apollo/react-hooks';\nimport generator from 'generate-password';\nimport Tooltip, { Wrap as WrapTooltip } from '../../atomic-ui/components/Tooltip';\nimport Row from '../../atomic-ui/components/Row';\nimport Column from '../../atomic-ui/components/Column';\nimport Title from '../../atomic-ui/components/Title';\nimport Text from '../../atomic-ui/components/Text';\nimport Input from '../../atomic-ui/components/Input';\nimport Button from '../../atomic-ui/components/Button';\nimport TextArea from '../../atomic-ui/components/TextArea';\nimport Dropzone from '../../atomic-ui/components/Dropzone';\nimport DatePicker from '../../atomic-ui/components/DatePicker';\nimport Spinner from '../../atomic-ui/components/Spinner';\nimport Switch from '../../atomic-ui/components/Switch';\nimport Icon from '../../atomic-ui/components/Icon';\nimport Alert from '../../atomic-ui/components/Alert';\nimport Select from '../../atomic-ui/components/Select';\nimport Divider from '../../atomic-ui/components/Divider';\nimport Form from '../Form';\nimport { getLabelRole } from '../../utils/functions';\nimport queries from '../../graphql/queries';\nconst TAB_TYPES = [{\n  label: 'Основное',\n  value: 'GENERAL'\n}, {\n  label: 'Безопасность',\n  value: 'SECURITY'\n}];\nconst ACCOUNT_TYPES = [{\n  label: 'Физ. лицо',\n  value: 'INDIVIDUAL',\n  tooltip: 'Любое лицо'\n}, {\n  label: 'Оф. лицо',\n  value: 'OFICIAL',\n  tooltip: 'Государственный деятель'\n}, {\n  label: 'Юр. лицо',\n  value: 'ENTITY',\n  tooltip: 'Организация'\n}];\nconst GENDER_TYPES = [{\n  label: 'Мужской',\n  value: 'MALE'\n}, {\n  label: 'Женский',\n  value: 'FEMALE'\n}];\nexport const AdaptiveDropzone = styled(Dropzone).withConfig({\n  displayName: \"FormUser__AdaptiveDropzone\",\n  componentId: \"c1ieix-0\"\n})([\"width:196px;height:276px;@media only screen and (max-width:575px){width:100% !important;height:256px;}\"]);\nexport const AdaptiveRow = styled(Row).withConfig({\n  displayName: \"FormUser__AdaptiveRow\",\n  componentId: \"c1ieix-1\"\n})([\"@media only screen and (max-width:575px){flex-direction:column;grid-gap:var(--default-gap);\", \"{flex-grow:1;button{width:100%;}}}\"], WrapTooltip);\nexport const Tab = styled(Column).withConfig({\n  displayName: \"FormUser__Tab\",\n  componentId: \"c1ieix-2\"\n})([\"display:none;\", \"\"], ({\n  active\n}) => active && css([\"display:flex;\"]));\nexport const Loader = styled.div.withConfig({\n  displayName: \"FormUser__Loader\",\n  componentId: \"c1ieix-3\"\n})([\"position:absolute;display:flex;justify-content:center;align-items:center;flex-grow:1;width:100%;height:100%;\"]);\nexport const detect = (list, value) => {\n  return list.find(item => item.value === value);\n};\nexport const detectAccountType = (types, user) => detect(types, user === null || user === void 0 ? void 0 : user.account);\nexport const detectGender = (types, user) => detect(types, user === null || user === void 0 ? void 0 : user.gender);\nexport const getAccountType = role => {\n  if (role) {\n    return ACCOUNT_TYPES.find(type => type.value === role);\n  }\n\n  return ACCOUNT_TYPES[0];\n};\nexport const getLabelGender = gender => {\n  if (gender) {\n    return GENDER_TYPES.find(type => type.value === gender);\n  }\n\n  return GENDER_TYPES[0];\n};\nexport const User = ({\n  user,\n  roles,\n  mutation,\n  appearance,\n  className,\n  accountTypes,\n  genderTypes,\n  canEditRole,\n  onSubmit,\n  onChangePassword\n}) => {\n  const {\n    data,\n    loading: loadingData,\n    error\n  } = user ? useQuery(queries.GET_USER, {\n    variables: {\n      email: user\n    }\n  }) : {\n    data: {\n      getUser: {}\n    },\n    loading: false,\n    error: false\n  };\n  const {\n    data: dataCompanies,\n    loading: loadingCompanies\n  } = useQuery(queries.GET_USERS, {\n    variables: {\n      account: ['ENTITY']\n    }\n  });\n  const [tab, setTab] = useState(TAB_TYPES[0]);\n  const [account, setAccount] = useState(null);\n  const [isShowPassword, setShowPassword] = useState(false);\n\n  const onTogglePassword = () => setShowPassword(!isShowPassword);\n\n  return /*#__PURE__*/React.createElement(Form, {\n    className: className,\n    appearance: appearance,\n    mutation: mutation,\n    onSubmit: (form, action) => {\n      var _data$getUser;\n\n      return onSubmit({ ...form,\n        account: account || getAccountType(data === null || data === void 0 ? void 0 : (_data$getUser = data.getUser) === null || _data$getUser === void 0 ? void 0 : _data$getUser.account)\n      }, action);\n    }\n  }, ({\n    register,\n    control,\n    loading,\n    errors,\n    setValue,\n    getValues\n  }) => {\n    var _data$getUser2, _data$getUser3, _data$getUser3$role, _data$getUser4, _data$getUser5, _data$getUser6, _data$getUser7, _data$getUser8, _data$getUser8$role, _data$getUser9, _data$getUser9$role, _data$getUser10, _data$getUser11, _data$getUser12, _data$getUser14, _data$getUser15, _data$getUser15$role, _data$getUser16, _data$getUser17, _data$getUser18, _data$getUser18$role, _data$getUser19, _data$getUser20, _data$getUser20$role, _data$getUser21, _data$getUser22, _data$getUser23, _data$getUser24, _data$getUser25, _data$getUser26, _data$getUser27, _data$getUser28, _data$getUser28$role;\n\n    return !loading && !loadingData && data && data.getUser ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Switch, {\n      defaultValue: tab,\n      options: TAB_TYPES,\n      onChange: setTab,\n      stretch: true\n    }), /*#__PURE__*/React.createElement(Tab, {\n      active: tab.value === 'GENERAL'\n    }, /*#__PURE__*/React.createElement(AdaptiveRow, null, /*#__PURE__*/React.createElement(Controller, {\n      name: 'avatar',\n      control: control,\n      defaultValue: getValues('avatar') || user && (((_data$getUser2 = data.getUser) === null || _data$getUser2 === void 0 ? void 0 : _data$getUser2.avatar) || {\n        path: '/images/avatar-default.png'\n      }) || null,\n      render: ({\n        value,\n        onChange\n      }) => /*#__PURE__*/React.createElement(AdaptiveDropzone, {\n        accept: 'image/*',\n        defaultValue: value,\n        onChange: onChange,\n        placeholder: 'Перетащите сюда изображение для превью',\n        tooltip: 'Разрешение: 675x590px. Допустимые форматы: jpeg, jpg, png. Макс. размер: 15 MB'\n      })\n    }), /*#__PURE__*/React.createElement(Column, {\n      style: {\n        flexGrow: 1\n      }\n    }, ((_data$getUser3 = data.getUser) === null || _data$getUser3 === void 0 ? void 0 : (_data$getUser3$role = _data$getUser3.role) === null || _data$getUser3$role === void 0 ? void 0 : _data$getUser3$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u0410\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"), /*#__PURE__*/React.createElement(Switch, {\n      defaultValue: account !== null && account !== void 0 && account.value ? account : getAccountType((_data$getUser4 = data.getUser) === null || _data$getUser4 === void 0 ? void 0 : _data$getUser4.account),\n      options: (accountTypes === null || accountTypes === void 0 ? void 0 : accountTypes.length) > 1 && accountTypes || ACCOUNT_TYPES,\n      onChange: value => setAccount(value),\n      disabled: loading,\n      stretch: true\n    })), /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser5 = data.getUser) === null || _data$getUser5 === void 0 ? void 0 : _data$getUser5.account) === 'ENTITY' ? 'Название компании' : 'ФИО'), canEditRole && errors && errors.name && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%'\n      },\n      appearance: 'error'\n    }, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u043E \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u043E \\u0424\\u0418\\u041E\"), /*#__PURE__*/React.createElement(Input, {\n      type: 'text',\n      name: 'name',\n      ref: register({\n        required: !user\n      }),\n      defaultValue: getValues('name') || ((_data$getUser6 = data.getUser) === null || _data$getUser6 === void 0 ? void 0 : _data$getUser6.name),\n      placeholder: account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser7 = data.getUser) === null || _data$getUser7 === void 0 ? void 0 : _data$getUser7.account) === 'ENTITY' ? 'Название компании' : 'ФИО',\n      appearance: 'ghost',\n      disabled: loading\n    }), ((_data$getUser8 = data.getUser) === null || _data$getUser8 === void 0 ? void 0 : (_data$getUser8$role = _data$getUser8.role) === null || _data$getUser8$role === void 0 ? void 0 : _data$getUser8$role.name) === 'ADMIN' && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%',\n        textAlign: 'center'\n      }\n    }, \"\\u0423 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0430 \\u043E\\u0433\\u0440\\u0430\\u043D\\u0438\\u0447\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0432\\u043E\\u0437\\u043C\\u043E\\u0436\\u043D\\u043E\\u0441\\u0442\\u0438 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F \\u0441\\u043E\\u0431\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u043E\\u0433\\u043E \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"), ((_data$getUser9 = data.getUser) === null || _data$getUser9 === void 0 ? void 0 : (_data$getUser9$role = _data$getUser9.role) === null || _data$getUser9$role === void 0 ? void 0 : _data$getUser9$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser10 = data.getUser) === null || _data$getUser10 === void 0 ? void 0 : _data$getUser10.account) === 'ENTITY' ? 'Дата основания' : 'Дата рождения'), /*#__PURE__*/React.createElement(Controller, {\n      name: 'dateOfBirth',\n      control: control,\n      defaultValue: getValues('dateOfBirth') || ((_data$getUser11 = data.getUser) === null || _data$getUser11 === void 0 ? void 0 : _data$getUser11.dateOfBirth) && new Date((_data$getUser12 = data.getUser) === null || _data$getUser12 === void 0 ? void 0 : _data$getUser12.dateOfBirth) || null,\n      render: ({\n        value,\n        onChange\n      }) => {\n        var _data$getUser13;\n\n        return /*#__PURE__*/React.createElement(DatePicker, {\n          value: value,\n          onChange: onChange,\n          placeholder: account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser13 = data.getUser) === null || _data$getUser13 === void 0 ? void 0 : _data$getUser13.account) === 'ENTITY' ? 'Дата основания' : 'Дата рождения',\n          appearance: 'ghost',\n          withYearDisplay: false,\n          withNavigate: true,\n          canEditYear: true\n        });\n      }\n    })))), ((account === null || account === void 0 ? void 0 : account.value) && (account === null || account === void 0 ? void 0 : account.value) !== 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser14 = data.getUser) === null || _data$getUser14 === void 0 ? void 0 : _data$getUser14.account) !== 'ENTITY') && ((_data$getUser15 = data.getUser) === null || _data$getUser15 === void 0 ? void 0 : (_data$getUser15$role = _data$getUser15.role) === null || _data$getUser15$role === void 0 ? void 0 : _data$getUser15$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(Column, {\n      style: {\n        flexGrow: 1\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u041F\\u043E\\u043B\"), /*#__PURE__*/React.createElement(Controller, {\n      name: 'gender',\n      control: control,\n      defaultValue: getValues('gender') || getLabelGender((_data$getUser16 = data.getUser) === null || _data$getUser16 === void 0 ? void 0 : _data$getUser16.gender),\n      render: ({\n        value,\n        onChange\n      }) => /*#__PURE__*/React.createElement(Switch, {\n        defaultValue: value,\n        onChange: onChange,\n        options: (genderTypes === null || genderTypes === void 0 ? void 0 : genderTypes.length) > 1 && genderTypes || GENDER_TYPES,\n        disabled: loading,\n        stretch: true\n      })\n    })), ((account === null || account === void 0 ? void 0 : account.value) && (account === null || account === void 0 ? void 0 : account.value) !== 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser17 = data.getUser) === null || _data$getUser17 === void 0 ? void 0 : _data$getUser17.account) !== 'ENTITY') && ((_data$getUser18 = data.getUser) === null || _data$getUser18 === void 0 ? void 0 : (_data$getUser18$role = _data$getUser18.role) === null || _data$getUser18$role === void 0 ? void 0 : _data$getUser18$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(Column, null, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u041A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044F\"), /*#__PURE__*/React.createElement(Controller, {\n      name: 'company',\n      control: control,\n      defaultValue: getValues('company') || ((_data$getUser19 = data.getUser) !== null && _data$getUser19 !== void 0 && _data$getUser19.company ? {\n        value: data.getUser.company.id,\n        label: data.getUser.company.name\n      } : null),\n      render: ({\n        value,\n        onChange\n      }) => /*#__PURE__*/React.createElement(Select, {\n        appearance: 'ghost',\n        defaultValue: value,\n        placeholder: 'Выберите компанию',\n        options: ((dataCompanies === null || dataCompanies === void 0 ? void 0 : dataCompanies.getUsers) || []).map(company => ({\n          value: company.email,\n          label: company.name\n        })),\n        onChange: onChange,\n        isLoading: loadingCompanies || loading,\n        isSearchable: true,\n        cacheOptions: true\n      })\n    })), ((_data$getUser20 = data.getUser) === null || _data$getUser20 === void 0 ? void 0 : (_data$getUser20$role = _data$getUser20.role) === null || _data$getUser20$role === void 0 ? void 0 : _data$getUser20$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(Column, null, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser21 = data.getUser) === null || _data$getUser21 === void 0 ? void 0 : _data$getUser21.account) === 'ENTITY' ? 'О компании' : 'О себе'), /*#__PURE__*/React.createElement(TextArea, {\n      type: 'text',\n      name: 'about',\n      ref: register(),\n      defaultValue: getValues('about') || ((_data$getUser22 = data.getUser) === null || _data$getUser22 === void 0 ? void 0 : _data$getUser22.about) || '',\n      placeholder: 'Расскажите о себе пару слов',\n      disabled: loading,\n      appearance: 'ghost'\n    }))), /*#__PURE__*/React.createElement(Tab, {\n      active: tab.value === 'SECURITY'\n    }, canEditRole && errors && (errors.email || errors.phone) && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%'\n      },\n      appearance: 'error'\n    }, errors.email && /*#__PURE__*/React.createElement(\"p\", null, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430 \\u044D\\u043B. \\u043F\\u043E\\u0447\\u0442\\u0430\"), errors.phone && /*#__PURE__*/React.createElement(\"p\", null, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\")), /*#__PURE__*/React.createElement(AdaptiveRow, null, /*#__PURE__*/React.createElement(Column, {\n      style: {\n        flexGrow: 1\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u042D\\u043B. \\u043F\\u043E\\u0447\\u0442\\u0430\"), /*#__PURE__*/React.createElement(Input, {\n      type: 'email',\n      name: 'email',\n      ref: register({\n        required: !user\n      }),\n      defaultValue: getValues('email') || ((_data$getUser23 = data.getUser) === null || _data$getUser23 === void 0 ? void 0 : _data$getUser23.email),\n      placeholder: 'Эл. почта',\n      appearance: 'ghost',\n      disabled: loading\n    })), /*#__PURE__*/React.createElement(Column, {\n      style: {\n        flexGrow: 1\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"), /*#__PURE__*/React.createElement(Input, {\n      type: 'tel',\n      name: 'phone',\n      ref: register({\n        required: !user\n      }),\n      defaultValue: getValues('phone') || ((_data$getUser24 = data.getUser) === null || _data$getUser24 === void 0 ? void 0 : _data$getUser24.phone),\n      placeholder: 'Телефон',\n      appearance: 'ghost',\n      disabled: loading\n    }))), /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"), canEditRole && errors && errors.password && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%'\n      },\n      appearance: 'error'\n    }, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"), /*#__PURE__*/React.createElement(AdaptiveRow, null, /*#__PURE__*/React.createElement(Input, {\n      name: 'password',\n      ref: register({\n        required: !user\n      }),\n      type: isShowPassword ? 'text' : 'password',\n      defaultValue: getValues('password') || ((_data$getUser25 = data.getUser) === null || _data$getUser25 === void 0 ? void 0 : _data$getUser25.password),\n      appearance: 'ghost',\n      placeholder: 'Пароль',\n      readOnly: !canEditRole\n    }), canEditRole && /*#__PURE__*/React.createElement(Tooltip, {\n      text: 'Генерация пароля'\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: 'button',\n      kind: 'icon',\n      disabled: loading,\n      onClick: () => setValue('password', generator.generate())\n    }, /*#__PURE__*/React.createElement(Icon, {\n      icon: 'password',\n      stroke: 'white'\n    }))), canEditRole && /*#__PURE__*/React.createElement(Tooltip, {\n      text: 'Отображение пароля'\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: 'button',\n      kind: 'icon',\n      disabled: loading,\n      onClick: onTogglePassword,\n      revert: !isShowPassword\n    }, /*#__PURE__*/React.createElement(Icon, {\n      icon: isShowPassword ? 'hide' : 'show',\n      stroke: isShowPassword ? 'white' : 'var(--default-color-accent)'\n    }))), !canEditRole && /*#__PURE__*/React.createElement(Tooltip, {\n      text: 'Смена пароля'\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: 'button',\n      kind: 'icon',\n      disabled: loading,\n      onClick: onChangePassword\n    }, /*#__PURE__*/React.createElement(Icon, {\n      icon: 'edit',\n      stroke: 'white'\n    })))), /*#__PURE__*/React.createElement(Text, null, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0434\\u043E\\u043B\\u0436\\u0435\\u043D \\u0441\\u043E\\u0434\\u0435\\u0440\\u0436\\u0430\\u0442\\u044C \\u043D\\u0435 \\u043C\\u0435\\u043D\\u0435\\u0435 \\u0432\\u043E\\u0441\\u044C\\u043C\\u0438 \\u0437\\u043D\\u0430\\u043A\\u043E\\u0432, \\u0432\\u043A\\u043B\\u044E\\u0447\\u0430\\u0442\\u044C \\u0431\\u0443\\u043A\\u0432\\u044B, \\u0446\\u0438\\u0444\\u0440\\u044B \\u0438 \\u0441\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u044C\\u043D\\u044B\\u0435 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u044B\")), canEditRole && /*#__PURE__*/React.createElement(Divider, {\n      clear: true\n    }), canEditRole && errors && errors.role && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%'\n      },\n      appearance: 'error'\n    }, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430 \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430 \\u0440\\u043E\\u043B\\u044C\"), canEditRole && /*#__PURE__*/React.createElement(Controller, {\n      name: 'role',\n      control: control,\n      defaultValue: getValues('role') || ((_data$getUser26 = data.getUser) === null || _data$getUser26 === void 0 ? void 0 : _data$getUser26.role) && {\n        value: (_data$getUser27 = data.getUser) === null || _data$getUser27 === void 0 ? void 0 : _data$getUser27.role.id,\n        label: getLabelRole((_data$getUser28 = data.getUser) === null || _data$getUser28 === void 0 ? void 0 : (_data$getUser28$role = _data$getUser28.role) === null || _data$getUser28$role === void 0 ? void 0 : _data$getUser28$role.name)\n      } || null,\n      render: ({\n        value,\n        onChange\n      }) => /*#__PURE__*/React.createElement(Select, {\n        appearance: 'ghost',\n        defaultValue: value,\n        onChange: onChange,\n        placeholder: 'Выберите роль',\n        options: (roles || []).map(item => ({\n          value: item.id,\n          label: getLabelRole(item.name)\n        })),\n        menuPlacement: 'top',\n        isLoading: loading,\n        isClearable: true\n      })\n    }), /*#__PURE__*/React.createElement(Divider, {\n      clear: true\n    }), /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Button, {\n      type: 'submit',\n      style: {\n        flexGrow: 1\n      },\n      disabled: loading\n    }, !user && 'Создать', user && 'Сохранить'))) : error ? /*#__PURE__*/React.createElement(Alert, {\n      appearance: 'error',\n      style: {\n        width: '100%',\n        textAlign: 'center'\n      }\n    }, \"\\u0423\\u043F\\u0441! \\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044E \\u043E \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0435\") : /*#__PURE__*/React.createElement(Loader, null, /*#__PURE__*/React.createElement(Spinner, null));\n  });\n};\nUser.defaultProps = {\n  canEditAccount: true\n};\nexport default User;","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/components/FormUser/index.js"],"names":["React","useState","Controller","styled","css","useQuery","generator","Tooltip","Wrap","WrapTooltip","Row","Column","Title","Text","Input","Button","TextArea","Dropzone","DatePicker","Spinner","Switch","Icon","Alert","Select","Divider","Form","getLabelRole","queries","TAB_TYPES","label","value","ACCOUNT_TYPES","tooltip","GENDER_TYPES","AdaptiveDropzone","AdaptiveRow","Tab","active","Loader","div","detect","list","find","item","detectAccountType","types","user","account","detectGender","gender","getAccountType","role","type","getLabelGender","User","roles","mutation","appearance","className","accountTypes","genderTypes","canEditRole","onSubmit","onChangePassword","data","loading","loadingData","error","GET_USER","variables","email","getUser","dataCompanies","loadingCompanies","GET_USERS","tab","setTab","setAccount","isShowPassword","setShowPassword","onTogglePassword","form","action","register","control","errors","setValue","getValues","avatar","path","onChange","flexGrow","name","length","width","required","textAlign","dateOfBirth","Date","company","id","getUsers","map","about","phone","password","generate","defaultProps","canEditAccount"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport { Controller } from 'react-hook-form'\nimport styled, { css } from 'styled-components'\nimport { useQuery } from '@apollo/react-hooks'\nimport generator from 'generate-password'\n\nimport Tooltip, { Wrap as WrapTooltip } from '../../atomic-ui/components/Tooltip'\nimport Row from '../../atomic-ui/components/Row'\nimport Column from '../../atomic-ui/components/Column'\nimport Title from '../../atomic-ui/components/Title'\nimport Text from '../../atomic-ui/components/Text'\nimport Input from '../../atomic-ui/components/Input'\nimport Button from '../../atomic-ui/components/Button'\nimport TextArea from '../../atomic-ui/components/TextArea'\nimport Dropzone from '../../atomic-ui/components/Dropzone'\nimport DatePicker from '../../atomic-ui/components/DatePicker'\nimport Spinner from '../../atomic-ui/components/Spinner'\nimport Switch from '../../atomic-ui/components/Switch'\nimport Icon from '../../atomic-ui/components/Icon'\nimport Alert from '../../atomic-ui/components/Alert'\nimport Select from '../../atomic-ui/components/Select'\nimport Divider from '../../atomic-ui/components/Divider'\n\nimport Form from '../Form'\nimport { getLabelRole } from '../../utils/functions'\nimport queries from '../../graphql/queries'\n\nconst TAB_TYPES = [\n  { label: 'Основное', value: 'GENERAL' },\n  { label: 'Безопасность', value: 'SECURITY' }\n]\n\nconst ACCOUNT_TYPES = [\n  { label: 'Физ. лицо', value: 'INDIVIDUAL', tooltip: 'Любое лицо' },\n  { label: 'Оф. лицо', value: 'OFICIAL', tooltip: 'Государственный деятель' },\n  { label: 'Юр. лицо', value: 'ENTITY', tooltip: 'Организация' }\n]\n\nconst GENDER_TYPES = [\n  { label: 'Мужской', value: 'MALE' },\n  { label: 'Женский', value: 'FEMALE' }\n]\n\nexport const AdaptiveDropzone = styled(Dropzone)`\n  width: 196px;\n  height: 276px;\n\n  @media only screen and (max-width: 575px) {\n    width: 100% !important;\n    height: 256px;\n  }\n`\n\nexport const AdaptiveRow = styled(Row)`\n  @media only screen and (max-width: 575px) {\n    flex-direction: column;\n    grid-gap: var(--default-gap);\n\n    ${WrapTooltip} {\n      flex-grow: 1;\n\n      button {\n        width: 100%;\n      }\n    }\n  }\n`\n\nexport const Tab = styled(Column)`\n  display: none;\n\n  ${({ active }) =>\n    active &&\n    css`\n      display: flex;\n    `}\n`\n\nexport const Loader = styled.div`\n  position: absolute;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-grow: 1;\n  width: 100%;\n  height: 100%;\n`\n\nexport const detect = (list, value) => {\n  return list.find((item) => item.value === value)\n}\n\nexport const detectAccountType = (types, user) => detect(types, user?.account)\n\nexport const detectGender = (types, user) => detect(types, user?.gender)\n\nexport const getAccountType = (role) => {\n  if (role) {\n    return ACCOUNT_TYPES.find((type) => type.value === role)\n  }\n  return ACCOUNT_TYPES[0]\n}\n\nexport const getLabelGender = (gender) => {\n  if (gender) {\n    return GENDER_TYPES.find((type) => type.value === gender)\n  }\n  return GENDER_TYPES[0]\n}\n\nexport const User = ({\n  user,\n  roles,\n  mutation,\n  appearance,\n  className,\n  accountTypes,\n  genderTypes,\n  canEditRole,\n  onSubmit,\n  onChangePassword\n}) => {\n  const { data, loading: loadingData, error } = user\n    ? useQuery(queries.GET_USER, {\n        variables: {\n          email: user\n        }\n      })\n    : { data: { getUser: {} }, loading: false, error: false }\n  const { data: dataCompanies, loading: loadingCompanies } = useQuery(queries.GET_USERS, {\n    variables: {\n      account: ['ENTITY']\n    }\n  })\n  const [tab, setTab] = useState(TAB_TYPES[0])\n  const [account, setAccount] = useState(null)\n  const [isShowPassword, setShowPassword] = useState(false)\n\n  const onTogglePassword = () => setShowPassword(!isShowPassword)\n\n  return (\n    <Form\n      className={className}\n      appearance={appearance}\n      mutation={mutation}\n      onSubmit={(form, action) =>\n        onSubmit({ ...form, account: account || getAccountType(data?.getUser?.account) }, action)\n      }>\n      {({ register, control, loading, errors, setValue, getValues }) =>\n        !loading && !loadingData && data && data.getUser ? (\n          <React.Fragment>\n            <Switch defaultValue={tab} options={TAB_TYPES} onChange={setTab} stretch />\n\n            <Tab active={tab.value === 'GENERAL'}>\n              <AdaptiveRow>\n                <Controller\n                  name={'avatar'}\n                  control={control}\n                  defaultValue={\n                    getValues('avatar') ||\n                    (user && (data.getUser?.avatar || { path: '/images/avatar-default.png' })) ||\n                    null\n                  }\n                  render={({ value, onChange }) => (\n                    <AdaptiveDropzone\n                      accept={'image/*'}\n                      defaultValue={value}\n                      onChange={onChange}\n                      placeholder={'Перетащите сюда изображение для превью'}\n                      tooltip={\n                        'Разрешение: 675x590px. Допустимые форматы: jpeg, jpg, png. Макс. размер: 15 MB'\n                      }\n                    />\n                  )}\n                />\n\n                <Column style={{ flexGrow: 1 }}>\n                  {data.getUser?.role?.name !== 'ADMIN' && (\n                    <React.Fragment>\n                      <Title tag={'h4'}>Аккаунт</Title>\n                      <Switch\n                        defaultValue={\n                          account?.value ? account : getAccountType(data.getUser?.account)\n                        }\n                        options={(accountTypes?.length > 1 && accountTypes) || ACCOUNT_TYPES}\n                        onChange={(value) => setAccount(value)}\n                        disabled={loading}\n                        stretch\n                      />\n                    </React.Fragment>\n                  )}\n\n                  <Title tag={'h4'}>\n                    {(account?.value && account?.value === 'ENTITY') ||\n                    (!account?.value && data.getUser?.account === 'ENTITY')\n                      ? 'Название компании'\n                      : 'ФИО'}\n                  </Title>\n                  {canEditRole && errors && errors.name && (\n                    <Alert style={{ width: '100%' }} appearance={'error'}>\n                      Неверно указано или не указано ФИО\n                    </Alert>\n                  )}\n                  <Input\n                    type={'text'}\n                    name={'name'}\n                    ref={register({ required: !user })}\n                    defaultValue={getValues('name') || data.getUser?.name}\n                    placeholder={\n                      (account?.value && account?.value === 'ENTITY') ||\n                      (!account?.value && data.getUser?.account === 'ENTITY')\n                        ? 'Название компании'\n                        : 'ФИО'\n                    }\n                    appearance={'ghost'}\n                    disabled={loading}\n                  />\n\n                  {data.getUser?.role?.name === 'ADMIN' && (\n                    <Alert style={{ width: '100%', textAlign: 'center' }}>\n                      У администратора ограниченные возможности изменения собственного аккаунта\n                    </Alert>\n                  )}\n\n                  {data.getUser?.role?.name !== 'ADMIN' && (\n                    <React.Fragment>\n                      <Title tag={'h4'}>\n                        {(account?.value && account?.value === 'ENTITY') ||\n                        (!account?.value && data.getUser?.account === 'ENTITY')\n                          ? 'Дата основания'\n                          : 'Дата рождения'}\n                      </Title>\n                      <Controller\n                        name={'dateOfBirth'}\n                        control={control}\n                        defaultValue={\n                          getValues('dateOfBirth') ||\n                          (data.getUser?.dateOfBirth && new Date(data.getUser?.dateOfBirth)) ||\n                          null\n                        }\n                        render={({ value, onChange }) => (\n                          <DatePicker\n                            value={value}\n                            onChange={onChange}\n                            placeholder={\n                              (account?.value && account?.value === 'ENTITY') ||\n                              (!account?.value && data.getUser?.account === 'ENTITY')\n                                ? 'Дата основания'\n                                : 'Дата рождения'\n                            }\n                            appearance={'ghost'}\n                            withYearDisplay={false}\n                            withNavigate\n                            canEditYear\n                          />\n                        )}\n                      />\n                    </React.Fragment>\n                  )}\n                </Column>\n              </AdaptiveRow>\n\n              {((account?.value && account?.value !== 'ENTITY') ||\n                (!account?.value && data.getUser?.account !== 'ENTITY')) &&\n                data.getUser?.role?.name !== 'ADMIN' && (\n                  <Column style={{ flexGrow: 1 }}>\n                    <Title tag={'h4'}>Пол</Title>\n                    <Controller\n                      name={'gender'}\n                      control={control}\n                      defaultValue={getValues('gender') || getLabelGender(data.getUser?.gender)}\n                      render={({ value, onChange }) => (\n                        <Switch\n                          defaultValue={value}\n                          onChange={onChange}\n                          options={(genderTypes?.length > 1 && genderTypes) || GENDER_TYPES}\n                          disabled={loading}\n                          stretch\n                        />\n                      )}\n                    />\n                  </Column>\n                )}\n\n              {((account?.value && account?.value !== 'ENTITY') ||\n                (!account?.value && data.getUser?.account !== 'ENTITY')) &&\n                data.getUser?.role?.name !== 'ADMIN' && (\n                  <Column>\n                    <Title tag={'h4'}>Компания</Title>\n                    <Controller\n                      name={'company'}\n                      control={control}\n                      defaultValue={\n                        getValues('company') ||\n                        (data.getUser?.company\n                          ? {\n                              value: data.getUser.company.id,\n                              label: data.getUser.company.name\n                            }\n                          : null)\n                      }\n                      render={({ value, onChange }) => (\n                        <Select\n                          appearance={'ghost'}\n                          defaultValue={value}\n                          placeholder={'Выберите компанию'}\n                          options={(dataCompanies?.getUsers || []).map((company) => ({\n                            value: company.email,\n                            label: company.name\n                          }))}\n                          onChange={onChange}\n                          isLoading={loadingCompanies || loading}\n                          isSearchable\n                          cacheOptions\n                        />\n                      )}\n                    />\n                  </Column>\n                )}\n\n              {data.getUser?.role?.name !== 'ADMIN' && (\n                <Column>\n                  <Title tag={'h4'}>\n                    {(account?.value && account?.value === 'ENTITY') ||\n                    (!account?.value && data.getUser?.account === 'ENTITY')\n                      ? 'О компании'\n                      : 'О себе'}\n                  </Title>\n                  <TextArea\n                    type={'text'}\n                    name={'about'}\n                    ref={register()}\n                    defaultValue={getValues('about') || data.getUser?.about || ''}\n                    placeholder={'Расскажите о себе пару слов'}\n                    disabled={loading}\n                    appearance={'ghost'}\n                  />\n                </Column>\n              )}\n            </Tab>\n\n            <Tab active={tab.value === 'SECURITY'}>\n              {canEditRole && errors && (errors.email || errors.phone) && (\n                <Alert style={{ width: '100%' }} appearance={'error'}>\n                  {errors.email && <p>Неверно указан или не указана эл. почта</p>}\n                  {errors.phone && <p>Неверно указан или не указана телефон</p>}\n                </Alert>\n              )}\n              <AdaptiveRow>\n                <Column style={{ flexGrow: 1 }}>\n                  <Title tag={'h4'}>Эл. почта</Title>\n                  <Input\n                    type={'email'}\n                    name={'email'}\n                    ref={register({ required: !user })}\n                    defaultValue={getValues('email') || data.getUser?.email}\n                    placeholder={'Эл. почта'}\n                    appearance={'ghost'}\n                    disabled={loading}\n                  />\n                </Column>\n                <Column style={{ flexGrow: 1 }}>\n                  <Title tag={'h4'}>Телефон</Title>\n                  <Input\n                    type={'tel'}\n                    name={'phone'}\n                    ref={register({ required: !user })}\n                    defaultValue={getValues('phone') || data.getUser?.phone}\n                    placeholder={'Телефон'}\n                    appearance={'ghost'}\n                    disabled={loading}\n                  />\n                </Column>\n              </AdaptiveRow>\n\n              <Title tag={'h4'}>Пароль</Title>\n              {canEditRole && errors && errors.password && (\n                <Alert style={{ width: '100%' }} appearance={'error'}>\n                  Неверно указан или не указан пароль\n                </Alert>\n              )}\n              <AdaptiveRow>\n                <Input\n                  name={'password'}\n                  ref={register({ required: !user })}\n                  type={isShowPassword ? 'text' : 'password'}\n                  defaultValue={getValues('password') || data.getUser?.password}\n                  appearance={'ghost'}\n                  placeholder={'Пароль'}\n                  readOnly={!canEditRole}\n                />\n                {canEditRole && (\n                  <Tooltip text={'Генерация пароля'}>\n                    <Button\n                      type={'button'}\n                      kind={'icon'}\n                      disabled={loading}\n                      onClick={() => setValue('password', generator.generate())}>\n                      <Icon icon={'password'} stroke={'white'} />\n                    </Button>\n                  </Tooltip>\n                )}\n                {canEditRole && (\n                  <Tooltip text={'Отображение пароля'}>\n                    <Button\n                      type={'button'}\n                      kind={'icon'}\n                      disabled={loading}\n                      onClick={onTogglePassword}\n                      revert={!isShowPassword}>\n                      <Icon\n                        icon={isShowPassword ? 'hide' : 'show'}\n                        stroke={isShowPassword ? 'white' : 'var(--default-color-accent)'}\n                      />\n                    </Button>\n                  </Tooltip>\n                )}\n                {!canEditRole && (\n                  <Tooltip text={'Смена пароля'}>\n                    <Button\n                      type={'button'}\n                      kind={'icon'}\n                      disabled={loading}\n                      onClick={onChangePassword}>\n                      <Icon icon={'edit'} stroke={'white'} />\n                    </Button>\n                  </Tooltip>\n                )}\n              </AdaptiveRow>\n\n              <Text>\n                Пароль должен содержать не менее восьми знаков, включать буквы, цифры и специальные\n                символы\n              </Text>\n            </Tab>\n\n            {canEditRole && <Divider clear />}\n\n            {canEditRole && errors && errors.role && (\n              <Alert style={{ width: '100%' }} appearance={'error'}>\n                Неверно указана или не указана роль\n              </Alert>\n            )}\n            {canEditRole && (\n              <Controller\n                name={'role'}\n                control={control}\n                defaultValue={\n                  getValues('role') ||\n                  (data.getUser?.role && {\n                    value: data.getUser?.role.id,\n                    label: getLabelRole(data.getUser?.role?.name)\n                  }) ||\n                  null\n                }\n                render={({ value, onChange }) => (\n                  <Select\n                    appearance={'ghost'}\n                    defaultValue={value}\n                    onChange={onChange}\n                    placeholder={'Выберите роль'}\n                    options={(roles || []).map((item) => ({\n                      value: item.id,\n                      label: getLabelRole(item.name)\n                    }))}\n                    menuPlacement={'top'}\n                    isLoading={loading}\n                    isClearable\n                  />\n                )}\n              />\n            )}\n\n            <Divider clear />\n\n            <Row>\n              <Button type={'submit'} style={{ flexGrow: 1 }} disabled={loading}>\n                {!user && 'Создать'}\n                {user && 'Сохранить'}\n              </Button>\n            </Row>\n          </React.Fragment>\n        ) : error ? (\n          <Alert appearance={'error'} style={{ width: '100%', textAlign: 'center' }}>\n            Упс! Не удалось загрузить информацию о проекте\n          </Alert>\n        ) : (\n          <Loader>\n            <Spinner />\n          </Loader>\n        )\n      }\n    </Form>\n  )\n}\n\nUser.defaultProps = {\n  canEditAccount: true\n}\n\nexport default User\n"]},"metadata":{},"sourceType":"module"}