{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Grid from '../../atomic-ui/components/Grid';\nimport Table from '../../atomic-ui/components/Table';\nimport templates from '../../atomic-ui/components/Table/templates';\nimport { useHelper } from '../../hooks/useHelper';\nimport { useMutate } from '../../hooks/useMutate';\nimport ContentLayout from '../../layouts/content';\nimport ProjectCard from '../../components/ProjectCard';\nimport LazyLoad from '../../components/LazyLoad';\nimport FadeLoad from '../../components/FadeLoad';\nimport { onProjectCreate, onProjectEdit, onProjectDelete, onProjectLink, onProjectAdd, onProjectScreenshot } from '../../store/helpers/project';\nimport { setDocuments } from '../../store/actions/documents';\nimport { getLabelCategory } from '../../atomic-ui/utils/functions';\nimport { setUserFolder, updateUser } from '../../store/actions/user';\nimport { onUserAboutMore } from '../../store/helpers/user';\nimport queries from '../../graphql/queries';\nconst TITLE = 'Проекты';\nconst START_OFFSET = 12;\nconst LIMIT = 12;\n\nconst Projects = ({\n  store\n}) => {\n  _s();\n\n  const recall = useHelper();\n  const mutate = useMutate();\n  const {\n    user,\n    documents\n  } = useSelector(state => ({\n    user: state.user,\n    documents: state.documents\n  }));\n  const dispatch = useDispatch();\n  const [displayMethod, onChangeDisplayMethod] = useState('grid');\n  const canEditStatus = useMemo(() => user && user.role.name === 'ADMIN', [user]);\n  useEffect(() => {\n    dispatch(setDocuments(null));\n  }, []);\n  return /*#__PURE__*/React.createElement(ContentLayout, {\n    title: TITLE,\n    filters: [{\n      type: 'DATEPICKER'\n    }, {\n      type: 'SELECT',\n      options: store === null || store === void 0 ? void 0 : store.categories.map(category => ({\n        value: category.id,\n        label: getLabelCategory(category.name)\n      }))\n    }],\n    options: [{\n      label: 'Компания',\n      value: 'company'\n    }, {\n      label: 'Участники',\n      value: 'members'\n    }, {\n      label: 'Дата публикации',\n      value: 'createdAt'\n    }],\n    handle: {\n      icon: 'work',\n      buttonCreateText: 'Создать проект',\n      onCreate: recall(onProjectCreate, {\n        companies: store.companies,\n        categories: store.categories,\n        statuses: store.statuses,\n        canEditStatus,\n        mutation: queries.CREATE_PROJECT,\n        query: queries.GET_USERS\n      }),\n      onChangeDisplayMethod: item => onChangeDisplayMethod(item.value)\n    },\n    limit: LIMIT,\n    startOffset: START_OFFSET,\n    bottomScrollOffset: 0,\n    query: queries.GET_PROJECTS,\n    variables: {\n      status: 'PUBLISHED'\n    },\n    store: {\n      documents: documents || store.projects\n    },\n    dashboard: true\n  }, ({\n    documents\n  }) => displayMethod === 'list' ? /*#__PURE__*/React.createElement(Table, {\n    data: documents,\n    template: templates.project,\n    onChecked: () => {},\n    onClick: project => recall(onProjectLink, {\n      id: project.id,\n      auth: user\n    })(),\n    onDelete: project => recall(onProjectDelete, {\n      id: project.id,\n      project,\n      auth: user,\n      mutation: queries.DELETE_PROJECT\n    })(),\n    onEdit: project => recall(onProjectEdit, {\n      id: project.id,\n      companies: store.companies,\n      categories: store.categories,\n      statuses: store.statuses,\n      canEditStatus,\n      mutation: queries.UPDATE_PROJECT,\n      query: queries.GET_USERS,\n      onCompanyInputChange: mutate(queries.GET_USERS, {\n        account: 'ENTITY'\n      })\n    })(),\n    style: {\n      overflowX: 'auto',\n      width: 'calc(100vw - 290px)'\n    }\n  }) : /*#__PURE__*/React.createElement(Grid, null, documents.map(project => {\n    var _user$folders;\n\n    return /*#__PURE__*/React.createElement(FadeLoad, {\n      key: project.id\n    }, /*#__PURE__*/React.createElement(LazyLoad, null, /*#__PURE__*/React.createElement(ProjectCard, {\n      project: project,\n      onChecked: () => {},\n      onScreenshotClick: (_, key) => recall(onProjectScreenshot, {\n        screenshots: [project.preview, ...project.screenshots],\n        key\n      })(),\n      onLink: recall(onProjectLink, {\n        id: project.id,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        added: !!(user !== null && user !== void 0 && (_user$folders = user.folders) !== null && _user$folders !== void 0 && _user$folders.find(folder => !!(folder !== null && folder !== void 0 && folder.projects.find(item => item === project.id)))),\n        liked: !!(project.rating || []).find(item => item.email === user.email),\n        onLike: user.email && mutate(queries.LIKE_PROJECT, {\n          id: project.id\n        }, response => dispatch(updateUser(response.data.likeProject))),\n        onAdd: user.email && recall(onProjectAdd, {\n          id: project.id,\n          folders: user === null || user === void 0 ? void 0 : user.folders,\n          mutations: {\n            addProject: queries.ADD_USER_PROJECT,\n            createFolder: queries.ADD_USER_FOLDER\n          },\n          callback: item => {\n            const result = { ...item,\n              projects: [...item.projects, project.id]\n            };\n            dispatch(setUserFolder(result));\n          }\n        })\n      }),\n      onAboutMore: recall(onUserAboutMore, {\n        user: project\n      }),\n      onDelete: recall(onProjectDelete, {\n        id: project.id,\n        project,\n        auth: user,\n        mutation: queries.DELETE_PROJECT\n      }),\n      onEdit: recall(onProjectEdit, {\n        id: project.id,\n        companies: store.companies,\n        categories: store.categories,\n        statuses: store.statuses,\n        canEditStatus,\n        mutation: queries.UPDATE_PROJECT,\n        query: queries.GET_USERS,\n        onCompanyInputChange: mutate(queries.GET_USERS, {\n          account: 'ENTITY'\n        })\n      }),\n      preview: true\n    })));\n  })));\n};\n\n_s(Projects, \"rg1fjeEZnKoSgUaBgdOxxrHT1+I=\", false, function () {\n  return [useHelper, useMutate, useSelector, useDispatch];\n});\n\n_c = Projects;\nexport var __N_SSP = true;\nexport default Projects;\n\nvar _c;\n\n$RefreshReg$(_c, \"Projects\");","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/pages/dashboard/projects.js"],"names":["React","useState","useEffect","useMemo","useSelector","useDispatch","Grid","Table","templates","useHelper","useMutate","ContentLayout","ProjectCard","LazyLoad","FadeLoad","onProjectCreate","onProjectEdit","onProjectDelete","onProjectLink","onProjectAdd","onProjectScreenshot","setDocuments","getLabelCategory","setUserFolder","updateUser","onUserAboutMore","queries","TITLE","START_OFFSET","LIMIT","Projects","store","recall","mutate","user","documents","state","dispatch","displayMethod","onChangeDisplayMethod","canEditStatus","role","name","type","options","categories","map","category","value","id","label","icon","buttonCreateText","onCreate","companies","statuses","mutation","CREATE_PROJECT","query","GET_USERS","item","GET_PROJECTS","status","projects","project","auth","DELETE_PROJECT","UPDATE_PROJECT","onCompanyInputChange","account","overflowX","width","_","key","screenshots","preview","email","added","folders","find","folder","liked","rating","onLike","LIKE_PROJECT","response","data","likeProject","onAdd","mutations","addProject","ADD_USER_PROJECT","createFolder","ADD_USER_FOLDER","callback","result"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useMemo } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n\nimport Grid from '../../atomic-ui/components/Grid'\nimport Table from '../../atomic-ui/components/Table'\nimport templates from '../../atomic-ui/components/Table/templates'\n\nimport { initializeApollo } from '../../apollo'\nimport { useHelper } from '../../hooks/useHelper'\nimport { useMutate } from '../../hooks/useMutate'\nimport ContentLayout from '../../layouts/content'\nimport ProjectCard from '../../components/ProjectCard'\nimport LazyLoad from '../../components/LazyLoad'\nimport FadeLoad from '../../components/FadeLoad'\nimport {\n  onProjectCreate,\n  onProjectEdit,\n  onProjectDelete,\n  onProjectLink,\n  onProjectAdd,\n  onProjectScreenshot\n} from '../../store/helpers/project'\nimport { setDocuments } from '../../store/actions/documents'\nimport { getLabelCategory } from '../../atomic-ui/utils/functions'\nimport { setUserFolder, updateUser } from '../../store/actions/user'\nimport { onUserAboutMore } from '../../store/helpers/user'\nimport queries from '../../graphql/queries'\n\nconst TITLE = 'Проекты'\nconst START_OFFSET = 12\nconst LIMIT = 12\n\nconst Projects = ({ store }) => {\n  const recall = useHelper()\n  const mutate = useMutate()\n  const { user, documents } = useSelector((state) => ({\n    user: state.user,\n    documents: state.documents\n  }))\n  const dispatch = useDispatch()\n  const [displayMethod, onChangeDisplayMethod] = useState('grid')\n  const canEditStatus = useMemo(() => user && user.role.name === 'ADMIN', [user])\n\n  useEffect(() => {\n    dispatch(setDocuments(null))\n  }, [])\n\n  return (\n    <ContentLayout\n      title={TITLE}\n      filters={[\n        { type: 'DATEPICKER' },\n        {\n          type: 'SELECT',\n          options: store?.categories.map((category) => ({\n            value: category.id,\n            label: getLabelCategory(category.name)\n          }))\n        }\n      ]}\n      options={[\n        { label: 'Компания', value: 'company' },\n        { label: 'Участники', value: 'members' },\n        { label: 'Дата публикации', value: 'createdAt' }\n      ]}\n      handle={{\n        icon: 'work',\n        buttonCreateText: 'Создать проект',\n        onCreate: recall(onProjectCreate, {\n          companies: store.companies,\n          categories: store.categories,\n          statuses: store.statuses,\n          canEditStatus,\n          mutation: queries.CREATE_PROJECT,\n          query: queries.GET_USERS\n        }),\n        onChangeDisplayMethod: (item) => onChangeDisplayMethod(item.value)\n      }}\n      limit={LIMIT}\n      startOffset={START_OFFSET}\n      bottomScrollOffset={0}\n      query={queries.GET_PROJECTS}\n      variables={{ status: 'PUBLISHED' }}\n      store={{ documents: documents || store.projects }}\n      dashboard>\n      {({ documents }) =>\n        displayMethod === 'list' ? (\n          <Table\n            data={documents}\n            template={templates.project}\n            onChecked={() => {}}\n            onClick={(project) => recall(onProjectLink, { id: project.id, auth: user })()}\n            onDelete={(project) =>\n              recall(onProjectDelete, {\n                id: project.id,\n                project,\n                auth: user,\n                mutation: queries.DELETE_PROJECT\n              })()\n            }\n            onEdit={(project) =>\n              recall(onProjectEdit, {\n                id: project.id,\n                companies: store.companies,\n                categories: store.categories,\n                statuses: store.statuses,\n                canEditStatus,\n                mutation: queries.UPDATE_PROJECT,\n                query: queries.GET_USERS,\n                onCompanyInputChange: mutate(queries.GET_USERS, { account: 'ENTITY' })\n              })()\n            }\n            style={{ overflowX: 'auto', width: 'calc(100vw - 290px)' }}\n          />\n        ) : (\n          <Grid>\n            {documents.map((project) => (\n              <FadeLoad key={project.id}>\n                <LazyLoad>\n                  <ProjectCard\n                    project={project}\n                    onChecked={() => {}}\n                    onScreenshotClick={(_, key) =>\n                      recall(onProjectScreenshot, {\n                        screenshots: [project.preview, ...project.screenshots],\n                        key\n                      })()\n                    }\n                    onLink={recall(onProjectLink, {\n                      id: project.id,\n                      auth: user?.email,\n                      added: !!user?.folders?.find(\n                        (folder) => !!folder?.projects.find((item) => item === project.id)\n                      ),\n                      liked: !!(project.rating || []).find((item) => item.email === user.email),\n                      onLike:\n                        user.email &&\n                        mutate(queries.LIKE_PROJECT, { id: project.id }, (response) =>\n                          dispatch(updateUser(response.data.likeProject))\n                        ),\n                      onAdd:\n                        user.email &&\n                        recall(onProjectAdd, {\n                          id: project.id,\n                          folders: user?.folders,\n                          mutations: {\n                            addProject: queries.ADD_USER_PROJECT,\n                            createFolder: queries.ADD_USER_FOLDER\n                          },\n                          callback: (item) => {\n                            const result = { ...item, projects: [...item.projects, project.id] }\n                            dispatch(setUserFolder(result))\n                          }\n                        })\n                    })}\n                    onAboutMore={recall(onUserAboutMore, { user: project })}\n                    onDelete={recall(onProjectDelete, {\n                      id: project.id,\n                      project,\n                      auth: user,\n                      mutation: queries.DELETE_PROJECT\n                    })}\n                    onEdit={recall(onProjectEdit, {\n                      id: project.id,\n                      companies: store.companies,\n                      categories: store.categories,\n                      statuses: store.statuses,\n                      canEditStatus,\n                      mutation: queries.UPDATE_PROJECT,\n                      query: queries.GET_USERS,\n                      onCompanyInputChange: mutate(queries.GET_USERS, { account: 'ENTITY' })\n                    })}\n                    preview\n                  />\n                </LazyLoad>\n              </FadeLoad>\n            ))}\n          </Grid>\n        )\n      }\n    </ContentLayout>\n  )\n}\n\nexport async function getServerSideProps() {\n  const client = initializeApollo()\n\n  let projects = []\n  let companies = []\n  let categories = []\n  let statuses = []\n\n  try {\n    const response = await client.query({\n      query: queries.GET_META_DASHBOARD_PROJECTS,\n      variables: {\n        offset: 0,\n        limit: LIMIT,\n        account: ['ENTITY']\n      }\n    })\n\n    if (response && response.data) {\n      projects = response.data.getProjects\n      companies = response.data.getUsers\n      categories = response.data.getCategories\n      statuses = response.data.getPostStatus\n    }\n  } catch (err) {\n    console.log(err)\n  }\n\n  return {\n    props: {\n      store: {\n        projects,\n        companies,\n        categories,\n        statuses\n      }\n    }\n  }\n}\n\nexport default Projects\n"]},"metadata":{},"sourceType":"module"}