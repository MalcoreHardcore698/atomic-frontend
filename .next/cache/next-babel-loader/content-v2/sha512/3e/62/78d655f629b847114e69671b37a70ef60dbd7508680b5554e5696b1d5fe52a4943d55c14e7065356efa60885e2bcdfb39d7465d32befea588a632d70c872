{"ast":null,"code":"import React from 'react';\nimport RoleForm from '../../components/FormRole';\nimport DeleteForm from '../../components/FormDelete';\nimport RoleView from '../../components/RoleView';\nimport RoleCard from '../../components/RoleCard';\nimport { setDocuments } from '../actions/documents';\nimport { setDrawer } from '../actions/drawer';\nimport { setItem } from '../actions/snacks';\nexport function onRoleLink(dispatch, props) {\n  const {\n    id\n  } = props;\n  dispatch(setDrawer({\n    icon: 'lock',\n    title: 'Роль',\n    content: /*#__PURE__*/React.createElement(RoleView, {\n      role: id,\n      appearance: 'clear'\n    })\n  }));\n}\nexport function onRoleCreate(dispatch, props) {\n  const {\n    permissions,\n    mutation,\n    onAfter\n  } = props;\n  dispatch(setDrawer({\n    icon: 'lock',\n    title: 'Создание роли',\n    content: /*#__PURE__*/React.createElement(RoleForm, {\n      mutation: mutation,\n      permissions: permissions,\n      appearance: 'clear',\n      onSubmit: async (form, action) => {\n        try {\n          const roles = await action({\n            variables: {\n              input: {\n                name: form.name,\n                permissions: form.permissions.map(permission => permission.value)\n              }\n            }\n          });\n          dispatch(setDocuments(roles.data.createRole));\n          dispatch(setDrawer(null));\n          dispatch(setItem({\n            type: 'success',\n            message: 'Роль успешно создана'\n          }));\n          if (onAfter) onAfter();\n        } catch (_unused) {\n          dispatch(setDrawer(null));\n          dispatch(setItem({\n            type: 'error',\n            message: 'Не удалось создать роль'\n          }));\n        }\n      }\n    })\n  }));\n}\nexport function onRoleEdit(dispatch, props) {\n  const {\n    role,\n    permissions,\n    mutation,\n    onAfter\n  } = props;\n  dispatch(setDrawer({\n    icon: 'lock',\n    title: 'Редактирование роли',\n    content: /*#__PURE__*/React.createElement(RoleForm, {\n      role: role,\n      mutation: mutation,\n      permissions: permissions,\n      appearance: 'clear',\n      onSubmit: async (form, action) => {\n        try {\n          const roles = await action({\n            variables: {\n              id: role.id,\n              input: {\n                name: form.name,\n                permissions: form.permissions.map(permission => permission.value)\n              }\n            }\n          });\n          dispatch(setDocuments(roles.data.updateRole));\n          dispatch(setDrawer(null));\n          dispatch(setItem({\n            type: 'success',\n            message: 'Роль успешно отредактирована'\n          }));\n          if (onAfter) onAfter();\n        } catch (_unused2) {\n          dispatch(setDrawer(null));\n          dispatch(setItem({\n            type: 'error',\n            message: 'Не удалось отредактировать роль'\n          }));\n        }\n      }\n    })\n  }));\n}\nexport function onRoleDelete(dispatch, props) {\n  const {\n    id,\n    role,\n    mutation\n  } = props;\n  dispatch(setDrawer({\n    icon: 'delete',\n    color: 'red',\n    title: 'Удаление роли',\n    content: /*#__PURE__*/React.createElement(DeleteForm, {\n      mutation: mutation,\n      appearance: 'clear',\n      onCancel: () => dispatch(setDrawer(null)),\n      onSubmit: async (_, action) => {\n        try {\n          const roles = await action({\n            variables: {\n              id\n            }\n          });\n          dispatch(setDocuments(roles.data.deleteRole));\n          dispatch(setItem({\n            type: 'success',\n            message: 'Роль успешно удалена'\n          }));\n        } catch (_unused3) {\n          dispatch(setItem({\n            type: 'error',\n            message: 'Не удалось удалить роль'\n          }));\n        } finally {\n          dispatch(setDrawer(null));\n        }\n      }\n    }, /*#__PURE__*/React.createElement(RoleCard, {\n      role: role,\n      appearance: 'clear'\n    }))\n  }));\n}","map":{"version":3,"sources":["/Users/malcore/Documents/workspace/freelance/atomic/atomic-frontend/store/helpers/role.js"],"names":["React","RoleForm","DeleteForm","RoleView","RoleCard","setDocuments","setDrawer","setItem","onRoleLink","dispatch","props","id","icon","title","content","onRoleCreate","permissions","mutation","onAfter","form","action","roles","variables","input","name","map","permission","value","data","createRole","type","message","onRoleEdit","role","updateRole","onRoleDelete","color","_","deleteRole"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport RoleForm from '../../components/FormRole'\nimport DeleteForm from '../../components/FormDelete'\nimport RoleView from '../../components/RoleView'\nimport RoleCard from '../../components/RoleCard'\nimport { setDocuments } from '../actions/documents'\nimport { setDrawer } from '../actions/drawer'\nimport { setItem } from '../actions/snacks'\n\nexport function onRoleLink(dispatch, props) {\n  const { id } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'lock',\n      title: 'Роль',\n      content: <RoleView role={id} appearance={'clear'} />\n    })\n  )\n}\n\nexport function onRoleCreate(dispatch, props) {\n  const { permissions, mutation, onAfter } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'lock',\n      title: 'Создание роли',\n      content: (\n        <RoleForm\n          mutation={mutation}\n          permissions={permissions}\n          appearance={'clear'}\n          onSubmit={async (form, action) => {\n            try {\n              const roles = await action({\n                variables: {\n                  input: {\n                    name: form.name,\n                    permissions: form.permissions.map((permission) => permission.value)\n                  }\n                }\n              })\n              dispatch(setDocuments(roles.data.createRole))\n              dispatch(setDrawer(null))\n              dispatch(\n                setItem({\n                  type: 'success',\n                  message: 'Роль успешно создана'\n                })\n              )\n              if (onAfter) onAfter()\n            } catch {\n              dispatch(setDrawer(null))\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось создать роль'\n                })\n              )\n            }\n          }}\n        />\n      )\n    })\n  )\n}\n\nexport function onRoleEdit(dispatch, props) {\n  const { role, permissions, mutation, onAfter } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'lock',\n      title: 'Редактирование роли',\n      content: (\n        <RoleForm\n          role={role}\n          mutation={mutation}\n          permissions={permissions}\n          appearance={'clear'}\n          onSubmit={async (form, action) => {\n            try {\n              const roles = await action({\n                variables: {\n                  id: role.id,\n                  input: {\n                    name: form.name,\n                    permissions: form.permissions.map((permission) => permission.value)\n                  }\n                }\n              })\n              dispatch(setDocuments(roles.data.updateRole))\n              dispatch(setDrawer(null))\n              dispatch(\n                setItem({\n                  type: 'success',\n                  message: 'Роль успешно отредактирована'\n                })\n              )\n              if (onAfter) onAfter()\n            } catch {\n              dispatch(setDrawer(null))\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось отредактировать роль'\n                })\n              )\n            }\n          }}\n        />\n      )\n    })\n  )\n}\n\nexport function onRoleDelete(dispatch, props) {\n  const { id, role, mutation } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'delete',\n      color: 'red',\n      title: 'Удаление роли',\n      content: (\n        <DeleteForm\n          mutation={mutation}\n          appearance={'clear'}\n          onCancel={() => dispatch(setDrawer(null))}\n          onSubmit={async (_, action) => {\n            try {\n              const roles = await action({\n                variables: { id }\n              })\n              dispatch(setDocuments(roles.data.deleteRole))\n              dispatch(\n                setItem({\n                  type: 'success',\n                  message: 'Роль успешно удалена'\n                })\n              )\n            } catch {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось удалить роль'\n                })\n              )\n            } finally {\n              dispatch(setDrawer(null))\n            }\n          }}>\n          <RoleCard role={role} appearance={'clear'} />\n        </DeleteForm>\n      )\n    })\n  )\n}\n"]},"metadata":{},"sourceType":"module"}