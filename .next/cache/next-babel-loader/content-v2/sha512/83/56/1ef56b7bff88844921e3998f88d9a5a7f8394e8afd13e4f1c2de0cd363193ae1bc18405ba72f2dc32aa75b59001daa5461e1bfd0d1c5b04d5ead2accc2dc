{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dan82\\\\Documents\\\\workspace\\\\FREELANCE\\\\atomic\\\\atomic-frontend\\\\atomic-ui\\\\components\\\\CharacteristicEditor\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport styled, { css } from 'styled-components';\nimport { v4 } from 'uuid';\nimport Row from '../Row';\nimport Column from '../Column';\nimport Button from '../Button';\nimport Tooltip from '../Tooltip';\nimport Divider from '../Divider';\nimport { Label } from '../Difinition';\nimport Input from '../Input';\nimport Alert from '../Alert';\nimport Text from '../Text';\nimport Icon from '../Icon';\nimport Title from '../Title';\nconst MAX_LIMIT_VALUE = 256;\nconst MIN_LIMIT_VALUE = 0;\nexport const Wrap = styled(Column)`\n  grid-gap: 0;\n`;\nexport const Container = styled(Column)`\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  max-width: 100%;\n  flex-grow: 1;\n  grid-gap: 5px;\n  margin-bottom: var(--default-gap);\n`;\nexport const List = styled(Column)`\n  grid-gap: 5px 0;\n\n  ${({\n  readOnly\n}) => readOnly && css`\n      display: grid;\n      grid-template-columns: repeat(auto-fit, minmax(245px, 1fr));\n      padding: 2px;\n      grid-gap: 15px;\n    `}\n`;\nexport const InputLabel = styled(Text)`\n  font-size: var(--font-size-s);\n`;\nexport const Item = styled(Row)`\n  justify-content: space-between;\n  align-items: center;\n  flex-grow: 1;\n  grid-gap: 5px;\n`;\nexport const Header = styled(Row)`\n  flex-grow: 1;\n  grid-gap: 10px;\n\n  label:first-child {\n    flex-grow: 1;\n  }\n\n  label:last-child {\n    flex-grow: 4;\n  }\n\n  ${({\n  readOnly\n}) => readOnly && css`\n      flex-direction: column;\n    `}\n`;\nexport const Actions = styled(Row)`\n  align-items: center;\n  grid-gap: 5px;\n\n  button {\n    width: 100%;\n    flex-grow: 1;\n\n    & > i {\n      height: 100%;\n      width: 100%;\n\n      & > svg {\n        transform: scale(0.35);\n      }\n    }\n  }\n`;\nexport const AddButton = styled(Button)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  grid-gap: 10px;\n\n  span {\n    white-space: nowrap;\n  }\n\n  @media only screen and (max-width: 996px) {\n    width: 100%;\n  }\n`;\nexport const Trunks = styled.div`\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  grid-gap: 5px;\n\n  span {\n    background: var(--default-color-accent);\n    border-radius: var(--surface-border-radius);\n    width: 4px;\n    min-height: 16px;\n\n    ${({\n  value\n}) => value < 9 && css`\n        width: 12px;\n        border-radius: 4px;\n      `}\n  }\n`;\nexport const Value = styled(Title)`\n  font-weight: var(--font-weight-bold);\n  line-height: 1;\n\n  @media only screen and (max-width: 480px) {\n    font-size: var(--font-size-l);\n  }\n`;\n\nconst getValue = val => {\n  const number = Number(val);\n  if (number > MAX_LIMIT_VALUE) return MAX_LIMIT_VALUE;\n  if (number < MIN_LIMIT_VALUE) return MIN_LIMIT_VALUE;\n  return val;\n};\n\nexport const ListItem = ({\n  item,\n  readOnly,\n  divided,\n  onEdit,\n  onDelete\n}) => {\n  return __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 5\n    }\n  }, __jsx(Item, {\n    readOnly: readOnly,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }, __jsx(Header, {\n    readOnly: readOnly,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 9\n    }\n  }, readOnly && item.isVisualize && !isNaN(item.value) ? __jsx(Trunks, {\n    value: item.value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, new Array(Number(item.value)).fill(null).map((_, i) => __jsx(\"span\", {\n    key: i,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 71\n    }\n  }))) : null, readOnly && !item.isVisualize ? __jsx(Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, item.name) : null, readOnly ? __jsx(Value, {\n    tag: 'h4',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }, item.value) : null, !readOnly && __jsx(Input, {\n    type: 'text',\n    defaultValue: item.value,\n    appearance: 'ghost',\n    placeholder: 'Значение',\n    onChange: e => onEdit && onEdit(_objectSpread(_objectSpread({}, item), {}, {\n      value: getValue(e.target.value),\n      isVisualize: !isNaN(item.value)\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }), !readOnly && __jsx(Input, {\n    type: 'text',\n    defaultValue: item.name,\n    appearance: 'ghost',\n    placeholder: 'Введите название',\n    onChange: e => onEdit && onEdit(_objectSpread(_objectSpread({}, item), {}, {\n      name: e.target.value\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  })), !readOnly && __jsx(Actions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 11\n    }\n  }, __jsx(Tooltip, {\n    text: 'Визуализировать (только цифры)',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  }, __jsx(Button, {\n    size: 'xs',\n    kind: 'icon',\n    revert: !item.isVisualize,\n    onClick: () => onEdit && onEdit(_objectSpread(_objectSpread({}, item), {}, {\n      value: !isNaN(item.value) ? item.value : MIN_LIMIT_VALUE,\n      isVisualize: !item.isVisualize\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 15\n    }\n  }, __jsx(Icon, {\n    size: 'xs',\n    icon: 'graph',\n    stroke: item.isVisualize ? 'white' : 'var(--default-color-accent)',\n    fill: 'var(--default-color-accent)',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 17\n    }\n  }))), onDelete && __jsx(Tooltip, {\n    text: 'Удалить',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    size: 'xs',\n    kind: 'icon',\n    appearance: 'ghost',\n    stroke: 'none',\n    onClick: () => onDelete(item),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 17\n    }\n  }, __jsx(Icon, {\n    icon: 'delete',\n    stroke: 'none',\n    fill: 'var(--default-color-red)',\n    size: 'xs',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 19\n    }\n  }))))), !readOnly && divided && __jsx(Divider, {\n    clear: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 32\n    }\n  }));\n};\nexport const InteractiveList = ({\n  list,\n  readOnly,\n  onChange\n}) => {\n  const onEdit = edited => {\n    const mapped = prev => prev.map(item => (item === null || item === void 0 ? void 0 : item.id) === (edited === null || edited === void 0 ? void 0 : edited.id) ? edited : item);\n\n    if (onChange) onChange(mapped);\n  };\n\n  const onDelete = deleted => {\n    const filtered = prev => prev.filter(item => (item === null || item === void 0 ? void 0 : item.id) !== (deleted === null || deleted === void 0 ? void 0 : deleted.id));\n\n    if (onChange) onChange(filtered);\n  };\n\n  return __jsx(List, {\n    readOnly: readOnly,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 5\n    }\n  }, (list || []).length === 0 && __jsx(Alert, {\n    style: {\n      width: '100%',\n      textAlign: 'center',\n      flexGrow: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 9\n    }\n  }, \"\\u041F\\u0443\\u0441\\u0442\\u043E\"), (list || []).map((item, index) => __jsx(ListItem, {\n    key: item === null || item === void 0 ? void 0 : item.id,\n    item: item,\n    readOnly: readOnly,\n    divided: (list || []).length - 1 !== index,\n    onDelete: onDelete,\n    onEdit: onEdit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 9\n    }\n  })));\n};\nexport const CharacteristicEditor = ({\n  label,\n  defaultValue,\n  readOnly,\n  onChange\n}) => {\n  const {\n    0: characteristics,\n    1: setCharacteristics\n  } = useState(defaultValue || []);\n\n  const onAdd = () => {\n    const name = 'Новое учебное помещение';\n    const item = {\n      id: v4(),\n      name,\n      value: null,\n      isVisualize: null\n    };\n    setCharacteristics(prev => [...prev, item]);\n  };\n\n  useEffect(() => {\n    if (onChange) onChange(characteristics);\n  }, [characteristics, onChange]);\n  useEffect(() => {\n    setCharacteristics(defaultValue);\n  }, [defaultValue]);\n\n  if (readOnly && characteristics.length === 0) {\n    return null;\n  }\n\n  return __jsx(Wrap, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 5\n    }\n  }, __jsx(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }\n  }, label && __jsx(InputLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 19\n    }\n  }, label), __jsx(InteractiveList, {\n    list: characteristics,\n    onChange: setCharacteristics,\n    readOnly: readOnly,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 9\n    }\n  }), !readOnly && __jsx(AddButton, {\n    type: 'button',\n    onClick: onAdd,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 13\n    }\n  }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"), __jsx(Icon, {\n    type: 'button',\n    icon: 'add',\n    stroke: 'white',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 13\n    }\n  }))));\n};\nexport default CharacteristicEditor;","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/atomic-ui/components/CharacteristicEditor/index.js"],"names":["React","useState","useEffect","styled","css","v4","Row","Column","Button","Tooltip","Divider","Label","Input","Alert","Text","Icon","Title","MAX_LIMIT_VALUE","MIN_LIMIT_VALUE","Wrap","Container","List","readOnly","InputLabel","Item","Header","Actions","AddButton","Trunks","div","value","Value","getValue","val","number","Number","ListItem","item","divided","onEdit","onDelete","isVisualize","isNaN","Array","fill","map","_","i","name","e","target","InteractiveList","list","onChange","edited","mapped","prev","id","deleted","filtered","filter","length","width","textAlign","flexGrow","index","CharacteristicEditor","label","defaultValue","characteristics","setCharacteristics","onAdd"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,MAAP,IAAiBC,GAAjB,QAA4B,mBAA5B;AACA,SAASC,EAAT,QAAmB,MAAnB;AAEA,OAAOC,GAAP,MAAgB,QAAhB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,SAASC,KAAT,QAAsB,eAAtB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAEA,MAAMC,eAAe,GAAG,GAAxB;AACA,MAAMC,eAAe,GAAG,CAAxB;AAEA,OAAO,MAAMC,IAAI,GAAGhB,MAAM,CAACI,MAAD,CAAS;AACnC;AACA,CAFO;AAIP,OAAO,MAAMa,SAAS,GAAGjB,MAAM,CAACI,MAAD,CAAS;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CARO;AAUP,OAAO,MAAMc,IAAI,GAAGlB,MAAM,CAACI,MAAD,CAAS;AACnC;AACA;AACA,IAAI,CAAC;AAAEe,EAAAA;AAAF,CAAD,KACAA,QAAQ,IACRlB,GAAI;AACR;AACA;AACA;AACA;AACA,KAAM;AACN,CAXO;AAaP,OAAO,MAAMmB,UAAU,GAAGpB,MAAM,CAACW,IAAD,CAAO;AACvC;AACA,CAFO;AAIP,OAAO,MAAMU,IAAI,GAAGrB,MAAM,CAACG,GAAD,CAAM;AAChC;AACA;AACA;AACA;AACA,CALO;AAOP,OAAO,MAAMmB,MAAM,GAAGtB,MAAM,CAACG,GAAD,CAAM;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,CAAC;AAAEgB,EAAAA;AAAF,CAAD,KACAA,QAAQ,IACRlB,GAAI;AACR;AACA,KAAM;AACN,CAjBO;AAmBP,OAAO,MAAMsB,OAAO,GAAGvB,MAAM,CAACG,GAAD,CAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAjBO;AAmBP,OAAO,MAAMqB,SAAS,GAAGxB,MAAM,CAACK,MAAD,CAAS;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAbO;AAeP,OAAO,MAAMoB,MAAM,GAAGzB,MAAM,CAAC0B,GAAI;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,CAAC;AAAEC,EAAAA;AAAF,CAAD,KACAA,KAAK,GAAG,CAAR,IACA1B,GAAI;AACV;AACA;AACA,OAAQ;AACR;AACA,CAnBO;AAqBP,OAAO,MAAM2B,KAAK,GAAG5B,MAAM,CAACa,KAAD,CAAQ;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,CAPO;;AASP,MAAMgB,QAAQ,GAAIC,GAAD,IAAS;AACxB,QAAMC,MAAM,GAAGC,MAAM,CAACF,GAAD,CAArB;AACA,MAAIC,MAAM,GAAGjB,eAAb,EAA8B,OAAOA,eAAP;AAC9B,MAAIiB,MAAM,GAAGhB,eAAb,EAA8B,OAAOA,eAAP;AAC9B,SAAOe,GAAP;AACD,CALD;;AAOA,OAAO,MAAMG,QAAQ,GAAG,CAAC;AAAEC,EAAAA,IAAF;AAAQf,EAAAA,QAAR;AAAkBgB,EAAAA,OAAlB;AAA2BC,EAAAA,MAA3B;AAAmCC,EAAAA;AAAnC,CAAD,KAAmD;AACzE,SACE,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,QAAQ,EAAElB,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AAAQ,IAAA,QAAQ,EAAEA,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACIA,QAAQ,IAAIe,IAAI,CAACI,WAAjB,IAAgC,CAACC,KAAK,CAACL,IAAI,CAACP,KAAN,CAAvC,GACC,MAAC,MAAD;AAAQ,IAAA,KAAK,EAAEO,IAAI,CAACP,KAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,IAAIa,KAAJ,CAAUR,MAAM,CAACE,IAAI,CAACP,KAAN,CAAhB,EAA8Bc,IAA9B,CAAmC,IAAnC,EAAyCC,GAAzC,CAA6C,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAAM,IAAA,GAAG,EAAEA,CAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAvD,CADH,CADD,GAIG,IALN,EAOIzB,QAAQ,IAAI,CAACe,IAAI,CAACI,WAAnB,GACC,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGJ,IAAI,CAACW,IADR,CADD,GAIG,IAXN,EAaG1B,QAAQ,GACP,MAAC,KAAD;AAAO,IAAA,GAAG,EAAE,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGe,IAAI,CAACP,KADR,CADO,GAIL,IAjBN,EAmBG,CAACR,QAAD,IACC,MAAC,KAAD;AACE,IAAA,IAAI,EAAE,MADR;AAEE,IAAA,YAAY,EAAEe,IAAI,CAACP,KAFrB;AAGE,IAAA,UAAU,EAAE,OAHd;AAIE,IAAA,WAAW,EAAE,UAJf;AAKE,IAAA,QAAQ,EAAGmB,CAAD,IACRV,MAAM,IAAIA,MAAM,iCACXF,IADW;AAEdP,MAAAA,KAAK,EAAEE,QAAQ,CAACiB,CAAC,CAACC,MAAF,CAASpB,KAAV,CAFD;AAGdW,MAAAA,WAAW,EAAE,CAACC,KAAK,CAACL,IAAI,CAACP,KAAN;AAHL,OANpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApBJ,EAkCG,CAACR,QAAD,IACC,MAAC,KAAD;AACE,IAAA,IAAI,EAAE,MADR;AAEE,IAAA,YAAY,EAAEe,IAAI,CAACW,IAFrB;AAGE,IAAA,UAAU,EAAE,OAHd;AAIE,IAAA,WAAW,EAAE,kBAJf;AAKE,IAAA,QAAQ,EAAGC,CAAD,IAAOV,MAAM,IAAIA,MAAM,iCAAMF,IAAN;AAAYW,MAAAA,IAAI,EAAEC,CAAC,CAACC,MAAF,CAASpB;AAA3B,OALnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAnCJ,CADF,EA8CG,CAACR,QAAD,IACC,MAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,OAAD;AAAS,IAAA,IAAI,EAAE,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,IAAI,EAAE,IADR;AAEE,IAAA,IAAI,EAAE,MAFR;AAGE,IAAA,MAAM,EAAE,CAACe,IAAI,CAACI,WAHhB;AAIE,IAAA,OAAO,EAAE,MACPF,MAAM,IAAIA,MAAM,iCACXF,IADW;AAEdP,MAAAA,KAAK,EAAE,CAACY,KAAK,CAACL,IAAI,CAACP,KAAN,CAAN,GAAqBO,IAAI,CAACP,KAA1B,GAAkCZ,eAF3B;AAGduB,MAAAA,WAAW,EAAE,CAACJ,IAAI,CAACI;AAHL,OALpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAWE,MAAC,IAAD;AACE,IAAA,IAAI,EAAE,IADR;AAEE,IAAA,IAAI,EAAE,OAFR;AAGE,IAAA,MAAM,EAAEJ,IAAI,CAACI,WAAL,GAAmB,OAAnB,GAA6B,6BAHvC;AAIE,IAAA,IAAI,EAAE,6BAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,CADF,CADF,EAqBGD,QAAQ,IACP,MAAC,OAAD;AAAS,IAAA,IAAI,EAAE,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,MAAD;AACE,IAAA,IAAI,EAAE,IADR;AAEE,IAAA,IAAI,EAAE,MAFR;AAGE,IAAA,UAAU,EAAE,OAHd;AAIE,IAAA,MAAM,EAAE,MAJV;AAKE,IAAA,OAAO,EAAE,MAAMA,QAAQ,CAACH,IAAD,CALzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAME,MAAC,IAAD;AACE,IAAA,IAAI,EAAE,QADR;AAEE,IAAA,MAAM,EAAE,MAFV;AAGE,IAAA,IAAI,EAAE,0BAHR;AAIE,IAAA,IAAI,EAAE,IAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CADF,CAtBJ,CA/CJ,CADF,EAyFG,CAACf,QAAD,IAAagB,OAAb,IAAwB,MAAC,OAAD;AAAS,IAAA,KAAK,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAzF3B,CADF;AA6FD,CA9FM;AAgGP,OAAO,MAAMa,eAAe,GAAG,CAAC;AAAEC,EAAAA,IAAF;AAAQ9B,EAAAA,QAAR;AAAkB+B,EAAAA;AAAlB,CAAD,KAAkC;AAC/D,QAAMd,MAAM,GAAIe,MAAD,IAAY;AACzB,UAAMC,MAAM,GAAIC,IAAD,IAAUA,IAAI,CAACX,GAAL,CAAUR,IAAD,IAAW,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEoB,EAAN,OAAaH,MAAb,aAAaA,MAAb,uBAAaA,MAAM,CAAEG,EAArB,IAA0BH,MAA1B,GAAmCjB,IAAvD,CAAzB;;AACA,QAAIgB,QAAJ,EAAcA,QAAQ,CAACE,MAAD,CAAR;AACf,GAHD;;AAKA,QAAMf,QAAQ,GAAIkB,OAAD,IAAa;AAC5B,UAAMC,QAAQ,GAAIH,IAAD,IAAUA,IAAI,CAACI,MAAL,CAAavB,IAAD,IAAU,CAAAA,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEoB,EAAN,OAAaC,OAAb,aAAaA,OAAb,uBAAaA,OAAO,CAAED,EAAtB,CAAtB,CAA3B;;AACA,QAAIJ,QAAJ,EAAcA,QAAQ,CAACM,QAAD,CAAR;AACf,GAHD;;AAKA,SACE,MAAC,IAAD;AAAM,IAAA,QAAQ,EAAErC,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAAC8B,IAAI,IAAI,EAAT,EAAaS,MAAb,KAAwB,CAAxB,IACC,MAAC,KAAD;AAAO,IAAA,KAAK,EAAE;AAAEC,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,SAAS,EAAE,QAA5B;AAAsCC,MAAAA,QAAQ,EAAE;AAAhD,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAFJ,EAIG,CAACZ,IAAI,IAAI,EAAT,EAAaP,GAAb,CAAiB,CAACR,IAAD,EAAO4B,KAAP,KAChB,MAAC,QAAD;AACE,IAAA,GAAG,EAAE5B,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEoB,EADb;AAEE,IAAA,IAAI,EAAEpB,IAFR;AAGE,IAAA,QAAQ,EAAEf,QAHZ;AAIE,IAAA,OAAO,EAAE,CAAC8B,IAAI,IAAI,EAAT,EAAaS,MAAb,GAAsB,CAAtB,KAA4BI,KAJvC;AAKE,IAAA,QAAQ,EAAEzB,QALZ;AAME,IAAA,MAAM,EAAED,MANV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CAJH,CADF;AAiBD,CA5BM;AA8BP,OAAO,MAAM2B,oBAAoB,GAAG,CAAC;AACnCC,EAAAA,KADmC;AAEnCC,EAAAA,YAFmC;AAGnC9C,EAAAA,QAHmC;AAInC+B,EAAAA;AAJmC,CAAD,KAK9B;AACJ,QAAM;AAAA,OAACgB,eAAD;AAAA,OAAkBC;AAAlB,MAAwCrE,QAAQ,CAACmE,YAAY,IAAI,EAAjB,CAAtD;;AAEA,QAAMG,KAAK,GAAG,MAAM;AAClB,UAAMvB,IAAI,GAAG,yBAAb;AACA,UAAMX,IAAI,GAAG;AAAEoB,MAAAA,EAAE,EAAEpD,EAAE,EAAR;AAAY2C,MAAAA,IAAZ;AAAkBlB,MAAAA,KAAK,EAAE,IAAzB;AAA+BW,MAAAA,WAAW,EAAE;AAA5C,KAAb;AACA6B,IAAAA,kBAAkB,CAAEd,IAAD,IAAU,CAAC,GAAGA,IAAJ,EAAUnB,IAAV,CAAX,CAAlB;AACD,GAJD;;AAMAnC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAImD,QAAJ,EAAcA,QAAQ,CAACgB,eAAD,CAAR;AACf,GAFQ,EAEN,CAACA,eAAD,EAAkBhB,QAAlB,CAFM,CAAT;AAIAnD,EAAAA,SAAS,CAAC,MAAM;AACdoE,IAAAA,kBAAkB,CAACF,YAAD,CAAlB;AACD,GAFQ,EAEN,CAACA,YAAD,CAFM,CAAT;;AAIA,MAAI9C,QAAQ,IAAI+C,eAAe,CAACR,MAAhB,KAA2B,CAA3C,EAA8C;AAC5C,WAAO,IAAP;AACD;;AAED,SACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGM,KAAK,IAAI,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAaA,KAAb,CADZ,EAGE,MAAC,eAAD;AACE,IAAA,IAAI,EAAEE,eADR;AAEE,IAAA,QAAQ,EAAEC,kBAFZ;AAGE,IAAA,QAAQ,EAAEhD,QAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,EASG,CAACA,QAAD,IACC,MAAC,SAAD;AAAW,IAAA,IAAI,EAAE,QAAjB;AAA2B,IAAA,OAAO,EAAEiD,KAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wDADF,EAEE,MAAC,IAAD;AAAM,IAAA,IAAI,EAAE,QAAZ;AAAsB,IAAA,IAAI,EAAE,KAA5B;AAAmC,IAAA,MAAM,EAAE,OAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAVJ,CADF,CADF;AAoBD,CA9CM;AAgDP,eAAeL,oBAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport styled, { css } from 'styled-components'\r\nimport { v4 } from 'uuid'\r\n\r\nimport Row from '../Row'\r\nimport Column from '../Column'\r\nimport Button from '../Button'\r\nimport Tooltip from '../Tooltip'\r\nimport Divider from '../Divider'\r\nimport { Label } from '../Difinition'\r\nimport Input from '../Input'\r\nimport Alert from '../Alert'\r\nimport Text from '../Text'\r\nimport Icon from '../Icon'\r\nimport Title from '../Title'\r\n\r\nconst MAX_LIMIT_VALUE = 256\r\nconst MIN_LIMIT_VALUE = 0\r\n\r\nexport const Wrap = styled(Column)`\r\n  grid-gap: 0;\r\n`\r\n\r\nexport const Container = styled(Column)`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  max-width: 100%;\r\n  flex-grow: 1;\r\n  grid-gap: 5px;\r\n  margin-bottom: var(--default-gap);\r\n`\r\n\r\nexport const List = styled(Column)`\r\n  grid-gap: 5px 0;\r\n\r\n  ${({ readOnly }) =>\r\n    readOnly &&\r\n    css`\r\n      display: grid;\r\n      grid-template-columns: repeat(auto-fit, minmax(245px, 1fr));\r\n      padding: 2px;\r\n      grid-gap: 15px;\r\n    `}\r\n`\r\n\r\nexport const InputLabel = styled(Text)`\r\n  font-size: var(--font-size-s);\r\n`\r\n\r\nexport const Item = styled(Row)`\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  flex-grow: 1;\r\n  grid-gap: 5px;\r\n`\r\n\r\nexport const Header = styled(Row)`\r\n  flex-grow: 1;\r\n  grid-gap: 10px;\r\n\r\n  label:first-child {\r\n    flex-grow: 1;\r\n  }\r\n\r\n  label:last-child {\r\n    flex-grow: 4;\r\n  }\r\n\r\n  ${({ readOnly }) =>\r\n    readOnly &&\r\n    css`\r\n      flex-direction: column;\r\n    `}\r\n`\r\n\r\nexport const Actions = styled(Row)`\r\n  align-items: center;\r\n  grid-gap: 5px;\r\n\r\n  button {\r\n    width: 100%;\r\n    flex-grow: 1;\r\n\r\n    & > i {\r\n      height: 100%;\r\n      width: 100%;\r\n\r\n      & > svg {\r\n        transform: scale(0.35);\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const AddButton = styled(Button)`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  grid-gap: 10px;\r\n\r\n  span {\r\n    white-space: nowrap;\r\n  }\r\n\r\n  @media only screen and (max-width: 996px) {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nexport const Trunks = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  grid-gap: 5px;\r\n\r\n  span {\r\n    background: var(--default-color-accent);\r\n    border-radius: var(--surface-border-radius);\r\n    width: 4px;\r\n    min-height: 16px;\r\n\r\n    ${({ value }) =>\r\n      value < 9 &&\r\n      css`\r\n        width: 12px;\r\n        border-radius: 4px;\r\n      `}\r\n  }\r\n`\r\n\r\nexport const Value = styled(Title)`\r\n  font-weight: var(--font-weight-bold);\r\n  line-height: 1;\r\n\r\n  @media only screen and (max-width: 480px) {\r\n    font-size: var(--font-size-l);\r\n  }\r\n`\r\n\r\nconst getValue = (val) => {\r\n  const number = Number(val)\r\n  if (number > MAX_LIMIT_VALUE) return MAX_LIMIT_VALUE\r\n  if (number < MIN_LIMIT_VALUE) return MIN_LIMIT_VALUE\r\n  return val\r\n}\r\n\r\nexport const ListItem = ({ item, readOnly, divided, onEdit, onDelete }) => {\r\n  return (\r\n    <React.Fragment>\r\n      <Item readOnly={readOnly}>\r\n        <Header readOnly={readOnly}>\r\n          {(readOnly && item.isVisualize && !isNaN(item.value)) ? (\r\n            <Trunks value={item.value}>\r\n              {new Array(Number(item.value)).fill(null).map((_, i) => <span key={i} />)}\r\n            </Trunks>\r\n          ) : null}\r\n\r\n          {(readOnly && !item.isVisualize) ? (\r\n            <Label>\r\n              {item.name}\r\n            </Label>\r\n          ) : null}\r\n\r\n          {readOnly ? (\r\n            <Value tag={'h4'}>\r\n              {item.value}\r\n            </Value>\r\n          ) : null}\r\n\r\n          {!readOnly && (\r\n            <Input\r\n              type={'text'}\r\n              defaultValue={item.value}\r\n              appearance={'ghost'}\r\n              placeholder={'Значение'}\r\n              onChange={(e) =>\r\n                onEdit && onEdit({\r\n                  ...item,\r\n                  value: getValue(e.target.value),\r\n                  isVisualize: !isNaN(item.value)\r\n                })\r\n              }\r\n            />\r\n          )}\r\n          {!readOnly && (\r\n            <Input\r\n              type={'text'}\r\n              defaultValue={item.name}\r\n              appearance={'ghost'}\r\n              placeholder={'Введите название'}\r\n              onChange={(e) => onEdit && onEdit({ ...item, name: e.target.value })}\r\n            />\r\n          )}\r\n        </Header>\r\n\r\n        {!readOnly && (\r\n          <Actions>\r\n            <Tooltip text={'Визуализировать (только цифры)'}>\r\n              <Button\r\n                size={'xs'}\r\n                kind={'icon'}\r\n                revert={!item.isVisualize}\r\n                onClick={() =>\r\n                  onEdit && onEdit({\r\n                    ...item,\r\n                    value: !isNaN(item.value) ? item.value : MIN_LIMIT_VALUE,\r\n                    isVisualize: !item.isVisualize\r\n                  })\r\n                }>\r\n                <Icon\r\n                  size={'xs'}\r\n                  icon={'graph'}\r\n                  stroke={item.isVisualize ? 'white' : 'var(--default-color-accent)'}\r\n                  fill={'var(--default-color-accent)'}\r\n                />\r\n              </Button>\r\n            </Tooltip>\r\n            {onDelete && (\r\n              <Tooltip text={'Удалить'}>\r\n                <Button\r\n                  size={'xs'}\r\n                  kind={'icon'}\r\n                  appearance={'ghost'}\r\n                  stroke={'none'}\r\n                  onClick={() => onDelete(item)}>\r\n                  <Icon\r\n                    icon={'delete'}\r\n                    stroke={'none'}\r\n                    fill={'var(--default-color-red)'}\r\n                    size={'xs'}\r\n                  />\r\n                </Button>\r\n              </Tooltip>\r\n            )}\r\n          </Actions>\r\n        )}\r\n      </Item>\r\n      {!readOnly && divided && <Divider clear />}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport const InteractiveList = ({ list, readOnly, onChange }) => {\r\n  const onEdit = (edited) => {\r\n    const mapped = (prev) => prev.map((item) => (item?.id === edited?.id ? edited : item))\r\n    if (onChange) onChange(mapped)\r\n  }\r\n\r\n  const onDelete = (deleted) => {\r\n    const filtered = (prev) => prev.filter((item) => item?.id !== deleted?.id)\r\n    if (onChange) onChange(filtered)\r\n  }\r\n\r\n  return (\r\n    <List readOnly={readOnly}>\r\n      {(list || []).length === 0 && (\r\n        <Alert style={{ width: '100%', textAlign: 'center', flexGrow: 1 }}>Пусто</Alert>\r\n      )}\r\n      {(list || []).map((item, index) => (\r\n        <ListItem\r\n          key={item?.id}\r\n          item={item}\r\n          readOnly={readOnly}\r\n          divided={(list || []).length - 1 !== index}\r\n          onDelete={onDelete}\r\n          onEdit={onEdit}\r\n        />\r\n      ))}\r\n    </List>\r\n  )\r\n}\r\n\r\nexport const CharacteristicEditor = ({\r\n  label,\r\n  defaultValue,\r\n  readOnly,\r\n  onChange\r\n}) => {\r\n  const [characteristics, setCharacteristics] = useState(defaultValue || [])\r\n\r\n  const onAdd = () => {\r\n    const name = 'Новое учебное помещение'\r\n    const item = { id: v4(), name, value: null, isVisualize: null }\r\n    setCharacteristics((prev) => [...prev, item])\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (onChange) onChange(characteristics)\r\n  }, [characteristics, onChange])\r\n\r\n  useEffect(() => {\r\n    setCharacteristics(defaultValue)\r\n  }, [defaultValue])\r\n\r\n  if (readOnly && characteristics.length === 0) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <Wrap>\r\n      <Container>\r\n        {label && <InputLabel>{label}</InputLabel>}\r\n\r\n        <InteractiveList\r\n          list={characteristics}\r\n          onChange={setCharacteristics}\r\n          readOnly={readOnly}\r\n        />\r\n\r\n        {!readOnly && (\r\n          <AddButton type={'button'} onClick={onAdd}>\r\n            <span>Добавить</span>\r\n            <Icon type={'button'} icon={'add'} stroke={'white'} />\r\n          </AddButton>\r\n        )}\r\n      </Container>\r\n    </Wrap>\r\n  )\r\n}\r\n\r\nexport default CharacteristicEditor\r\n"]},"metadata":{},"sourceType":"module"}