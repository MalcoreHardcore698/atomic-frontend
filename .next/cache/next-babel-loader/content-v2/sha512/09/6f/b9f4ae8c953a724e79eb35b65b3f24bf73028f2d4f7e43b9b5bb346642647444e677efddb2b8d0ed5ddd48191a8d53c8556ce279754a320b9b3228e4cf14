{"ast":null,"code":"import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport template from '../../atomic-ui/components/Table/templates/category';\nimport { useHelper } from '../../hooks/useHelper';\nimport TicketCard from '../../components/TicketCard';\nimport { onTicketCreate, onTicketEdit, onTicketLink } from '../../store/helpers/ticket';\nimport { onUserLink } from '../../store/helpers/user';\nimport { setDocuments } from '../../store/actions/documents';\nimport ContentLayout from '../../layouts/dashboard/content';\nimport queries from '../../graphql/queries';\nconst TITLE = 'Обращения';\nconst START_OFFSET = 0;\nconst LIMIT = 12;\n\nconst Tickets = () => {\n  const recall = useHelper();\n  const user = useSelector(state => state.user);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(setDocuments(null));\n  }, []);\n  return /*#__PURE__*/React.createElement(ContentLayout, {\n    title: TITLE,\n    limit: LIMIT,\n    icon: 'ticket',\n    template: template,\n    startOffset: START_OFFSET,\n    emptyMessage: 'Обращений нет',\n    buttonCreateText: 'Создать обращение',\n    getType: 'getTickets',\n    getQuery: queries.GET_TICKETS,\n    deleteQuery: queries.DELETE_TICKET,\n    deleteEntityMultiText: 'обращения',\n    deleteEntitySingleText: 'обращение',\n    onLink: ticket => recall(onTicketLink, {\n      id: ticket.id,\n      auth: user === null || user === void 0 ? void 0 : user.email\n    })(),\n    onEdit: ticket => recall(onTicketEdit, {\n      id: ticket.id,\n      mutation: queries.UPDATE_TICKET\n    })(),\n    onCreate: recall(onTicketCreate, {\n      mutation: queries.CREATE_TICKET\n    }),\n    render: document => /*#__PURE__*/React.createElement(TicketCard, {\n      ticket: document,\n      onAuthorLink: author => recall(onUserLink, {\n        id: author,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned: author === user.name\n      })()\n    })\n  });\n};\n\nexport default Tickets;","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/pages/dashboard/tickets.js"],"names":["React","useEffect","useDispatch","useSelector","template","useHelper","TicketCard","onTicketCreate","onTicketEdit","onTicketLink","onUserLink","setDocuments","ContentLayout","queries","TITLE","START_OFFSET","LIMIT","Tickets","recall","user","state","dispatch","GET_TICKETS","DELETE_TICKET","ticket","id","auth","email","mutation","UPDATE_TICKET","CREATE_TICKET","document","author","owned","name"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AAEA,OAAOC,QAAP,MAAqB,qDAArB;AAEA,SAASC,SAAT,QAA0B,uBAA1B;AACA,OAAOC,UAAP,MAAuB,6BAAvB;AACA,SAASC,cAAT,EAAyBC,YAAzB,EAAuCC,YAAvC,QAA2D,4BAA3D;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,YAAT,QAA6B,+BAA7B;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,OAAP,MAAoB,uBAApB;AAEA,MAAMC,KAAK,GAAG,WAAd;AACA,MAAMC,YAAY,GAAG,CAArB;AACA,MAAMC,KAAK,GAAG,EAAd;;AAEA,MAAMC,OAAO,GAAG,MAAM;AACpB,QAAMC,MAAM,GAAGb,SAAS,EAAxB;AACA,QAAMc,IAAI,GAAGhB,WAAW,CAAEiB,KAAD,IAAWA,KAAK,CAACD,IAAlB,CAAxB;AACA,QAAME,QAAQ,GAAGnB,WAAW,EAA5B;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdoB,IAAAA,QAAQ,CAACV,YAAY,CAAC,IAAD,CAAb,CAAR;AACD,GAFQ,EAEN,EAFM,CAAT;AAIA,sBACE,oBAAC,aAAD;AACE,IAAA,KAAK,EAAEG,KADT;AAEE,IAAA,KAAK,EAAEE,KAFT;AAGE,IAAA,IAAI,EAAE,QAHR;AAIE,IAAA,QAAQ,EAAEZ,QAJZ;AAKE,IAAA,WAAW,EAAEW,YALf;AAME,IAAA,YAAY,EAAE,eANhB;AAOE,IAAA,gBAAgB,EAAE,mBAPpB;AAQE,IAAA,OAAO,EAAE,YARX;AASE,IAAA,QAAQ,EAAEF,OAAO,CAACS,WATpB;AAUE,IAAA,WAAW,EAAET,OAAO,CAACU,aAVvB;AAWE,IAAA,qBAAqB,EAAE,WAXzB;AAYE,IAAA,sBAAsB,EAAE,WAZ1B;AAaE,IAAA,MAAM,EAAGC,MAAD,IAAYN,MAAM,CAACT,YAAD,EAAe;AAAEgB,MAAAA,EAAE,EAAED,MAAM,CAACC,EAAb;AAAiBC,MAAAA,IAAI,EAAEP,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEQ;AAA7B,KAAf,CAAN,EAbtB;AAcE,IAAA,MAAM,EAAGH,MAAD,IACNN,MAAM,CAACV,YAAD,EAAe;AACnBiB,MAAAA,EAAE,EAAED,MAAM,CAACC,EADQ;AAEnBG,MAAAA,QAAQ,EAAEf,OAAO,CAACgB;AAFC,KAAf,CAAN,EAfJ;AAoBE,IAAA,QAAQ,EAAEX,MAAM,CAACX,cAAD,EAAiB;AAAEqB,MAAAA,QAAQ,EAAEf,OAAO,CAACiB;AAApB,KAAjB,CApBlB;AAqBE,IAAA,MAAM,EAAGC,QAAD,iBACN,oBAAC,UAAD;AACE,MAAA,MAAM,EAAEA,QADV;AAEE,MAAA,YAAY,EAAGC,MAAD,IACZd,MAAM,CAACR,UAAD,EAAa;AACjBe,QAAAA,EAAE,EAAEO,MADa;AAEjBN,QAAAA,IAAI,EAAEP,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEQ,KAFK;AAGjBM,QAAAA,KAAK,EAAED,MAAM,KAAKb,IAAI,CAACe;AAHN,OAAb,CAAN;AAHJ;AAtBJ,IADF;AAoCD,CA7CD;;AA+CA,eAAejB,OAAf","sourcesContent":["import React, { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport template from '../../atomic-ui/components/Table/templates/category'\n\nimport { useHelper } from '../../hooks/useHelper'\nimport TicketCard from '../../components/TicketCard'\nimport { onTicketCreate, onTicketEdit, onTicketLink } from '../../store/helpers/ticket'\nimport { onUserLink } from '../../store/helpers/user'\nimport { setDocuments } from '../../store/actions/documents'\nimport ContentLayout from '../../layouts/dashboard/content'\nimport queries from '../../graphql/queries'\n\nconst TITLE = 'Обращения'\nconst START_OFFSET = 0\nconst LIMIT = 12\n\nconst Tickets = () => {\n  const recall = useHelper()\n  const user = useSelector((state) => state.user)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    dispatch(setDocuments(null))\n  }, [])\n\n  return (\n    <ContentLayout\n      title={TITLE}\n      limit={LIMIT}\n      icon={'ticket'}\n      template={template}\n      startOffset={START_OFFSET}\n      emptyMessage={'Обращений нет'}\n      buttonCreateText={'Создать обращение'}\n      getType={'getTickets'}\n      getQuery={queries.GET_TICKETS}\n      deleteQuery={queries.DELETE_TICKET}\n      deleteEntityMultiText={'обращения'}\n      deleteEntitySingleText={'обращение'}\n      onLink={(ticket) => recall(onTicketLink, { id: ticket.id, auth: user?.email })()}\n      onEdit={(ticket) =>\n        recall(onTicketEdit, {\n          id: ticket.id,\n          mutation: queries.UPDATE_TICKET\n        })()\n      }\n      onCreate={recall(onTicketCreate, { mutation: queries.CREATE_TICKET })}\n      render={(document) => (\n        <TicketCard\n          ticket={document}\n          onAuthorLink={(author) =>\n            recall(onUserLink, {\n              id: author,\n              auth: user?.email,\n              owned: author === user.name\n            })()\n          }\n        />\n      )}\n    />\n  )\n}\n\nexport default Tickets\n"]},"metadata":{},"sourceType":"module"}