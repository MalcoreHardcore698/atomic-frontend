{"ast":null,"code":"function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport YouTube from 'react-youtube';\nimport Column from '../../atomic-ui/components/Column';\nimport Button from '../../atomic-ui/components/Button';\nimport Dash from '../../atomic-ui/components/Menu/Dash';\nimport Text from '../../atomic-ui/components/Text';\nimport TicketForm from '../../components/FormTicket';\nimport Notifications from '../../components/Notifications';\nimport Messenger from '../../components/Messenger';\nimport { setDrawer } from '../actions/drawer';\nimport { setModal } from '../actions/modal';\nimport { onUserLink } from './user';\nimport { setItem } from '../actions/snacks';\nexport var Presentation = styled(YouTube).withConfig({\n  displayName: \"helpers__Presentation\",\n  componentId: \"t5pxc3-0\"\n})([\"display:flex;flex-grow:1;width:100%;height:80vh;border-radius:var(--surface-border-radius);overflow:hidden;iframe{width:100%;height:100%;}\"]);\n_c = Presentation;\nexport function onMenu(dispatch, props) {\n  var links = props.links;\n  dispatch(setDrawer({\n    side: 'left',\n    half: true,\n    content: /*#__PURE__*/React.createElement(Dash, {\n      links: links\n    })\n  }));\n}\nexport function onHelp(dispatch, props) {\n  var mutation = props.mutation;\n  dispatch(setModal([{\n    path: '/',\n    title: 'Поддержка',\n    component: function component() {\n      return /*#__PURE__*/React.createElement(Column, {\n        style: {\n          padding: '15px'\n        }\n      }, /*#__PURE__*/React.createElement(TicketForm, {\n        title: false,\n        mutation: mutation,\n        appearance: 'clear',\n        onSubmit: /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(form, action) {\n            var _form$category;\n\n            return regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n                    _context.next = 3;\n                    return action({\n                      variables: {\n                        input: {\n                          title: form.title,\n                          message: form.message,\n                          category: (_form$category = form.category) === null || _form$category === void 0 ? void 0 : _form$category.value\n                        }\n                      }\n                    });\n\n                  case 3:\n                    dispatch(setItem({\n                      type: 'success',\n                      message: 'Вопрос успешно отправлен'\n                    }));\n                    _context.next = 9;\n                    break;\n\n                  case 6:\n                    _context.prev = 6;\n                    _context.t0 = _context[\"catch\"](0);\n                    dispatch(setItem({\n                      type: 'error',\n                      message: 'Не удалось отправить вопрос'\n                    }));\n\n                  case 9:\n                    _context.prev = 9;\n                    dispatch(setModal(null));\n                    return _context.finish(9);\n\n                  case 12:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, null, [[0, 6, 9, 12]]);\n          }));\n\n          return function (_x, _x2) {\n            return _ref.apply(this, arguments);\n          };\n        }(),\n        isClient: true\n      }));\n    }\n  }]));\n}\nexport function onNotification(dispatch, props) {\n  var notifications = props.notifications;\n  dispatch(setDrawer({\n    icon: 'notification',\n    title: 'Уведомления',\n    content: /*#__PURE__*/React.createElement(Notifications, {\n      notifications: notifications,\n      appearance: 'clear'\n    })\n  }));\n}\nexport function onChat(dispatch, props) {\n  var sender = props.sender,\n      recipient = props.recipient;\n  dispatch(setDrawer({\n    icon: 'chat',\n    title: 'Мессенджер',\n    content: /*#__PURE__*/React.createElement(Messenger, {\n      recipient: recipient,\n      sender: sender,\n      appearance: 'clear',\n      onMemberLink: function onMemberLink() {\n        return onUserLink(dispatch, props);\n      },\n      onSubmit: /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(form, action, recipient) {\n          var response;\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.prev = 0;\n                  _context2.next = 3;\n                  return action({\n                    variables: {\n                      recipient: recipient.email,\n                      text: form.text\n                    }\n                  });\n\n                case 3:\n                  response = _context2.sent;\n                  return _context2.abrupt(\"return\", response.data.sendMessage);\n\n                case 7:\n                  _context2.prev = 7;\n                  _context2.t0 = _context2[\"catch\"](0);\n                  console.log(_context2.t0);\n\n                case 10:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, null, [[0, 7]]);\n        }));\n\n        return function (_x3, _x4, _x5) {\n          return _ref2.apply(this, arguments);\n        };\n      }()\n    })\n  }));\n}\nexport function onFileLink(dispatch) {\n  dispatch(setModal([{\n    path: '/',\n    title: 'Информация о файле',\n    component: function component() {\n      return /*#__PURE__*/React.createElement(Column, {\n        style: {\n          padding: '15px'\n        }\n      }, /*#__PURE__*/React.createElement(Text, null, \"Bechtel \\u043E\\u0442\\u0432\\u0435\\u0447\\u0430\\u043B \\u0437\\u0430 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435, \\u0437\\u0430\\u043A\\u0443\\u043F\\u043A\\u0438, \\u0441\\u0442\\u0440\\u043E\\u0438\\u0442\\u0435\\u043B\\u044C\\u0441\\u0442\\u0432\\u043E, \\u0437\\u0430\\u043F\\u0443\\u0441\\u043A \\u0438 \\u0432\\u0432\\u043E\\u0434 \\u0432 \\u044D\\u043A\\u0441\\u043F\\u043B\\u0443\\u0430\\u0442\\u0430\\u0446\\u0438\\u044E \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E \\u0433\\u0430\\u0437\\u043E\\u0432\\u043E\\u0433\\u043E \\u043F\\u0430\\u0440\\u043E\\u0433\\u0430\\u0437\\u043E\\u0432\\u043E\\u0433\\u043E \\u043A\\u043E\\u043C\\u043F\\u043B\\u0435\\u043A\\u0441\\u0430 \\u043C\\u043E\\u0449\\u043D\\u043E\\u0441\\u0442\\u044C\\u044E 700 \\u043C\\u0435\\u0433\\u0430\\u0432\\u0430\\u0442\\u0442 \\u0432 \\u041E\\u0433\\u0430\\u0439\\u043E, \\u0421\\u0428\\u0410 \\u0438 \\u0432\\u0432\\u043E\\u0434 \\u0432 \\u044D\\u043A\\u0441\\u043F\\u043B\\u0443\\u0430\\u0442\\u0430\\u0446\\u0438\\u044E \\u043D\\u043E\\u0432\\u043E\\u0433\\u043E \\u0433\\u0430\\u0437\\u043E\\u0432\\u043E\\u0433\\u043E \\u043F\\u0430\\u0440\\u043E\\u0433\\u0430\\u0437\\u043E\\u0432\\u043E\\u0433\\u043E \\u043A\\u043E\\u043C\\u043F\\u043B\\u0435\\u043A\\u0441\\u0430 \\u043C\\u043E\\u0449\\u043D\\u043E\\u0441\\u0442\\u044C\\u044E 700 \\u043C\\u0435\\u0433\\u0430\\u0432\\u0430\\u0442\\u0442 \\u0432 \\u041E\\u0433\\u0430\\u0439\\u043E, \\u0421\\u0428\\u0410\"), /*#__PURE__*/React.createElement(Button, null, \"\\u0421\\u043A\\u0430\\u0447\\u0430\\u0442\\u044C \\u0444\\u0430\\u0439\\u043B\"));\n    }\n  }]));\n}\nexport function onIndexVideoLink(dispatch, props) {\n  var video = props.video;\n  dispatch(setModal([{\n    path: '/',\n    title: '',\n    component: function component() {\n      return /*#__PURE__*/React.createElement(Presentation, {\n        videoId: video\n      });\n    }\n  }], 'l'));\n}\n\nvar _c;\n\n$RefreshReg$(_c, \"Presentation\");","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/store/helpers/index.js"],"names":["React","styled","YouTube","Column","Button","Dash","Text","TicketForm","Notifications","Messenger","setDrawer","setModal","onUserLink","setItem","Presentation","onMenu","dispatch","props","links","side","half","content","onHelp","mutation","path","title","component","padding","form","action","variables","input","message","category","value","type","onNotification","notifications","icon","onChat","sender","recipient","email","text","response","data","sendMessage","console","log","onFileLink","onIndexVideoLink","video"],"mappings":"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","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\nimport YouTube from 'react-youtube'\n\nimport Column from '../../atomic-ui/components/Column'\nimport Button from '../../atomic-ui/components/Button'\nimport Dash from '../../atomic-ui/components/Menu/Dash'\nimport Text from '../../atomic-ui/components/Text'\n\nimport TicketForm from '../../components/FormTicket'\nimport Notifications from '../../components/Notifications'\nimport Messenger from '../../components/Messenger'\nimport { setDrawer } from '../actions/drawer'\nimport { setModal } from '../actions/modal'\nimport { onUserLink } from './user'\nimport { setItem } from '../actions/snacks'\n\nexport const Presentation = styled(YouTube)`\n  display: flex;\n  flex-grow: 1;\n  width: 100%;\n  height: 80vh;\n  border-radius: var(--surface-border-radius);\n  overflow: hidden;\n\n  iframe {\n    width: 100%;\n    height: 100%;\n  }\n`\n\nexport function onMenu(dispatch, props) {\n  const { links } = props\n\n  dispatch(\n    setDrawer({\n      side: 'left',\n      half: true,\n      content: <Dash links={links} />\n    })\n  )\n}\n\nexport function onHelp(dispatch, props) {\n  const { mutation } = props\n\n  dispatch(\n    setModal([\n      {\n        path: '/',\n        title: 'Поддержка',\n        component: () => (\n          <Column style={{ padding: '15px' }}>\n            <TicketForm\n              title={false}\n              mutation={mutation}\n              appearance={'clear'}\n              onSubmit={async (form, action) => {\n                try {\n                  await action({\n                    variables: {\n                      input: {\n                        title: form.title,\n                        message: form.message,\n                        category: form.category?.value\n                      }\n                    }\n                  })\n                  dispatch(\n                    setItem({\n                      type: 'success',\n                      message: 'Вопрос успешно отправлен'\n                    })\n                  )\n                } catch (err) {\n                  dispatch(\n                    setItem({\n                      type: 'error',\n                      message: 'Не удалось отправить вопрос'\n                    })\n                  )\n                } finally {\n                  dispatch(setModal(null))\n                }\n              }}\n              isClient\n            />\n          </Column>\n        )\n      }\n    ])\n  )\n}\n\nexport function onNotification(dispatch, props) {\n  const { notifications } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'notification',\n      title: 'Уведомления',\n      content: <Notifications notifications={notifications} appearance={'clear'} />\n    })\n  )\n}\n\nexport function onChat(dispatch, props) {\n  const { sender, recipient } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'chat',\n      title: 'Мессенджер',\n      content: (\n        <Messenger\n          recipient={recipient}\n          sender={sender}\n          appearance={'clear'}\n          onMemberLink={() => onUserLink(dispatch, props)}\n          onSubmit={async (form, action, recipient) => {\n            try {\n              const response = await action({\n                variables: {\n                  recipient: recipient.email,\n                  text: form.text\n                }\n              })\n              return response.data.sendMessage\n            } catch (err) {\n              console.log(err)\n            }\n          }}\n        />\n      )\n    })\n  )\n}\n\nexport function onFileLink(dispatch) {\n  dispatch(\n    setModal([\n      {\n        path: '/',\n        title: 'Информация о файле',\n        component: () => (\n          <Column style={{ padding: '15px' }}>\n            <Text>\n              Bechtel отвечал за проектирование, закупки, строительство, запуск и ввод в\n              эксплуатацию нового газового парогазового комплекса мощностью 700 мегаватт в Огайо,\n              США и ввод в эксплуатацию нового газового парогазового комплекса мощностью 700\n              мегаватт в Огайо, США\n            </Text>\n            <Button>Скачать файл</Button>\n          </Column>\n        )\n      }\n    ])\n  )\n}\n\nexport function onIndexVideoLink(dispatch, props) {\n  const { video } = props\n\n  dispatch(\n    setModal(\n      [\n        {\n          path: '/',\n          title: '',\n          component: () => <Presentation videoId={video} />\n        }\n      ],\n      'l'\n    )\n  )\n}\n"]},"metadata":{},"sourceType":"module"}