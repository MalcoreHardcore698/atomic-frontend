{"ast":null,"code":"import React from 'react';\nimport { getLabelCategory } from '../atomic-ui/utils/functions';\nimport { initializeApollo } from '../apollo';\nimport ContentLayout from '../layouts/content';\nimport { GridAside as Container } from '../components/Styled';\nimport ArticleList from '../components/ArticleList';\nimport queries from '../graphql/queries';\nconst TITLE = 'Статьи';\nconst START_OFFSET = 6;\n\nconst Articles = ({\n  store\n}) => /*#__PURE__*/React.createElement(ContentLayout, {\n  title: TITLE,\n  filters: [{\n    type: 'DATEPICKER',\n    placeholder: 'Дата публикации'\n  }, {\n    type: 'SELECT',\n    options: store === null || store === void 0 ? void 0 : store.categories.map(category => ({\n      value: category.id,\n      label: getLabelCategory(category.name)\n    }))\n  }],\n  options: [{\n    label: 'Категория',\n    value: 'category'\n  }, {\n    label: 'Дата публикации',\n    value: 'createdAt'\n  }],\n  query: queries.GET_ARTICLES,\n  variables: {\n    status: 'PUBLISHED'\n  },\n  store: {\n    documents: store === null || store === void 0 ? void 0 : store.articles\n  }\n}, ({\n  documents\n}) => /*#__PURE__*/React.createElement(Container, null, /*#__PURE__*/React.createElement(ArticleList, {\n  initialList: documents,\n  layout: true\n})));\n\nexport async function getServerSideProps() {\n  const client = initializeApollo();\n  let articles = [];\n  let categories = [];\n\n  try {\n    const response = await client.query({\n      query: queries.GET_META_ARTICLES,\n      variables: {\n        offset: 0,\n        limit: START_OFFSET,\n        status: 'PUBLISHED'\n      }\n    });\n\n    if (response && response.data) {\n      articles = response.data.getArticles;\n      categories = response.data.getCategories;\n    }\n  } catch (err) {\n    console.log(err);\n  }\n\n  return {\n    props: {\n      store: {\n        articles,\n        categories\n      }\n    }\n  };\n}\nexport default Articles;","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/pages/articles.js"],"names":["React","getLabelCategory","initializeApollo","ContentLayout","GridAside","Container","ArticleList","queries","TITLE","START_OFFSET","Articles","store","type","placeholder","options","categories","map","category","value","id","label","name","GET_ARTICLES","status","documents","articles","getServerSideProps","client","response","query","GET_META_ARTICLES","variables","offset","limit","data","getArticles","getCategories","err","console","log","props"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,gBAAT,QAAiC,8BAAjC;AAEA,SAASC,gBAAT,QAAiC,WAAjC;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,SAASC,SAAS,IAAIC,SAAtB,QAAuC,sBAAvC;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AAEA,MAAMC,KAAK,GAAG,QAAd;AACA,MAAMC,YAAY,GAAG,CAArB;;AAEA,MAAMC,QAAQ,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,kBACf,oBAAC,aAAD;AACE,EAAA,KAAK,EAAEH,KADT;AAEE,EAAA,OAAO,EAAE,CACP;AAAEI,IAAAA,IAAI,EAAE,YAAR;AAAsBC,IAAAA,WAAW,EAAE;AAAnC,GADO,EAEP;AACED,IAAAA,IAAI,EAAE,QADR;AAEEE,IAAAA,OAAO,EAAEH,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAEI,UAAP,CAAkBC,GAAlB,CAAuBC,QAAD,KAAe;AAC5CC,MAAAA,KAAK,EAAED,QAAQ,CAACE,EAD4B;AAE5CC,MAAAA,KAAK,EAAEnB,gBAAgB,CAACgB,QAAQ,CAACI,IAAV;AAFqB,KAAf,CAAtB;AAFX,GAFO,CAFX;AAYE,EAAA,OAAO,EAAE,CACP;AAAED,IAAAA,KAAK,EAAE,WAAT;AAAsBF,IAAAA,KAAK,EAAE;AAA7B,GADO,EAEP;AAAEE,IAAAA,KAAK,EAAE,iBAAT;AAA4BF,IAAAA,KAAK,EAAE;AAAnC,GAFO,CAZX;AAgBE,EAAA,KAAK,EAAEX,OAAO,CAACe,YAhBjB;AAiBE,EAAA,SAAS,EAAE;AAAEC,IAAAA,MAAM,EAAE;AAAV,GAjBb;AAkBE,EAAA,KAAK,EAAE;AAAEC,IAAAA,SAAS,EAAEb,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAEc;AAApB;AAlBT,GAmBG,CAAC;AAAED,EAAAA;AAAF,CAAD,kBACC,oBAAC,SAAD,qBACE,oBAAC,WAAD;AAAa,EAAA,WAAW,EAAEA,SAA1B;AAAqC,EAAA,MAAM;AAA3C,EADF,CApBJ,CADF;;AA4BA,OAAO,eAAeE,kBAAf,GAAoC;AACzC,QAAMC,MAAM,GAAGzB,gBAAgB,EAA/B;AAEA,MAAIuB,QAAQ,GAAG,EAAf;AACA,MAAIV,UAAU,GAAG,EAAjB;;AAEA,MAAI;AACF,UAAMa,QAAQ,GAAG,MAAMD,MAAM,CAACE,KAAP,CAAa;AAClCA,MAAAA,KAAK,EAAEtB,OAAO,CAACuB,iBADmB;AAElCC,MAAAA,SAAS,EAAE;AACTC,QAAAA,MAAM,EAAE,CADC;AAETC,QAAAA,KAAK,EAAExB,YAFE;AAGTc,QAAAA,MAAM,EAAE;AAHC;AAFuB,KAAb,CAAvB;;AASA,QAAIK,QAAQ,IAAIA,QAAQ,CAACM,IAAzB,EAA+B;AAC7BT,MAAAA,QAAQ,GAAGG,QAAQ,CAACM,IAAT,CAAcC,WAAzB;AACApB,MAAAA,UAAU,GAAGa,QAAQ,CAACM,IAAT,CAAcE,aAA3B;AACD;AACF,GAdD,CAcE,OAAOC,GAAP,EAAY;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD;;AAED,SAAO;AACLG,IAAAA,KAAK,EAAE;AACL7B,MAAAA,KAAK,EAAE;AACLc,QAAAA,QADK;AAELV,QAAAA;AAFK;AADF;AADF,GAAP;AAQD;AAED,eAAeL,QAAf","sourcesContent":["import React from 'react'\n\nimport { getLabelCategory } from '../atomic-ui/utils/functions'\n\nimport { initializeApollo } from '../apollo'\nimport ContentLayout from '../layouts/content'\nimport { GridAside as Container } from '../components/Styled'\nimport ArticleList from '../components/ArticleList'\nimport queries from '../graphql/queries'\n\nconst TITLE = 'Статьи'\nconst START_OFFSET = 6\n\nconst Articles = ({ store }) => (\n  <ContentLayout\n    title={TITLE}\n    filters={[\n      { type: 'DATEPICKER', placeholder: 'Дата публикации' },\n      {\n        type: 'SELECT',\n        options: store?.categories.map((category) => ({\n          value: category.id,\n          label: getLabelCategory(category.name)\n        }))\n      }\n    ]}\n    options={[\n      { label: 'Категория', value: 'category' },\n      { label: 'Дата публикации', value: 'createdAt' }\n    ]}\n    query={queries.GET_ARTICLES}\n    variables={{ status: 'PUBLISHED' }}\n    store={{ documents: store?.articles }}>\n    {({ documents }) => (\n      <Container>\n        <ArticleList initialList={documents} layout />\n      </Container>\n    )}\n  </ContentLayout>\n)\n\nexport async function getServerSideProps() {\n  const client = initializeApollo()\n\n  let articles = []\n  let categories = []\n\n  try {\n    const response = await client.query({\n      query: queries.GET_META_ARTICLES,\n      variables: {\n        offset: 0,\n        limit: START_OFFSET,\n        status: 'PUBLISHED'\n      }\n    })\n\n    if (response && response.data) {\n      articles = response.data.getArticles\n      categories = response.data.getCategories\n    }\n  } catch (err) {\n    console.log(err)\n  }\n\n  return {\n    props: {\n      store: {\n        articles,\n        categories\n      }\n    }\n  }\n}\n\nexport default Articles\n"]},"metadata":{},"sourceType":"module"}