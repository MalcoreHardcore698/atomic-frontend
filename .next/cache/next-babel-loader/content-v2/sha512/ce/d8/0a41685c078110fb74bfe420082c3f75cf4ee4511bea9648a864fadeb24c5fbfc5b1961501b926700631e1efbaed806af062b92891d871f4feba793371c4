{"ast":null,"code":"import React from 'react';\nimport styled, { css } from 'styled-components';\nimport Row from '../../atomic-ui/components/Row';\nimport Column from '../../atomic-ui/components/Column';\nimport Meta from '../../atomic-ui/components/Meta';\nimport Divider from '../../atomic-ui/components/Divider';\nimport Chip from '../../atomic-ui/components/Chip';\nimport Alert from '../../atomic-ui/components/Alert';\nimport Title from '../../atomic-ui/components/Title';\nimport { getLabelRole, getLabelPermission } from '../../atomic-ui/utils/functions';\nimport { Surface } from '../Styled';\nimport CardActions from '../CardActions';\nimport { useEntityQuery } from '../../hooks/useEntityQuery';\nimport { onRoleDelete, onRoleEdit } from '../../store/helpers/role';\nimport { useHelper } from '../../hooks/useHelper';\nimport queries from '../../graphql/queries';\nexport const Wrap = styled(Surface).withConfig({\n  displayName: \"RoleCard__Wrap\",\n  componentId: \"sc-1nltqyr-0\"\n})([\"grid-gap:var(--default-gap);height:100%;\"]);\nexport const Header = styled(Row).withConfig({\n  displayName: \"RoleCard__Header\",\n  componentId: \"sc-1nltqyr-1\"\n})([\"justify-content:space-between;align-items:center;\"]);\nexport const Name = styled(Title).withConfig({\n  displayName: \"RoleCard__Name\",\n  componentId: \"sc-1nltqyr-2\"\n})([\"transition:opacity 150ms ease;\", \"\"], ({\n  onClick\n}) => onClick && css([\"cursor:pointer;&:hover{opacity:0.45;}\"]));\nexport const Actions = styled(Row).withConfig({\n  displayName: \"RoleCard__Actions\",\n  componentId: \"sc-1nltqyr-3\"\n})([\"grid-gap:5px;height:100%;\"]);\nexport const Permissions = styled(Row).withConfig({\n  displayName: \"RoleCard__Permissions\",\n  componentId: \"sc-1nltqyr-4\"\n})([\"flex-wrap:wrap;grid-gap:10px;\"]);\nexport const Card = ({\n  role,\n  style,\n  checked,\n  appearance,\n  className,\n  limitPermissions,\n  onLink,\n  onChecked,\n  onEdit,\n  onDelete\n}) => {\n  const recall = useHelper();\n  const {\n    setQuery\n  } = useEntityQuery();\n  const permissions = role.permissions.slice(0, limitPermissions);\n  const residue = role.permissions.length - limitPermissions;\n\n  const handleEdit = () => {\n    recall(onRoleEdit, {\n      id: role.id,\n      role,\n      permissions,\n      mutation: queries.UPDATE_ROLE\n    })();\n    if (onEdit) onEdit();\n  };\n\n  const handleDelete = () => {\n    recall(onRoleDelete, {\n      id: role.id,\n      role,\n      mutation: queries.DELETE_ROLE\n    })();\n    if (onDelete) onDelete();\n  };\n\n  return /*#__PURE__*/React.createElement(Wrap, {\n    className: className,\n    style: style,\n    checked: checked,\n    appearance: appearance\n  }, /*#__PURE__*/React.createElement(Column, {\n    style: {\n      gridGap: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, null, /*#__PURE__*/React.createElement(Meta, {\n    date: role.createdAt\n  }), role.name !== 'ADMIN' && /*#__PURE__*/React.createElement(CardActions, {\n    typeText: 'роль',\n    checked: checked,\n    onEdit: onEdit && handleEdit,\n    onDelete: onDelete && handleDelete,\n    onChecked: onChecked\n  })), /*#__PURE__*/React.createElement(Name, {\n    tag: 'h4',\n    onClick: () => setQuery(role.id, 'role', onLink)\n  }, getLabelRole(role.name))), /*#__PURE__*/React.createElement(Divider, {\n    clear: true\n  }), role && role.permissions.length > 0 ? /*#__PURE__*/React.createElement(Permissions, null, permissions.map(permission => /*#__PURE__*/React.createElement(Chip, {\n    key: permission,\n    color: 'ghost',\n    appearance: 'outlined'\n  }, getLabelPermission(permission))), residue > 0 && /*#__PURE__*/React.createElement(Chip, {\n    color: 'ghost',\n    appearance: 'outlined'\n  }, \"+\", residue)) : /*#__PURE__*/React.createElement(Alert, null, \"\\u041F\\u0440\\u0438\\u0432\\u0435\\u043B\\u0435\\u0433\\u0438\\u0438 \\u043E\\u0442\\u0441\\u0443\\u0442\\u0441\\u0442\\u0432\\u0443\\u0435\\u0442\"));\n};\nCard.defaultProps = {\n  appearance: 'default',\n  limitPermissions: 5\n};\nexport default Card;","map":{"version":3,"sources":["D:/Documents/Workspace/FREELANCE/atomic/atomic-frontend/components/RoleCard/index.js"],"names":["React","styled","css","Row","Column","Meta","Divider","Chip","Alert","Title","getLabelRole","getLabelPermission","Surface","CardActions","useEntityQuery","onRoleDelete","onRoleEdit","useHelper","queries","Wrap","Header","Name","onClick","Actions","Permissions","Card","role","style","checked","appearance","className","limitPermissions","onLink","onChecked","onEdit","onDelete","recall","setQuery","permissions","slice","residue","length","handleEdit","id","mutation","UPDATE_ROLE","handleDelete","DELETE_ROLE","gridGap","createdAt","name","map","permission","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react'\nimport styled, { css } from 'styled-components'\n\nimport Row from '../../atomic-ui/components/Row'\nimport Column from '../../atomic-ui/components/Column'\nimport Meta from '../../atomic-ui/components/Meta'\nimport Divider from '../../atomic-ui/components/Divider'\nimport Chip from '../../atomic-ui/components/Chip'\nimport Alert from '../../atomic-ui/components/Alert'\nimport Title from '../../atomic-ui/components/Title'\nimport { getLabelRole, getLabelPermission } from '../../atomic-ui/utils/functions'\n\nimport { Surface } from '../Styled'\nimport CardActions from '../CardActions'\nimport { useEntityQuery } from '../../hooks/useEntityQuery'\nimport { onRoleDelete, onRoleEdit } from '../../store/helpers/role'\nimport { useHelper } from '../../hooks/useHelper'\nimport queries from '../../graphql/queries'\n\nexport const Wrap = styled(Surface)`\n  grid-gap: var(--default-gap);\n  height: 100%;\n`\n\nexport const Header = styled(Row)`\n  justify-content: space-between;\n  align-items: center;\n`\n\nexport const Name = styled(Title)`\n  transition: opacity 150ms ease;\n\n  ${({ onClick }) =>\n    onClick &&\n    css`\n      cursor: pointer;\n\n      &:hover {\n        opacity: 0.45;\n      }\n    `}\n`\n\nexport const Actions = styled(Row)`\n  grid-gap: 5px;\n  height: 100%;\n`\n\nexport const Permissions = styled(Row)`\n  flex-wrap: wrap;\n  grid-gap: 10px;\n`\n\nexport const Card = ({\n  role,\n  style,\n  checked,\n  appearance,\n  className,\n  limitPermissions,\n  onLink,\n  onChecked,\n  onEdit,\n  onDelete\n}) => {\n  const recall = useHelper()\n  const { setQuery } = useEntityQuery()\n  const permissions = role.permissions.slice(0, limitPermissions)\n  const residue = role.permissions.length - limitPermissions\n\n  const handleEdit = () => {\n    recall(onRoleEdit, {\n      id: role.id,\n      role,\n      permissions,\n      mutation: queries.UPDATE_ROLE\n    })()\n    if (onEdit) onEdit()\n  }\n\n  const handleDelete = () => {\n    recall(onRoleDelete, {\n      id: role.id,\n      role,\n      mutation: queries.DELETE_ROLE\n    })()\n    if (onDelete) onDelete()\n  }\n\n  return (\n    <Wrap className={className} style={style} checked={checked} appearance={appearance}>\n      <Column style={{ gridGap: 5 }}>\n        <Header>\n          <Meta date={role.createdAt} />\n\n          {role.name !== 'ADMIN' && (\n            <CardActions\n              typeText={'роль'}\n              checked={checked}\n              onEdit={onEdit && handleEdit}\n              onDelete={onDelete && handleDelete}\n              onChecked={onChecked}\n            />\n          )}\n        </Header>\n\n        <Name tag={'h4'} onClick={() => setQuery(role.id, 'role', onLink)}>\n          {getLabelRole(role.name)}\n        </Name>\n      </Column>\n\n      <Divider clear />\n\n      {role && role.permissions.length > 0 ? (\n        <Permissions>\n          {permissions.map((permission) => (\n            <Chip key={permission} color={'ghost'} appearance={'outlined'}>\n              {getLabelPermission(permission)}\n            </Chip>\n          ))}\n          {residue > 0 && (\n            <Chip color={'ghost'} appearance={'outlined'}>\n              +{residue}\n            </Chip>\n          )}\n        </Permissions>\n      ) : (\n        <Alert>Привелегии отсутствует</Alert>\n      )}\n    </Wrap>\n  )\n}\n\nCard.defaultProps = {\n  appearance: 'default',\n  limitPermissions: 5\n}\n\nexport default Card\n"]},"metadata":{},"sourceType":"module"}