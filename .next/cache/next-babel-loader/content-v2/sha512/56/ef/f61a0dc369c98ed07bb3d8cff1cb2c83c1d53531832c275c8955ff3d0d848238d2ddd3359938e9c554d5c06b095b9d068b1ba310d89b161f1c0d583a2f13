{"ast":null,"code":"import React, { useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport styled from 'styled-components';\nimport { useSelector } from 'react-redux';\nimport Spinner from '../atomic-ui/components/Spinner';\nimport { useHelper } from '../hooks/useHelper';\nimport DefaultLayout from '../layouts/default';\nimport { onUserCheckin } from '../store/helpers/user';\nimport queries from '../graphql/queries';\nconst TITLE = 'Авторизация';\nconst Wrap = styled.div.withConfig({\n  displayName: \"auth__Wrap\",\n  componentId: \"sc-16eje6u-0\"\n})([\"display:grid;grid-template-columns:380px;justify-content:center;align-content:center;margin:120px 0;@media only screen and (max-width:480px){grid-template-columns:100%;margin:25px 0;}\"]);\nconst Loader = styled.div.withConfig({\n  displayName: \"auth__Loader\",\n  componentId: \"sc-16eje6u-1\"\n})([\"position:fixed;top:0;left:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%;\"]);\n\nconst Auth = () => {\n  const recall = useHelper();\n  const router = useRouter();\n  const {\n    user,\n    stepper\n  } = useSelector(state => ({\n    user: state.user,\n    stepper: state.stepper\n  }));\n  useEffect(() => {\n    if (!(stepper !== null && stepper !== void 0 && stepper.content)) {\n      recall(onUserCheckin, {\n        mutations: {\n          checkin: queries.CHECKIN,\n          googleAuth: queries.GOOGLE_AUTH,\n          facebookAuth: queries.FACEBOOK_AUTH,\n          login: queries.LOGIN,\n          register: queries.REGISTER,\n          forgotEmail: queries.LOGIN,\n          forgotPassword: queries.LOGIN\n        }\n      })();\n    }\n  }, [stepper]);\n  useEffect(() => {\n    if (user && user.authenticated) {\n      router.push('/profile');\n    }\n  }, [user]);\n\n  if (!stepper || user.authenticated) {\n    return /*#__PURE__*/React.createElement(Loader, null, /*#__PURE__*/React.createElement(Spinner, null));\n  }\n\n  return /*#__PURE__*/React.createElement(DefaultLayout, {\n    title: TITLE\n  }, /*#__PURE__*/React.createElement(Wrap, {\n    key: stepper.name\n  }, stepper.content));\n};\n\nexport default Auth;","map":{"version":3,"sources":["/Users/alicefromwonderland/Desktop/branches/atomic/atomic-frontend/pages/auth.js"],"names":["React","useEffect","useRouter","styled","useSelector","Spinner","useHelper","DefaultLayout","onUserCheckin","queries","TITLE","Wrap","div","Loader","Auth","recall","router","user","stepper","state","content","mutations","checkin","CHECKIN","googleAuth","GOOGLE_AUTH","facebookAuth","FACEBOOK_AUTH","login","LOGIN","register","REGISTER","forgotEmail","forgotPassword","authenticated","push","name"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,OAAOC,OAAP,MAAoB,iCAApB;AAEA,SAASC,SAAT,QAA0B,oBAA1B;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,SAASC,aAAT,QAA8B,uBAA9B;AACA,OAAOC,OAAP,MAAoB,oBAApB;AAEA,MAAMC,KAAK,GAAG,aAAd;AAEA,MAAMC,IAAI,GAAGR,MAAM,CAACS,GAAV;AAAA;AAAA;AAAA,+LAAV;AAaA,MAAMC,MAAM,GAAGV,MAAM,CAACS,GAAV;AAAA;AAAA;AAAA,kHAAZ;;AAaA,MAAME,IAAI,GAAG,MAAM;AACjB,QAAMC,MAAM,GAAGT,SAAS,EAAxB;AACA,QAAMU,MAAM,GAAGd,SAAS,EAAxB;AACA,QAAM;AAAEe,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAoBd,WAAW,CAAEe,KAAD,KAAY;AAChDF,IAAAA,IAAI,EAAEE,KAAK,CAACF,IADoC;AAEhDC,IAAAA,OAAO,EAAEC,KAAK,CAACD;AAFiC,GAAZ,CAAD,CAArC;AAKAjB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,EAACiB,OAAD,aAACA,OAAD,eAACA,OAAO,CAAEE,OAAV,CAAJ,EAAuB;AACrBL,MAAAA,MAAM,CAACP,aAAD,EAAgB;AACpBa,QAAAA,SAAS,EAAE;AACTC,UAAAA,OAAO,EAAEb,OAAO,CAACc,OADR;AAETC,UAAAA,UAAU,EAAEf,OAAO,CAACgB,WAFX;AAGTC,UAAAA,YAAY,EAAEjB,OAAO,CAACkB,aAHb;AAITC,UAAAA,KAAK,EAAEnB,OAAO,CAACoB,KAJN;AAKTC,UAAAA,QAAQ,EAAErB,OAAO,CAACsB,QALT;AAMTC,UAAAA,WAAW,EAAEvB,OAAO,CAACoB,KANZ;AAOTI,UAAAA,cAAc,EAAExB,OAAO,CAACoB;AAPf;AADS,OAAhB,CAAN;AAWD;AACF,GAdQ,EAcN,CAACX,OAAD,CAdM,CAAT;AAgBAjB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIgB,IAAI,IAAIA,IAAI,CAACiB,aAAjB,EAAgC;AAC9BlB,MAAAA,MAAM,CAACmB,IAAP,CAAY,UAAZ;AACD;AACF,GAJQ,EAIN,CAAClB,IAAD,CAJM,CAAT;;AAMA,MAAI,CAACC,OAAD,IAAYD,IAAI,CAACiB,aAArB,EAAoC;AAClC,wBACE,oBAAC,MAAD,qBACE,oBAAC,OAAD,OADF,CADF;AAKD;;AAED,sBACE,oBAAC,aAAD;AAAe,IAAA,KAAK,EAAExB;AAAtB,kBACE,oBAAC,IAAD;AAAM,IAAA,GAAG,EAAEQ,OAAO,CAACkB;AAAnB,KAA0BlB,OAAO,CAACE,OAAlC,CADF,CADF;AAKD,CA3CD;;AA6CA,eAAeN,IAAf","sourcesContent":["import React, { useEffect } from 'react'\nimport { useRouter } from 'next/router'\nimport styled from 'styled-components'\nimport { useSelector } from 'react-redux'\n\nimport Spinner from '../atomic-ui/components/Spinner'\n\nimport { useHelper } from '../hooks/useHelper'\nimport DefaultLayout from '../layouts/default'\nimport { onUserCheckin } from '../store/helpers/user'\nimport queries from '../graphql/queries'\n\nconst TITLE = 'Авторизация'\n\nconst Wrap = styled.div`\n  display: grid;\n  grid-template-columns: 380px;\n  justify-content: center;\n  align-content: center;\n  margin: 120px 0;\n\n  @media only screen and (max-width: 480px) {\n    grid-template-columns: 100%;\n    margin: 25px 0;\n  }\n`\n\nconst Loader = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 100%;\n  height: 100%;\n`\n\nconst Auth = () => {\n  const recall = useHelper()\n  const router = useRouter()\n  const { user, stepper } = useSelector((state) => ({\n    user: state.user,\n    stepper: state.stepper\n  }))\n\n  useEffect(() => {\n    if (!stepper?.content) {\n      recall(onUserCheckin, {\n        mutations: {\n          checkin: queries.CHECKIN,\n          googleAuth: queries.GOOGLE_AUTH,\n          facebookAuth: queries.FACEBOOK_AUTH,\n          login: queries.LOGIN,\n          register: queries.REGISTER,\n          forgotEmail: queries.LOGIN,\n          forgotPassword: queries.LOGIN\n        }\n      })()\n    }\n  }, [stepper])\n\n  useEffect(() => {\n    if (user && user.authenticated) {\n      router.push('/profile')\n    }\n  }, [user])\n\n  if (!stepper || user.authenticated) {\n    return (\n      <Loader>\n        <Spinner />\n      </Loader>\n    )\n  }\n\n  return (\n    <DefaultLayout title={TITLE}>\n      <Wrap key={stepper.name}>{stepper.content}</Wrap>\n    </DefaultLayout>\n  )\n}\n\nexport default Auth\n"]},"metadata":{},"sourceType":"module"}