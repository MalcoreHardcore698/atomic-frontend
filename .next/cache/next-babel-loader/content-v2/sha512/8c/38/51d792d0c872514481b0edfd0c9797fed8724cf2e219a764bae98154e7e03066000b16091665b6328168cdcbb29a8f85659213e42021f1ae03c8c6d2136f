{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport React from 'react';\nimport UserForm from '../../components/FormUser';\nimport CheckinForm from '../../components/FormCheckin';\nimport LoginForm from '../../components/FormLogin';\nimport RegisterForm from '../../components/FormRegister';\nimport ForgotEmailForm from '../../components/FormForgotEmail';\nimport ForgotPasswordForm from '../../components/FormForgotPassword';\nimport ChangePasswordForm from '../../components/FormChangePassword';\nimport AddUserFolderForm from '../../components/FormAddUserFolder';\nimport SureDeleteForm from '../../components/FormSureDelete';\nimport DeleteForm from '../../components/FormDelete';\nimport UserCard from '../../components/UserCard';\nimport UserView from '../../components/UserView';\nimport Members from '../../components/Members';\nimport Column from '../../atomic-ui/components/Column';\nimport Text from '../../atomic-ui/components/Text';\nimport { setStepper } from '../actions/stepper';\nimport { setDrawer } from '../actions/drawer';\nimport { setModal } from '../actions/modal';\nimport { setUser, updateUser, addUserFolder, removeUserFolder } from '../actions/user';\nimport { setDocuments } from '../actions/documents';\nimport { setItem } from '../actions/snacks';\nimport { onProjectLink as _onProjectLink, onProjectAdd, onProjectScreenshot } from './project';\nimport { onChat } from '.';\nexport function onUserCheckin(dispatch, props) {\n  var mutations = props.mutations;\n  dispatch(setStepper({\n    name: 'checkin',\n    content: /*#__PURE__*/React.createElement(CheckinForm, {\n      mutations: mutations,\n      onCreate: function onCreate() {\n        return onUserRegister(dispatch, props);\n      },\n      onForgot: function onForgot() {\n        return onUserForgotEmail(dispatch, props);\n      },\n      onGoogleError: function onGoogleError() {},\n      onFacebookError: function onFacebookError() {},\n      onGoogleFinally: function onGoogleFinally(user) {\n        return dispatch(setUser(user));\n      },\n      onFacebookFinally: function onFacebookFinally(user) {\n        return dispatch(setUser(user));\n      },\n      onGoogleSubmit: /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(response, action) {\n          var accessToken;\n          return regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  accessToken = response.accessToken;\n                  _context.next = 3;\n                  return action({\n                    variables: {\n                      accessToken: accessToken\n                    }\n                  });\n\n                case 3:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x, _x2) {\n          return _ref.apply(this, arguments);\n        };\n      }(),\n      onFacebookSubmit: /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(response, action) {\n          var accessToken;\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  accessToken = response.accessToken;\n                  _context2.next = 3;\n                  return action({\n                    variables: {\n                      accessToken: accessToken\n                    }\n                  });\n\n                case 3:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x3, _x4) {\n          return _ref2.apply(this, arguments);\n        };\n      }(),\n      onSubmit: /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(form, action) {\n          var _response$data, response;\n\n          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.prev = 0;\n                  _context3.next = 3;\n                  return action({\n                    variables: {\n                      login: form.login\n                    }\n                  });\n\n                case 3:\n                  response = _context3.sent;\n\n                  if ((_response$data = response.data) !== null && _response$data !== void 0 && _response$data.checkin) {\n                    dispatch(updateUser({\n                      login: form.login\n                    }));\n                    onUserLogin(dispatch, {\n                      login: form.login,\n                      mutations: mutations\n                    });\n                  }\n\n                  _context3.next = 10;\n                  break;\n\n                case 7:\n                  _context3.prev = 7;\n                  _context3.t0 = _context3[\"catch\"](0);\n                  dispatch(setItem({\n                    type: 'error',\n                    message: 'Не удалось пройти проверку'\n                  }));\n\n                case 10:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3, null, [[0, 7]]);\n        }));\n\n        return function (_x5, _x6) {\n          return _ref3.apply(this, arguments);\n        };\n      }()\n    })\n  }));\n}\nexport function onUserLogin(dispatch, props) {\n  var login = props.login,\n      mutations = props.mutations;\n  dispatch(setStepper({\n    name: 'login',\n    content: /*#__PURE__*/React.createElement(LoginForm, {\n      email: login,\n      mutation: mutations.login,\n      onBack: function onBack() {\n        return onUserCheckin(dispatch, {\n          mutations: mutations\n        });\n      },\n      onForgot: function onForgot() {\n        return onUserForgotPassword(dispatch, {\n          mutations: mutations\n        });\n      },\n      onSubmit: /*#__PURE__*/function () {\n        var _ref4 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4(form, action) {\n          var response, user;\n          return regeneratorRuntime.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  _context4.prev = 0;\n                  _context4.next = 3;\n                  return action({\n                    variables: {\n                      login: login,\n                      password: form.password\n                    }\n                  });\n\n                case 3:\n                  response = _context4.sent;\n                  user = response.data.login;\n                  dispatch(setUser(user));\n                  _context4.next = 11;\n                  break;\n\n                case 8:\n                  _context4.prev = 8;\n                  _context4.t0 = _context4[\"catch\"](0);\n                  dispatch(setItem({\n                    type: 'error',\n                    message: 'Не удалось авторизоваться'\n                  }));\n\n                case 11:\n                  _context4.prev = 11;\n                  dispatch(setStepper(null));\n                  return _context4.finish(11);\n\n                case 14:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4, null, [[0, 8, 11, 14]]);\n        }));\n\n        return function (_x7, _x8) {\n          return _ref4.apply(this, arguments);\n        };\n      }()\n    })\n  }));\n}\nexport function onUserRegister(dispatch, props) {\n  var mutations = props.mutations;\n  dispatch(setStepper({\n    name: 'register',\n    content: /*#__PURE__*/React.createElement(RegisterForm, {\n      mutation: mutations.register,\n      onLogin: function onLogin() {\n        return onUserCheckin(dispatch, {\n          mutations: mutations\n        });\n      },\n      onSubmit: /*#__PURE__*/function () {\n        var _ref5 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5(form, action) {\n          var response, user;\n          return regeneratorRuntime.wrap(function _callee5$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  _context5.prev = 0;\n                  _context5.next = 3;\n                  return action({\n                    variables: {\n                      input: {\n                        name: form.name,\n                        account: (form === null || form === void 0 ? void 0 : form.account.value) || 'INDIVIDUAL',\n                        email: form.email,\n                        phone: form.phone,\n                        password: form.password,\n                        confirmPassword: form.confirmPassword\n                      }\n                    }\n                  });\n\n                case 3:\n                  response = _context5.sent;\n                  user = response.data.register;\n                  dispatch(setUser(_objectSpread(_objectSpread({}, user), {}, {\n                    register: true\n                  })));\n                  _context5.next = 11;\n                  break;\n\n                case 8:\n                  _context5.prev = 8;\n                  _context5.t0 = _context5[\"catch\"](0);\n                  dispatch(setItem({\n                    type: 'error',\n                    message: 'Не удалось зарегистрировать пользователя'\n                  }));\n\n                case 11:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }, _callee5, null, [[0, 8]]);\n        }));\n\n        return function (_x9, _x10) {\n          return _ref5.apply(this, arguments);\n        };\n      }()\n    })\n  }));\n}\nexport function onUserForgotEmail(dispatch, props) {\n  var mutations = props.mutations;\n  dispatch(setStepper({\n    name: 'forgotEmail',\n    content: /*#__PURE__*/React.createElement(ForgotEmailForm, {\n      mutation: mutations.forgotEmail,\n      onBack: function onBack() {\n        return onUserLogin(dispatch, {\n          mutations: mutations\n        });\n      },\n      onSubmit: /*#__PURE__*/function () {\n        var _ref6 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee6(form, action) {\n          return regeneratorRuntime.wrap(function _callee6$(_context6) {\n            while (1) {\n              switch (_context6.prev = _context6.next) {\n                case 0:\n                  _context6.prev = 0;\n                  _context6.next = 3;\n                  return action(form);\n\n                case 3:\n                  _context6.next = 8;\n                  break;\n\n                case 5:\n                  _context6.prev = 5;\n                  _context6.t0 = _context6[\"catch\"](0);\n                  dispatch(setItem({\n                    type: 'error',\n                    message: 'Не удалось восстановить эл. почту'\n                  }));\n\n                case 8:\n                case \"end\":\n                  return _context6.stop();\n              }\n            }\n          }, _callee6, null, [[0, 5]]);\n        }));\n\n        return function (_x11, _x12) {\n          return _ref6.apply(this, arguments);\n        };\n      }()\n    })\n  }));\n}\nexport function onUserForgotPassword(dispatch, props) {\n  var mutations = props.mutations;\n  dispatch(setStepper({\n    name: 'forgotPassword',\n    content: /*#__PURE__*/React.createElement(ForgotPasswordForm, {\n      mutation: mutations.forgotPassword,\n      onBack: function onBack() {\n        return onUserLogin(dispatch, {\n          mutations: mutations\n        });\n      },\n      onSubmit: /*#__PURE__*/function () {\n        var _ref7 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee7(form, action) {\n          return regeneratorRuntime.wrap(function _callee7$(_context7) {\n            while (1) {\n              switch (_context7.prev = _context7.next) {\n                case 0:\n                  _context7.prev = 0;\n                  _context7.next = 3;\n                  return action(form);\n\n                case 3:\n                  _context7.next = 8;\n                  break;\n\n                case 5:\n                  _context7.prev = 5;\n                  _context7.t0 = _context7[\"catch\"](0);\n                  dispatch(setItem({\n                    type: 'error',\n                    message: 'Не удалось восстановить пароль'\n                  }));\n\n                case 8:\n                case \"end\":\n                  return _context7.stop();\n              }\n            }\n          }, _callee7, null, [[0, 5]]);\n        }));\n\n        return function (_x13, _x14) {\n          return _ref7.apply(this, arguments);\n        };\n      }()\n    })\n  }));\n}\nexport function onUserChangePassword(dispatch, props) {\n  var user = props.user,\n      mutation = props.mutation;\n  dispatch(setModal([{\n    path: '/',\n    home: true,\n    title: 'Смена пароля',\n    component: function component() {\n      return /*#__PURE__*/React.createElement(ChangePasswordForm, {\n        mutation: mutation,\n        title: false,\n        appearance: 'ghost',\n        onSubmit: /*#__PURE__*/function () {\n          var _ref8 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee8(form, action) {\n            return regeneratorRuntime.wrap(function _callee8$(_context8) {\n              while (1) {\n                switch (_context8.prev = _context8.next) {\n                  case 0:\n                    _context8.prev = 0;\n                    _context8.next = 3;\n                    return action({\n                      variables: {\n                        id: user.id,\n                        input: {\n                          password: form.password\n                        }\n                      }\n                    });\n\n                  case 3:\n                    _context8.next = 8;\n                    break;\n\n                  case 5:\n                    _context8.prev = 5;\n                    _context8.t0 = _context8[\"catch\"](0);\n                    dispatch(setItem({\n                      type: 'error',\n                      message: 'Не удалось изменить пароль'\n                    }));\n\n                  case 8:\n                    _context8.prev = 8;\n                    dispatch(setDrawer(null));\n                    return _context8.finish(8);\n\n                  case 11:\n                  case \"end\":\n                    return _context8.stop();\n                }\n              }\n            }, _callee8, null, [[0, 5, 8, 11]]);\n          }));\n\n          return function (_x15, _x16) {\n            return _ref8.apply(this, arguments);\n          };\n        }()\n      });\n    }\n  }]));\n}\nexport function onUserLink(dispatch, props) {\n  var id = props.id,\n      auth = props.auth,\n      owned = props.owned;\n  dispatch(setDrawer({\n    icon: 'user2',\n    title: 'Пользователь',\n    content: /*#__PURE__*/React.createElement(UserView, {\n      user: id,\n      owned: owned,\n      appearance: 'clear',\n      onChat: id !== auth && function () {\n        return onChat(dispatch, props);\n      },\n      onMembers: function onMembers() {\n        return onUserMembers(dispatch, {\n          id: id,\n          auth: auth\n        });\n      },\n      onAboutMore: function onAboutMore(user) {\n        return onUserAboutMore(dispatch, {\n          user: user\n        });\n      },\n      onCompanyLink: function onCompanyLink(company) {\n        return onUserLink(dispatch, {\n          id: company.email,\n          auth: auth\n        });\n      },\n      onProjectLink: function onProjectLink(project) {\n        return _onProjectLink(dispatch, {\n          id: project.id,\n          project: project,\n          auth: auth,\n          owned: owned\n        });\n      },\n      onProjectAdd: id !== auth && function (project) {\n        return onProjectAdd(dispatch, {\n          id: project.id,\n          project: project\n        });\n      },\n      onProjectCompanyLink: function onProjectCompanyLink(company) {\n        return auth !== company && onUserLink(dispatch, {\n          id: company.email,\n          auth: auth,\n          owned: owned\n        });\n      },\n      onProjectScreenshotClick: function onProjectScreenshotClick(_, key, screenshots) {\n        return onProjectScreenshot(dispatch, {\n          screenshots: screenshots,\n          key: key\n        });\n      }\n    })\n  }));\n}\nexport function onUserCreate(dispatch, props) {\n  var roles = props.roles,\n      canEditRole = props.canEditRole,\n      mutation = props.mutation;\n  dispatch(setDrawer({\n    icon: 'user2',\n    title: 'Создание пользователя',\n    content: /*#__PURE__*/React.createElement(UserForm, {\n      roles: roles,\n      mutation: mutation,\n      appearance: 'clear',\n      canEditRole: canEditRole,\n      onSubmit: /*#__PURE__*/function () {\n        var _ref9 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee9(form, action) {\n          var _form$company, _form$account, _form$avatar, _form$avatar2, _form$avatar2$file, _form$gender, _form$role, users;\n\n          return regeneratorRuntime.wrap(function _callee9$(_context9) {\n            while (1) {\n              switch (_context9.prev = _context9.next) {\n                case 0:\n                  _context9.prev = 0;\n                  _context9.next = 3;\n                  return action({\n                    variables: {\n                      input: {\n                        name: form.name,\n                        email: form.email,\n                        phone: form.phone,\n                        password: form.password,\n                        company: (_form$company = form.company) === null || _form$company === void 0 ? void 0 : _form$company.value,\n                        account: (_form$account = form.account) === null || _form$account === void 0 ? void 0 : _form$account.value,\n                        avatar: (_form$avatar = form.avatar) === null || _form$avatar === void 0 ? void 0 : _form$avatar.file,\n                        avatarSize: (_form$avatar2 = form.avatar) === null || _form$avatar2 === void 0 ? void 0 : (_form$avatar2$file = _form$avatar2.file) === null || _form$avatar2$file === void 0 ? void 0 : _form$avatar2$file.size,\n                        about: form.about,\n                        gender: (_form$gender = form.gender) === null || _form$gender === void 0 ? void 0 : _form$gender.value,\n                        dateOfBirth: form.dateOfBirth,\n                        role: (_form$role = form.role) === null || _form$role === void 0 ? void 0 : _form$role.value\n                      }\n                    }\n                  });\n\n                case 3:\n                  users = _context9.sent;\n                  dispatch(setDocuments(users.data.createUser));\n                  dispatch(setItem({\n                    type: 'success',\n                    message: 'Пользователь успешно создан'\n                  }));\n                  _context9.next = 11;\n                  break;\n\n                case 8:\n                  _context9.prev = 8;\n                  _context9.t0 = _context9[\"catch\"](0);\n                  dispatch(setItem({\n                    type: 'error',\n                    message: 'Не удалось создать пользователя'\n                  }));\n\n                case 11:\n                  _context9.prev = 11;\n                  dispatch(setDrawer(null));\n                  return _context9.finish(11);\n\n                case 14:\n                case \"end\":\n                  return _context9.stop();\n              }\n            }\n          }, _callee9, null, [[0, 8, 11, 14]]);\n        }));\n\n        return function (_x17, _x18) {\n          return _ref9.apply(this, arguments);\n        };\n      }()\n    })\n  }));\n}\nexport function onUserClientEdit(dispatch, props) {\n  var user = props.user,\n      mutations = props.mutations;\n  dispatch(setDrawer({\n    icon: 'user2',\n    title: 'Редактирование пользователя',\n    content: /*#__PURE__*/React.createElement(UserForm, {\n      user: user,\n      mutation: mutations.update,\n      appearance: 'clear',\n      onSubmit: /*#__PURE__*/function () {\n        var _ref10 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee10(form, action) {\n          var _form$account2, _form$avatar3, _form$avatar4, _form$avatar4$file, _form$company2, _form$gender2, _form$role2, result;\n\n          return regeneratorRuntime.wrap(function _callee10$(_context10) {\n            while (1) {\n              switch (_context10.prev = _context10.next) {\n                case 0:\n                  _context10.prev = 0;\n                  _context10.next = 3;\n                  return action({\n                    variables: {\n                      input: {\n                        name: form === null || form === void 0 ? void 0 : form.name,\n                        account: form === null || form === void 0 ? void 0 : (_form$account2 = form.account) === null || _form$account2 === void 0 ? void 0 : _form$account2.value,\n                        avatar: form === null || form === void 0 ? void 0 : (_form$avatar3 = form.avatar) === null || _form$avatar3 === void 0 ? void 0 : _form$avatar3.file,\n                        avatarSize: form === null || form === void 0 ? void 0 : (_form$avatar4 = form.avatar) === null || _form$avatar4 === void 0 ? void 0 : (_form$avatar4$file = _form$avatar4.file) === null || _form$avatar4$file === void 0 ? void 0 : _form$avatar4$file.size,\n                        company: form === null || form === void 0 ? void 0 : (_form$company2 = form.company) === null || _form$company2 === void 0 ? void 0 : _form$company2.value,\n                        about: form === null || form === void 0 ? void 0 : form.about,\n                        gender: form === null || form === void 0 ? void 0 : (_form$gender2 = form.gender) === null || _form$gender2 === void 0 ? void 0 : _form$gender2.value,\n                        phone: form === null || form === void 0 ? void 0 : form.phone,\n                        email: form === null || form === void 0 ? void 0 : form.email,\n                        dateOfBirth: form === null || form === void 0 ? void 0 : form.dateOfBirth,\n                        role: form === null || form === void 0 ? void 0 : (_form$role2 = form.role) === null || _form$role2 === void 0 ? void 0 : _form$role2.value\n                      }\n                    }\n                  });\n\n                case 3:\n                  result = _context10.sent;\n                  dispatch(updateUser(result.data.updateClientUser));\n                  dispatch(setItem({\n                    type: 'success',\n                    message: 'Данные успешно отредактированы'\n                  }));\n                  _context10.next = 11;\n                  break;\n\n                case 8:\n                  _context10.prev = 8;\n                  _context10.t0 = _context10[\"catch\"](0);\n                  dispatch(setItem({\n                    type: 'error',\n                    message: 'Не удалось отредактировать данные'\n                  }));\n\n                case 11:\n                  _context10.prev = 11;\n                  dispatch(setDrawer(null));\n                  return _context10.finish(11);\n\n                case 14:\n                case \"end\":\n                  return _context10.stop();\n              }\n            }\n          }, _callee10, null, [[0, 8, 11, 14]]);\n        }));\n\n        return function (_x19, _x20) {\n          return _ref10.apply(this, arguments);\n        };\n      }(),\n      onDelete: function onDelete() {\n        return onUserDelete(dispatch, {\n          id: user,\n          mutation: mutations.del\n        });\n      },\n      onChangePassword: function onChangePassword() {\n        return onUserChangePassword(dispatch, {\n          mutation: mutations.changePassword\n        });\n      }\n    })\n  }));\n}\nexport function onUserEdit(dispatch, props) {\n  var user = props.user,\n      roles = props.roles,\n      canEditAccount = props.canEditAccount,\n      canEditRole = props.canEditRole,\n      mutations = props.mutations;\n  dispatch(setDrawer({\n    icon: 'user2',\n    title: 'Редактирование пользователя',\n    content: /*#__PURE__*/React.createElement(UserForm, {\n      user: user,\n      roles: roles,\n      mutation: mutations.update,\n      appearance: 'clear',\n      canEditAccount: canEditAccount,\n      canEditRole: canEditRole,\n      onSubmit: /*#__PURE__*/function () {\n        var _ref11 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee11(form, action) {\n          var _form$account3, _form$avatar5, _form$avatar6, _form$avatar6$file, _form$company3, _form$gender3, _form$role3, users;\n\n          return regeneratorRuntime.wrap(function _callee11$(_context11) {\n            while (1) {\n              switch (_context11.prev = _context11.next) {\n                case 0:\n                  _context11.prev = 0;\n                  _context11.next = 3;\n                  return action({\n                    variables: {\n                      email: user,\n                      input: {\n                        name: form.name,\n                        account: (_form$account3 = form.account) === null || _form$account3 === void 0 ? void 0 : _form$account3.value,\n                        avatar: (_form$avatar5 = form.avatar) === null || _form$avatar5 === void 0 ? void 0 : _form$avatar5.file,\n                        avatarSize: (_form$avatar6 = form.avatar) === null || _form$avatar6 === void 0 ? void 0 : (_form$avatar6$file = _form$avatar6.file) === null || _form$avatar6$file === void 0 ? void 0 : _form$avatar6$file.size,\n                        company: (_form$company3 = form.company) === null || _form$company3 === void 0 ? void 0 : _form$company3.value,\n                        about: form.about,\n                        gender: (_form$gender3 = form.gender) === null || _form$gender3 === void 0 ? void 0 : _form$gender3.value,\n                        phone: form.phone,\n                        email: form.email,\n                        dateOfBirth: form.dateOfBirth,\n                        role: (_form$role3 = form.role) === null || _form$role3 === void 0 ? void 0 : _form$role3.value\n                      }\n                    }\n                  });\n\n                case 3:\n                  users = _context11.sent;\n                  dispatch(setDocuments(users.data.updateUser));\n                  dispatch(setItem({\n                    type: 'success',\n                    message: 'Пользователь успешно отредактирован'\n                  }));\n                  _context11.next = 11;\n                  break;\n\n                case 8:\n                  _context11.prev = 8;\n                  _context11.t0 = _context11[\"catch\"](0);\n                  dispatch(setItem({\n                    type: 'error',\n                    message: 'Не удалось отредактировать пользователя'\n                  }));\n\n                case 11:\n                  _context11.prev = 11;\n                  dispatch(setDrawer(null));\n                  return _context11.finish(11);\n\n                case 14:\n                case \"end\":\n                  return _context11.stop();\n              }\n            }\n          }, _callee11, null, [[0, 8, 11, 14]]);\n        }));\n\n        return function (_x21, _x22) {\n          return _ref11.apply(this, arguments);\n        };\n      }(),\n      onDelete: function onDelete() {\n        return onUserDelete(dispatch, {\n          id: user,\n          mutation: mutations.del\n        });\n      },\n      onChangePassword: function onChangePassword() {\n        return onUserChangePassword(dispatch, {\n          mutation: mutations.changePassword\n        });\n      }\n    })\n  }));\n}\nexport function onUserMembers(dispatch, props) {\n  var id = props.id,\n      auth = props.auth;\n  dispatch(setDrawer({\n    icon: 'user2',\n    title: 'Участники компании',\n    content: /*#__PURE__*/React.createElement(Members, {\n      user: id,\n      appearance: 'clear',\n      onMemberLink: function onMemberLink(member) {\n        return onUserLink(dispatch, {\n          id: member,\n          auth: auth\n        });\n      }\n    })\n  }));\n}\nexport function onUserDelete(dispatch, props) {\n  var id = props.id,\n      user = props.user,\n      mutation = props.mutation;\n  dispatch(setDrawer({\n    icon: 'delete',\n    color: 'red',\n    title: 'Удаление пользователя',\n    content: /*#__PURE__*/React.createElement(DeleteForm, {\n      mutation: mutation,\n      appearance: 'clear',\n      onCancel: function onCancel() {\n        return dispatch(setDrawer(null));\n      },\n      onSubmit: /*#__PURE__*/function () {\n        var _ref12 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee12(_, action) {\n          var users;\n          return regeneratorRuntime.wrap(function _callee12$(_context12) {\n            while (1) {\n              switch (_context12.prev = _context12.next) {\n                case 0:\n                  _context12.prev = 0;\n                  _context12.next = 3;\n                  return action({\n                    variables: {\n                      email: id\n                    }\n                  });\n\n                case 3:\n                  users = _context12.sent;\n                  dispatch(setDocuments(users.data.deleteUser));\n                  dispatch(setItem({\n                    type: 'success',\n                    message: 'Пользователь успешно удален'\n                  }));\n                  _context12.next = 12;\n                  break;\n\n                case 8:\n                  _context12.prev = 8;\n                  _context12.t0 = _context12[\"catch\"](0);\n                  console.log(_context12.t0);\n                  dispatch(setItem({\n                    type: 'error',\n                    message: 'Не удалось удалить пользователя'\n                  }));\n\n                case 12:\n                  _context12.prev = 12;\n                  dispatch(setDrawer(null));\n                  return _context12.finish(12);\n\n                case 15:\n                case \"end\":\n                  return _context12.stop();\n              }\n            }\n          }, _callee12, null, [[0, 8, 12, 15]]);\n        }));\n\n        return function (_x23, _x24) {\n          return _ref12.apply(this, arguments);\n        };\n      }()\n    }, /*#__PURE__*/React.createElement(UserCard, {\n      user: user,\n      appearance: 'clear'\n    }))\n  }));\n}\nexport function onUserAboutMore(dispatch, props) {\n  var user = props.user;\n  dispatch(setModal([{\n    path: '/',\n    title: user.about ? 'О себе' : 'Описание',\n    component: function component() {\n      return /*#__PURE__*/React.createElement(Column, {\n        style: {\n          padding: '15px'\n        }\n      }, /*#__PURE__*/React.createElement(Text, null, user.about || user.description));\n    }\n  }]));\n}\nexport function onUserFolderAdd(dispatch, props) {\n  var mutation = props.mutation,\n      _onCancel = props.onCancel,\n      callback = props.callback;\n  dispatch(setModal([{\n    path: '/',\n    title: 'Создание папки',\n    component: function component() {\n      return /*#__PURE__*/React.createElement(AddUserFolderForm, {\n        title: false,\n        mutation: mutation,\n        onCancel: function onCancel() {\n          return _onCancel ? _onCancel() : dispatch(setModal(null));\n        },\n        onSubmit: /*#__PURE__*/function () {\n          var _ref13 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee13(form, action) {\n            var response;\n            return regeneratorRuntime.wrap(function _callee13$(_context13) {\n              while (1) {\n                switch (_context13.prev = _context13.next) {\n                  case 0:\n                    _context13.next = 2;\n                    return action({\n                      variables: {\n                        name: form.name\n                      }\n                    });\n\n                  case 2:\n                    response = _context13.sent;\n                    dispatch(addUserFolder(response.data.addUserFolder));\n                    dispatch(setModal(null));\n                    if (callback) callback();\n\n                  case 6:\n                  case \"end\":\n                    return _context13.stop();\n                }\n              }\n            }, _callee13);\n          }));\n\n          return function (_x25, _x26) {\n            return _ref13.apply(this, arguments);\n          };\n        }()\n      });\n    }\n  }]));\n}\nexport function onUserFolderDelete(dispatch, props) {\n  var id = props.id,\n      mutation = props.mutation;\n  dispatch(setModal([{\n    path: '/',\n    title: 'Удаление папки',\n    component: function component() {\n      return /*#__PURE__*/React.createElement(SureDeleteForm, {\n        mutation: mutation,\n        text: 'Вы действительно хотите удалить папку?',\n        onCancel: function onCancel() {\n          return dispatch(setModal(null));\n        },\n        onSubmit: /*#__PURE__*/function () {\n          var _ref14 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee14(_, action) {\n            var response;\n            return regeneratorRuntime.wrap(function _callee14$(_context14) {\n              while (1) {\n                switch (_context14.prev = _context14.next) {\n                  case 0:\n                    _context14.next = 2;\n                    return action({\n                      variables: {\n                        id: id\n                      }\n                    });\n\n                  case 2:\n                    response = _context14.sent;\n                    dispatch(removeUserFolder(response.data.removeUserFolder));\n                    dispatch(setModal(null));\n\n                  case 5:\n                  case \"end\":\n                    return _context14.stop();\n                }\n              }\n            }, _callee14);\n          }));\n\n          return function (_x27, _x28) {\n            return _ref14.apply(this, arguments);\n          };\n        }()\n      });\n    }\n  }]));\n}","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/store/helpers/user.js"],"names":["React","UserForm","CheckinForm","LoginForm","RegisterForm","ForgotEmailForm","ForgotPasswordForm","ChangePasswordForm","AddUserFolderForm","SureDeleteForm","DeleteForm","UserCard","UserView","Members","Column","Text","setStepper","setDrawer","setModal","setUser","updateUser","addUserFolder","removeUserFolder","setDocuments","setItem","onProjectLink","onProjectAdd","onProjectScreenshot","onChat","onUserCheckin","dispatch","props","mutations","name","content","onUserRegister","onUserForgotEmail","user","response","action","accessToken","variables","form","login","data","checkin","onUserLogin","type","message","onUserForgotPassword","password","register","input","account","value","email","phone","confirmPassword","forgotEmail","forgotPassword","onUserChangePassword","mutation","path","home","title","component","id","onUserLink","auth","owned","icon","onUserMembers","onUserAboutMore","company","project","_","key","screenshots","onUserCreate","roles","canEditRole","avatar","file","avatarSize","size","about","gender","dateOfBirth","role","users","createUser","onUserClientEdit","update","result","updateClientUser","onUserDelete","del","changePassword","onUserEdit","canEditAccount","member","color","deleteUser","console","log","padding","description","onUserFolderAdd","onCancel","callback","onUserFolderDelete"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport UserForm from '../../components/FormUser'\nimport CheckinForm from '../../components/FormCheckin'\nimport LoginForm from '../../components/FormLogin'\nimport RegisterForm from '../../components/FormRegister'\nimport ForgotEmailForm from '../../components/FormForgotEmail'\nimport ForgotPasswordForm from '../../components/FormForgotPassword'\nimport ChangePasswordForm from '../../components/FormChangePassword'\nimport AddUserFolderForm from '../../components/FormAddUserFolder'\nimport SureDeleteForm from '../../components/FormSureDelete'\nimport DeleteForm from '../../components/FormDelete'\nimport UserCard from '../../components/UserCard'\nimport UserView from '../../components/UserView'\nimport Members from '../../components/Members'\n\nimport Column from '../../atomic-ui/components/Column'\nimport Text from '../../atomic-ui/components/Text'\n\nimport { setStepper } from '../actions/stepper'\nimport { setDrawer } from '../actions/drawer'\nimport { setModal } from '../actions/modal'\nimport { setUser, updateUser, addUserFolder, removeUserFolder } from '../actions/user'\nimport { setDocuments } from '../actions/documents'\nimport { setItem } from '../actions/snacks'\nimport { onProjectLink, onProjectAdd, onProjectScreenshot } from './project'\nimport { onChat } from '.'\n\nexport function onUserCheckin(dispatch, props) {\n  const { mutations } = props\n\n  dispatch(\n    setStepper({\n      name: 'checkin',\n      content: (\n        <CheckinForm\n          mutations={mutations}\n          onCreate={() => onUserRegister(dispatch, props)}\n          onForgot={() => onUserForgotEmail(dispatch, props)}\n          onGoogleError={() => {}}\n          onFacebookError={() => {}}\n          onGoogleFinally={(user) => dispatch(setUser(user))}\n          onFacebookFinally={(user) => dispatch(setUser(user))}\n          onGoogleSubmit={async (response, action) => {\n            const { accessToken } = response\n            await action({ variables: { accessToken } })\n          }}\n          onFacebookSubmit={async (response, action) => {\n            const { accessToken } = response\n            await action({ variables: { accessToken } })\n          }}\n          onSubmit={async (form, action) => {\n            try {\n              const response = await action({\n                variables: {\n                  login: form.login\n                }\n              })\n\n              if (response.data?.checkin) {\n                dispatch(updateUser({ login: form.login }))\n                onUserLogin(dispatch, {\n                  login: form.login,\n                  mutations\n                })\n              }\n            } catch (err) {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось пройти проверку'\n                })\n              )\n            }\n          }}\n        />\n      )\n    })\n  )\n}\n\nexport function onUserLogin(dispatch, props) {\n  const { login, mutations } = props\n\n  dispatch(\n    setStepper({\n      name: 'login',\n      content: (\n        <LoginForm\n          email={login}\n          mutation={mutations.login}\n          onBack={() => onUserCheckin(dispatch, { mutations })}\n          onForgot={() => onUserForgotPassword(dispatch, { mutations })}\n          onSubmit={async (form, action) => {\n            try {\n              const response = await action({\n                variables: {\n                  login,\n                  password: form.password\n                }\n              })\n\n              const user = response.data.login\n              dispatch(setUser(user))\n            } catch (err) {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось авторизоваться'\n                })\n              )\n            } finally {\n              dispatch(setStepper(null))\n            }\n          }}\n        />\n      )\n    })\n  )\n}\n\nexport function onUserRegister(dispatch, props) {\n  const { mutations } = props\n\n  dispatch(\n    setStepper({\n      name: 'register',\n      content: (\n        <RegisterForm\n          mutation={mutations.register}\n          onLogin={() => onUserCheckin(dispatch, { mutations })}\n          onSubmit={async (form, action) => {\n            try {\n              const response = await action({\n                variables: {\n                  input: {\n                    name: form.name,\n                    account: form?.account.value || 'INDIVIDUAL',\n                    email: form.email,\n                    phone: form.phone,\n                    password: form.password,\n                    confirmPassword: form.confirmPassword\n                  }\n                }\n              })\n\n              const user = response.data.register\n              dispatch(setUser({ ...user, register: true }))\n            } catch (err) {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось зарегистрировать пользователя'\n                })\n              )\n            }\n          }}\n        />\n      )\n    })\n  )\n}\n\nexport function onUserForgotEmail(dispatch, props) {\n  const { mutations } = props\n\n  dispatch(\n    setStepper({\n      name: 'forgotEmail',\n      content: (\n        <ForgotEmailForm\n          mutation={mutations.forgotEmail}\n          onBack={() => onUserLogin(dispatch, { mutations })}\n          onSubmit={async (form, action) => {\n            try {\n              await action(form)\n            } catch (err) {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось восстановить эл. почту'\n                })\n              )\n            }\n          }}\n        />\n      )\n    })\n  )\n}\n\nexport function onUserForgotPassword(dispatch, props) {\n  const { mutations } = props\n\n  dispatch(\n    setStepper({\n      name: 'forgotPassword',\n      content: (\n        <ForgotPasswordForm\n          mutation={mutations.forgotPassword}\n          onBack={() => onUserLogin(dispatch, { mutations })}\n          onSubmit={async (form, action) => {\n            try {\n              await action(form)\n            } catch (err) {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось восстановить пароль'\n                })\n              )\n            }\n          }}\n        />\n      )\n    })\n  )\n}\n\nexport function onUserChangePassword(dispatch, props) {\n  const { user, mutation } = props\n\n  dispatch(\n    setModal([\n      {\n        path: '/',\n        home: true,\n        title: 'Смена пароля',\n        component: () => (\n          <ChangePasswordForm\n            mutation={mutation}\n            title={false}\n            appearance={'ghost'}\n            onSubmit={async (form, action) => {\n              try {\n                await action({\n                  variables: {\n                    id: user.id,\n                    input: {\n                      password: form.password\n                    }\n                  }\n                })\n              } catch (err) {\n                dispatch(\n                  setItem({\n                    type: 'error',\n                    message: 'Не удалось изменить пароль'\n                  })\n                )\n              } finally {\n                dispatch(setDrawer(null))\n              }\n            }}\n          />\n        )\n      }\n    ])\n  )\n}\n\nexport function onUserLink(dispatch, props) {\n  const { id, auth, owned } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'user2',\n      title: 'Пользователь',\n      content: (\n        <UserView\n          user={id}\n          owned={owned}\n          appearance={'clear'}\n          onChat={id !== auth && (() => onChat(dispatch, props))}\n          onMembers={() => onUserMembers(dispatch, { id, auth })}\n          onAboutMore={(user) => onUserAboutMore(dispatch, { user })}\n          onCompanyLink={(company) => onUserLink(dispatch, { id: company.email, auth })}\n          onProjectLink={(project) =>\n            onProjectLink(dispatch, { id: project.id, project, auth, owned })\n          }\n          onProjectAdd={\n            id !== auth && ((project) => onProjectAdd(dispatch, { id: project.id, project }))\n          }\n          onProjectCompanyLink={(company) =>\n            auth !== company && onUserLink(dispatch, { id: company.email, auth, owned })\n          }\n          onProjectScreenshotClick={(_, key, screenshots) =>\n            onProjectScreenshot(dispatch, {\n              screenshots,\n              key\n            })\n          }\n        />\n      )\n    })\n  )\n}\n\nexport function onUserCreate(dispatch, props) {\n  const { roles, canEditRole, mutation } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'user2',\n      title: 'Создание пользователя',\n      content: (\n        <UserForm\n          roles={roles}\n          mutation={mutation}\n          appearance={'clear'}\n          canEditRole={canEditRole}\n          onSubmit={async (form, action) => {\n            try {\n              const users = await action({\n                variables: {\n                  input: {\n                    name: form.name,\n                    email: form.email,\n                    phone: form.phone,\n                    password: form.password,\n                    company: form.company?.value,\n                    account: form.account?.value,\n                    avatar: form.avatar?.file,\n                    avatarSize: form.avatar?.file?.size,\n                    about: form.about,\n                    gender: form.gender?.value,\n                    dateOfBirth: form.dateOfBirth,\n                    role: form.role?.value\n                  }\n                }\n              })\n              dispatch(setDocuments(users.data.createUser))\n              dispatch(\n                setItem({\n                  type: 'success',\n                  message: 'Пользователь успешно создан'\n                })\n              )\n            } catch (err) {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось создать пользователя'\n                })\n              )\n            } finally {\n              dispatch(setDrawer(null))\n            }\n          }}\n        />\n      )\n    })\n  )\n}\n\nexport function onUserClientEdit(dispatch, props) {\n  const { user, mutations } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'user2',\n      title: 'Редактирование пользователя',\n      content: (\n        <UserForm\n          user={user}\n          mutation={mutations.update}\n          appearance={'clear'}\n          onSubmit={async (form, action) => {\n            try {\n              const result = await action({\n                variables: {\n                  input: {\n                    name: form?.name,\n                    account: form?.account?.value,\n                    avatar: form?.avatar?.file,\n                    avatarSize: form?.avatar?.file?.size,\n                    company: form?.company?.value,\n                    about: form?.about,\n                    gender: form?.gender?.value,\n                    phone: form?.phone,\n                    email: form?.email,\n                    dateOfBirth: form?.dateOfBirth,\n                    role: form?.role?.value\n                  }\n                }\n              })\n\n              dispatch(updateUser(result.data.updateClientUser))\n              dispatch(\n                setItem({\n                  type: 'success',\n                  message: 'Данные успешно отредактированы'\n                })\n              )\n            } catch (err) {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось отредактировать данные'\n                })\n              )\n            } finally {\n              dispatch(setDrawer(null))\n            }\n          }}\n          onDelete={() =>\n            onUserDelete(dispatch, {\n              id: user,\n              mutation: mutations.del\n            })\n          }\n          onChangePassword={() =>\n            onUserChangePassword(dispatch, { mutation: mutations.changePassword })\n          }\n        />\n      )\n    })\n  )\n}\n\nexport function onUserEdit(dispatch, props) {\n  const { user, roles, canEditAccount, canEditRole, mutations } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'user2',\n      title: 'Редактирование пользователя',\n      content: (\n        <UserForm\n          user={user}\n          roles={roles}\n          mutation={mutations.update}\n          appearance={'clear'}\n          canEditAccount={canEditAccount}\n          canEditRole={canEditRole}\n          onSubmit={async (form, action) => {\n            try {\n              const users = await action({\n                variables: {\n                  email: user,\n                  input: {\n                    name: form.name,\n                    account: form.account?.value,\n                    avatar: form.avatar?.file,\n                    avatarSize: form.avatar?.file?.size,\n                    company: form.company?.value,\n                    about: form.about,\n                    gender: form.gender?.value,\n                    phone: form.phone,\n                    email: form.email,\n                    dateOfBirth: form.dateOfBirth,\n                    role: form.role?.value\n                  }\n                }\n              })\n\n              dispatch(setDocuments(users.data.updateUser))\n              dispatch(\n                setItem({\n                  type: 'success',\n                  message: 'Пользователь успешно отредактирован'\n                })\n              )\n            } catch (err) {\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось отредактировать пользователя'\n                })\n              )\n            } finally {\n              dispatch(setDrawer(null))\n            }\n          }}\n          onDelete={() =>\n            onUserDelete(dispatch, {\n              id: user,\n              mutation: mutations.del\n            })\n          }\n          onChangePassword={() =>\n            onUserChangePassword(dispatch, { mutation: mutations.changePassword })\n          }\n        />\n      )\n    })\n  )\n}\n\nexport function onUserMembers(dispatch, props) {\n  const { id, auth } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'user2',\n      title: 'Участники компании',\n      content: (\n        <Members\n          user={id}\n          appearance={'clear'}\n          onMemberLink={(member) => onUserLink(dispatch, { id: member, auth })}\n        />\n      )\n    })\n  )\n}\n\nexport function onUserDelete(dispatch, props) {\n  const { id, user, mutation } = props\n\n  dispatch(\n    setDrawer({\n      icon: 'delete',\n      color: 'red',\n      title: 'Удаление пользователя',\n      content: (\n        <DeleteForm\n          mutation={mutation}\n          appearance={'clear'}\n          onCancel={() => dispatch(setDrawer(null))}\n          onSubmit={async (_, action) => {\n            try {\n              const users = await action({\n                variables: { email: id }\n              })\n              dispatch(setDocuments(users.data.deleteUser))\n              dispatch(\n                setItem({\n                  type: 'success',\n                  message: 'Пользователь успешно удален'\n                })\n              )\n            } catch (err) {\n              console.log(err)\n              dispatch(\n                setItem({\n                  type: 'error',\n                  message: 'Не удалось удалить пользователя'\n                })\n              )\n            } finally {\n              dispatch(setDrawer(null))\n            }\n          }}>\n          <UserCard user={user} appearance={'clear'} />\n        </DeleteForm>\n      )\n    })\n  )\n}\n\nexport function onUserAboutMore(dispatch, props) {\n  const { user } = props\n\n  dispatch(\n    setModal([\n      {\n        path: '/',\n        title: user.about ? 'О себе' : 'Описание',\n        component: () => (\n          <Column style={{ padding: '15px' }}>\n            <Text>{user.about || user.description}</Text>\n          </Column>\n        )\n      }\n    ])\n  )\n}\n\nexport function onUserFolderAdd(dispatch, props) {\n  const { mutation, onCancel, callback } = props\n\n  dispatch(\n    setModal([\n      {\n        path: '/',\n        title: 'Создание папки',\n        component: () => (\n          <AddUserFolderForm\n            title={false}\n            mutation={mutation}\n            onCancel={() => (onCancel ? onCancel() : dispatch(setModal(null)))}\n            onSubmit={async (form, action) => {\n              const response = await action({\n                variables: {\n                  name: form.name\n                }\n              })\n              dispatch(addUserFolder(response.data.addUserFolder))\n              dispatch(setModal(null))\n              if (callback) callback()\n            }}\n          />\n        )\n      }\n    ])\n  )\n}\n\nexport function onUserFolderDelete(dispatch, props) {\n  const { id, mutation } = props\n\n  dispatch(\n    setModal([\n      {\n        path: '/',\n        title: 'Удаление папки',\n        component: () => (\n          <SureDeleteForm\n            mutation={mutation}\n            text={'Вы действительно хотите удалить папку?'}\n            onCancel={() => dispatch(setModal(null))}\n            onSubmit={async (_, action) => {\n              const response = await action({\n                variables: { id }\n              })\n              dispatch(removeUserFolder(response.data.removeUserFolder))\n              dispatch(setModal(null))\n            }}\n          />\n        )\n      }\n    ])\n  )\n}\n"]},"metadata":{},"sourceType":"module"}