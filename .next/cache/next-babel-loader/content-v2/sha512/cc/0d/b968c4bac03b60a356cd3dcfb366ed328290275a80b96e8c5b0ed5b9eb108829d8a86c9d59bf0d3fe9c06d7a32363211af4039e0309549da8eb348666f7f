{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport { Controller } from 'react-hook-form';\nimport { useQuery } from '@apollo/react-hooks';\nimport Row from '../../atomic-ui/components/Row';\nimport Column from '../../atomic-ui/components/Column';\nimport Message from '../../atomic-ui/components/Message';\nimport Input from '../../atomic-ui/components/Input';\nimport Button from '../../atomic-ui/components/Button';\nimport Icon from '../../atomic-ui/components/Icon';\nimport Text from '../../atomic-ui/components/Text';\nimport Difinition from '../../atomic-ui/components/Difinition';\nimport Title from '../../atomic-ui/components/Title';\nimport Alert from '../../atomic-ui/components/Alert';\nimport Select from '../../atomic-ui/components/Select';\nimport Divider from '../../atomic-ui/components/Divider';\nimport Spinner from '../../atomic-ui/components/Spinner';\nimport { getLabelCategory } from '../../utils/functions';\nimport { Loader } from '../Styled';\nimport Form from '../Form';\nimport queries from '../../graphql/queries';\nexport const Wrap = styled(Column).withConfig({\n  displayName: \"FormTicket__Wrap\",\n  componentId: \"n5aw2g-0\"\n})([\"width:100%;\"]);\n_c = Wrap;\nexport const Header = styled(Row).withConfig({\n  displayName: \"FormTicket__Header\",\n  componentId: \"n5aw2g-1\"\n})([\"justify-content:space-between;width:100%;\"]);\n_c2 = Header;\nexport const Messages = styled(Column).withConfig({\n  displayName: \"FormTicket__Messages\",\n  componentId: \"n5aw2g-2\"\n})([\"position:relative;background:#fbfbfb;border-radius:var(--surface-border-radius);padding:var(--default-gap);padding-top:55px;flex-grow:1;\"]);\n_c3 = Messages;\nexport const Meta = styled(Row).withConfig({\n  displayName: \"FormTicket__Meta\",\n  componentId: \"n5aw2g-3\"\n})([\"position:absolute;top:0;left:0;width:100%;justify-content:space-between;padding:8px var(--default-gap);border-radius:var(--surface-border-radius) var(--surface-border-radius) 0 0;background:var(--ghost-color-background);\"]);\n_c4 = Meta;\nexport const Empty = styled(Text).withConfig({\n  displayName: \"FormTicket__Empty\",\n  componentId: \"n5aw2g-4\"\n})([\"display:flex;justify-content:center;align-items:center;width:100%;height:100%;\"]);\n_c5 = Empty;\nexport const Ticket = ({\n  ticket,\n  categories,\n  appearance,\n  mutation,\n  className,\n  onFinish,\n  onReport,\n  onLink,\n  onAttach,\n  onSubmit,\n  ...props\n}) => {\n  _s();\n\n  const {\n    data,\n    loading: loadingTicket,\n    error: errorTicket\n  } = ticket ? useQuery(queries.GET_TICKET, {\n    variables: {\n      id: ticket\n    }\n  }) : {\n    data: {\n      getArticle: {}\n    },\n    loading: false,\n    error: false\n  };\n\n  if (!ticket) {\n    return /*#__PURE__*/React.createElement(Form, {\n      className: className,\n      appearance: appearance,\n      mutation: mutation,\n      onSubmit: onSubmit\n    }, ({\n      register,\n      loading,\n      errors,\n      control,\n      getValues\n    }) => {\n      var _data$getTicket, _data$getArticle;\n\n      return !loadingTicket && data ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Column, null, /*#__PURE__*/React.createElement(Title, {\n        tag: 'h4'\n      }, \"\\u041E\\u0441\\u043D\\u043E\\u0432\\u043D\\u043E\\u0435\"), errors && errors.title && /*#__PURE__*/React.createElement(Alert, {\n        style: {\n          width: '100%'\n        },\n        appearance: 'error'\n      }, \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043E\\u0431\\u0440\\u0430\\u0449\\u0435\\u043D\\u0438\\u0435\"), /*#__PURE__*/React.createElement(Input, {\n        type: 'text',\n        name: 'title',\n        ref: register({\n          required: true\n        }),\n        defaultValue: getValues('title') || ((_data$getTicket = data.getTicket) === null || _data$getTicket === void 0 ? void 0 : _data$getTicket.title),\n        placeholder: 'Название',\n        appearance: 'ghost',\n        disabled: loading\n      }), /*#__PURE__*/React.createElement(Controller, {\n        name: 'category',\n        control: control,\n        defaultValue: (_data$getArticle = data.getArticle) !== null && _data$getArticle !== void 0 && _data$getArticle.category ? {\n          value: data.getArticle.category.id,\n          label: getLabelCategory(data.getArticle.category.name)\n        } : null,\n        render: ({\n          value,\n          onChange\n        }) => /*#__PURE__*/React.createElement(Select, {\n          appearance: 'ghost',\n          placeholder: 'Выберите раздел',\n          options: categories.filter(item => item.type === 'TICKET').map(item => ({\n            value: item.id,\n            label: getLabelCategory(item.name)\n          })),\n          onChange: onChange,\n          defaultValue: value,\n          isLoading: loading,\n          isClearable: true\n        })\n      })), /*#__PURE__*/React.createElement(Divider, {\n        clear: true\n      }), /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Button, {\n        style: {\n          flexGrow: 1\n        },\n        type: 'submit',\n        disabled: loading\n      }, \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\"))) : errorTicket ? /*#__PURE__*/React.createElement(Alert, {\n        appearance: 'error',\n        style: {\n          width: '100%',\n          textAlign: 'center'\n        }\n      }, \"\\u0423\\u043F\\u0441! \\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044E \\u043E \\u0441\\u0442\\u0430\\u0442\\u044C\\u0435\") : /*#__PURE__*/React.createElement(Loader, null, /*#__PURE__*/React.createElement(Spinner, null));\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(Wrap, props, /*#__PURE__*/React.createElement(Header, null, /*#__PURE__*/React.createElement(Difinition, {\n    label: 'Номер обращения',\n    text: (ticket === null || ticket === void 0 ? void 0 : ticket.token) || '-'\n  }), /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: onFinish,\n    disabled: !ticket\n  }, \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C \\u043E\\u0431\\u0440\\u0430\\u0449\\u0435\\u043D\\u0438\\u0435\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: onReport,\n    kind: 'icon',\n    appearance: 'red',\n    disabled: !ticket\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: 'flag',\n    stroke: 'white'\n  })))), /*#__PURE__*/React.createElement(Messages, null, /*#__PURE__*/React.createElement(Meta, null, /*#__PURE__*/React.createElement(Text, null, \"\\u0422\\u0435\\u043C\\u0430: \", ticket.title), /*#__PURE__*/React.createElement(Text, null, ticket.createdAt)), ticket && ticket.messages && ticket.messages.length > 0 ? ticket.messages.map(message => /*#__PURE__*/React.createElement(Message, {\n    key: message.id,\n    avatar: message.avatar,\n    side: message.side,\n    name: message.name,\n    text: message.text,\n    time: message.time,\n    onLink: onLink\n  })) : /*#__PURE__*/React.createElement(Empty, null, \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043E\\u0431\\u0440\\u0430\\u0449\\u0435\\u043D\\u0438\\u0435\")), /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Button, {\n    kind: 'icon',\n    onSubmit: onAttach\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: 'attach',\n    stroke: 'white'\n  })), /*#__PURE__*/React.createElement(Input, {\n    placeholder: 'Отправьте сообщенение...',\n    appearance: appearance\n  }), /*#__PURE__*/React.createElement(Button, {\n    kind: 'icon',\n    onSubmit: onSubmit\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: 'send',\n    stroke: 'white'\n  }))));\n};\n\n_s(Ticket, \"4ZpngI1uv+Uo3WQHEZmTQ5FNM+k=\", false, function () {\n  return [useQuery];\n});\n\n_c6 = Ticket;\nexport default Ticket;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"Wrap\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"Messages\");\n$RefreshReg$(_c4, \"Meta\");\n$RefreshReg$(_c5, \"Empty\");\n$RefreshReg$(_c6, \"Ticket\");","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/components/FormTicket/index.js"],"names":["React","styled","Controller","useQuery","Row","Column","Message","Input","Button","Icon","Text","Difinition","Title","Alert","Select","Divider","Spinner","getLabelCategory","Loader","Form","queries","Wrap","Header","Messages","Meta","Empty","Ticket","ticket","categories","appearance","mutation","className","onFinish","onReport","onLink","onAttach","onSubmit","props","data","loading","loadingTicket","error","errorTicket","GET_TICKET","variables","id","getArticle","register","errors","control","getValues","title","width","required","getTicket","category","value","label","name","onChange","filter","item","type","map","flexGrow","textAlign","token","createdAt","messages","length","message","avatar","side","text","time"],"mappings":"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","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\nimport { Controller } from 'react-hook-form'\nimport { useQuery } from '@apollo/react-hooks'\n\nimport Row from '../../atomic-ui/components/Row'\nimport Column from '../../atomic-ui/components/Column'\nimport Message from '../../atomic-ui/components/Message'\nimport Input from '../../atomic-ui/components/Input'\nimport Button from '../../atomic-ui/components/Button'\nimport Icon from '../../atomic-ui/components/Icon'\nimport Text from '../../atomic-ui/components/Text'\nimport Difinition from '../../atomic-ui/components/Difinition'\nimport Title from '../../atomic-ui/components/Title'\nimport Alert from '../../atomic-ui/components/Alert'\nimport Select from '../../atomic-ui/components/Select'\nimport Divider from '../../atomic-ui/components/Divider'\nimport Spinner from '../../atomic-ui/components/Spinner'\n\nimport { getLabelCategory } from '../../utils/functions'\nimport { Loader } from '../Styled'\nimport Form from '../Form'\nimport queries from '../../graphql/queries'\n\nexport const Wrap = styled(Column)`\n  width: 100%;\n`\n\nexport const Header = styled(Row)`\n  justify-content: space-between;\n  width: 100%;\n`\n\nexport const Messages = styled(Column)`\n  position: relative;\n  background: #fbfbfb;\n  border-radius: var(--surface-border-radius);\n  padding: var(--default-gap);\n  padding-top: 55px;\n  flex-grow: 1;\n`\n\nexport const Meta = styled(Row)`\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  justify-content: space-between;\n  padding: 8px var(--default-gap);\n  border-radius: var(--surface-border-radius) var(--surface-border-radius) 0 0;\n  background: var(--ghost-color-background);\n`\n\nexport const Empty = styled(Text)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n`\n\nexport const Ticket = ({\n  ticket,\n  categories,\n  appearance,\n  mutation,\n  className,\n  onFinish,\n  onReport,\n  onLink,\n  onAttach,\n  onSubmit,\n  ...props\n}) => {\n  const { data, loading: loadingTicket, error: errorTicket } = ticket\n    ? useQuery(queries.GET_TICKET, {\n        variables: {\n          id: ticket\n        }\n      })\n    : { data: { getArticle: {} }, loading: false, error: false }\n\n  if (!ticket) {\n    return (\n      <Form className={className} appearance={appearance} mutation={mutation} onSubmit={onSubmit}>\n        {({ register, loading, errors, control, getValues }) =>\n          !loadingTicket && data ? (\n            <React.Fragment>\n              <Column>\n                <Title tag={'h4'}>Основное</Title>\n\n                {errors && errors.title && (\n                  <Alert style={{ width: '100%' }} appearance={'error'}>\n                    Введите название обращение\n                  </Alert>\n                )}\n                <Input\n                  type={'text'}\n                  name={'title'}\n                  ref={register({ required: true })}\n                  defaultValue={getValues('title') || data.getTicket?.title}\n                  placeholder={'Название'}\n                  appearance={'ghost'}\n                  disabled={loading}\n                />\n\n                <Controller\n                  name={'category'}\n                  control={control}\n                  defaultValue={\n                    data.getArticle?.category\n                      ? {\n                          value: data.getArticle.category.id,\n                          label: getLabelCategory(data.getArticle.category.name)\n                        }\n                      : null\n                  }\n                  render={({ value, onChange }) => (\n                    <Select\n                      appearance={'ghost'}\n                      placeholder={'Выберите раздел'}\n                      options={categories\n                        .filter((item) => item.type === 'TICKET')\n                        .map((item) => ({\n                          value: item.id,\n                          label: getLabelCategory(item.name)\n                        }))}\n                      onChange={onChange}\n                      defaultValue={value}\n                      isLoading={loading}\n                      isClearable\n                    />\n                  )}\n                />\n              </Column>\n\n              <Divider clear />\n\n              <Row>\n                <Button style={{ flexGrow: 1 }} type={'submit'} disabled={loading}>\n                  Создать\n                </Button>\n              </Row>\n            </React.Fragment>\n          ) : errorTicket ? (\n            <Alert appearance={'error'} style={{ width: '100%', textAlign: 'center' }}>\n              Упс! Не удалось загрузить информацию о статье\n            </Alert>\n          ) : (\n            <Loader>\n              <Spinner />\n            </Loader>\n          )\n        }\n      </Form>\n    )\n  }\n\n  return (\n    <Wrap {...props}>\n      <Header>\n        <Difinition label={'Номер обращения'} text={ticket?.token || '-'} />\n\n        <Row>\n          <Button onClick={onFinish} disabled={!ticket}>\n            Закрыть обращение\n          </Button>\n          <Button onClick={onReport} kind={'icon'} appearance={'red'} disabled={!ticket}>\n            <Icon icon={'flag'} stroke={'white'} />\n          </Button>\n        </Row>\n      </Header>\n\n      <Messages>\n        <Meta>\n          <Text>Тема: {ticket.title}</Text>\n          <Text>{ticket.createdAt}</Text>\n        </Meta>\n\n        {ticket && ticket.messages && ticket.messages.length > 0 ? (\n          ticket.messages.map((message) => (\n            <Message\n              key={message.id}\n              avatar={message.avatar}\n              side={message.side}\n              name={message.name}\n              text={message.text}\n              time={message.time}\n              onLink={onLink}\n            />\n          ))\n        ) : (\n          <Empty>Выберите обращение</Empty>\n        )}\n      </Messages>\n\n      <Row>\n        <Button kind={'icon'} onSubmit={onAttach}>\n          <Icon icon={'attach'} stroke={'white'} />\n        </Button>\n        <Input placeholder={'Отправьте сообщенение...'} appearance={appearance} />\n        <Button kind={'icon'} onSubmit={onSubmit}>\n          <Icon icon={'send'} stroke={'white'} />\n        </Button>\n      </Row>\n    </Wrap>\n  )\n}\n\nexport default Ticket\n"]},"metadata":{},"sourceType":"module"}