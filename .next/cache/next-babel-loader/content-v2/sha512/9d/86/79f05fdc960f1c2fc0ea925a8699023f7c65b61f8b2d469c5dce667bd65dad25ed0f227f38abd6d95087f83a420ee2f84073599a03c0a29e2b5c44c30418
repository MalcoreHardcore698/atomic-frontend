{"ast":null,"code":"import React, { useEffect, memo } from 'react';\nimport Head from 'next/head';\nimport { useRouter } from 'next/router';\nimport { useQuery, useLazyQuery, useMutation } from '@apollo/react-hooks';\nimport { useSelector, useDispatch } from 'react-redux';\nimport styled from 'styled-components';\nimport Column from '../atomic-ui/components/Column';\nimport Snacks from '../atomic-ui/components/Snacks';\nimport Spinner from '../atomic-ui/components/Spinner';\nimport Button from '../atomic-ui/components/Button';\nimport Divider from '../atomic-ui/components/Divider';\nimport Modal from '../atomic-ui/components/Modal';\nimport Text from '../atomic-ui/components/Text';\nimport Drawer from '../components/Drawer';\nimport { FixedLoader } from '../components/Styled';\nimport { removeItem, clearItems } from '../store/actions/snacks';\nimport { setMutate, setSearch, setSettings } from '../store/actions/root';\nimport { setModal } from '../store/actions/modal';\nimport { setUser } from '../store/actions/user';\nimport queries from '../graphql/queries';\nimport config from '../config';\nconst LIFETIME_OF_SNACK = 10000;\nconst Wrapper = styled.div.withConfig({\n  displayName: \"main__Wrapper\",\n  componentId: \"r90a11-0\"\n})([\"display:flex;flex-direction:column;margin-top:72px;width:100%;\"]);\nconst GuideButton = styled(Button).withConfig({\n  displayName: \"main__GuideButton\",\n  componentId: \"r90a11-1\"\n})([\"display:flex;justify-content:center;align-items:center;color:var(--default-color-accent);\"]);\n\nconst Welcome = ({\n  close\n}) => {\n  const router = useRouter();\n  return /*#__PURE__*/React.createElement(Column, {\n    style: {\n      padding: '15px'\n    }\n  }, /*#__PURE__*/React.createElement(Text, null, \"Atomic - \\u0441\\u0432\\u043E\\u0435\\u043E\\u0431\\u0440\\u0430\\u0437\\u043D\\u0430\\u044F \\u043F\\u043B\\u043E\\u0449\\u0430\\u0434\\u043A\\u0430 \\u0434\\u043B\\u044F \\u043F\\u0435\\u0440\\u0435\\u0433\\u043E\\u0432\\u043E\\u0440\\u043E\\u0432 \\u043C\\u0435\\u0436\\u0434\\u0443 \\u043F\\u0440\\u0435\\u0434\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u0435\\u043B\\u044F\\u043C\\u0438 \\u0438\\u043D\\u0434\\u0443\\u0441\\u0442\\u0440\\u0438\\u0438. \\u0410\\u043D\\u0430\\u043B\\u043E\\u0433\\u0438\\u0447\\u043D\\u043E \\u0441\\u043E\\u0446\\u0438\\u0430\\u043B\\u044C\\u043D\\u043E\\u0439 \\u0441\\u0435\\u0442\\u0438 \\u043D\\u0430 \\u0441\\u0430\\u0439\\u0442\\u0435 \\u0435\\u0441\\u0442\\u044C \\u0432\\u043E\\u0437\\u043C\\u043E\\u0436\\u043D\\u043E\\u0441\\u0442\\u044C \\u0440\\u0435\\u0430\\u0433\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043D\\u0430 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B, \\u043F\\u043E\\u0434\\u043F\\u0438\\u0441\\u044B\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F \\u043D\\u0430 \\u0440\\u0430\\u0437\\u0440\\u0430\\u0431\\u043E\\u0442\\u0447\\u0438\\u043A\\u043E\\u0432 \\u0438 \\u0437\\u0430\\u043A\\u0430\\u0437\\u0447\\u0438\\u043A\\u043E\\u0432, \\u043E\\u0446\\u0435\\u043D\\u0438\\u0432\\u0430\\u0442\\u044C \\u0438\\u0445 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u044B \\u0438 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u044B, \\u043E\\u0431\\u0449\\u0430\\u0442\\u044C\\u0441\\u044F \\u043C\\u0435\\u0436\\u0434\\u0443 \\u0441\\u043E\\u0431\\u043E\\u0439 \\u0438 \\u0434\\u0435\\u043B\\u0438\\u0442\\u044C\\u0441\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0435\\u0439 \\u0440\\u0435\\u0441\\u0443\\u0440\\u0441\\u0430 \\u043D\\u0430 \\u043B\\u044E\\u0431\\u044B\\u0445 \\u0434\\u0440\\u0443\\u0433\\u0438\\u0445 \\u043F\\u043B\\u043E\\u0449\\u0430\\u0434\\u043A\\u0430\\u0445.\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: close\n  }, \"\\u0412\\u043F\\u0435\\u0440\\u0435\\u0434!\"), /*#__PURE__*/React.createElement(Divider, {\n    clear: true\n  }), /*#__PURE__*/React.createElement(GuideButton, {\n    onClick: () => {\n      close();\n      return router.push('/guide');\n    },\n    appearance: 'clear'\n  }, \"\\u0418\\u043D\\u0441\\u0442\\u0440\\u0443\\u043A\\u0446\\u0438\\u044F\"));\n};\n\nconst Mutator = ({\n  mutation,\n  variables,\n  callback\n}) => {\n  const [action] = useMutation(mutation);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    async function mutate() {\n      const response = await action({\n        variables\n      });\n      dispatch(setMutate(null, null));\n      if (callback) await callback(response);\n    }\n\n    mutate().then();\n  }, [action, dispatch, variables, callback]);\n  return null;\n};\n\nconst MainHead = () => {\n  const root = useSelector(state => state.root);\n  return /*#__PURE__*/React.createElement(Head, null, /*#__PURE__*/React.createElement(\"title\", null, root.settings.meta.title), /*#__PURE__*/React.createElement(\"meta\", {\n    name: 'description',\n    content: root.settings.meta.description\n  }));\n};\n\nconst MainContent = ({\n  children\n}) => {\n  const router = useRouter();\n  const [getUser, {\n    data,\n    loading\n  }] = useLazyQuery(queries.GET_USER);\n  const {\n    data: dataMeta,\n    loading: loadingMeta\n  } = useQuery(queries.GET_META);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!loadingMeta && dataMeta !== null && dataMeta !== void 0 && dataMeta.getDashboardSettings) {\n      dispatch(setSettings(dataMeta === null || dataMeta === void 0 ? void 0 : dataMeta.getDashboardSettings));\n    }\n  }, [dataMeta, loadingMeta]);\n  useEffect(() => {\n    if (false) {\n      const token = localStorage.getItem(config.get('secret'));\n      if (token) getUser();\n    }\n  }, []);\n  useEffect(() => {\n    if (data && data.getUser) {\n      dispatch(setUser(data.getUser));\n    }\n  }, [data, dispatch]);\n  useEffect(() => {\n    dispatch(setSearch(router.query.search));\n  }, [dispatch]);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(FixedLoader, null, /*#__PURE__*/React.createElement(Spinner, null));\n  }\n\n  return /*#__PURE__*/React.createElement(Wrapper, null, children);\n};\n\nconst MainModal = memo(() => {\n  const {\n    user,\n    modal\n  } = useSelector(state => state);\n  const dispatch = useDispatch();\n\n  const onModalHide = () => {\n    dispatch(setModal(null));\n  };\n\n  useEffect(() => {\n    if (user.authenticated && user.register) {\n      dispatch(setModal([{\n        path: '/',\n        title: 'Добро пожаловать!',\n        component: ({\n          close\n        }) => /*#__PURE__*/React.createElement(Welcome, {\n          close: close\n        })\n      }]));\n    }\n  }, [user, dispatch]);\n  return /*#__PURE__*/React.createElement(Modal, {\n    size: modal === null || modal === void 0 ? void 0 : modal.size,\n    routes: modal === null || modal === void 0 ? void 0 : modal.routes,\n    onHide: onModalHide\n  });\n});\nconst MainSnacks = memo(() => {\n  const snacks = useSelector(state => state.snacks);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if ((snacks === null || snacks === void 0 ? void 0 : snacks.length) > 0) {\n      setTimeout(() => dispatch(clearItems()), LIFETIME_OF_SNACK);\n    }\n  }, [snacks, dispatch]);\n  return /*#__PURE__*/React.createElement(Snacks, {\n    snacks: snacks,\n    onRemove: snack => dispatch(removeItem(snack.id))\n  });\n});\n\nconst MainMutator = () => {\n  const root = useSelector(state => state.root);\n  return root.mutation && /*#__PURE__*/React.createElement(Mutator, {\n    mutation: root.mutation,\n    variables: root.variables,\n    callback: root.callback\n  });\n};\n\nexport const MainLayout = ({\n  children\n}) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MainHead, null), /*#__PURE__*/React.createElement(MainContent, null, children), /*#__PURE__*/React.createElement(Drawer, null), /*#__PURE__*/React.createElement(MainSnacks, null), /*#__PURE__*/React.createElement(MainModal, null), /*#__PURE__*/React.createElement(MainMutator, null));\nexport default MainLayout;","map":{"version":3,"sources":["/Users/malcore/Documents/workspace/freelance/atomic/atomic-frontend/layouts/main.js"],"names":["React","useEffect","memo","Head","useRouter","useQuery","useLazyQuery","useMutation","useSelector","useDispatch","styled","Column","Snacks","Spinner","Button","Divider","Modal","Text","Drawer","FixedLoader","removeItem","clearItems","setMutate","setSearch","setSettings","setModal","setUser","queries","config","LIFETIME_OF_SNACK","Wrapper","div","GuideButton","Welcome","close","router","padding","push","Mutator","mutation","variables","callback","action","dispatch","mutate","response","then","MainHead","root","state","settings","meta","title","description","MainContent","children","getUser","data","loading","GET_USER","dataMeta","loadingMeta","GET_META","getDashboardSettings","token","localStorage","getItem","get","query","search","MainModal","user","modal","onModalHide","authenticated","register","path","component","size","routes","MainSnacks","snacks","length","setTimeout","snack","id","MainMutator","MainLayout"],"mappings":"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","sourcesContent":["import React, { useEffect, memo } from 'react'\nimport Head from 'next/head'\nimport { useRouter } from 'next/router'\nimport { useQuery, useLazyQuery, useMutation } from '@apollo/react-hooks'\nimport { useSelector, useDispatch } from 'react-redux'\nimport styled from 'styled-components'\n\nimport Column from '../atomic-ui/components/Column'\nimport Snacks from '../atomic-ui/components/Snacks'\nimport Spinner from '../atomic-ui/components/Spinner'\nimport Button from '../atomic-ui/components/Button'\nimport Divider from '../atomic-ui/components/Divider'\nimport Modal from '../atomic-ui/components/Modal'\nimport Text from '../atomic-ui/components/Text'\n\nimport Drawer from '../components/Drawer'\nimport { FixedLoader } from '../components/Styled'\nimport { removeItem, clearItems } from '../store/actions/snacks'\nimport { setMutate, setSearch, setSettings } from '../store/actions/root'\nimport { setModal } from '../store/actions/modal'\nimport { setUser } from '../store/actions/user'\nimport queries from '../graphql/queries'\nimport config from '../config'\n\nconst LIFETIME_OF_SNACK = 10000\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-top: 72px;\n  width: 100%;\n`\n\nconst GuideButton = styled(Button)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: var(--default-color-accent);\n`\n\nconst Welcome = ({ close }) => {\n  const router = useRouter()\n\n  return (\n    <Column style={{ padding: '15px' }}>\n      <Text>\n        Atomic - своеобразная площадка для переговоров между представителями индустрии. Аналогично\n        социальной сети на сайте есть возможность реагировать на проекты, подписываться на\n        разработчиков и заказчиков, оценивать их аккаунты и проекты, общаться между собой и делиться\n        информацией ресурса на любых других площадках.\n      </Text>\n      <Button onClick={close}>Вперед!</Button>\n      <Divider clear />\n      <GuideButton\n        onClick={() => {\n          close()\n          return router.push('/guide')\n        }}\n        appearance={'clear'}>\n        Инструкция\n      </GuideButton>\n    </Column>\n  )\n}\n\nconst Mutator = ({ mutation, variables, callback }) => {\n  const [action] = useMutation(mutation)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    async function mutate() {\n      const response = await action({ variables })\n      dispatch(setMutate(null, null))\n      if (callback) await callback(response)\n    }\n    mutate().then()\n  }, [action, dispatch, variables, callback])\n\n  return null\n}\n\nconst MainHead = () => {\n  const root = useSelector((state) => state.root)\n\n  return (\n    <Head>\n      <title>{root.settings.meta.title}</title>\n      <meta name={'description'} content={root.settings.meta.description} />\n    </Head>\n  )\n}\n\nconst MainContent = ({ children }) => {\n  const router = useRouter()\n\n  const [getUser, { data, loading }] = useLazyQuery(queries.GET_USER)\n  const { data: dataMeta, loading: loadingMeta } = useQuery(queries.GET_META)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if (!loadingMeta && dataMeta?.getDashboardSettings) {\n      dispatch(setSettings(dataMeta?.getDashboardSettings))\n    }\n  }, [dataMeta, loadingMeta])\n\n  useEffect(() => {\n    if (typeof window !== 'undefined') {\n      const token = localStorage.getItem(config.get('secret'))\n      if (token) getUser()\n    }\n  }, [])\n\n  useEffect(() => {\n    if (data && data.getUser) {\n      dispatch(setUser(data.getUser))\n    }\n  }, [data, dispatch])\n\n  useEffect(() => {\n    dispatch(setSearch(router.query.search))\n  }, [dispatch])\n\n  if (loading) {\n    return (\n      <FixedLoader>\n        <Spinner />\n      </FixedLoader>\n    )\n  }\n\n  return <Wrapper>{children}</Wrapper>\n}\n\nconst MainModal = memo(() => {\n  const { user, modal } = useSelector((state) => state)\n  const dispatch = useDispatch()\n\n  const onModalHide = () => {\n    dispatch(setModal(null))\n  }\n\n  useEffect(() => {\n    if (user.authenticated && user.register) {\n      dispatch(\n        setModal([\n          {\n            path: '/',\n            title: 'Добро пожаловать!',\n            component: ({ close }) => <Welcome close={close} />\n          }\n        ])\n      )\n    }\n  }, [user, dispatch])\n\n  return <Modal size={modal?.size} routes={modal?.routes} onHide={onModalHide} />\n})\n\nconst MainSnacks = memo(() => {\n  const snacks = useSelector((state) => state.snacks)\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    if (snacks?.length > 0) {\n      setTimeout(() => dispatch(clearItems()), LIFETIME_OF_SNACK)\n    }\n  }, [snacks, dispatch])\n\n  return <Snacks snacks={snacks} onRemove={(snack) => dispatch(removeItem(snack.id))} />\n})\n\nconst MainMutator = () => {\n  const root = useSelector((state) => state.root)\n\n  return (\n    root.mutation && (\n      <Mutator mutation={root.mutation} variables={root.variables} callback={root.callback} />\n    )\n  )\n}\n\nexport const MainLayout = ({ children }) => (\n  <React.Fragment>\n    <MainHead />\n    <MainContent>{children}</MainContent>\n\n    <Drawer />\n    <MainSnacks />\n    <MainModal />\n    <MainMutator />\n  </React.Fragment>\n)\n\nexport default MainLayout\n"]},"metadata":{},"sourceType":"module"}