{"ast":null,"code":"import React from 'react';\nimport { getLabelCategory } from '../atomic-ui/utils/functions';\nimport { initializeApollo } from '../apollo';\nimport ContentLayout from '../layouts/content';\nimport { GridAside as Container } from '../components/Styled';\nimport ArticleList from '../components/ArticleList';\nimport queries from '../graphql/queries';\nconst TITLE = 'Статьи';\nconst START_OFFSET = 6;\n\nconst Articles = ({\n  store\n}) => /*#__PURE__*/React.createElement(ContentLayout, {\n  title: TITLE,\n  filters: [{\n    type: 'DATEPICKER',\n    placeholder: 'Дата публикации'\n  }, {\n    type: 'SELECT',\n    options: store === null || store === void 0 ? void 0 : store.categories.map(category => ({\n      value: category.id,\n      label: getLabelCategory(category.name)\n    }))\n  }],\n  options: [{\n    label: 'Категория',\n    value: 'category'\n  }, {\n    label: 'Дата публикации',\n    value: 'createdAt'\n  }],\n  query: queries.GET_ARTICLES,\n  variables: {\n    status: 'PUBLISHED'\n  },\n  store: {\n    documents: store === null || store === void 0 ? void 0 : store.articles\n  }\n}, ({\n  documents\n}) => /*#__PURE__*/React.createElement(Container, null, /*#__PURE__*/React.createElement(ArticleList, {\n  initialList: documents,\n  layout: true\n})));\n\nexport async function getServerSideProps() {\n  const client = initializeApollo();\n  let articles = [];\n  let categories = [];\n\n  try {\n    const response = await client.query({\n      query: queries.GET_META_ARTICLES,\n      variables: {\n        offset: 0,\n        limit: START_OFFSET,\n        status: 'PUBLISHED'\n      }\n    });\n\n    if (response && response.data) {\n      articles = response.data.getArticles;\n      categories = response.data.getCategories;\n    }\n  } catch (err) {\n    console.log(err);\n  }\n\n  return {\n    props: {\n      store: {\n        articles,\n        categories\n      }\n    }\n  };\n}\nexport default Articles;","map":null,"metadata":{},"sourceType":"module"}