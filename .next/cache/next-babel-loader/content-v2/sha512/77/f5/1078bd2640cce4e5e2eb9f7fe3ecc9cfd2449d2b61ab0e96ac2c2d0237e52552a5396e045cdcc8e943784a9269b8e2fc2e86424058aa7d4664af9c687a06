{"ast":null,"code":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport Row, { Wrap as WrapRow } from '../../atomic-ui/components/Row';\nimport Tooltip, { Wrap as WrapTooltip } from '../../atomic-ui/components/Tooltip';\nimport Column from '../../atomic-ui/components/Column';\nimport Title from '../../atomic-ui/components/Title';\nimport Text from '../../atomic-ui/components/Text';\nimport Icon from '../../atomic-ui/components/Icon';\nimport Meta from '../../atomic-ui/components/Meta';\nimport Image from '../../atomic-ui/components/Image';\nimport Divider from '../../atomic-ui/components/Divider';\nimport Button from '../../atomic-ui/components/Button';\nimport Difinition from '../../atomic-ui/components/Difinition';\nimport Checkbox from '../../atomic-ui/components/Checkbox';\nimport { getLabelRole } from '../../atomic-ui/utils/functions';\nimport { useEntityQuery } from '../../hooks/useEntityQuery';\nimport { More } from '../Styled';\nexport var Wrap = styled(Column).withConfig({\n  displayName: \"UserCard__Wrap\",\n  componentId: \"bx733i-0\"\n})([\"grid-gap:var(--default-gap);\", \" \", \" \", \" \", \"\"], function (_ref) {\n  var layout = _ref.layout;\n  return layout === 'column' && css([\"display:flex;flex-wrap:wrap;\"]);\n}, function (_ref2) {\n  var appearance = _ref2.appearance;\n  return appearance === 'default' && css([\"padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);\"]);\n}, function (_ref3) {\n  var appearance = _ref3.appearance;\n  return appearance === 'ghost' && css([\"padding:0;border:none;background:none;border-radius:0;box-shadow:none;\"]);\n}, function (_ref4) {\n  var appearance = _ref4.appearance;\n  return appearance === 'clear' && css([\"padding:0;border:none;background:none;border-radius:0;box-shadow:none;\"]);\n});\nexport var Content = styled(Row).withConfig({\n  displayName: \"UserCard__Content\",\n  componentId: \"bx733i-1\"\n})([\"display:grid;grid-template-columns:120px 1fr;grid-template-rows:175px;@media only screen and (max-width:480px){display:flex;flex-direction:column;grid-gap:var(--default-gap);}\"]);\nexport var Avatar = styled(Image).withConfig({\n  displayName: \"UserCard__Avatar\",\n  componentId: \"bx733i-2\"\n})([\"position:relative;width:100%;height:100%;border-radius:var(--surface-border-radius);border:1px solid var(--ghost-color-background);overflow:hidden;object-fit:cover;\"]);\nexport var Header = styled(Row).withConfig({\n  displayName: \"UserCard__Header\",\n  componentId: \"bx733i-3\"\n})([\"justify-content:space-between;align-items:center;\"]);\nexport var Actions = styled(Row).withConfig({\n  displayName: \"UserCard__Actions\",\n  componentId: \"bx733i-4\"\n})([\"grid-gap:5px;height:100%;\"]);\nexport var Name = styled(Title).withConfig({\n  displayName: \"UserCard__Name\",\n  componentId: \"bx733i-5\"\n})([\"transition:opacity 150ms ease;\", \"\"], function (_ref5) {\n  var onClick = _ref5.onClick;\n  return onClick && css([\"cursor:pointer;&:hover{opacity:0.45;}\"]);\n});\nexport var About = styled.div.withConfig({\n  displayName: \"UserCard__About\",\n  componentId: \"bx733i-6\"\n})([\"font-size:var(--font-size-m);\"]);\nexport var Indicator = styled(Difinition).withConfig({\n  displayName: \"UserCard__Indicator\",\n  componentId: \"bx733i-7\"\n})([\"align-items:flex-end;flex-grow:10;height:100%;\"]);\nexport var Footer = styled(Row).withConfig({\n  displayName: \"UserCard__Footer\",\n  componentId: \"bx733i-8\"\n})([\"justify-content:space-between;grid-column:1 / 3;@media only screen and (max-width:480px){display:flex;flex-direction:column;grid-gap:var(--default-gap);\", \"{flex-grow:1;\", \"{flex-grow:1;button{width:100%;}}}}\"], WrapRow, WrapTooltip);\nexport var Card = function Card(_ref6) {\n  var _user$avatar, _user$about, _user$projects, _user$company, _user$company$avatar, _user$company2;\n\n  var user = _ref6.user,\n      preview = _ref6.preview,\n      owned = _ref6.owned,\n      added = _ref6.added,\n      style = _ref6.style,\n      className = _ref6.className,\n      appearance = _ref6.appearance,\n      onAdd = _ref6.onAdd,\n      onLink = _ref6.onLink,\n      onChat = _ref6.onChat,\n      onMembers = _ref6.onMembers,\n      onAboutMore = _ref6.onAboutMore,\n      onCompanyLink = _ref6.onCompanyLink,\n      onChecked = _ref6.onChecked,\n      onEdit = _ref6.onEdit,\n      onDelete = _ref6.onDelete;\n\n  var _useEntityQuery = useEntityQuery(),\n      setQuery = _useEntityQuery.setQuery;\n\n  var _useState = useState(added),\n      _useState2 = _slicedToArray(_useState, 2),\n      isAdded = _useState2[0],\n      setAdded = _useState2[1];\n\n  var onClickAdd = function onClickAdd() {\n    if (onAdd) onAdd();\n    setAdded(!isAdded);\n  };\n\n  return /*#__PURE__*/React.createElement(Wrap, {\n    className: className,\n    style: style,\n    appearance: appearance\n  }, /*#__PURE__*/React.createElement(Content, null, /*#__PURE__*/React.createElement(Avatar, {\n    src: (user === null || user === void 0 ? void 0 : (_user$avatar = user.avatar) === null || _user$avatar === void 0 ? void 0 : _user$avatar.path) || '/images/avatar-default.png',\n    alt: user.name,\n    effect: 'opacity',\n    layout: 'fill'\n  }), /*#__PURE__*/React.createElement(Column, {\n    style: {\n      gridGap: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, null, /*#__PURE__*/React.createElement(Meta, {\n    category: getLabelRole(user.account)\n  }), (onChecked || onEdit || onDelete) && /*#__PURE__*/React.createElement(Actions, null, onDelete && /*#__PURE__*/React.createElement(Tooltip, {\n    text: 'Удалить пользователя'\n  }, /*#__PURE__*/React.createElement(Button, {\n    kind: 'icon',\n    size: 'xs',\n    appearance: 'red',\n    onClick: onDelete\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: 'delete',\n    size: 'xs',\n    stroke: 'white'\n  }))), onEdit && /*#__PURE__*/React.createElement(Tooltip, {\n    text: 'Редактировать пользователя'\n  }, /*#__PURE__*/React.createElement(Button, {\n    kind: 'icon',\n    size: 'xs',\n    onClick: onEdit\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: 'edit',\n    size: 'xs',\n    stroke: 'white'\n  }))), onChecked && /*#__PURE__*/React.createElement(Tooltip, {\n    text: 'Отметить пользователя',\n    self: true\n  }, /*#__PURE__*/React.createElement(Checkbox, null)))), /*#__PURE__*/React.createElement(Name, {\n    tag: 'h4',\n    onClick: function onClick() {\n      return setQuery(user.email, 'user', onLink);\n    }\n  }, user.name), /*#__PURE__*/React.createElement(About, null, (user === null || user === void 0 ? void 0 : (_user$about = user.about) === null || _user$about === void 0 ? void 0 : _user$about.length) > 135 ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Text, null, user.about.slice(0, 100), \"...\"), /*#__PURE__*/React.createElement(More, {\n    onClick: onAboutMore\n  }, \"\\u041F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0435\\u0435\")) : /*#__PURE__*/React.createElement(Text, null, user.about || 'Информация о себе не заполнена')), user.projects && /*#__PURE__*/React.createElement(Indicator, {\n    icon: 'work',\n    label: 'Проекты',\n    text: (_user$projects = user.projects) === null || _user$projects === void 0 ? void 0 : _user$projects.length\n  }))), !preview && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Divider, {\n    clear: true\n  }), /*#__PURE__*/React.createElement(Footer, null, user.account === 'ENTITY' ? /*#__PURE__*/React.createElement(Difinition, {\n    icon: 'user2',\n    label: 'Участники',\n    text: user.members,\n    onLink: user.members && onMembers\n  }) : /*#__PURE__*/React.createElement(Difinition, _extends({}, user.company ? {\n    img: (_user$company = user.company) === null || _user$company === void 0 ? void 0 : (_user$company$avatar = _user$company.avatar) === null || _user$company$avatar === void 0 ? void 0 : _user$company$avatar.path\n  } : {\n    icon: 'work'\n  }, {\n    label: 'Компания',\n    text: ((_user$company2 = user.company) === null || _user$company2 === void 0 ? void 0 : _user$company2.name) || '-',\n    onLink: user.company && onCompanyLink && function () {\n      return setQuery(user.company.email, 'user', onCompanyLink);\n    }\n  })), !owned && (onChat || onAdd) && /*#__PURE__*/React.createElement(Row, null, onChat && /*#__PURE__*/React.createElement(Tooltip, {\n    text: 'Написать пользователю'\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: 'button',\n    kind: 'icon',\n    appearance: 'green',\n    onClick: onChat,\n    revert: true\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: 'chat',\n    stroke: 'var(--default-color-green)'\n  }))), onAdd && /*#__PURE__*/React.createElement(Tooltip, {\n    text: 'Подписаться на пользователя'\n  }, /*#__PURE__*/React.createElement(Button, {\n    type: 'button',\n    kind: 'icon',\n    onClick: onClickAdd,\n    revert: !isAdded\n  }, /*#__PURE__*/React.createElement(Icon, {\n    icon: isAdded ? 'check' : 'add',\n    stroke: isAdded ? 'white' : 'var(--default-color-accent)'\n  })))))));\n};\nCard.defaultProps = {\n  appearance: 'default'\n};\nexport default Card;","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/components/UserCard/index.js"],"names":["React","useState","styled","css","Row","Wrap","WrapRow","Tooltip","WrapTooltip","Column","Title","Text","Icon","Meta","Image","Divider","Button","Difinition","Checkbox","getLabelRole","useEntityQuery","More","layout","appearance","Content","Avatar","Header","Actions","Name","onClick","About","div","Indicator","Footer","Card","user","preview","owned","added","style","className","onAdd","onLink","onChat","onMembers","onAboutMore","onCompanyLink","onChecked","onEdit","onDelete","setQuery","isAdded","setAdded","onClickAdd","avatar","path","name","gridGap","account","email","about","length","slice","projects","members","company","img","icon","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport styled, { css } from 'styled-components'\n\nimport Row, { Wrap as WrapRow } from '../../atomic-ui/components/Row'\nimport Tooltip, { Wrap as WrapTooltip } from '../../atomic-ui/components/Tooltip'\nimport Column from '../../atomic-ui/components/Column'\nimport Title from '../../atomic-ui/components/Title'\nimport Text from '../../atomic-ui/components/Text'\nimport Icon from '../../atomic-ui/components/Icon'\nimport Meta from '../../atomic-ui/components/Meta'\nimport Image from '../../atomic-ui/components/Image'\nimport Divider from '../../atomic-ui/components/Divider'\nimport Button from '../../atomic-ui/components/Button'\nimport Difinition from '../../atomic-ui/components/Difinition'\nimport Checkbox from '../../atomic-ui/components/Checkbox'\nimport { getLabelRole } from '../../atomic-ui/utils/functions'\n\nimport { useEntityQuery } from '../../hooks/useEntityQuery'\nimport { More } from '../Styled'\n\nexport const Wrap = styled(Column)`\n  grid-gap: var(--default-gap);\n\n  ${({ layout }) =>\n    layout === 'column' &&\n    css`\n      display: flex;\n      flex-wrap: wrap;\n    `}\n\n  ${({ appearance }) =>\n    appearance === 'default' &&\n    css`\n      padding: var(--default-gap);\n      background: var(--surface-background);\n      border: var(--surface-border);\n      border-radius: var(--surface-border-radius);\n      box-shadow: var(--surface-shadow);\n    `}\n\n  ${({ appearance }) =>\n    appearance === 'ghost' &&\n    css`\n      padding: 0;\n      border: none;\n      background: none;\n      border-radius: 0;\n      box-shadow: none;\n    `}\n\n  ${({ appearance }) =>\n    appearance === 'clear' &&\n    css`\n      padding: 0;\n      border: none;\n      background: none;\n      border-radius: 0;\n      box-shadow: none;\n    `}\n`\n\nexport const Content = styled(Row)`\n  display: grid;\n  grid-template-columns: 120px 1fr;\n  grid-template-rows: 175px;\n\n  @media only screen and (max-width: 480px) {\n    display: flex;\n    flex-direction: column;\n    grid-gap: var(--default-gap);\n  }\n`\n\nexport const Avatar = styled(Image)`\n  position: relative;\n  width: 100%;\n  height: 100%;\n  border-radius: var(--surface-border-radius);\n  border: 1px solid var(--ghost-color-background);\n  overflow: hidden;\n  object-fit: cover;\n`\n\nexport const Header = styled(Row)`\n  justify-content: space-between;\n  align-items: center;\n`\n\nexport const Actions = styled(Row)`\n  grid-gap: 5px;\n  height: 100%;\n`\n\nexport const Name = styled(Title)`\n  transition: opacity 150ms ease;\n\n  ${({ onClick }) =>\n    onClick &&\n    css`\n      cursor: pointer;\n\n      &:hover {\n        opacity: 0.45;\n      }\n    `}\n`\n\nexport const About = styled.div`\n  font-size: var(--font-size-m);\n`\n\nexport const Indicator = styled(Difinition)`\n  align-items: flex-end;\n  flex-grow: 10;\n  height: 100%;\n`\n\nexport const Footer = styled(Row)`\n  justify-content: space-between;\n  grid-column: 1 / 3;\n\n  @media only screen and (max-width: 480px) {\n    display: flex;\n    flex-direction: column;\n    grid-gap: var(--default-gap);\n\n    ${WrapRow} {\n      flex-grow: 1;\n\n      ${WrapTooltip} {\n        flex-grow: 1;\n\n        button {\n          width: 100%;\n        }\n      }\n    }\n  }\n`\n\nexport const Card = ({\n  user,\n  preview,\n  owned,\n  added,\n  style,\n  className,\n  appearance,\n  onAdd,\n  onLink,\n  onChat,\n  onMembers,\n  onAboutMore,\n  onCompanyLink,\n  onChecked,\n  onEdit,\n  onDelete\n}) => {\n  const { setQuery } = useEntityQuery()\n  const [isAdded, setAdded] = useState(added)\n\n  const onClickAdd = () => {\n    if (onAdd) onAdd()\n    setAdded(!isAdded)\n  }\n\n  return (\n    <Wrap className={className} style={style} appearance={appearance}>\n      <Content>\n        <Avatar\n          src={user?.avatar?.path || '/images/avatar-default.png'}\n          alt={user.name}\n          effect={'opacity'}\n          layout={'fill'}\n        />\n        <Column style={{ gridGap: 5 }}>\n          <Header>\n            <Meta category={getLabelRole(user.account)} />\n\n            {(onChecked || onEdit || onDelete) && (\n              <Actions>\n                {onDelete && (\n                  <Tooltip text={'Удалить пользователя'}>\n                    <Button kind={'icon'} size={'xs'} appearance={'red'} onClick={onDelete}>\n                      <Icon icon={'delete'} size={'xs'} stroke={'white'} />\n                    </Button>\n                  </Tooltip>\n                )}\n                {onEdit && (\n                  <Tooltip text={'Редактировать пользователя'}>\n                    <Button kind={'icon'} size={'xs'} onClick={onEdit}>\n                      <Icon icon={'edit'} size={'xs'} stroke={'white'} />\n                    </Button>\n                  </Tooltip>\n                )}\n                {onChecked && (\n                  <Tooltip text={'Отметить пользователя'} self>\n                    <Checkbox />\n                  </Tooltip>\n                )}\n              </Actions>\n            )}\n          </Header>\n\n          <Name tag={'h4'} onClick={() => setQuery(user.email, 'user', onLink)}>\n            {user.name}\n          </Name>\n\n          <About>\n            {user?.about?.length > 135 ? (\n              <React.Fragment>\n                <Text>{user.about.slice(0, 100)}...</Text>\n                <More onClick={onAboutMore}>Подробнее</More>\n              </React.Fragment>\n            ) : (\n              <Text>{user.about || 'Информация о себе не заполнена'}</Text>\n            )}\n          </About>\n          {user.projects && (\n            <Indicator icon={'work'} label={'Проекты'} text={user.projects?.length} />\n          )}\n        </Column>\n      </Content>\n\n      {!preview && (\n        <React.Fragment>\n          <Divider clear />\n\n          <Footer>\n            {user.account === 'ENTITY' ? (\n              <Difinition\n                icon={'user2'}\n                label={'Участники'}\n                text={user.members}\n                onLink={user.members && onMembers}\n              />\n            ) : (\n              <Difinition\n                {...(user.company\n                  ? {\n                      img: user.company?.avatar?.path\n                    }\n                  : {\n                      icon: 'work'\n                    })}\n                label={'Компания'}\n                text={user.company?.name || '-'}\n                onLink={\n                  user.company &&\n                  onCompanyLink &&\n                  (() => setQuery(user.company.email, 'user', onCompanyLink))\n                }\n              />\n            )}\n\n            {!owned && (onChat || onAdd) && (\n              <Row>\n                {onChat && (\n                  <Tooltip text={'Написать пользователю'}>\n                    <Button\n                      type={'button'}\n                      kind={'icon'}\n                      appearance={'green'}\n                      onClick={onChat}\n                      revert>\n                      <Icon icon={'chat'} stroke={'var(--default-color-green)'} />\n                    </Button>\n                  </Tooltip>\n                )}\n                {onAdd && (\n                  <Tooltip text={'Подписаться на пользователя'}>\n                    <Button type={'button'} kind={'icon'} onClick={onClickAdd} revert={!isAdded}>\n                      <Icon\n                        icon={isAdded ? 'check' : 'add'}\n                        stroke={isAdded ? 'white' : 'var(--default-color-accent)'}\n                      />\n                    </Button>\n                  </Tooltip>\n                )}\n              </Row>\n            )}\n          </Footer>\n        </React.Fragment>\n      )}\n    </Wrap>\n  )\n}\n\nCard.defaultProps = {\n  appearance: 'default'\n}\n\nexport default Card\n"]},"metadata":{},"sourceType":"module"}