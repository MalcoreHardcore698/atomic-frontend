{"ast":null,"code":"var _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useMemo, memo } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useQuery, useLazyQuery } from '@apollo/react-hooks';\nimport GlobalSearch from '../../atomic-ui/components/GlobalSearch';\nimport { Card } from '../../layouts/dashboard/content';\nimport { setModal } from '../../store/actions/modal';\nimport queries from '../../graphql/queries';\nexport const Query = memo(_c = _s(({\n  data,\n  statuses,\n  categories,\n  loading,\n  search,\n  entity,\n  entities,\n  onJump,\n  onChange,\n  onSubmit\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n\n  const hideModal = () => dispatch(setModal(null));\n\n  return /*#__PURE__*/React.createElement(GlobalSearch, {\n    search: search,\n    loading: loading,\n    initialEntity: entity,\n    result: search && data && entity && data[entity === null || entity === void 0 ? void 0 : entity.value],\n    entities: (entities || []).map(elem => ({ ...elem,\n      render: item => /*#__PURE__*/React.createElement(Card, {\n        key: item.id || item.email,\n        item: item,\n        statuses: statuses,\n        categories: categories,\n        appearance: 'clear',\n        component: elem.render(item),\n        onLink: hideModal,\n        onEdit: hideModal // onDelete={(document) => onJump('/delete', { item: document, entity: elem })}\n        ,\n        withoutChecked: true\n      })\n    })),\n    onSubmit: onSubmit,\n    onChange: onChange\n  });\n}, \"rgTLoBID190wEKCp9+G8W6F7A5M=\", false, function () {\n  return [useDispatch];\n}));\n_c2 = Query;\nexport const QuerySearch = memo(_c3 = _s2(({\n  search,\n  entity,\n  entities,\n  setSearch,\n  onHide,\n  onJump,\n  onChange\n}) => {\n  _s2();\n\n  const initialResult = [null, {\n    data: null,\n    loading: false,\n    refetch: null\n  }];\n  const [load, {\n    data,\n    loading,\n    refetch\n  }] = entity ? useLazyQuery(entity.query) : initialResult;\n  const isPost = useMemo(() => entity.value === 'article' || entity.value === 'project', [entity]);\n  const {\n    data: dataCategories,\n    loading: loadingCategories\n  } = isPost ? useQuery(queries.GET_CATEGORIES) : initialResult;\n  const {\n    data: dataStatuses,\n    loading: loadingStatuses\n  } = isPost ? useQuery(queries.GET_POST_STATUSES) : initialResult;\n\n  const onSubmit = value => {\n    const variables = {\n      search: value\n    };\n    if (setSearch) setSearch(value);\n\n    if (value) {\n      if (refetch) {\n        refetch(variables);\n      }\n\n      if (load) {\n        load({\n          variables\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Query, {\n    data: data,\n    entity: entity,\n    search: search,\n    statuses: dataStatuses === null || dataStatuses === void 0 ? void 0 : dataStatuses.getPostStatus,\n    categories: dataCategories === null || dataCategories === void 0 ? void 0 : dataCategories.getCategories,\n    loading: loading || loadingCategories || loadingStatuses,\n    entities: entities,\n    onHide: onHide,\n    onJump: onJump,\n    onChange: onChange,\n    onSubmit: onSubmit\n  });\n}, \"rMuKnjKPsf4GC8J0nVv1xFnykQw=\", false, function () {\n  return [useLazyQuery, useQuery, useQuery];\n}));\n_c4 = QuerySearch;\nexport default QuerySearch;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"Query$memo\");\n$RefreshReg$(_c2, \"Query\");\n$RefreshReg$(_c3, \"QuerySearch$memo\");\n$RefreshReg$(_c4, \"QuerySearch\");","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/components/QuerySearch/index.js"],"names":["React","useMemo","memo","useDispatch","useQuery","useLazyQuery","GlobalSearch","Card","setModal","queries","Query","data","statuses","categories","loading","search","entity","entities","onJump","onChange","onSubmit","dispatch","hideModal","value","map","elem","render","item","id","email","QuerySearch","setSearch","onHide","initialResult","refetch","load","query","isPost","dataCategories","loadingCategories","GET_CATEGORIES","dataStatuses","loadingStatuses","GET_POST_STATUSES","variables","getPostStatus","getCategories"],"mappings":"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","sourcesContent":["import React, { useMemo, memo } from 'react'\nimport { useDispatch } from 'react-redux'\nimport { useQuery, useLazyQuery } from '@apollo/react-hooks'\n\nimport GlobalSearch from '../../atomic-ui/components/GlobalSearch'\n\nimport { Card } from '../../layouts/dashboard/content'\nimport { setModal } from '../../store/actions/modal'\nimport queries from '../../graphql/queries'\n\nexport const Query = memo(\n  ({\n    data,\n    statuses,\n    categories,\n    loading,\n    search,\n    entity,\n    entities,\n    onJump,\n    onChange,\n    onSubmit\n  }) => {\n    const dispatch = useDispatch()\n\n    const hideModal = () => dispatch(setModal(null))\n\n    return (\n      <GlobalSearch\n        search={search}\n        loading={loading}\n        initialEntity={entity}\n        result={search && data && entity && data[entity?.value]}\n        entities={(entities || []).map((elem) => ({\n          ...elem,\n          render: (item) => (\n            <Card\n              key={item.id || item.email}\n              item={item}\n              statuses={statuses}\n              categories={categories}\n              appearance={'clear'}\n              component={elem.render(item)}\n              onLink={hideModal}\n              onEdit={hideModal}\n              // onDelete={(document) => onJump('/delete', { item: document, entity: elem })}\n              withoutChecked\n            />\n          )\n        }))}\n        onSubmit={onSubmit}\n        onChange={onChange}\n      />\n    )\n  }\n)\n\nexport const QuerySearch = memo(\n  ({ search, entity, entities, setSearch, onHide, onJump, onChange }) => {\n    const initialResult = [null, { data: null, loading: false, refetch: null }]\n    const [load, { data, loading, refetch }] = entity ? useLazyQuery(entity.query) : initialResult\n\n    const isPost = useMemo(() => entity.value === 'article' || entity.value === 'project', [entity])\n\n    const { data: dataCategories, loading: loadingCategories } = isPost\n      ? useQuery(queries.GET_CATEGORIES)\n      : initialResult\n\n    const { data: dataStatuses, loading: loadingStatuses } = isPost\n      ? useQuery(queries.GET_POST_STATUSES)\n      : initialResult\n\n    const onSubmit = (value) => {\n      const variables = { search: value }\n\n      if (setSearch) setSearch(value)\n\n      if (value) {\n        if (refetch) {\n          refetch(variables)\n        }\n        if (load) {\n          load({ variables })\n        }\n      }\n    }\n\n    return (\n      <Query\n        data={data}\n        entity={entity}\n        search={search}\n        statuses={dataStatuses?.getPostStatus}\n        categories={dataCategories?.getCategories}\n        loading={loading || loadingCategories || loadingStatuses}\n        entities={entities}\n        onHide={onHide}\n        onJump={onJump}\n        onChange={onChange}\n        onSubmit={onSubmit}\n      />\n    )\n  }\n)\n\nexport default QuerySearch\n"]},"metadata":{},"sourceType":"module"}