{"ast":null,"code":"import _toConsumableArray from \"C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _taggedTemplateLiteral from \"C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\dan82\\\\Documents\\\\workspace\\\\FREELANCE\\\\atomic\\\\atomic-frontend\\\\atomic-ui\\\\components\\\\RoomsEditor\\\\index.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _templateObject13() {\n  var data = _taggedTemplateLiteral([\"\\n  font-weight: var(--font-weight-bold);\\n  line-height: 1;\\n\\n  @media only screen and (max-width: 480px) {\\n    font-size: var(--font-size-l);\\n  }\\n\"]);\n\n  _templateObject13 = function _templateObject13() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject12() {\n  var data = _taggedTemplateLiteral([\"\\n        width: 12px;\\n        border-radius: 4px;\\n      \"]);\n\n  _templateObject12 = function _templateObject12() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject11() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  flex-wrap: wrap;\\n  grid-gap: 5px;\\n\\n  span {\\n    background: var(--default-color-accent);\\n    border-radius: var(--surface-border-radius);\\n    width: 4px;\\n    min-height: 16px;\\n\\n    \", \"\\n  }\\n\"]);\n\n  _templateObject11 = function _templateObject11() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject10() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  grid-gap: 10px;\\n\\n  span {\\n    white-space: nowrap;\\n  }\\n\\n  @media only screen and (max-width: 996px) {\\n    width: 100%;\\n  }\\n\"]);\n\n  _templateObject10 = function _templateObject10() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject9() {\n  var data = _taggedTemplateLiteral([\"\\n  align-items: center;\\n  grid-gap: 5px;\\n\\n  button {\\n    width: 100%;\\n    flex-grow: 1;\\n\\n    & > i {\\n      height: 100%;\\n      width: 100%;\\n\\n      & > svg {\\n        transform: scale(0.35);\\n      }\\n    }\\n  }\\n\"]);\n\n  _templateObject9 = function _templateObject9() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject8() {\n  var data = _taggedTemplateLiteral([\"\\n      flex-direction: column;\\n    \"]);\n\n  _templateObject8 = function _templateObject8() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject7() {\n  var data = _taggedTemplateLiteral([\"\\n  flex-grow: 1;\\n  grid-gap: 10px;\\n\\n  input:first-child {\\n    max-width: 96px;\\n    text-align: right;\\n  }\\n\\n  \", \"\\n\"]);\n\n  _templateObject7 = function _templateObject7() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  justify-content: space-between;\\n  align-items: center;\\n  flex-grow: 1;\\n  grid-gap: 5px;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  font-size: var(--font-size-s);\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n      flex-direction: row;\\n      flex-wrap: wrap;\\n      padding: 2px;\\n      grid-gap: 15px;\\n    \"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  grid-gap: 5px 0;\\n\\n  \", \"\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  display: flex;\\n  flex-direction: column;\\n  width: 100%;\\n  max-width: 100%;\\n  flex-grow: 1;\\n  grid-gap: 5px;\\n  margin-bottom: var(--default-gap);\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  grid-gap: 0;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect } from 'react';\nimport styled, { css } from 'styled-components';\nimport { v4 } from 'uuid';\nimport Row from '../Row';\nimport Column from '../Column';\nimport Button from '../Button';\nimport Tooltip from '../Tooltip';\nimport Divider from '../Divider';\nimport Input from '../Input';\nimport Alert from '../Alert';\nimport Text from '../Text';\nimport Icon from '../Icon';\nimport Title from '../Title';\nexport var Wrap = styled(Column)(_templateObject());\n_c = Wrap;\nexport var Container = styled(Column)(_templateObject2());\n_c2 = Container;\nexport var List = styled(Column)(_templateObject3(), function (_ref) {\n  var readOnly = _ref.readOnly;\n  return readOnly && css(_templateObject4());\n});\n_c3 = List;\nexport var InputLabel = styled(Text)(_templateObject5());\n_c4 = InputLabel;\nexport var Item = styled(Row)(_templateObject6());\n_c5 = Item;\nexport var Header = styled(Row)(_templateObject7(), function (_ref2) {\n  var readOnly = _ref2.readOnly;\n  return readOnly && css(_templateObject8());\n});\n_c6 = Header;\nexport var Actions = styled(Row)(_templateObject9());\n_c7 = Actions;\nexport var AddButton = styled(Button)(_templateObject10());\n_c8 = AddButton;\nexport var Trunks = styled.div(_templateObject11(), function (_ref3) {\n  var value = _ref3.value;\n  return value < 9 && css(_templateObject12());\n});\n_c9 = Trunks;\nexport var Value = styled(Title)(_templateObject13());\n_c10 = Value;\nexport var ListItem = function ListItem(_ref4) {\n  var item = _ref4.item,\n      readOnly = _ref4.readOnly,\n      divided = _ref4.divided,\n      onEdit = _ref4.onEdit,\n      onDelete = _ref4.onDelete;\n  return __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 3\n    }\n  }, __jsx(Item, {\n    readOnly: readOnly,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  }, __jsx(Header, {\n    readOnly: readOnly,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, readOnly && item.value ? __jsx(Trunks, {\n    value: item.value,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 11\n    }\n  }, new Array(Number(item.value)).fill(null).map(function (_, i) {\n    return __jsx(\"span\", {\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 69\n      }\n    });\n  })) : null, readOnly ? __jsx(Value, {\n    tag: 'h4',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, item.value ? \"\".concat(item.value, \" \") : null, item.name) : null, !readOnly && __jsx(Input, {\n    type: 'text',\n    defaultValue: item.value,\n    appearance: 'ghost',\n    placeholder: 'Значение',\n    onChange: function onChange(e) {\n      return onEdit && onEdit(_objectSpread(_objectSpread({}, item), {}, {\n        value: e.target.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }), !readOnly && __jsx(Input, {\n    type: 'text',\n    defaultValue: item.name,\n    appearance: 'ghost',\n    placeholder: 'Введите название',\n    onChange: function onChange(e) {\n      return onEdit && onEdit(_objectSpread(_objectSpread({}, item), {}, {\n        name: e.target.value\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 11\n    }\n  })), !readOnly && onDelete && __jsx(Actions, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 9\n    }\n  }, __jsx(Tooltip, {\n    text: 'Удалить',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, __jsx(Button, {\n    size: 'xs',\n    kind: 'icon',\n    appearance: 'ghost',\n    stroke: 'none',\n    onClick: function onClick() {\n      return onDelete(item);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }\n  }, __jsx(Icon, {\n    icon: 'delete',\n    stroke: 'none',\n    fill: 'var(--default-color-red)',\n    size: 'xs',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  }))))), !readOnly && divided && __jsx(Divider, {\n    clear: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 30\n    }\n  }));\n};\n_c11 = ListItem;\nexport var InteractiveList = function InteractiveList(_ref5) {\n  var list = _ref5.list,\n      readOnly = _ref5.readOnly,\n      onChange = _ref5.onChange;\n\n  var onEdit = function onEdit(edited) {\n    var mapped = function mapped(prev) {\n      return prev.map(function (item) {\n        return (item === null || item === void 0 ? void 0 : item.id) === (edited === null || edited === void 0 ? void 0 : edited.id) ? edited : item;\n      });\n    };\n\n    if (onChange) onChange(mapped);\n  };\n\n  var onDelete = function onDelete(deleted) {\n    var filtered = function filtered(prev) {\n      return prev.filter(function (item) {\n        return (item === null || item === void 0 ? void 0 : item.id) !== (deleted === null || deleted === void 0 ? void 0 : deleted.id);\n      });\n    };\n\n    if (onChange) onChange(filtered);\n  };\n\n  return __jsx(List, {\n    readOnly: readOnly,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 5\n    }\n  }, (list || []).length === 0 && __jsx(Alert, {\n    style: {\n      width: '100%',\n      textAlign: 'center',\n      flexGrow: 1\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 9\n    }\n  }, \"\\u041F\\u0443\\u0441\\u0442\\u043E\"), (list || []).map(function (item, index) {\n    return __jsx(ListItem, {\n      key: item === null || item === void 0 ? void 0 : item.id,\n      item: item,\n      readOnly: readOnly,\n      divided: (list || []).length - 1 !== index,\n      onDelete: onDelete,\n      onEdit: onEdit,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }\n    });\n  }));\n};\n_c12 = InteractiveList;\nexport var RoomsEditor = function RoomsEditor(_ref6) {\n  _s();\n\n  var label = _ref6.label,\n      defaultValue = _ref6.defaultValue,\n      readOnly = _ref6.readOnly,\n      onChange = _ref6.onChange;\n\n  var _useState = useState(defaultValue || []),\n      rooms = _useState[0],\n      setRooms = _useState[1];\n\n  var onAdd = function onAdd() {\n    var name = 'Новое учебное помещение';\n    var item = {\n      id: v4(),\n      name: name,\n      value: null\n    };\n    setRooms(function (prev) {\n      return [].concat(_toConsumableArray(prev), [item]);\n    });\n  };\n\n  useEffect(function () {\n    if (onChange) onChange(rooms);\n  }, [rooms, onChange]);\n  useEffect(function () {\n    setRooms(defaultValue);\n  }, [defaultValue]);\n\n  if (readOnly && rooms.length === 0) {\n    return null;\n  }\n\n  return __jsx(Wrap, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 5\n    }\n  }, __jsx(Container, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }\n  }, label && readOnly && __jsx(InputLabel, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 31\n    }\n  }, label), __jsx(InteractiveList, {\n    list: rooms,\n    onChange: setRooms,\n    readOnly: readOnly,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 9\n    }\n  }), !readOnly && __jsx(AddButton, {\n    type: 'button',\n    onClick: onAdd,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 13\n    }\n  }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"), __jsx(Icon, {\n    type: 'button',\n    icon: 'add',\n    stroke: 'white',\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 13\n    }\n  }))));\n};\n\n_s(RoomsEditor, \"bghgY8KH/OJ83j4v0eCmrLbVhx0=\");\n\n_c13 = RoomsEditor;\nRoomsEditor.defaultProps = {\n  label: 'Количество учебных помещений'\n};\nexport default RoomsEditor;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12, _c13;\n\n$RefreshReg$(_c, \"Wrap\");\n$RefreshReg$(_c2, \"Container\");\n$RefreshReg$(_c3, \"List\");\n$RefreshReg$(_c4, \"InputLabel\");\n$RefreshReg$(_c5, \"Item\");\n$RefreshReg$(_c6, \"Header\");\n$RefreshReg$(_c7, \"Actions\");\n$RefreshReg$(_c8, \"AddButton\");\n$RefreshReg$(_c9, \"Trunks\");\n$RefreshReg$(_c10, \"Value\");\n$RefreshReg$(_c11, \"ListItem\");\n$RefreshReg$(_c12, \"InteractiveList\");\n$RefreshReg$(_c13, \"RoomsEditor\");","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/atomic-ui/components/RoomsEditor/index.js"],"names":["React","useState","useEffect","styled","css","v4","Row","Column","Button","Tooltip","Divider","Input","Alert","Text","Icon","Title","Wrap","Container","List","readOnly","InputLabel","Item","Header","Actions","AddButton","Trunks","div","value","Value","ListItem","item","divided","onEdit","onDelete","Array","Number","fill","map","_","i","name","e","target","InteractiveList","list","onChange","edited","mapped","prev","id","deleted","filtered","filter","length","width","textAlign","flexGrow","index","RoomsEditor","label","defaultValue","rooms","setRooms","onAdd","defaultProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport styled, { css } from 'styled-components'\r\nimport { v4 } from 'uuid'\r\n\r\nimport Row from '../Row'\r\nimport Column from '../Column'\r\nimport Button from '../Button'\r\nimport Tooltip from '../Tooltip'\r\nimport Divider from '../Divider'\r\nimport Input from '../Input'\r\nimport Alert from '../Alert'\r\nimport Text from '../Text'\r\nimport Icon from '../Icon'\r\nimport Title from '../Title'\r\n\r\nexport const Wrap = styled(Column)`\r\n  grid-gap: 0;\r\n`\r\n\r\nexport const Container = styled(Column)`\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 100%;\r\n  max-width: 100%;\r\n  flex-grow: 1;\r\n  grid-gap: 5px;\r\n  margin-bottom: var(--default-gap);\r\n`\r\n\r\nexport const List = styled(Column)`\r\n  grid-gap: 5px 0;\r\n\r\n  ${({ readOnly }) =>\r\n    readOnly &&\r\n    css`\r\n      flex-direction: row;\r\n      flex-wrap: wrap;\r\n      padding: 2px;\r\n      grid-gap: 15px;\r\n    `}\r\n`\r\n\r\nexport const InputLabel = styled(Text)`\r\n  font-size: var(--font-size-s);\r\n`\r\n\r\nexport const Item = styled(Row)`\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  flex-grow: 1;\r\n  grid-gap: 5px;\r\n`\r\n\r\nexport const Header = styled(Row)`\r\n  flex-grow: 1;\r\n  grid-gap: 10px;\r\n\r\n  input:first-child {\r\n    max-width: 96px;\r\n    text-align: right;\r\n  }\r\n\r\n  ${({ readOnly }) =>\r\n    readOnly &&\r\n    css`\r\n      flex-direction: column;\r\n    `}\r\n`\r\n\r\nexport const Actions = styled(Row)`\r\n  align-items: center;\r\n  grid-gap: 5px;\r\n\r\n  button {\r\n    width: 100%;\r\n    flex-grow: 1;\r\n\r\n    & > i {\r\n      height: 100%;\r\n      width: 100%;\r\n\r\n      & > svg {\r\n        transform: scale(0.35);\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const AddButton = styled(Button)`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  grid-gap: 10px;\r\n\r\n  span {\r\n    white-space: nowrap;\r\n  }\r\n\r\n  @media only screen and (max-width: 996px) {\r\n    width: 100%;\r\n  }\r\n`\r\n\r\nexport const Trunks = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n  flex-wrap: wrap;\r\n  grid-gap: 5px;\r\n\r\n  span {\r\n    background: var(--default-color-accent);\r\n    border-radius: var(--surface-border-radius);\r\n    width: 4px;\r\n    min-height: 16px;\r\n\r\n    ${({ value }) =>\r\n      value < 9 &&\r\n      css`\r\n        width: 12px;\r\n        border-radius: 4px;\r\n      `}\r\n  }\r\n`\r\n\r\nexport const Value = styled(Title)`\r\n  font-weight: var(--font-weight-bold);\r\n  line-height: 1;\r\n\r\n  @media only screen and (max-width: 480px) {\r\n    font-size: var(--font-size-l);\r\n  }\r\n`\r\n\r\nexport const ListItem = ({ item, readOnly, divided, onEdit, onDelete }) => (\r\n  <React.Fragment>\r\n    <Item readOnly={readOnly}>\r\n      <Header readOnly={readOnly}>\r\n        {(readOnly && item.value) ? (\r\n          <Trunks value={item.value}>\r\n            {new Array(Number(item.value)).fill(null).map((_, i) => <span key={i} />)}\r\n          </Trunks>\r\n        ) : null}\r\n        {readOnly ? (\r\n          <Value tag={'h4'}>\r\n            {item.value ? `${item.value} ` : null}{item.name}\r\n          </Value>\r\n        ) : null}\r\n        {!readOnly && (\r\n          <Input\r\n            type={'text'}\r\n            defaultValue={item.value}\r\n            appearance={'ghost'}\r\n            placeholder={'Значение'}\r\n            onChange={(e) => onEdit && onEdit({ ...item, value: e.target.value })}\r\n          />\r\n        )}\r\n        {!readOnly && (\r\n          <Input\r\n            type={'text'}\r\n            defaultValue={item.name}\r\n            appearance={'ghost'}\r\n            placeholder={'Введите название'}\r\n            onChange={(e) => onEdit && onEdit({ ...item, name: e.target.value })}\r\n          />\r\n        )}\r\n      </Header>\r\n\r\n      {!readOnly && onDelete && (\r\n        <Actions>\r\n          <Tooltip text={'Удалить'}>\r\n            <Button\r\n              size={'xs'}\r\n              kind={'icon'}\r\n              appearance={'ghost'}\r\n              stroke={'none'}\r\n              onClick={() => onDelete(item)}>\r\n              <Icon\r\n                icon={'delete'}\r\n                stroke={'none'}\r\n                fill={'var(--default-color-red)'}\r\n                size={'xs'}\r\n              />\r\n            </Button>\r\n          </Tooltip>\r\n        </Actions>\r\n      )}\r\n    </Item>\r\n    {!readOnly && divided && <Divider clear />}\r\n  </React.Fragment>\r\n)\r\n\r\nexport const InteractiveList = ({ list, readOnly, onChange }) => {\r\n  const onEdit = (edited) => {\r\n    const mapped = (prev) => prev.map((item) => (item?.id === edited?.id ? edited : item))\r\n    if (onChange) onChange(mapped)\r\n  }\r\n\r\n  const onDelete = (deleted) => {\r\n    const filtered = (prev) => prev.filter((item) => item?.id !== deleted?.id)\r\n    if (onChange) onChange(filtered)\r\n  }\r\n\r\n  return (\r\n    <List readOnly={readOnly}>\r\n      {(list || []).length === 0 && (\r\n        <Alert style={{ width: '100%', textAlign: 'center', flexGrow: 1 }}>Пусто</Alert>\r\n      )}\r\n      {(list || []).map((item, index) => (\r\n        <ListItem\r\n          key={item?.id}\r\n          item={item}\r\n          readOnly={readOnly}\r\n          divided={(list || []).length - 1 !== index}\r\n          onDelete={onDelete}\r\n          onEdit={onEdit}\r\n        />\r\n      ))}\r\n    </List>\r\n  )\r\n}\r\n\r\nexport const RoomsEditor = ({\r\n  label,\r\n  defaultValue,\r\n  readOnly,\r\n  onChange\r\n}) => {\r\n  const [rooms, setRooms] = useState(defaultValue || [])\r\n\r\n  const onAdd = () => {\r\n    const name = 'Новое учебное помещение'\r\n    const item = { id: v4(), name, value: null }\r\n    setRooms((prev) => [...prev, item])\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (onChange) onChange(rooms)\r\n  }, [rooms, onChange])\r\n\r\n  useEffect(() => {\r\n    setRooms(defaultValue)\r\n  }, [defaultValue])\r\n\r\n  if (readOnly && rooms.length === 0) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <Wrap>\r\n      <Container>\r\n        {label && readOnly && <InputLabel>{label}</InputLabel>}\r\n\r\n        <InteractiveList\r\n          list={rooms}\r\n          onChange={setRooms}\r\n          readOnly={readOnly}\r\n        />\r\n\r\n        {!readOnly && (\r\n          <AddButton type={'button'} onClick={onAdd}>\r\n            <span>Добавить</span>\r\n            <Icon type={'button'} icon={'add'} stroke={'white'} />\r\n          </AddButton>\r\n        )}\r\n      </Container>\r\n    </Wrap>\r\n  )\r\n}\r\n\r\nRoomsEditor.defaultProps = {\r\n  label: 'Количество учебных помещений'\r\n}\r\n\r\nexport default RoomsEditor\r\n"]},"metadata":{},"sourceType":"module"}