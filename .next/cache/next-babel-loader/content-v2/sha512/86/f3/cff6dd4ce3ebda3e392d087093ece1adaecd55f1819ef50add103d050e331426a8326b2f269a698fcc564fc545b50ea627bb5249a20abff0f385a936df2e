{"ast":null,"code":"var _jsxFileName = \"/Users/alicefromwonderland/Desktop/branches/atomic/atomic-frontend/atomic-ui/components/DatePicker/index.js\";\nvar __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { getDateLabel, parseDate } from '../../assets/scripts/date';\nimport useClickOutside from '../../hooks/useClickOutside';\nimport Transition from '../Transition';\nimport DateSheet from '../DateSheet';\nimport Input from '../Input';\nimport Icon from '../Icon';\nconst DURATION = 100;\nexport const Wrap = styled.div`\n  position: relative;\n  display: flex;\n  flex-grow: 1;\n`;\nexport const TextField = styled.div`\n  position: relative;\n  flex-grow: 1;\n`;\nexport const Popout = styled(Transition)`\n  position: absolute;\n  top: calc(var(--input-height-m) + 10px);\n  left: 0;\n  z-index: 15;\n  padding: var(--default-gap);\n  background: var(--surface-background);\n  border: var(--surface-border);\n  border-radius: var(--surface-border-radius);\n  box-shadow: var(--default-shadow);\n\n  &.fade-enter {\n    opacity: 0;\n  }\n\n  &.fade-enter-active {\n    opacity: 1;\n    transition: opacity 100ms, blur 100ms;\n  }\n\n  &.fade-exit {\n    opacity: 1;\n  }\n\n  &.fade-exit-active {\n    opacity: 0;\n    transition: opacity 100ms, blur 100ms;\n  }\n`;\nexport const DateIcon = styled(Icon)`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n`;\nexport const DatePicker = ({\n  id,\n  name,\n  style,\n  sheets,\n  inputRef,\n  placeholder,\n  value = null,\n  className,\n  appearance,\n  canEditYear,\n  withNavigate,\n  withMarkers,\n  withYearDisplay,\n  onChange,\n  onCompare\n}) => {\n  const {\n    0: isOpen,\n    1: setIsOpen\n  } = useState(false);\n  const {\n    0: selected,\n    1: setSelected\n  } = useState(parseDate(value));\n  const [label] = useClickOutside(() => setIsOpen(false));\n\n  const handleChange = newVal => {\n    setSelected(newVal);\n    if (onChange) onChange(newVal);\n  };\n\n  const handleInputClick = () => {\n    setIsOpen(!isOpen);\n  };\n\n  return __jsx(Wrap, {\n    ref: label,\n    className: className,\n    style: style,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, __jsx(TextField, {\n    onClick: handleInputClick,\n    className: className,\n    style: style,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, __jsx(Input, {\n    id: id,\n    name: name,\n    type: 'text',\n    inputRef: inputRef !== null && inputRef !== void 0 ? inputRef : null,\n    defaultValue: getDateLabel(selected),\n    placeholder: placeholder || 'Выберите дату',\n    appearance: appearance,\n    readOnly: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }), __jsx(DateIcon, {\n    icon: 'calendar',\n    stroke: 'var(--ghost-color-text)',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  })), __jsx(Popout, {\n    in: isOpen,\n    animation: 'fade',\n    timeout: DURATION,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }\n  }, __jsx(DateSheet, {\n    value: selected,\n    sheets: sheets,\n    style: {\n      width: 282\n    },\n    canEditYear: canEditYear,\n    withNavigate: withNavigate,\n    withMarkers: withMarkers,\n    withYearDisplay: withYearDisplay,\n    onChange: handleChange,\n    onCompare: onCompare,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  })));\n};\nexport default DatePicker;","map":{"version":3,"sources":["/Users/alicefromwonderland/Desktop/branches/atomic/atomic-frontend/atomic-ui/components/DatePicker/index.js"],"names":["React","useState","styled","getDateLabel","parseDate","useClickOutside","Transition","DateSheet","Input","Icon","DURATION","Wrap","div","TextField","Popout","DateIcon","DatePicker","id","name","style","sheets","inputRef","placeholder","value","className","appearance","canEditYear","withNavigate","withMarkers","withYearDisplay","onChange","onCompare","isOpen","setIsOpen","selected","setSelected","label","handleChange","newVal","handleInputClick","width"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAEA,SAASC,YAAT,EAAuBC,SAAvB,QAAwC,2BAAxC;AACA,OAAOC,eAAP,MAA4B,6BAA5B;AACA,OAAOC,UAAP,MAAuB,eAAvB;AACA,OAAOC,SAAP,MAAsB,cAAtB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,IAAP,MAAiB,SAAjB;AAEA,MAAMC,QAAQ,GAAG,GAAjB;AAEA,OAAO,MAAMC,IAAI,GAAGT,MAAM,CAACU,GAAI;AAC/B;AACA;AACA;AACA,CAJO;AAMP,OAAO,MAAMC,SAAS,GAAGX,MAAM,CAACU,GAAI;AACpC;AACA;AACA,CAHO;AAKP,OAAO,MAAME,MAAM,GAAGZ,MAAM,CAACI,UAAD,CAAa;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CA5BO;AA8BP,OAAO,MAAMS,QAAQ,GAAGb,MAAM,CAACO,IAAD,CAAO;AACrC;AACA;AACA;AACA,CAJO;AAMP,OAAO,MAAMO,UAAU,GAAG,CAAC;AACzBC,EAAAA,EADyB;AAEzBC,EAAAA,IAFyB;AAGzBC,EAAAA,KAHyB;AAIzBC,EAAAA,MAJyB;AAKzBC,EAAAA,QALyB;AAMzBC,EAAAA,WANyB;AAOzBC,EAAAA,KAAK,GAAG,IAPiB;AAQzBC,EAAAA,SARyB;AASzBC,EAAAA,UATyB;AAUzBC,EAAAA,WAVyB;AAWzBC,EAAAA,YAXyB;AAYzBC,EAAAA,WAZyB;AAazBC,EAAAA,eAbyB;AAczBC,EAAAA,QAdyB;AAezBC,EAAAA;AAfyB,CAAD,KAgBpB;AACJ,QAAM;AAAA,OAACC,MAAD;AAAA,OAASC;AAAT,MAAsBhC,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM;AAAA,OAACiC,QAAD;AAAA,OAAWC;AAAX,MAA0BlC,QAAQ,CAACG,SAAS,CAACmB,KAAD,CAAV,CAAxC;AACA,QAAM,CAACa,KAAD,IAAU/B,eAAe,CAAC,MAAM4B,SAAS,CAAC,KAAD,CAAhB,CAA/B;;AAEA,QAAMI,YAAY,GAAIC,MAAD,IAAY;AAC/BH,IAAAA,WAAW,CAACG,MAAD,CAAX;AACA,QAAIR,QAAJ,EAAcA,QAAQ,CAACQ,MAAD,CAAR;AACf,GAHD;;AAKA,QAAMC,gBAAgB,GAAG,MAAM;AAC7BN,IAAAA,SAAS,CAAC,CAACD,MAAF,CAAT;AACD,GAFD;;AAIA,SACE,MAAC,IAAD;AAAM,IAAA,GAAG,EAAEI,KAAX;AAAkB,IAAA,SAAS,EAAEZ,SAA7B;AAAwC,IAAA,KAAK,EAAEL,KAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,SAAD;AAAW,IAAA,OAAO,EAAEoB,gBAApB;AAAsC,IAAA,SAAS,EAAEf,SAAjD;AAA4D,IAAA,KAAK,EAAEL,KAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,KAAD;AACE,IAAA,EAAE,EAAEF,EADN;AAEE,IAAA,IAAI,EAAEC,IAFR;AAGE,IAAA,IAAI,EAAE,MAHR;AAIE,IAAA,QAAQ,EAAEG,QAAF,aAAEA,QAAF,cAAEA,QAAF,GAAc,IAJxB;AAKE,IAAA,YAAY,EAAElB,YAAY,CAAC+B,QAAD,CAL5B;AAME,IAAA,WAAW,EAAEZ,WAAW,IAAI,eAN9B;AAOE,IAAA,UAAU,EAAEG,UAPd;AAQE,IAAA,QAAQ,MARV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAWE,MAAC,QAAD;AAAU,IAAA,IAAI,EAAE,UAAhB;AAA4B,IAAA,MAAM,EAAE,yBAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAXF,CADF,EAeE,MAAC,MAAD;AAAQ,IAAA,EAAE,EAAEO,MAAZ;AAAoB,IAAA,SAAS,EAAE,MAA/B;AAAuC,IAAA,OAAO,EAAEtB,QAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,SAAD;AACE,IAAA,KAAK,EAAEwB,QADT;AAEE,IAAA,MAAM,EAAEd,MAFV;AAGE,IAAA,KAAK,EAAE;AAAEoB,MAAAA,KAAK,EAAE;AAAT,KAHT;AAIE,IAAA,WAAW,EAAEd,WAJf;AAKE,IAAA,YAAY,EAAEC,YALhB;AAME,IAAA,WAAW,EAAEC,WANf;AAOE,IAAA,eAAe,EAAEC,eAPnB;AAQE,IAAA,QAAQ,EAAEQ,YARZ;AASE,IAAA,SAAS,EAAEN,SATb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAfF,CADF;AA+BD,CA7DM;AA+DP,eAAef,UAAf","sourcesContent":["import React, { useState } from 'react'\nimport styled from 'styled-components'\n\nimport { getDateLabel, parseDate } from '../../assets/scripts/date'\nimport useClickOutside from '../../hooks/useClickOutside'\nimport Transition from '../Transition'\nimport DateSheet from '../DateSheet'\nimport Input from '../Input'\nimport Icon from '../Icon'\n\nconst DURATION = 100\n\nexport const Wrap = styled.div`\n  position: relative;\n  display: flex;\n  flex-grow: 1;\n`\n\nexport const TextField = styled.div`\n  position: relative;\n  flex-grow: 1;\n`\n\nexport const Popout = styled(Transition)`\n  position: absolute;\n  top: calc(var(--input-height-m) + 10px);\n  left: 0;\n  z-index: 15;\n  padding: var(--default-gap);\n  background: var(--surface-background);\n  border: var(--surface-border);\n  border-radius: var(--surface-border-radius);\n  box-shadow: var(--default-shadow);\n\n  &.fade-enter {\n    opacity: 0;\n  }\n\n  &.fade-enter-active {\n    opacity: 1;\n    transition: opacity 100ms, blur 100ms;\n  }\n\n  &.fade-exit {\n    opacity: 1;\n  }\n\n  &.fade-exit-active {\n    opacity: 0;\n    transition: opacity 100ms, blur 100ms;\n  }\n`\n\nexport const DateIcon = styled(Icon)`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n`\n\nexport const DatePicker = ({\n  id,\n  name,\n  style,\n  sheets,\n  inputRef,\n  placeholder,\n  value = null,\n  className,\n  appearance,\n  canEditYear,\n  withNavigate,\n  withMarkers,\n  withYearDisplay,\n  onChange,\n  onCompare\n}) => {\n  const [isOpen, setIsOpen] = useState(false)\n  const [selected, setSelected] = useState(parseDate(value))\n  const [label] = useClickOutside(() => setIsOpen(false))\n\n  const handleChange = (newVal) => {\n    setSelected(newVal)\n    if (onChange) onChange(newVal)\n  }\n\n  const handleInputClick = () => {\n    setIsOpen(!isOpen)\n  }\n\n  return (\n    <Wrap ref={label} className={className} style={style}>\n      <TextField onClick={handleInputClick} className={className} style={style}>\n        <Input\n          id={id}\n          name={name}\n          type={'text'}\n          inputRef={inputRef ?? null}\n          defaultValue={getDateLabel(selected)}\n          placeholder={placeholder || 'Выберите дату'}\n          appearance={appearance}\n          readOnly\n        />\n        <DateIcon icon={'calendar'} stroke={'var(--ghost-color-text)'} />\n      </TextField>\n\n      <Popout in={isOpen} animation={'fade'} timeout={DURATION}>\n        <DateSheet\n          value={selected}\n          sheets={sheets}\n          style={{ width: 282 }}\n          canEditYear={canEditYear}\n          withNavigate={withNavigate}\n          withMarkers={withMarkers}\n          withYearDisplay={withYearDisplay}\n          onChange={handleChange}\n          onCompare={onCompare}\n        />\n      </Popout>\n    </Wrap>\n  )\n}\n\nexport default DatePicker\n"]},"metadata":{},"sourceType":"module"}