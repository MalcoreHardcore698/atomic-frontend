{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport styled from 'styled-components';\nimport { getDateLabel, parseDate } from '../../assets/scripts/date';\nimport useClickOutside from '../../hooks/useClickOutside';\nimport Transition from '../Transition';\nimport DateSheet from '../DateSheet';\nimport Input from '../Input';\nimport Icon from '../Icon';\nconst DURATION = 100;\nexport const Wrap = styled.div`\n  position: relative;\n  display: flex;\n  flex-grow: 1;\n`;\nexport const TextField = styled.div`\n  position: relative;\n  flex-grow: 1;\n`;\nexport const Popout = styled(Transition)`\n  position: absolute;\n  top: calc(var(--input-height-m) + 10px);\n  left: 0;\n  z-index: 15;\n  padding: var(--default-gap);\n  background: var(--surface-background);\n  border: var(--surface-border);\n  border-radius: var(--surface-border-radius);\n  box-shadow: var(--default-shadow);\n\n  &.fade-enter {\n    opacity: 0;\n  }\n\n  &.fade-enter-active {\n    opacity: 1;\n    transition: opacity 100ms, blur 100ms;\n  }\n\n  &.fade-exit {\n    opacity: 1;\n  }\n\n  &.fade-exit-active {\n    opacity: 0;\n    transition: opacity 100ms, blur 100ms;\n  }\n`;\nexport const DateIcon = styled(Icon)`\n  position: absolute;\n  top: 10px;\n  right: 10px;\n`;\nexport const DatePicker = ({\n  id,\n  name,\n  style,\n  sheets,\n  inputRef,\n  placeholder,\n  value = null,\n  className,\n  appearance,\n  canEditYear,\n  withNavigate,\n  withMarkers,\n  withYearDisplay,\n  onChange,\n  onCompare\n}) => {\n  const {\n    0: isOpen,\n    1: setIsOpen\n  } = useState(false);\n  const {\n    0: selected,\n    1: setSelected\n  } = useState(parseDate(value));\n  const [label] = useClickOutside(() => setIsOpen(false));\n\n  const handleChange = newVal => {\n    setSelected(newVal);\n    if (onChange) onChange(newVal);\n  };\n\n  const handleInputClick = () => {\n    setIsOpen(!isOpen);\n  };\n\n  return __jsx(Wrap, {\n    ref: label,\n    className: className,\n    style: style\n  }, __jsx(TextField, {\n    onClick: handleInputClick,\n    className: className,\n    style: style\n  }, __jsx(Input, {\n    id: id,\n    name: name,\n    type: 'text',\n    inputRef: inputRef !== null && inputRef !== void 0 ? inputRef : null,\n    defaultValue: getDateLabel(selected),\n    placeholder: placeholder || 'Выберите дату',\n    appearance: appearance,\n    readOnly: true\n  }), __jsx(DateIcon, {\n    icon: 'calendar',\n    stroke: 'var(--ghost-color-text)'\n  })), __jsx(Popout, {\n    in: isOpen,\n    animation: 'fade',\n    timeout: DURATION\n  }, __jsx(DateSheet, {\n    value: selected,\n    sheets: sheets,\n    style: {\n      width: 282\n    },\n    canEditYear: canEditYear,\n    withNavigate: withNavigate,\n    withMarkers: withMarkers,\n    withYearDisplay: withYearDisplay,\n    onChange: handleChange,\n    onCompare: onCompare\n  })));\n};\nexport default DatePicker;","map":null,"metadata":{},"sourceType":"module"}