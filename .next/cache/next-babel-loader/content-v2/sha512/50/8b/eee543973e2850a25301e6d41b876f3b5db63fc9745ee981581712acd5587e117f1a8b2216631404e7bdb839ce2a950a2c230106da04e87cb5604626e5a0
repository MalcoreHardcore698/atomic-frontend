{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from 'react';\nimport styled from 'styled-components';\nimport { useSelector } from 'react-redux';\nimport { motion } from 'framer-motion';\nimport { useHelper } from '../hooks/useHelper';\nimport ContentLayout from '../layouts/content';\nimport UserCard from '../components/UserCard';\nimport { onUserAboutMore, onUserLink, onUserMembers } from '../store/helpers/user';\nimport { onChat } from '../store/helpers';\nimport queries from '../graphql/queries';\nconst TITLE = 'Авторы';\nconst START_OFFSET = 6;\nconst LIMIT = 6;\nconst Container = styled.aside.withConfig({\n  displayName: \"creators__Container\",\n  componentId: \"sc-1n5fua5-0\"\n})([\"display:grid;grid-template-columns:repeat(auto-fit,minmax(442px,1fr));grid-gap:var(--default-gap);@media only screen and (max-width:768px){grid-template-columns:repeat(auto-fit,minmax(285px,1fr));}\"]);\n_c = Container;\nconst chatQueries = {\n  userChats: queries.GET_USER_CHATS,\n  chat: queries.GET_CHAT\n};\nconst chatMutations = {\n  addUserChat: queries.ADD_USER_CHAT,\n  sendMessage: queries.SEND_MESSAGE\n};\n\nconst Creators = ({\n  store\n}) => {\n  _s();\n\n  const recall = useHelper();\n  const user = useSelector(state => state.user);\n  return /*#__PURE__*/React.createElement(ContentLayout, {\n    title: TITLE,\n    limit: LIMIT,\n    query: queries.GET_USERS,\n    startOffset: START_OFFSET,\n    store: {\n      documents: store === null || store === void 0 ? void 0 : store.users\n    }\n  }, ({\n    documents\n  }) => /*#__PURE__*/React.createElement(Container, null, documents.map(author => {\n    var _author$company;\n\n    const owned = author.name === user.name;\n    return /*#__PURE__*/React.createElement(motion.div, {\n      key: author.email,\n      initial: 'pageInitial',\n      animate: 'pageAnimate',\n      variants: {\n        pageInitial: {\n          opacity: 0\n        },\n        pageAnimate: {\n          opacity: 1\n        }\n      }\n    }, /*#__PURE__*/React.createElement(UserCard, {\n      user: author,\n      owned: owned,\n      onChat: user.email && recall(onChat, {\n        sender: user,\n        recipient: author,\n        queries: chatQueries,\n        mutations: chatMutations\n      }),\n      onAboutMore: recall(onUserAboutMore, {\n        user: author\n      }),\n      onMembers: recall(onUserMembers, {\n        id: author === null || author === void 0 ? void 0 : author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email\n      }),\n      onLink: recall(onUserLink, {\n        id: author.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        owned,\n        queries: chatQueries,\n        mutations: chatMutations\n      }),\n      onCompanyLink: recall(onUserLink, {\n        id: (_author$company = author.company) === null || _author$company === void 0 ? void 0 : _author$company.email,\n        auth: user === null || user === void 0 ? void 0 : user.email,\n        queries: chatQueries,\n        mutations: chatMutations\n      })\n    }));\n  })));\n};\n\n_s(Creators, \"PSDtHiZ3h8PkCz2LC45oShJ9Xms=\", false, function () {\n  return [useHelper, useSelector];\n});\n\n_c2 = Creators;\nexport var __N_SSP = true;\nexport default Creators;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Creators\");","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/pages/creators.js"],"names":["React","styled","useSelector","motion","useHelper","ContentLayout","UserCard","onUserAboutMore","onUserLink","onUserMembers","onChat","queries","TITLE","START_OFFSET","LIMIT","Container","aside","chatQueries","userChats","GET_USER_CHATS","chat","GET_CHAT","chatMutations","addUserChat","ADD_USER_CHAT","sendMessage","SEND_MESSAGE","Creators","store","recall","user","state","GET_USERS","documents","users","map","author","owned","name","email","pageInitial","opacity","pageAnimate","sender","recipient","mutations","id","auth","company"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,MAAT,QAAuB,eAAvB;AAGA,SAASC,SAAT,QAA0B,oBAA1B;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,SAASC,eAAT,EAA0BC,UAA1B,EAAsCC,aAAtC,QAA2D,uBAA3D;AACA,SAASC,MAAT,QAAuB,kBAAvB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AAEA,MAAMC,KAAK,GAAG,QAAd;AACA,MAAMC,YAAY,GAAG,CAArB;AACA,MAAMC,KAAK,GAAG,CAAd;AAEA,MAAMC,SAAS,GAAGd,MAAM,CAACe,KAAV;AAAA;AAAA;AAAA,6MAAf;KAAMD,S;AAUN,MAAME,WAAW,GAAG;AAClBC,EAAAA,SAAS,EAAEP,OAAO,CAACQ,cADD;AAElBC,EAAAA,IAAI,EAAET,OAAO,CAACU;AAFI,CAApB;AAKA,MAAMC,aAAa,GAAG;AACpBC,EAAAA,WAAW,EAAEZ,OAAO,CAACa,aADD;AAEpBC,EAAAA,WAAW,EAAEd,OAAO,CAACe;AAFD,CAAtB;;AAKA,MAAMC,QAAQ,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAe;AAAA;;AAC9B,QAAMC,MAAM,GAAGzB,SAAS,EAAxB;AACA,QAAM0B,IAAI,GAAG5B,WAAW,CAAE6B,KAAD,IAAWA,KAAK,CAACD,IAAlB,CAAxB;AAEA,sBACE,oBAAC,aAAD;AACE,IAAA,KAAK,EAAElB,KADT;AAEE,IAAA,KAAK,EAAEE,KAFT;AAGE,IAAA,KAAK,EAAEH,OAAO,CAACqB,SAHjB;AAIE,IAAA,WAAW,EAAEnB,YAJf;AAKE,IAAA,KAAK,EAAE;AAAEoB,MAAAA,SAAS,EAAEL,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAEM;AAApB;AALT,KAMG,CAAC;AAAED,IAAAA;AAAF,GAAD,kBACC,oBAAC,SAAD,QACGA,SAAS,CAACE,GAAV,CAAeC,MAAD,IAAY;AAAA;;AACzB,UAAMC,KAAK,GAAGD,MAAM,CAACE,IAAP,KAAgBR,IAAI,CAACQ,IAAnC;AAEA,wBACE,oBAAC,MAAD,CAAQ,GAAR;AACE,MAAA,GAAG,EAAEF,MAAM,CAACG,KADd;AAEE,MAAA,OAAO,EAAE,aAFX;AAGE,MAAA,OAAO,EAAE,aAHX;AAIE,MAAA,QAAQ,EAAE;AACRC,QAAAA,WAAW,EAAE;AACXC,UAAAA,OAAO,EAAE;AADE,SADL;AAIRC,QAAAA,WAAW,EAAE;AACXD,UAAAA,OAAO,EAAE;AADE;AAJL;AAJZ,oBAYE,oBAAC,QAAD;AACE,MAAA,IAAI,EAAEL,MADR;AAEE,MAAA,KAAK,EAAEC,KAFT;AAGE,MAAA,MAAM,EACJP,IAAI,CAACS,KAAL,IACAV,MAAM,CAACnB,MAAD,EAAS;AACbiC,QAAAA,MAAM,EAAEb,IADK;AAEbc,QAAAA,SAAS,EAAER,MAFE;AAGbzB,QAAAA,OAAO,EAAEM,WAHI;AAIb4B,QAAAA,SAAS,EAAEvB;AAJE,OAAT,CALV;AAYE,MAAA,WAAW,EAAEO,MAAM,CAACtB,eAAD,EAAkB;AAAEuB,QAAAA,IAAI,EAAEM;AAAR,OAAlB,CAZrB;AAaE,MAAA,SAAS,EAAEP,MAAM,CAACpB,aAAD,EAAgB;AAAEqC,QAAAA,EAAE,EAAEV,MAAF,aAAEA,MAAF,uBAAEA,MAAM,CAAEG,KAAd;AAAqBQ,QAAAA,IAAI,EAAEjB,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAES;AAAjC,OAAhB,CAbnB;AAcE,MAAA,MAAM,EAAEV,MAAM,CAACrB,UAAD,EAAa;AACzBsC,QAAAA,EAAE,EAAEV,MAAM,CAACG,KADc;AAEzBQ,QAAAA,IAAI,EAAEjB,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAES,KAFa;AAGzBF,QAAAA,KAHyB;AAIzB1B,QAAAA,OAAO,EAAEM,WAJgB;AAKzB4B,QAAAA,SAAS,EAAEvB;AALc,OAAb,CAdhB;AAqBE,MAAA,aAAa,EAAEO,MAAM,CAACrB,UAAD,EAAa;AAChCsC,QAAAA,EAAE,qBAAEV,MAAM,CAACY,OAAT,oDAAE,gBAAgBT,KADY;AAEhCQ,QAAAA,IAAI,EAAEjB,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAES,KAFoB;AAGhC5B,QAAAA,OAAO,EAAEM,WAHuB;AAIhC4B,QAAAA,SAAS,EAAEvB;AAJqB,OAAb;AArBvB,MAZF,CADF;AA2CD,GA9CA,CADH,CAPJ,CADF;AA4DD,CAhED;;GAAMK,Q;UACWvB,S,EACFF,W;;;MAFTyB,Q;;AA8FN,eAAeA,QAAf","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\nimport { useSelector } from 'react-redux'\nimport { motion } from 'framer-motion'\n\nimport { initializeApollo } from '../apollo'\nimport { useHelper } from '../hooks/useHelper'\nimport ContentLayout from '../layouts/content'\nimport UserCard from '../components/UserCard'\nimport { onUserAboutMore, onUserLink, onUserMembers } from '../store/helpers/user'\nimport { onChat } from '../store/helpers'\nimport queries from '../graphql/queries'\n\nconst TITLE = 'Авторы'\nconst START_OFFSET = 6\nconst LIMIT = 6\n\nconst Container = styled.aside`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(442px, 1fr));\n  grid-gap: var(--default-gap);\n\n  @media only screen and (max-width: 768px) {\n    grid-template-columns: repeat(auto-fit, minmax(285px, 1fr));\n  }\n`\n\nconst chatQueries = {\n  userChats: queries.GET_USER_CHATS,\n  chat: queries.GET_CHAT\n}\n\nconst chatMutations = {\n  addUserChat: queries.ADD_USER_CHAT,\n  sendMessage: queries.SEND_MESSAGE\n}\n\nconst Creators = ({ store }) => {\n  const recall = useHelper()\n  const user = useSelector((state) => state.user)\n\n  return (\n    <ContentLayout\n      title={TITLE}\n      limit={LIMIT}\n      query={queries.GET_USERS}\n      startOffset={START_OFFSET}\n      store={{ documents: store?.users }}>\n      {({ documents }) => (\n        <Container>\n          {documents.map((author) => {\n            const owned = author.name === user.name\n\n            return (\n              <motion.div\n                key={author.email}\n                initial={'pageInitial'}\n                animate={'pageAnimate'}\n                variants={{\n                  pageInitial: {\n                    opacity: 0\n                  },\n                  pageAnimate: {\n                    opacity: 1\n                  }\n                }}>\n                <UserCard\n                  user={author}\n                  owned={owned}\n                  onChat={\n                    user.email &&\n                    recall(onChat, {\n                      sender: user,\n                      recipient: author,\n                      queries: chatQueries,\n                      mutations: chatMutations\n                    })\n                  }\n                  onAboutMore={recall(onUserAboutMore, { user: author })}\n                  onMembers={recall(onUserMembers, { id: author?.email, auth: user?.email })}\n                  onLink={recall(onUserLink, {\n                    id: author.email,\n                    auth: user?.email,\n                    owned,\n                    queries: chatQueries,\n                    mutations: chatMutations\n                  })}\n                  onCompanyLink={recall(onUserLink, {\n                    id: author.company?.email,\n                    auth: user?.email,\n                    queries: chatQueries,\n                    mutations: chatMutations\n                  })}\n                />\n              </motion.div>\n            )\n          })}\n        </Container>\n      )}\n    </ContentLayout>\n  )\n}\n\nexport async function getServerSideProps() {\n  const client = initializeApollo()\n\n  let users = []\n\n  try {\n    const response = await client.query({\n      query: queries.GET_META_AUTHORS,\n      variables: {\n        offset: 0,\n        limit: START_OFFSET\n      }\n    })\n\n    if (response && response.data) {\n      users = response.data.getUsers\n    }\n  } catch (err) {\n    console.log(err)\n  }\n\n  return {\n    props: {\n      store: { users }\n    }\n  }\n}\n\nexport default Creators\n"]},"metadata":{},"sourceType":"module"}