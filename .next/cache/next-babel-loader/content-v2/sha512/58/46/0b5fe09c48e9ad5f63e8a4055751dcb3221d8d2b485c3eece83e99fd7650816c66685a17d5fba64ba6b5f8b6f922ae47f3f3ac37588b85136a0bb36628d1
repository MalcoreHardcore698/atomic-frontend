{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport styled, { css } from 'styled-components';\nimport Column from '../../atomic-ui/components/Column';\nimport { Wrap as WrapText } from '../../atomic-ui/components/Text';\nimport Difinition from '../../atomic-ui/components/Difinition';\nimport Tooltip from '../../atomic-ui/components/Tooltip';\nimport Button from '../../atomic-ui/components/Button';\nimport Alert from '../../atomic-ui/components/Alert';\nimport Icon from '../../atomic-ui/components/Icon';\nimport { onUserFolderAdd, onUserFolderDelete } from '../../store/helpers/user';\nimport { setUserFolder } from '../../store/actions/user';\nimport { setFolder } from '../../store/actions/root';\nimport { useHelper } from '../../hooks/useHelper';\nimport queries from '../../graphql/queries';\nconst Wrap = styled(Column).withConfig({\n  displayName: \"Organizer__Wrap\",\n  componentId: \"sc-1rvcbdn-0\"\n})([\"width:265px;min-width:265px;\"]);\n_c = Wrap;\nconst CreateButton = styled(Button).withConfig({\n  displayName: \"Organizer__CreateButton\",\n  componentId: \"sc-1rvcbdn-1\"\n})([\"display:flex;justify-content:center;align-items:center;grid-gap:10px;span{white-space:nowrap;}\"]);\n_c2 = CreateButton;\nconst RemoveTooltip = styled(Tooltip).withConfig({\n  displayName: \"Organizer__RemoveTooltip\",\n  componentId: \"sc-1rvcbdn-2\"\n})([\"position:absolute;right:8px;z-index:var(--z-11);display:none;\"]);\n_c3 = RemoveTooltip;\nconst ListItem = styled.div.withConfig({\n  displayName: \"Organizer__ListItem\",\n  componentId: \"sc-1rvcbdn-3\"\n})([\"position:relative;display:flex;justify-content:space-between;align-items:center;height:var(--input-height-s);background:var(--ghost-color-background);border-radius:var(--surface-border-radius);padding:8px 10px;width:100%;height:auto;cursor:pointer;transition:all 150ms ease;\", \",h4{color:var(--ghost-color-text);}\", \"{svg path{color:var(--ghost-color-text);}}&:hover{\", \"{display:flex;svg path{stroke:black;}}\", \",h4{color:black;}}\", \"\"], WrapText, RemoveTooltip, RemoveTooltip, WrapText, ({\n  active\n}) => active && css([\"color:var(--default-color-accent);background:var(--default-color-accent-dim);\", \"{svg path{stroke:var(--default-color-accent) !important;}}\", \",h4,p{color:var(--default-color-accent);}&:hover{\", \",h4,p{color:var(--default-color-accent);}}\"], RemoveTooltip, WrapText, WrapText));\n_c4 = ListItem;\nexport const Organizer = ({\n  defaultFolder\n}) => {\n  _s();\n\n  const recall = useHelper();\n  const {\n    user,\n    folder\n  } = useSelector(state => ({\n    user: state.user,\n    folder: state.root.folder\n  }));\n  const dispatch = useDispatch();\n\n  const onRefetch = async (item, projects) => {\n    if (projects && item) {\n      const result = { ...item,\n        projects\n      };\n      dispatch(setFolder(result));\n      dispatch(setUserFolder(result));\n    }\n  };\n\n  const onFolderClick = item => onRefetch(item, item.projects);\n\n  useEffect(() => {\n    if (defaultFolder) {\n      dispatch(setFolder(defaultFolder));\n    }\n  }, [defaultFolder, dispatch]);\n  return /*#__PURE__*/React.createElement(Wrap, null, user.folders && user.folders.length > 0 ? /*#__PURE__*/React.createElement(Column, null, user.folders.map(item => {\n    const length = item.projects.length;\n    const label = length === 1 ? 'проект' : length > 1 && length < 5 ? 'проекта' : 'проектов';\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: item.id,\n      active: folder && item.id === folder.id\n    }, /*#__PURE__*/React.createElement(Difinition, {\n      text: item.name,\n      label: `${length} ${label}`,\n      onLink: () => onFolderClick(item),\n      revert: true\n    }), /*#__PURE__*/React.createElement(RemoveTooltip, {\n      place: 'left',\n      text: 'Удалить'\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: 'xs',\n      kind: 'icon',\n      type: 'button',\n      appearance: 'clear',\n      onClick: recall(onUserFolderDelete, {\n        id: item.id,\n        mutation: queries.DELETE_USER_FOLDER,\n        callback: () => onFolderClick(defaultFolder)\n      })\n    }, /*#__PURE__*/React.createElement(Icon, {\n      size: 'xs',\n      icon: 'delete',\n      stroke: 'var(--ghost-color-text)'\n    }))));\n  })) : /*#__PURE__*/React.createElement(Alert, {\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u041F\\u0430\\u043F\\u043E\\u043A \\u043D\\u0435\\u0442\"), /*#__PURE__*/React.createElement(CreateButton, {\n    onClick: recall(onUserFolderAdd, {\n      mutation: queries.ADD_USER_FOLDER\n    })\n  }, /*#__PURE__*/React.createElement(\"span\", null, \"\\u041D\\u043E\\u0432\\u0430\\u044F \\u043F\\u0430\\u043F\\u043A\\u0430\"), /*#__PURE__*/React.createElement(Icon, {\n    icon: 'add',\n    stroke: 'white'\n  })));\n};\n\n_s(Organizer, \"vsUH8BFJchq7ooXsUWZrpRpYsLk=\", false, function () {\n  return [useHelper, useSelector, useDispatch];\n});\n\n_c5 = Organizer;\nexport default Organizer;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"Wrap\");\n$RefreshReg$(_c2, \"CreateButton\");\n$RefreshReg$(_c3, \"RemoveTooltip\");\n$RefreshReg$(_c4, \"ListItem\");\n$RefreshReg$(_c5, \"Organizer\");","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/components/Organizer/index.js"],"names":["React","useEffect","useDispatch","useSelector","styled","css","Column","Wrap","WrapText","Difinition","Tooltip","Button","Alert","Icon","onUserFolderAdd","onUserFolderDelete","setUserFolder","setFolder","useHelper","queries","CreateButton","RemoveTooltip","ListItem","div","active","Organizer","defaultFolder","recall","user","folder","state","root","dispatch","onRefetch","item","projects","result","onFolderClick","folders","length","map","label","id","name","mutation","DELETE_USER_FOLDER","callback","width","textAlign","ADD_USER_FOLDER"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport styled, { css } from 'styled-components'\n\nimport Column from '../../atomic-ui/components/Column'\nimport { Wrap as WrapText } from '../../atomic-ui/components/Text'\nimport Difinition from '../../atomic-ui/components/Difinition'\nimport Tooltip from '../../atomic-ui/components/Tooltip'\nimport Button from '../../atomic-ui/components/Button'\nimport Alert from '../../atomic-ui/components/Alert'\nimport Icon from '../../atomic-ui/components/Icon'\n\nimport { onUserFolderAdd, onUserFolderDelete } from '../../store/helpers/user'\nimport { setUserFolder } from '../../store/actions/user'\nimport { setFolder } from '../../store/actions/root'\nimport { useHelper } from '../../hooks/useHelper'\nimport queries from '../../graphql/queries'\n\nconst Wrap = styled(Column)`\n  width: 265px;\n  min-width: 265px;\n`\n\nconst CreateButton = styled(Button)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  grid-gap: 10px;\n\n  span {\n    white-space: nowrap;\n  }\n`\n\nconst RemoveTooltip = styled(Tooltip)`\n  position: absolute;\n  right: 8px;\n  z-index: var(--z-11);\n  display: none;\n`\n\nconst ListItem = styled.div`\n  position: relative;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: var(--input-height-s);\n  background: var(--ghost-color-background);\n  border-radius: var(--surface-border-radius);\n  padding: 8px 10px;\n  width: 100%;\n  height: auto;\n  cursor: pointer;\n  transition: all 150ms ease;\n\n  ${WrapText}, h4 {\n    color: var(--ghost-color-text);\n  }\n\n  ${RemoveTooltip} {\n    svg path {\n      color: var(--ghost-color-text);\n    }\n  }\n\n  &:hover {\n    ${RemoveTooltip} {\n      display: flex;\n\n      svg path {\n        stroke: black;\n      }\n    }\n\n    ${WrapText}, h4 {\n      color: black;\n    }\n  }\n\n  ${({ active }) =>\n    active &&\n    css`\n      color: var(--default-color-accent);\n      background: var(--default-color-accent-dim);\n\n      ${RemoveTooltip} {\n        svg path {\n          stroke: var(--default-color-accent) !important;\n        }\n      }\n\n      ${WrapText}, h4, p {\n        color: var(--default-color-accent);\n      }\n\n      &:hover {\n        ${WrapText}, h4, p {\n          color: var(--default-color-accent);\n        }\n      }\n    `}\n`\n\nexport const Organizer = ({ defaultFolder }) => {\n  const recall = useHelper()\n  const { user, folder } = useSelector((state) => ({\n    user: state.user,\n    folder: state.root.folder\n  }))\n  const dispatch = useDispatch()\n\n  const onRefetch = async (item, projects) => {\n    if (projects && item) {\n      const result = { ...item, projects }\n      dispatch(setFolder(result))\n      dispatch(setUserFolder(result))\n    }\n  }\n\n  const onFolderClick = (item) => onRefetch(item, item.projects)\n\n  useEffect(() => {\n    if (defaultFolder) {\n      dispatch(setFolder(defaultFolder))\n    }\n  }, [defaultFolder, dispatch])\n\n  return (\n    <Wrap>\n      {user.folders && user.folders.length > 0 ? (\n        <Column>\n          {user.folders.map((item) => {\n            const length = item.projects.length\n            const label =\n              length === 1 ? 'проект' : length > 1 && length < 5 ? 'проекта' : 'проектов'\n\n            return (\n              <ListItem key={item.id} active={folder && item.id === folder.id}>\n                <Difinition\n                  text={item.name}\n                  label={`${length} ${label}`}\n                  onLink={() => onFolderClick(item)}\n                  revert\n                />\n                <RemoveTooltip place={'left'} text={'Удалить'}>\n                  <Button\n                    size={'xs'}\n                    kind={'icon'}\n                    type={'button'}\n                    appearance={'clear'}\n                    onClick={recall(onUserFolderDelete, {\n                      id: item.id,\n                      mutation: queries.DELETE_USER_FOLDER,\n                      callback: () => onFolderClick(defaultFolder)\n                    })}>\n                    <Icon size={'xs'} icon={'delete'} stroke={'var(--ghost-color-text)'} />\n                  </Button>\n                </RemoveTooltip>\n              </ListItem>\n            )\n          })}\n        </Column>\n      ) : (\n        <Alert style={{ width: '100%', textAlign: 'center' }}>Папок нет</Alert>\n      )}\n      <CreateButton onClick={recall(onUserFolderAdd, { mutation: queries.ADD_USER_FOLDER })}>\n        <span>Новая папка</span>\n        <Icon icon={'add'} stroke={'white'} />\n      </CreateButton>\n    </Wrap>\n  )\n}\n\nexport default Organizer\n"]},"metadata":{},"sourceType":"module"}