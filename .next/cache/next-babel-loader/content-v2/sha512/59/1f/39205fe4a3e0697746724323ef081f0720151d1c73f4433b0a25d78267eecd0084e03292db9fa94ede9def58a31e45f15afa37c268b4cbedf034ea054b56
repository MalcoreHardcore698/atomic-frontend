{"ast":null,"code":"import React, { useEffect, useState, useMemo } from 'react';\nimport { Controller } from 'react-hook-form';\nimport styled, { css } from 'styled-components';\nimport { useQuery } from '@apollo/react-hooks';\nimport generator from 'generate-password';\nimport Tooltip, { Wrap as WrapTooltip } from '../../atomic-ui/components/Tooltip';\nimport Row from '../../atomic-ui/components/Row';\nimport Column from '../../atomic-ui/components/Column';\nimport Title from '../../atomic-ui/components/Title';\nimport Text from '../../atomic-ui/components/Text';\nimport Input from '../../atomic-ui/components/Input';\nimport Button from '../../atomic-ui/components/Button';\nimport TextArea from '../../atomic-ui/components/TextArea';\nimport Dropzone from '../../atomic-ui/components/Dropzone';\nimport DatePicker from '../../atomic-ui/components/DatePicker';\nimport Spinner from '../../atomic-ui/components/Spinner';\nimport Switch from '../../atomic-ui/components/Switch';\nimport Icon from '../../atomic-ui/components/Icon';\nimport Alert from '../../atomic-ui/components/Alert';\nimport Select from '../../atomic-ui/components/Select';\nimport Divider from '../../atomic-ui/components/Divider';\nimport { getLabelRole } from '../../atomic-ui/utils/functions';\nimport Form from '../Form';\nimport { Loader } from '../Styled';\nimport queries from '../../graphql/queries';\nconst TAB_TYPES = [{\n  label: 'Основное',\n  value: 'GENERAL'\n}, {\n  label: 'Безопасность',\n  value: 'SECURITY'\n}];\nconst ACCOUNT_TYPES = [{\n  label: 'Физ. лицо',\n  value: 'INDIVIDUAL',\n  tooltip: 'Любое лицо'\n}, {\n  label: 'Оф. лицо',\n  value: 'OFICIAL',\n  tooltip: 'Государственный деятель'\n}, {\n  label: 'Юр. лицо',\n  value: 'ENTITY',\n  tooltip: 'Организация'\n}];\nconst GENDER_TYPES = [{\n  label: 'Мужской',\n  value: 'MALE'\n}, {\n  label: 'Женский',\n  value: 'FEMALE'\n}];\nexport const CommonAlert = styled(Alert).withConfig({\n  displayName: \"FormUser__CommonAlert\",\n  componentId: \"c1ieix-0\"\n})([\"display:flex;justify-content:center;align-items:center;width:100%;text-align:center;flex-grow:100;\"]);\nexport const AdaptiveDropzone = styled(Dropzone).withConfig({\n  displayName: \"FormUser__AdaptiveDropzone\",\n  componentId: \"c1ieix-1\"\n})([\"width:196px;height:276px;span{width:100%;}@media only screen and (max-width:575px){width:100% !important;height:256px;}\"]);\nexport const AdaptiveRow = styled(Row).withConfig({\n  displayName: \"FormUser__AdaptiveRow\",\n  componentId: \"c1ieix-2\"\n})([\"@media only screen and (max-width:575px){flex-direction:column;grid-gap:var(--default-gap);\", \"{flex-grow:1;button{width:100%;}}}\"], WrapTooltip);\nexport const Tab = styled(Column).withConfig({\n  displayName: \"FormUser__Tab\",\n  componentId: \"c1ieix-3\"\n})([\"display:none;\", \"\"], ({\n  active\n}) => active && css([\"display:flex;\"]));\nexport const detect = (list, value) => {\n  return list.find(item => item.value === value);\n};\nexport const detectAccountType = (types, user) => detect(types, user === null || user === void 0 ? void 0 : user.account);\nexport const detectGender = (types, user) => detect(types, user === null || user === void 0 ? void 0 : user.gender);\nexport const getAccountType = role => {\n  if (role) {\n    return ACCOUNT_TYPES.find(type => type.value === role);\n  }\n\n  return ACCOUNT_TYPES[0];\n};\nexport const getLabelGender = gender => {\n  if (gender) {\n    return GENDER_TYPES.find(type => type.value === gender);\n  }\n\n  return GENDER_TYPES[0];\n};\nexport const User = ({\n  user,\n  mutation,\n  appearance,\n  className,\n  accountTypes,\n  genderTypes,\n  canEditRole,\n  onSubmit,\n  onChangePassword\n}) => {\n  const {\n    data,\n    loading: loadingData,\n    error\n  } = user ? useQuery(queries.GET_USER, {\n    variables: {\n      email: user\n    }\n  }) : {\n    data: {\n      getUser: {}\n    },\n    loading: false,\n    error: false\n  };\n  const {\n    data: dataCompanies,\n    loading: loadingCompanies\n  } = useQuery(queries.GET_USERS, {\n    variables: {\n      account: ['ENTITY']\n    }\n  });\n  const {\n    data: dataRoles,\n    loading: loadingRoles\n  } = useQuery(queries.GET_ROLES);\n  const [tab, setTab] = useState(TAB_TYPES[0]);\n  const [roles, setRoles] = useState([]);\n  const [account, setAccount] = useState(null);\n  const [isShowPassword, setShowPassword] = useState(false);\n  const isEnabledSecurity = useMemo(() => {\n    var _data$getUser;\n\n    return !((_data$getUser = data.getUser) !== null && _data$getUser !== void 0 && _data$getUser.registerOfASocialNetwork);\n  }, [data]);\n\n  const onTogglePassword = () => setShowPassword(!isShowPassword);\n\n  useEffect(() => {\n    if (!loadingRoles && dataRoles) {\n      setRoles(dataRoles.getRoles);\n    }\n  }, [loadingRoles, dataRoles]);\n  return /*#__PURE__*/React.createElement(Form, {\n    className: className,\n    appearance: appearance,\n    mutation: mutation,\n    onSubmit: (form, action) => {\n      var _data$getUser2;\n\n      return onSubmit({ ...form,\n        account: account || getAccountType(data === null || data === void 0 ? void 0 : (_data$getUser2 = data.getUser) === null || _data$getUser2 === void 0 ? void 0 : _data$getUser2.account)\n      }, action);\n    }\n  }, ({\n    register,\n    control,\n    loading,\n    errors,\n    setValue,\n    getValues\n  }) => {\n    var _data$getUser3, _data$getUser4, _data$getUser4$role, _data$getUser5, _data$getUser6, _data$getUser7, _data$getUser8, _data$getUser9, _data$getUser9$role, _data$getUser10, _data$getUser10$role, _data$getUser11, _data$getUser12, _data$getUser13, _data$getUser15, _data$getUser16, _data$getUser16$role, _data$getUser17, _data$getUser18, _data$getUser19, _data$getUser19$role, _data$getUser20, _data$getUser21, _data$getUser21$role, _data$getUser22, _data$getUser23, _data$getUser24, _data$getUser25, _data$getUser26, _data$getUser27, _data$getUser28, _data$getUser29, _data$getUser29$role;\n\n    return !loading && !loadingData && data && data.getUser ? /*#__PURE__*/React.createElement(React.Fragment, null, isEnabledSecurity && /*#__PURE__*/React.createElement(Switch, {\n      defaultValue: tab,\n      options: TAB_TYPES,\n      onChange: setTab,\n      stretch: true\n    }), /*#__PURE__*/React.createElement(Tab, {\n      active: tab.value === 'GENERAL'\n    }, /*#__PURE__*/React.createElement(AdaptiveRow, null, /*#__PURE__*/React.createElement(Controller, {\n      name: 'avatar',\n      control: control,\n      defaultValue: getValues('avatar') || user && (((_data$getUser3 = data.getUser) === null || _data$getUser3 === void 0 ? void 0 : _data$getUser3.avatar) || {\n        path: '/images/avatar-default.png'\n      }) || null,\n      render: ({\n        value,\n        onChange\n      }) => /*#__PURE__*/React.createElement(AdaptiveDropzone, {\n        accept: 'image/*',\n        defaultValue: value,\n        onChange: onChange,\n        placeholder: 'Перетащите сюда изображение для превью',\n        tooltip: 'Разрешение: 675x590px. Допустимые форматы: jpeg, jpg, png. Макс. размер: 15 MB',\n        avatar: true\n      })\n    }), /*#__PURE__*/React.createElement(Column, {\n      style: {\n        flexGrow: 1\n      }\n    }, ((_data$getUser4 = data.getUser) === null || _data$getUser4 === void 0 ? void 0 : (_data$getUser4$role = _data$getUser4.role) === null || _data$getUser4$role === void 0 ? void 0 : _data$getUser4$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u0410\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\"), /*#__PURE__*/React.createElement(Switch, {\n      defaultValue: account !== null && account !== void 0 && account.value ? account : getAccountType((_data$getUser5 = data.getUser) === null || _data$getUser5 === void 0 ? void 0 : _data$getUser5.account),\n      options: (accountTypes === null || accountTypes === void 0 ? void 0 : accountTypes.length) > 1 && accountTypes || ACCOUNT_TYPES,\n      onChange: value => setAccount(value),\n      disabled: loading,\n      stretch: true\n    })), /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser6 = data.getUser) === null || _data$getUser6 === void 0 ? void 0 : _data$getUser6.account) === 'ENTITY' ? 'Название компании' : 'ФИО'), canEditRole && errors && errors.name && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%'\n      },\n      appearance: 'error'\n    }, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u043E \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u043E \\u0424\\u0418\\u041E\"), /*#__PURE__*/React.createElement(Input, {\n      type: 'text',\n      name: 'name',\n      ref: register({\n        required: !user\n      }),\n      defaultValue: getValues('name') || ((_data$getUser7 = data.getUser) === null || _data$getUser7 === void 0 ? void 0 : _data$getUser7.name),\n      placeholder: account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser8 = data.getUser) === null || _data$getUser8 === void 0 ? void 0 : _data$getUser8.account) === 'ENTITY' ? 'Название компании' : 'ФИО',\n      appearance: 'ghost',\n      disabled: loading\n    }), ((_data$getUser9 = data.getUser) === null || _data$getUser9 === void 0 ? void 0 : (_data$getUser9$role = _data$getUser9.role) === null || _data$getUser9$role === void 0 ? void 0 : _data$getUser9$role.name) === 'ADMIN' && /*#__PURE__*/React.createElement(CommonAlert, null, \"\\u0423 \\u0430\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043E\\u0440\\u0430 \\u043E\\u0433\\u0440\\u0430\\u043D\\u0438\\u0447\\u0435\\u043D\\u043D\\u044B\\u0435 \\u0432\\u043E\\u0437\\u043C\\u043E\\u0436\\u043D\\u043E\\u0441\\u0442\\u0438 \\u0438\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u044F \\u0441\\u043E\\u0431\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u043E\\u0433\\u043E \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430\"), ((_data$getUser10 = data.getUser) === null || _data$getUser10 === void 0 ? void 0 : (_data$getUser10$role = _data$getUser10.role) === null || _data$getUser10$role === void 0 ? void 0 : _data$getUser10$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser11 = data.getUser) === null || _data$getUser11 === void 0 ? void 0 : _data$getUser11.account) === 'ENTITY' ? 'Дата основания' : 'Дата рождения'), /*#__PURE__*/React.createElement(Controller, {\n      name: 'dateOfBirth',\n      control: control,\n      defaultValue: getValues('dateOfBirth') || ((_data$getUser12 = data.getUser) === null || _data$getUser12 === void 0 ? void 0 : _data$getUser12.dateOfBirth) && new Date((_data$getUser13 = data.getUser) === null || _data$getUser13 === void 0 ? void 0 : _data$getUser13.dateOfBirth) || null,\n      render: ({\n        value,\n        onChange\n      }) => {\n        var _data$getUser14;\n\n        return /*#__PURE__*/React.createElement(DatePicker, {\n          value: value,\n          onChange: onChange,\n          placeholder: account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser14 = data.getUser) === null || _data$getUser14 === void 0 ? void 0 : _data$getUser14.account) === 'ENTITY' ? 'Дата основания' : 'Дата рождения',\n          appearance: 'ghost',\n          withYearDisplay: false,\n          withNavigate: true,\n          canEditYear: true\n        });\n      }\n    })))), ((account === null || account === void 0 ? void 0 : account.value) && (account === null || account === void 0 ? void 0 : account.value) !== 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser15 = data.getUser) === null || _data$getUser15 === void 0 ? void 0 : _data$getUser15.account) !== 'ENTITY') && ((_data$getUser16 = data.getUser) === null || _data$getUser16 === void 0 ? void 0 : (_data$getUser16$role = _data$getUser16.role) === null || _data$getUser16$role === void 0 ? void 0 : _data$getUser16$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(Column, {\n      style: {\n        flexGrow: 1\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u041F\\u043E\\u043B\"), /*#__PURE__*/React.createElement(Controller, {\n      name: 'gender',\n      control: control,\n      defaultValue: getValues('gender') || getLabelGender((_data$getUser17 = data.getUser) === null || _data$getUser17 === void 0 ? void 0 : _data$getUser17.gender),\n      render: ({\n        value,\n        onChange\n      }) => /*#__PURE__*/React.createElement(Switch, {\n        defaultValue: value,\n        onChange: onChange,\n        options: (genderTypes === null || genderTypes === void 0 ? void 0 : genderTypes.length) > 1 && genderTypes || GENDER_TYPES,\n        disabled: loading,\n        stretch: true\n      })\n    })), ((account === null || account === void 0 ? void 0 : account.value) && (account === null || account === void 0 ? void 0 : account.value) !== 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser18 = data.getUser) === null || _data$getUser18 === void 0 ? void 0 : _data$getUser18.account) !== 'ENTITY') && ((_data$getUser19 = data.getUser) === null || _data$getUser19 === void 0 ? void 0 : (_data$getUser19$role = _data$getUser19.role) === null || _data$getUser19$role === void 0 ? void 0 : _data$getUser19$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(Column, null, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u041A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044F\"), /*#__PURE__*/React.createElement(Controller, {\n      name: 'company',\n      control: control,\n      defaultValue: getValues('company') || ((_data$getUser20 = data.getUser) !== null && _data$getUser20 !== void 0 && _data$getUser20.company ? {\n        value: data.getUser.company.id,\n        label: data.getUser.company.name\n      } : null),\n      render: ({\n        value,\n        onChange\n      }) => /*#__PURE__*/React.createElement(Select, {\n        appearance: 'ghost',\n        defaultValue: value,\n        placeholder: 'Выберите компанию',\n        options: ((dataCompanies === null || dataCompanies === void 0 ? void 0 : dataCompanies.getUsers) || []).map(company => ({\n          value: company.email,\n          label: company.name\n        })),\n        onChange: onChange,\n        isLoading: loadingCompanies || loading,\n        isSearchable: true,\n        cacheOptions: true\n      })\n    })), ((_data$getUser21 = data.getUser) === null || _data$getUser21 === void 0 ? void 0 : (_data$getUser21$role = _data$getUser21.role) === null || _data$getUser21$role === void 0 ? void 0 : _data$getUser21$role.name) !== 'ADMIN' && /*#__PURE__*/React.createElement(Column, null, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, account !== null && account !== void 0 && account.value && (account === null || account === void 0 ? void 0 : account.value) === 'ENTITY' || !(account !== null && account !== void 0 && account.value) && ((_data$getUser22 = data.getUser) === null || _data$getUser22 === void 0 ? void 0 : _data$getUser22.account) === 'ENTITY' ? 'О компании' : 'О себе'), /*#__PURE__*/React.createElement(TextArea, {\n      type: 'text',\n      name: 'about',\n      ref: register(),\n      defaultValue: getValues('about') || ((_data$getUser23 = data.getUser) === null || _data$getUser23 === void 0 ? void 0 : _data$getUser23.about) || '',\n      placeholder: 'Расскажите о себе пару слов',\n      disabled: loading,\n      appearance: 'ghost'\n    }))), isEnabledSecurity && /*#__PURE__*/React.createElement(Tab, {\n      active: tab.value === 'SECURITY'\n    }, canEditRole && errors && (errors.email || errors.phone) && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%'\n      },\n      appearance: 'error'\n    }, errors.email && /*#__PURE__*/React.createElement(\"p\", null, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430 \\u044D\\u043B. \\u043F\\u043E\\u0447\\u0442\\u0430\"), errors.phone && /*#__PURE__*/React.createElement(\"p\", null, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\")), /*#__PURE__*/React.createElement(AdaptiveRow, null, /*#__PURE__*/React.createElement(Column, {\n      style: {\n        flexGrow: 1\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u042D\\u043B. \\u043F\\u043E\\u0447\\u0442\\u0430\"), /*#__PURE__*/React.createElement(Input, {\n      type: 'email',\n      name: 'email',\n      ref: register({\n        required: !user\n      }),\n      defaultValue: getValues('email') || ((_data$getUser24 = data.getUser) === null || _data$getUser24 === void 0 ? void 0 : _data$getUser24.email),\n      placeholder: 'Эл. почта',\n      appearance: 'ghost',\n      disabled: loading\n    })), /*#__PURE__*/React.createElement(Column, {\n      style: {\n        flexGrow: 1\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"), /*#__PURE__*/React.createElement(Input, {\n      type: 'tel',\n      name: 'phone',\n      ref: register({\n        required: !user\n      }),\n      defaultValue: getValues('phone') || ((_data$getUser25 = data.getUser) === null || _data$getUser25 === void 0 ? void 0 : _data$getUser25.phone),\n      placeholder: 'Телефон',\n      appearance: 'ghost',\n      disabled: loading\n    }))), /*#__PURE__*/React.createElement(Title, {\n      tag: 'h4'\n    }, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"), canEditRole && errors && errors.password && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%'\n      },\n      appearance: 'error'\n    }, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"), /*#__PURE__*/React.createElement(AdaptiveRow, null, /*#__PURE__*/React.createElement(Input, {\n      name: 'password',\n      ref: register({\n        required: !user\n      }),\n      type: isShowPassword ? 'text' : 'password',\n      defaultValue: getValues('password') || ((_data$getUser26 = data.getUser) === null || _data$getUser26 === void 0 ? void 0 : _data$getUser26.password),\n      appearance: 'ghost',\n      placeholder: 'Пароль',\n      readOnly: !canEditRole\n    }), canEditRole && /*#__PURE__*/React.createElement(Tooltip, {\n      text: 'Генерация пароля'\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: 'button',\n      kind: 'icon',\n      disabled: loading,\n      onClick: () => setValue('password', generator.generate())\n    }, /*#__PURE__*/React.createElement(Icon, {\n      icon: 'password',\n      stroke: 'white'\n    }))), canEditRole && /*#__PURE__*/React.createElement(Tooltip, {\n      text: 'Отображение пароля'\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: 'button',\n      kind: 'icon',\n      disabled: loading,\n      onClick: onTogglePassword,\n      revert: !isShowPassword\n    }, /*#__PURE__*/React.createElement(Icon, {\n      icon: isShowPassword ? 'hide' : 'show',\n      stroke: isShowPassword ? 'white' : 'var(--default-color-accent)'\n    }))), !canEditRole && /*#__PURE__*/React.createElement(Tooltip, {\n      text: 'Смена пароля'\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: 'button',\n      kind: 'icon',\n      disabled: loading,\n      onClick: onChangePassword\n    }, /*#__PURE__*/React.createElement(Icon, {\n      icon: 'edit',\n      stroke: 'white'\n    })))), /*#__PURE__*/React.createElement(Text, null, \"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0434\\u043E\\u043B\\u0436\\u0435\\u043D \\u0441\\u043E\\u0434\\u0435\\u0440\\u0436\\u0430\\u0442\\u044C \\u043D\\u0435 \\u043C\\u0435\\u043D\\u0435\\u0435 \\u0432\\u043E\\u0441\\u044C\\u043C\\u0438 \\u0437\\u043D\\u0430\\u043A\\u043E\\u0432, \\u0432\\u043A\\u043B\\u044E\\u0447\\u0430\\u0442\\u044C \\u0431\\u0443\\u043A\\u0432\\u044B, \\u0446\\u0438\\u0444\\u0440\\u044B \\u0438 \\u0441\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u044C\\u043D\\u044B\\u0435 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u044B\")), canEditRole && /*#__PURE__*/React.createElement(Divider, {\n      clear: true\n    }), canEditRole && errors && errors.role && /*#__PURE__*/React.createElement(Alert, {\n      style: {\n        width: '100%'\n      },\n      appearance: 'error'\n    }, \"\\u041D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430 \\u0438\\u043B\\u0438 \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043D\\u0430 \\u0440\\u043E\\u043B\\u044C\"), canEditRole && /*#__PURE__*/React.createElement(Controller, {\n      name: 'role',\n      control: control,\n      defaultValue: getValues('role') || ((_data$getUser27 = data.getUser) === null || _data$getUser27 === void 0 ? void 0 : _data$getUser27.role) && {\n        value: (_data$getUser28 = data.getUser) === null || _data$getUser28 === void 0 ? void 0 : _data$getUser28.role.id,\n        label: getLabelRole((_data$getUser29 = data.getUser) === null || _data$getUser29 === void 0 ? void 0 : (_data$getUser29$role = _data$getUser29.role) === null || _data$getUser29$role === void 0 ? void 0 : _data$getUser29$role.name)\n      } || null,\n      render: ({\n        value,\n        onChange\n      }) => /*#__PURE__*/React.createElement(Select, {\n        appearance: 'ghost',\n        defaultValue: value,\n        onChange: onChange,\n        placeholder: 'Выберите роль',\n        options: (roles || []).map(item => ({\n          value: item.id,\n          label: getLabelRole(item.name)\n        })),\n        menuPlacement: 'top',\n        isLoading: loading,\n        isClearable: true\n      })\n    }), /*#__PURE__*/React.createElement(Divider, {\n      clear: true\n    }), /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Button, {\n      type: 'submit',\n      style: {\n        flexGrow: 1\n      },\n      disabled: loading\n    }, user ? 'Сохранить' : 'Создать'))) : error ? /*#__PURE__*/React.createElement(Alert, {\n      appearance: 'error',\n      style: {\n        width: '100%',\n        textAlign: 'center'\n      }\n    }, \"\\u0423\\u043F\\u0441! \\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044E \\u043E \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0435\") : /*#__PURE__*/React.createElement(Loader, null, /*#__PURE__*/React.createElement(Spinner, null));\n  });\n};\nUser.defaultProps = {\n  canEditAccount: true\n};\nexport default User;","map":{"version":3,"sources":["/Users/malcore/Documents/workspace/freelance/atomic/atomic-frontend/components/FormUser/index.js"],"names":["React","useEffect","useState","useMemo","Controller","styled","css","useQuery","generator","Tooltip","Wrap","WrapTooltip","Row","Column","Title","Text","Input","Button","TextArea","Dropzone","DatePicker","Spinner","Switch","Icon","Alert","Select","Divider","getLabelRole","Form","Loader","queries","TAB_TYPES","label","value","ACCOUNT_TYPES","tooltip","GENDER_TYPES","CommonAlert","AdaptiveDropzone","AdaptiveRow","Tab","active","detect","list","find","item","detectAccountType","types","user","account","detectGender","gender","getAccountType","role","type","getLabelGender","User","mutation","appearance","className","accountTypes","genderTypes","canEditRole","onSubmit","onChangePassword","data","loading","loadingData","error","GET_USER","variables","email","getUser","dataCompanies","loadingCompanies","GET_USERS","dataRoles","loadingRoles","GET_ROLES","tab","setTab","roles","setRoles","setAccount","isShowPassword","setShowPassword","isEnabledSecurity","registerOfASocialNetwork","onTogglePassword","getRoles","form","action","register","control","errors","setValue","getValues","avatar","path","onChange","flexGrow","name","length","width","required","dateOfBirth","Date","company","id","getUsers","map","about","phone","password","generate","textAlign","defaultProps","canEditAccount"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useMemo } from 'react'\nimport { Controller } from 'react-hook-form'\nimport styled, { css } from 'styled-components'\nimport { useQuery } from '@apollo/react-hooks'\nimport generator from 'generate-password'\n\nimport Tooltip, { Wrap as WrapTooltip } from '../../atomic-ui/components/Tooltip'\nimport Row from '../../atomic-ui/components/Row'\nimport Column from '../../atomic-ui/components/Column'\nimport Title from '../../atomic-ui/components/Title'\nimport Text from '../../atomic-ui/components/Text'\nimport Input from '../../atomic-ui/components/Input'\nimport Button from '../../atomic-ui/components/Button'\nimport TextArea from '../../atomic-ui/components/TextArea'\nimport Dropzone from '../../atomic-ui/components/Dropzone'\nimport DatePicker from '../../atomic-ui/components/DatePicker'\nimport Spinner from '../../atomic-ui/components/Spinner'\nimport Switch from '../../atomic-ui/components/Switch'\nimport Icon from '../../atomic-ui/components/Icon'\nimport Alert from '../../atomic-ui/components/Alert'\nimport Select from '../../atomic-ui/components/Select'\nimport Divider from '../../atomic-ui/components/Divider'\nimport { getLabelRole } from '../../atomic-ui/utils/functions'\n\nimport Form from '../Form'\nimport { Loader } from '../Styled'\nimport queries from '../../graphql/queries'\n\nconst TAB_TYPES = [\n  { label: 'Основное', value: 'GENERAL' },\n  { label: 'Безопасность', value: 'SECURITY' }\n]\n\nconst ACCOUNT_TYPES = [\n  { label: 'Физ. лицо', value: 'INDIVIDUAL', tooltip: 'Любое лицо' },\n  { label: 'Оф. лицо', value: 'OFICIAL', tooltip: 'Государственный деятель' },\n  { label: 'Юр. лицо', value: 'ENTITY', tooltip: 'Организация' }\n]\n\nconst GENDER_TYPES = [\n  { label: 'Мужской', value: 'MALE' },\n  { label: 'Женский', value: 'FEMALE' }\n]\n\nexport const CommonAlert = styled(Alert)`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  text-align: center;\n  flex-grow: 100;\n`\n\nexport const AdaptiveDropzone = styled(Dropzone)`\n  width: 196px;\n  height: 276px;\n\n  span {\n    width: 100%;\n  }\n\n  @media only screen and (max-width: 575px) {\n    width: 100% !important;\n    height: 256px;\n  }\n`\n\nexport const AdaptiveRow = styled(Row)`\n  @media only screen and (max-width: 575px) {\n    flex-direction: column;\n    grid-gap: var(--default-gap);\n\n    ${WrapTooltip} {\n      flex-grow: 1;\n\n      button {\n        width: 100%;\n      }\n    }\n  }\n`\n\nexport const Tab = styled(Column)`\n  display: none;\n\n  ${({ active }) =>\n    active &&\n    css`\n      display: flex;\n    `}\n`\n\nexport const detect = (list, value) => {\n  return list.find((item) => item.value === value)\n}\n\nexport const detectAccountType = (types, user) => detect(types, user?.account)\n\nexport const detectGender = (types, user) => detect(types, user?.gender)\n\nexport const getAccountType = (role) => {\n  if (role) {\n    return ACCOUNT_TYPES.find((type) => type.value === role)\n  }\n  return ACCOUNT_TYPES[0]\n}\n\nexport const getLabelGender = (gender) => {\n  if (gender) {\n    return GENDER_TYPES.find((type) => type.value === gender)\n  }\n  return GENDER_TYPES[0]\n}\n\nexport const User = ({\n  user,\n  mutation,\n  appearance,\n  className,\n  accountTypes,\n  genderTypes,\n  canEditRole,\n  onSubmit,\n  onChangePassword\n}) => {\n  const { data, loading: loadingData, error } = user\n    ? useQuery(queries.GET_USER, {\n        variables: {\n          email: user\n        }\n      })\n    : { data: { getUser: {} }, loading: false, error: false }\n  const { data: dataCompanies, loading: loadingCompanies } = useQuery(queries.GET_USERS, {\n    variables: {\n      account: ['ENTITY']\n    }\n  })\n  const { data: dataRoles, loading: loadingRoles } = useQuery(queries.GET_ROLES)\n\n  const [tab, setTab] = useState(TAB_TYPES[0])\n  const [roles, setRoles] = useState([])\n  const [account, setAccount] = useState(null)\n  const [isShowPassword, setShowPassword] = useState(false)\n\n  const isEnabledSecurity = useMemo(() => !data.getUser?.registerOfASocialNetwork, [data])\n\n  const onTogglePassword = () => setShowPassword(!isShowPassword)\n\n  useEffect(() => {\n    if (!loadingRoles && dataRoles) {\n      setRoles(dataRoles.getRoles)\n    }\n  }, [loadingRoles, dataRoles])\n\n  return (\n    <Form\n      className={className}\n      appearance={appearance}\n      mutation={mutation}\n      onSubmit={(form, action) =>\n        onSubmit({ ...form, account: account || getAccountType(data?.getUser?.account) }, action)\n      }>\n      {({ register, control, loading, errors, setValue, getValues }) =>\n        !loading && !loadingData && data && data.getUser ? (\n          <React.Fragment>\n            {isEnabledSecurity && (\n              <Switch defaultValue={tab} options={TAB_TYPES} onChange={setTab} stretch />\n            )}\n\n            <Tab active={tab.value === 'GENERAL'}>\n              <AdaptiveRow>\n                <Controller\n                  name={'avatar'}\n                  control={control}\n                  defaultValue={\n                    getValues('avatar') ||\n                    (user && (data.getUser?.avatar || { path: '/images/avatar-default.png' })) ||\n                    null\n                  }\n                  render={({ value, onChange }) => (\n                    <AdaptiveDropzone\n                      accept={'image/*'}\n                      defaultValue={value}\n                      onChange={onChange}\n                      placeholder={'Перетащите сюда изображение для превью'}\n                      tooltip={\n                        'Разрешение: 675x590px. Допустимые форматы: jpeg, jpg, png. Макс. размер: 15 MB'\n                      }\n                      avatar\n                    />\n                  )}\n                />\n\n                <Column style={{ flexGrow: 1 }}>\n                  {data.getUser?.role?.name !== 'ADMIN' && (\n                    <React.Fragment>\n                      <Title tag={'h4'}>Аккаунт</Title>\n                      <Switch\n                        defaultValue={\n                          account?.value ? account : getAccountType(data.getUser?.account)\n                        }\n                        options={(accountTypes?.length > 1 && accountTypes) || ACCOUNT_TYPES}\n                        onChange={(value) => setAccount(value)}\n                        disabled={loading}\n                        stretch\n                      />\n                    </React.Fragment>\n                  )}\n\n                  <Title tag={'h4'}>\n                    {(account?.value && account?.value === 'ENTITY') ||\n                    (!account?.value && data.getUser?.account === 'ENTITY')\n                      ? 'Название компании'\n                      : 'ФИО'}\n                  </Title>\n                  {canEditRole && errors && errors.name && (\n                    <Alert style={{ width: '100%' }} appearance={'error'}>\n                      Неверно указано или не указано ФИО\n                    </Alert>\n                  )}\n                  <Input\n                    type={'text'}\n                    name={'name'}\n                    ref={register({ required: !user })}\n                    defaultValue={getValues('name') || data.getUser?.name}\n                    placeholder={\n                      (account?.value && account?.value === 'ENTITY') ||\n                      (!account?.value && data.getUser?.account === 'ENTITY')\n                        ? 'Название компании'\n                        : 'ФИО'\n                    }\n                    appearance={'ghost'}\n                    disabled={loading}\n                  />\n\n                  {data.getUser?.role?.name === 'ADMIN' && (\n                    <CommonAlert>\n                      У администратора ограниченные возможности изменения собственного аккаунта\n                    </CommonAlert>\n                  )}\n\n                  {data.getUser?.role?.name !== 'ADMIN' && (\n                    <React.Fragment>\n                      <Title tag={'h4'}>\n                        {(account?.value && account?.value === 'ENTITY') ||\n                        (!account?.value && data.getUser?.account === 'ENTITY')\n                          ? 'Дата основания'\n                          : 'Дата рождения'}\n                      </Title>\n                      <Controller\n                        name={'dateOfBirth'}\n                        control={control}\n                        defaultValue={\n                          getValues('dateOfBirth') ||\n                          (data.getUser?.dateOfBirth && new Date(data.getUser?.dateOfBirth)) ||\n                          null\n                        }\n                        render={({ value, onChange }) => (\n                          <DatePicker\n                            value={value}\n                            onChange={onChange}\n                            placeholder={\n                              (account?.value && account?.value === 'ENTITY') ||\n                              (!account?.value && data.getUser?.account === 'ENTITY')\n                                ? 'Дата основания'\n                                : 'Дата рождения'\n                            }\n                            appearance={'ghost'}\n                            withYearDisplay={false}\n                            withNavigate\n                            canEditYear\n                          />\n                        )}\n                      />\n                    </React.Fragment>\n                  )}\n                </Column>\n              </AdaptiveRow>\n\n              {((account?.value && account?.value !== 'ENTITY') ||\n                (!account?.value && data.getUser?.account !== 'ENTITY')) &&\n                data.getUser?.role?.name !== 'ADMIN' && (\n                  <Column style={{ flexGrow: 1 }}>\n                    <Title tag={'h4'}>Пол</Title>\n                    <Controller\n                      name={'gender'}\n                      control={control}\n                      defaultValue={getValues('gender') || getLabelGender(data.getUser?.gender)}\n                      render={({ value, onChange }) => (\n                        <Switch\n                          defaultValue={value}\n                          onChange={onChange}\n                          options={(genderTypes?.length > 1 && genderTypes) || GENDER_TYPES}\n                          disabled={loading}\n                          stretch\n                        />\n                      )}\n                    />\n                  </Column>\n                )}\n\n              {((account?.value && account?.value !== 'ENTITY') ||\n                (!account?.value && data.getUser?.account !== 'ENTITY')) &&\n                data.getUser?.role?.name !== 'ADMIN' && (\n                  <Column>\n                    <Title tag={'h4'}>Компания</Title>\n                    <Controller\n                      name={'company'}\n                      control={control}\n                      defaultValue={\n                        getValues('company') ||\n                        (data.getUser?.company\n                          ? {\n                              value: data.getUser.company.id,\n                              label: data.getUser.company.name\n                            }\n                          : null)\n                      }\n                      render={({ value, onChange }) => (\n                        <Select\n                          appearance={'ghost'}\n                          defaultValue={value}\n                          placeholder={'Выберите компанию'}\n                          options={(dataCompanies?.getUsers || []).map((company) => ({\n                            value: company.email,\n                            label: company.name\n                          }))}\n                          onChange={onChange}\n                          isLoading={loadingCompanies || loading}\n                          isSearchable\n                          cacheOptions\n                        />\n                      )}\n                    />\n                  </Column>\n                )}\n\n              {data.getUser?.role?.name !== 'ADMIN' && (\n                <Column>\n                  <Title tag={'h4'}>\n                    {(account?.value && account?.value === 'ENTITY') ||\n                    (!account?.value && data.getUser?.account === 'ENTITY')\n                      ? 'О компании'\n                      : 'О себе'}\n                  </Title>\n                  <TextArea\n                    type={'text'}\n                    name={'about'}\n                    ref={register()}\n                    defaultValue={getValues('about') || data.getUser?.about || ''}\n                    placeholder={'Расскажите о себе пару слов'}\n                    disabled={loading}\n                    appearance={'ghost'}\n                  />\n                </Column>\n              )}\n            </Tab>\n\n            {isEnabledSecurity && (\n              <Tab active={tab.value === 'SECURITY'}>\n                {canEditRole && errors && (errors.email || errors.phone) && (\n                  <Alert style={{ width: '100%' }} appearance={'error'}>\n                    {errors.email && <p>Неверно указан или не указана эл. почта</p>}\n                    {errors.phone && <p>Неверно указан или не указана телефон</p>}\n                  </Alert>\n                )}\n                <AdaptiveRow>\n                  <Column style={{ flexGrow: 1 }}>\n                    <Title tag={'h4'}>Эл. почта</Title>\n                    <Input\n                      type={'email'}\n                      name={'email'}\n                      ref={register({ required: !user })}\n                      defaultValue={getValues('email') || data.getUser?.email}\n                      placeholder={'Эл. почта'}\n                      appearance={'ghost'}\n                      disabled={loading}\n                    />\n                  </Column>\n                  <Column style={{ flexGrow: 1 }}>\n                    <Title tag={'h4'}>Телефон</Title>\n                    <Input\n                      type={'tel'}\n                      name={'phone'}\n                      ref={register({ required: !user })}\n                      defaultValue={getValues('phone') || data.getUser?.phone}\n                      placeholder={'Телефон'}\n                      appearance={'ghost'}\n                      disabled={loading}\n                    />\n                  </Column>\n                </AdaptiveRow>\n\n                <Title tag={'h4'}>Пароль</Title>\n                {canEditRole && errors && errors.password && (\n                  <Alert style={{ width: '100%' }} appearance={'error'}>\n                    Неверно указан или не указан пароль\n                  </Alert>\n                )}\n                <AdaptiveRow>\n                  <Input\n                    name={'password'}\n                    ref={register({ required: !user })}\n                    type={isShowPassword ? 'text' : 'password'}\n                    defaultValue={getValues('password') || data.getUser?.password}\n                    appearance={'ghost'}\n                    placeholder={'Пароль'}\n                    readOnly={!canEditRole}\n                  />\n                  {canEditRole && (\n                    <Tooltip text={'Генерация пароля'}>\n                      <Button\n                        type={'button'}\n                        kind={'icon'}\n                        disabled={loading}\n                        onClick={() => setValue('password', generator.generate())}>\n                        <Icon icon={'password'} stroke={'white'} />\n                      </Button>\n                    </Tooltip>\n                  )}\n                  {canEditRole && (\n                    <Tooltip text={'Отображение пароля'}>\n                      <Button\n                        type={'button'}\n                        kind={'icon'}\n                        disabled={loading}\n                        onClick={onTogglePassword}\n                        revert={!isShowPassword}>\n                        <Icon\n                          icon={isShowPassword ? 'hide' : 'show'}\n                          stroke={isShowPassword ? 'white' : 'var(--default-color-accent)'}\n                        />\n                      </Button>\n                    </Tooltip>\n                  )}\n                  {!canEditRole && (\n                    <Tooltip text={'Смена пароля'}>\n                      <Button\n                        type={'button'}\n                        kind={'icon'}\n                        disabled={loading}\n                        onClick={onChangePassword}>\n                        <Icon icon={'edit'} stroke={'white'} />\n                      </Button>\n                    </Tooltip>\n                  )}\n                </AdaptiveRow>\n\n                <Text>\n                  Пароль должен содержать не менее восьми знаков, включать буквы, цифры и\n                  специальные символы\n                </Text>\n              </Tab>\n            )}\n\n            {canEditRole && <Divider clear />}\n\n            {canEditRole && errors && errors.role && (\n              <Alert style={{ width: '100%' }} appearance={'error'}>\n                Неверно указана или не указана роль\n              </Alert>\n            )}\n            {canEditRole && (\n              <Controller\n                name={'role'}\n                control={control}\n                defaultValue={\n                  getValues('role') ||\n                  (data.getUser?.role && {\n                    value: data.getUser?.role.id,\n                    label: getLabelRole(data.getUser?.role?.name)\n                  }) ||\n                  null\n                }\n                render={({ value, onChange }) => (\n                  <Select\n                    appearance={'ghost'}\n                    defaultValue={value}\n                    onChange={onChange}\n                    placeholder={'Выберите роль'}\n                    options={(roles || []).map((item) => ({\n                      value: item.id,\n                      label: getLabelRole(item.name)\n                    }))}\n                    menuPlacement={'top'}\n                    isLoading={loading}\n                    isClearable\n                  />\n                )}\n              />\n            )}\n\n            <Divider clear />\n\n            <Row>\n              <Button type={'submit'} style={{ flexGrow: 1 }} disabled={loading}>\n                {user ? 'Сохранить' : 'Создать'}\n              </Button>\n            </Row>\n          </React.Fragment>\n        ) : error ? (\n          <Alert appearance={'error'} style={{ width: '100%', textAlign: 'center' }}>\n            Упс! Не удалось загрузить информацию о проекте\n          </Alert>\n        ) : (\n          <Loader>\n            <Spinner />\n          </Loader>\n        )\n      }\n    </Form>\n  )\n}\n\nUser.defaultProps = {\n  canEditAccount: true\n}\n\nexport default User\n"]},"metadata":{},"sourceType":"module"}