{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useRouter } from 'next/router';\nimport { useLazyQuery } from '@apollo/react-hooks';\nimport GlobalSearch from '../../atomic-ui/components/GlobalSearch';\nimport { b64EncodeUnicode } from '../../atomic-ui/utils/functions';\nimport { Card } from '../../layouts/dashboard/content';\nexport const QuerySearch = ({\n  search,\n  entity,\n  entities,\n  setSearch,\n  onHide,\n  onJump,\n  onChange\n}) => {\n  _s();\n\n  const router = useRouter();\n  const initialResult = [null, {\n    data: null,\n    loading: false,\n    refetch: null\n  }];\n  const [load, {\n    data,\n    loading,\n    refetch\n  }] = entity ? useLazyQuery(entity.query) : initialResult;\n\n  const redirectById = (item, path) => router.push(`${path}/${b64EncodeUnicode(item.id)}`);\n\n  const onClick = async (item, path, singlePath) => {\n    if (onHide) onHide();\n    await redirectById(item, `${path}/${singlePath}`);\n  };\n\n  const onEdit = async (item, path) => {\n    if (onHide) onHide();\n    await redirectById(item, `${path}/edit`);\n  };\n\n  const onSubmit = value => {\n    const variables = {\n      search: value\n    };\n    if (setSearch) setSearch(value);\n\n    if (refetch) {\n      refetch(variables);\n    }\n\n    if (load) {\n      load({\n        variables\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(GlobalSearch, {\n    search: search,\n    loading: loading,\n    result: data && entity && data[entity === null || entity === void 0 ? void 0 : entity.value],\n    initialEntity: entity,\n    entities: (entities || []).map(elem => ({ ...elem,\n      render: item => /*#__PURE__*/React.createElement(Card, {\n        key: item.id || item.email,\n        item: item,\n        appearance: 'clear',\n        component: elem.render(item),\n        onLink: document => onClick(document, (elem === null || elem === void 0 ? void 0 : elem.originPath) || '', (elem === null || elem === void 0 ? void 0 : elem.singlePath) || ''),\n        onEdit: document => onEdit(document, (elem === null || elem === void 0 ? void 0 : elem.originPath) || ''),\n        onDelete: document => onJump('/delete', {\n          item: document,\n          entity: elem\n        }),\n        withoutChecked: true\n      })\n    })),\n    onSubmit: onSubmit,\n    onChange: onChange\n  });\n};\n\n_s(QuerySearch, \"tuIFtjm/am9zoqkeed/pLoip7MY=\", false, function () {\n  return [useRouter, useLazyQuery];\n});\n\n_c = QuerySearch;\nexport default QuerySearch;\n\nvar _c;\n\n$RefreshReg$(_c, \"QuerySearch\");","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/components/QuerySearch/index.js"],"names":["React","useRouter","useLazyQuery","GlobalSearch","b64EncodeUnicode","Card","QuerySearch","search","entity","entities","setSearch","onHide","onJump","onChange","router","initialResult","data","loading","refetch","load","query","redirectById","item","path","push","id","onClick","singlePath","onEdit","onSubmit","value","variables","map","elem","render","email","document","originPath"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { useRouter } from 'next/router'\nimport { useLazyQuery } from '@apollo/react-hooks'\n\nimport GlobalSearch from '../../atomic-ui/components/GlobalSearch'\nimport { b64EncodeUnicode } from '../../atomic-ui/utils/functions'\n\nimport { Card } from '../../layouts/dashboard/content'\n\nexport const QuerySearch = ({ search, entity, entities, setSearch, onHide, onJump, onChange }) => {\n  const router = useRouter()\n  const initialResult = [null, { data: null, loading: false, refetch: null }]\n  const [load, { data, loading, refetch }] = entity ? useLazyQuery(entity.query) : initialResult\n\n  const redirectById = (item, path) => router.push(`${path}/${b64EncodeUnicode(item.id)}`)\n\n  const onClick = async (item, path, singlePath) => {\n    if (onHide) onHide()\n    await redirectById(item, `${path}/${singlePath}`)\n  }\n\n  const onEdit = async (item, path) => {\n    if (onHide) onHide()\n    await redirectById(item, `${path}/edit`)\n  }\n\n  const onSubmit = (value) => {\n    const variables = { search: value }\n\n    if (setSearch) setSearch(value)\n\n    if (refetch) {\n      refetch(variables)\n    }\n    if (load) {\n      load({ variables })\n    }\n  }\n\n  return (\n    <GlobalSearch\n      search={search}\n      loading={loading}\n      result={data && entity && data[entity?.value]}\n      initialEntity={entity}\n      entities={(entities || []).map((elem) => ({\n        ...elem,\n        render: (item) => (\n          <Card\n            key={item.id || item.email}\n            item={item}\n            appearance={'clear'}\n            component={elem.render(item)}\n            onLink={(document) => onClick(document, elem?.originPath || '', elem?.singlePath || '')}\n            onEdit={(document) => onEdit(document, elem?.originPath || '')}\n            onDelete={(document) => onJump('/delete', { item: document, entity: elem })}\n            withoutChecked\n          />\n        )\n      }))}\n      onSubmit={onSubmit}\n      onChange={onChange}\n    />\n  )\n}\n\nexport default QuerySearch\n"]},"metadata":{},"sourceType":"module"}