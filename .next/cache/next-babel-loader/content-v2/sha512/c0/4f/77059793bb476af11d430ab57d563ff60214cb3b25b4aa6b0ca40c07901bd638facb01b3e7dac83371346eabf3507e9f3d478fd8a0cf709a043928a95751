{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from 'react';\nimport styled, { css } from 'styled-components';\nimport { useQuery } from '@apollo/react-hooks';\nimport Column from '../../atomic-ui/components/Column';\nimport Grid from '../../atomic-ui/components/Grid';\nimport Difinition from '../../atomic-ui/components/Difinition';\nimport Alert from '../../atomic-ui/components/Alert';\nimport Spinner from '../../atomic-ui/components/Spinner';\nimport { getLabelRole } from '../../atomic-ui/utils/functions';\nimport { useEntityQuery } from '../../hooks/useEntityQuery';\nimport { Loader } from '../Styled';\nimport queries from '../../graphql/queries';\nexport var Wrap = styled(Column).withConfig({\n  displayName: \"Members__Wrap\",\n  componentId: \"sc-2k8qnt-0\"\n})([\"grid-gap:0;flex-grow:1;\", \" \", \" \", \"\"], function (_ref) {\n  var appearance = _ref.appearance;\n  return appearance === 'default' && css([\"padding:var(--default-gap);background:var(--surface-background);border:var(--surface-border);border-radius:var(--surface-border-radius);box-shadow:var(--surface-shadow);\"]);\n}, function (_ref2) {\n  var appearance = _ref2.appearance;\n  return appearance === 'ghost' && css([\"padding:0;border:none;background:none;border-radius:0;box-shadow:none;\"]);\n}, function (_ref3) {\n  var appearance = _ref3.appearance;\n  return appearance === 'clear' && css([\"padding:0;border:none;background:none;border-radius:0;box-shadow:none;\"]);\n});\n_c = Wrap;\nexport var Members = function Members(_ref4) {\n  _s();\n\n  var user = _ref4.user,\n      style = _ref4.style,\n      appearance = _ref4.appearance,\n      className = _ref4.className,\n      onMemberLink = _ref4.onMemberLink;\n\n  var _useEntityQuery = useEntityQuery(),\n      setQuery = _useEntityQuery.setQuery;\n\n  var _useQuery = useQuery(queries.GET_USER_MEMBERS, {\n    variables: {\n      email: user\n    }\n  }),\n      data = _useQuery.data,\n      loading = _useQuery.loading,\n      error = _useQuery.error;\n\n  return /*#__PURE__*/React.createElement(Wrap, {\n    className: className,\n    style: style,\n    appearance: appearance\n  }, !loading && data ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Grid, {\n    percentage: 'minmax(320px, 1fr)'\n  }, data.getUserMembers.map(function (member) {\n    var _member$avatar;\n\n    return /*#__PURE__*/React.createElement(Difinition, {\n      key: member.email,\n      img: ((_member$avatar = member.avatar) === null || _member$avatar === void 0 ? void 0 : _member$avatar.path) || '/images/avatar-default.png',\n      label: getLabelRole(member.about),\n      text: member.name,\n      onLink: function onLink() {\n        return setQuery(member.email, 'user', onMemberLink);\n      },\n      stretch: true\n    });\n  }))) : error ? /*#__PURE__*/React.createElement(Alert, {\n    appearance: 'error',\n    style: {\n      width: '100%',\n      textAlign: 'center'\n    }\n  }, \"\\u0423\\u043F\\u0441! \\u041D\\u0435 \\u0443\\u0434\\u0430\\u043B\\u043E\\u0441\\u044C \\u0437\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044E \\u043E \\u0443\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u0430\\u0445\") : /*#__PURE__*/React.createElement(Loader, null, /*#__PURE__*/React.createElement(Spinner, null)));\n};\n\n_s(Members, \"EfNmgE0a3T/OvbgiFn+E6PDJR0E=\", false, function () {\n  return [useEntityQuery, useQuery];\n});\n\n_c2 = Members;\nMembers.defaultProps = {\n  appearance: 'default'\n};\nexport default Members;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Wrap\");\n$RefreshReg$(_c2, \"Members\");","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/components/Members/index.js"],"names":["React","styled","css","useQuery","Column","Grid","Difinition","Alert","Spinner","getLabelRole","useEntityQuery","Loader","queries","Wrap","appearance","Members","user","style","className","onMemberLink","setQuery","GET_USER_MEMBERS","variables","email","data","loading","error","getUserMembers","map","member","avatar","path","about","name","width","textAlign","defaultProps"],"mappings":"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","sourcesContent":["import React from 'react'\nimport styled, { css } from 'styled-components'\nimport { useQuery } from '@apollo/react-hooks'\n\nimport Column from '../../atomic-ui/components/Column'\nimport Grid from '../../atomic-ui/components/Grid'\nimport Difinition from '../../atomic-ui/components/Difinition'\nimport Alert from '../../atomic-ui/components/Alert'\nimport Spinner from '../../atomic-ui/components/Spinner'\nimport { getLabelRole } from '../../atomic-ui/utils/functions'\n\nimport { useEntityQuery } from '../../hooks/useEntityQuery'\nimport { Loader } from '../Styled'\nimport queries from '../../graphql/queries'\n\nexport const Wrap = styled(Column)`\n  grid-gap: 0;\n  flex-grow: 1;\n\n  ${({ appearance }) =>\n    appearance === 'default' &&\n    css`\n      padding: var(--default-gap);\n      background: var(--surface-background);\n      border: var(--surface-border);\n      border-radius: var(--surface-border-radius);\n      box-shadow: var(--surface-shadow);\n    `}\n\n  ${({ appearance }) =>\n    appearance === 'ghost' &&\n    css`\n      padding: 0;\n      border: none;\n      background: none;\n      border-radius: 0;\n      box-shadow: none;\n    `}\n\n  ${({ appearance }) =>\n    appearance === 'clear' &&\n    css`\n      padding: 0;\n      border: none;\n      background: none;\n      border-radius: 0;\n      box-shadow: none;\n    `}\n`\n\nexport const Members = ({ user, style, appearance, className, onMemberLink }) => {\n  const { setQuery } = useEntityQuery()\n  const { data, loading, error } = useQuery(queries.GET_USER_MEMBERS, {\n    variables: {\n      email: user\n    }\n  })\n\n  return (\n    <Wrap className={className} style={style} appearance={appearance}>\n      {!loading && data ? (\n        <React.Fragment>\n          <Grid percentage={'minmax(320px, 1fr)'}>\n            {data.getUserMembers.map((member) => (\n              <Difinition\n                key={member.email}\n                img={member.avatar?.path || '/images/avatar-default.png'}\n                label={getLabelRole(member.about)}\n                text={member.name}\n                onLink={() => setQuery(member.email, 'user', onMemberLink)}\n                stretch\n              />\n            ))}\n          </Grid>\n        </React.Fragment>\n      ) : error ? (\n        <Alert appearance={'error'} style={{ width: '100%', textAlign: 'center' }}>\n          Упс! Не удалось загрузить информацию о участниках\n        </Alert>\n      ) : (\n        <Loader>\n          <Spinner />\n        </Loader>\n      )}\n    </Wrap>\n  )\n}\n\nMembers.defaultProps = {\n  appearance: 'default'\n}\n\nexport default Members\n"]},"metadata":{},"sourceType":"module"}