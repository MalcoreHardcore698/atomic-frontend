{"ast":null,"code":"import React, { useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useRouter } from 'next/router';\nimport ErrorNotFound from './404';\nimport DefaultLayout from '../layouts/default';\nimport Spinner from '../atomic-ui/components/Spinner';\nimport { onUserResetPassword } from '../store/helpers/user';\nimport { setStepper } from '../store/actions/stepper';\nimport { useHelper } from '../hooks/useHelper';\nimport queries from '../graphql/queries';\nconst TITLE = 'Сброс пароля';\nconst Wrap = styled.div.withConfig({\n  displayName: \"reset-password__Wrap\",\n  componentId: \"x81915-0\"\n})([\"display:grid;grid-template-columns:380px;justify-content:center;align-content:center;margin:120px 0;@media only screen and (max-width:480px){grid-template-columns:100%;margin:25px 0;}\"]);\nconst Loader = styled.div.withConfig({\n  displayName: \"reset-password__Loader\",\n  componentId: \"x81915-1\"\n})([\"position:fixed;top:0;left:0;display:flex;justify-content:center;align-items:center;width:100%;height:100%;\"]);\nexport const Support = () => {\n  const recall = useHelper();\n  const router = useRouter();\n  const {\n    user,\n    stepper\n  } = useSelector(state => ({\n    user: state.user,\n    stepper: state.stepper\n  }));\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!(stepper !== null && stepper !== void 0 && stepper.content)) {\n      recall(onUserResetPassword, {\n        redirect: () => router.replace('/profile'),\n        withoutBack: true,\n        mutations: {\n          forgotPassword: queries.RESET,\n          checkResetToken: queries.CHECK_RESET_TOKEN\n        }\n      })();\n    }\n  }, [stepper]);\n  useEffect(() => {\n    return () => dispatch(setStepper(null));\n  }, [dispatch, setStepper]);\n\n  if (!stepper) {\n    return /*#__PURE__*/React.createElement(Loader, null, /*#__PURE__*/React.createElement(Spinner, null));\n  }\n\n  if (user && user.authenticated) {\n    return /*#__PURE__*/React.createElement(DefaultLayout, {\n      title: TITLE\n    }, /*#__PURE__*/React.createElement(Wrap, {\n      key: stepper.name\n    }, stepper.content));\n  }\n\n  return /*#__PURE__*/React.createElement(ErrorNotFound, null);\n};\nexport default Support;","map":null,"metadata":{},"sourceType":"module"}