{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useHelper } from '../hooks/useHelper';\nimport ContentLayout from '../layouts/content';\nimport LazyLoad from '../components/LazyLoad';\nimport FadeLoad from '../components/FadeLoad';\nimport ArticleCard from '../components/ArticleCard';\nimport { GridAside as Container } from '../components/Styled';\nimport { getLabelCategory } from '../atomic-ui/utils/functions';\nimport { onArticleLink } from '../store/helpers/article';\nimport queries from '../graphql/queries';\nconst TITLE = 'Статьи';\n\nconst Articles = ({\n  store\n}) => {\n  _s();\n\n  const recall = useHelper();\n  return /*#__PURE__*/React.createElement(ContentLayout, {\n    title: TITLE,\n    filters: [{\n      type: 'DATEPICKER',\n      placeholder: 'Дата публикации'\n    }, {\n      type: 'SELECT',\n      options: store === null || store === void 0 ? void 0 : store.categories.map(category => ({\n        value: category.id,\n        label: getLabelCategory(category.name)\n      }))\n    }],\n    options: [{\n      label: 'Категория',\n      value: 'category'\n    }, {\n      label: 'Дата публикации',\n      value: 'createdAt'\n    }],\n    query: queries.GET_ARTICLES,\n    variables: {\n      status: 'PUBLISHED'\n    },\n    store: {\n      documents: store === null || store === void 0 ? void 0 : store.articles\n    }\n  }, ({\n    documents\n  }) => /*#__PURE__*/React.createElement(Container, null, documents.map(article => /*#__PURE__*/React.createElement(FadeLoad, {\n    key: article.id\n  }, /*#__PURE__*/React.createElement(LazyLoad, null, /*#__PURE__*/React.createElement(ArticleCard, {\n    article: article,\n    onLink: recall(onArticleLink, {\n      id: article.id,\n      article\n    })\n  }))))));\n};\n\n_s(Articles, \"aM7zgYOod1bbibssvRoB5g1+my4=\", false, function () {\n  return [useHelper];\n});\n\n_c = Articles;\nexport var __N_SSP = true;\nexport default Articles;\n\nvar _c;\n\n$RefreshReg$(_c, \"Articles\");","map":{"version":3,"sources":["C:/Users/dan82/Documents/workspace/FREELANCE/atomic/atomic-frontend/pages/articles.js"],"names":["React","useHelper","ContentLayout","LazyLoad","FadeLoad","ArticleCard","GridAside","Container","getLabelCategory","onArticleLink","queries","TITLE","Articles","store","recall","type","placeholder","options","categories","map","category","value","id","label","name","GET_ARTICLES","status","documents","articles","article"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAGA,SAASC,SAAT,QAA0B,oBAA1B;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,SAASC,SAAS,IAAIC,SAAtB,QAAuC,sBAAvC;AACA,SAASC,gBAAT,QAAiC,8BAAjC;AACA,SAASC,aAAT,QAA8B,0BAA9B;AACA,OAAOC,OAAP,MAAoB,oBAApB;AAEA,MAAMC,KAAK,GAAG,QAAd;;AAGA,MAAMC,QAAQ,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAe;AAAA;;AAC9B,QAAMC,MAAM,GAAGb,SAAS,EAAxB;AAEA,sBACE,oBAAC,aAAD;AACE,IAAA,KAAK,EAAEU,KADT;AAEE,IAAA,OAAO,EAAE,CACP;AAAEI,MAAAA,IAAI,EAAE,YAAR;AAAsBC,MAAAA,WAAW,EAAE;AAAnC,KADO,EAEP;AACED,MAAAA,IAAI,EAAE,QADR;AAEEE,MAAAA,OAAO,EAAEJ,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAEK,UAAP,CAAkBC,GAAlB,CAAuBC,QAAD,KAAe;AAC5CC,QAAAA,KAAK,EAAED,QAAQ,CAACE,EAD4B;AAE5CC,QAAAA,KAAK,EAAEf,gBAAgB,CAACY,QAAQ,CAACI,IAAV;AAFqB,OAAf,CAAtB;AAFX,KAFO,CAFX;AAYE,IAAA,OAAO,EAAE,CACP;AAAED,MAAAA,KAAK,EAAE,WAAT;AAAsBF,MAAAA,KAAK,EAAE;AAA7B,KADO,EAEP;AAAEE,MAAAA,KAAK,EAAE,iBAAT;AAA4BF,MAAAA,KAAK,EAAE;AAAnC,KAFO,CAZX;AAgBE,IAAA,KAAK,EAAEX,OAAO,CAACe,YAhBjB;AAiBE,IAAA,SAAS,EAAE;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAjBb;AAkBE,IAAA,KAAK,EAAE;AAAEC,MAAAA,SAAS,EAAEd,KAAF,aAAEA,KAAF,uBAAEA,KAAK,CAAEe;AAApB;AAlBT,KAmBG,CAAC;AAAED,IAAAA;AAAF,GAAD,kBACC,oBAAC,SAAD,QACGA,SAAS,CAACR,GAAV,CAAeU,OAAD,iBACb,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAEA,OAAO,CAACP;AAAvB,kBACE,oBAAC,QAAD,qBACE,oBAAC,WAAD;AACE,IAAA,OAAO,EAAEO,OADX;AAEE,IAAA,MAAM,EAAEf,MAAM,CAACL,aAAD,EAAgB;AAAEa,MAAAA,EAAE,EAAEO,OAAO,CAACP,EAAd;AAAkBO,MAAAA;AAAlB,KAAhB;AAFhB,IADF,CADF,CADD,CADH,CApBJ,CADF;AAoCD,CAvCD;;GAAMjB,Q;UACWX,S;;;KADXW,Q;;AA2EN,eAAeA,QAAf","sourcesContent":["import React from 'react'\n\nimport { initializeApollo } from '../apollo'\nimport { useHelper } from '../hooks/useHelper'\nimport ContentLayout from '../layouts/content'\nimport LazyLoad from '../components/LazyLoad'\nimport FadeLoad from '../components/FadeLoad'\nimport ArticleCard from '../components/ArticleCard'\nimport { GridAside as Container } from '../components/Styled'\nimport { getLabelCategory } from '../atomic-ui/utils/functions'\nimport { onArticleLink } from '../store/helpers/article'\nimport queries from '../graphql/queries'\n\nconst TITLE = 'Статьи'\nconst START_OFFSET = 6\n\nconst Articles = ({ store }) => {\n  const recall = useHelper()\n\n  return (\n    <ContentLayout\n      title={TITLE}\n      filters={[\n        { type: 'DATEPICKER', placeholder: 'Дата публикации' },\n        {\n          type: 'SELECT',\n          options: store?.categories.map((category) => ({\n            value: category.id,\n            label: getLabelCategory(category.name)\n          }))\n        }\n      ]}\n      options={[\n        { label: 'Категория', value: 'category' },\n        { label: 'Дата публикации', value: 'createdAt' }\n      ]}\n      query={queries.GET_ARTICLES}\n      variables={{ status: 'PUBLISHED' }}\n      store={{ documents: store?.articles }}>\n      {({ documents }) => (\n        <Container>\n          {documents.map((article) => (\n            <FadeLoad key={article.id}>\n              <LazyLoad>\n                <ArticleCard\n                  article={article}\n                  onLink={recall(onArticleLink, { id: article.id, article })}\n                />\n              </LazyLoad>\n            </FadeLoad>\n          ))}\n        </Container>\n      )}\n    </ContentLayout>\n  )\n}\n\nexport async function getServerSideProps() {\n  const client = initializeApollo()\n\n  let articles = []\n  let categories = []\n\n  try {\n    const response = await client.query({\n      query: queries.GET_META_ARTICLES,\n      variables: {\n        offset: 0,\n        limit: START_OFFSET,\n        status: 'PUBLISHED'\n      }\n    })\n\n    if (response && response.data) {\n      articles = response.data.getArticles\n      categories = response.data.getCategories\n    }\n  } catch (err) {\n    console.log(err)\n  }\n\n  return {\n    props: {\n      store: {\n        articles,\n        categories\n      }\n    }\n  }\n}\n\nexport default Articles\n"]},"metadata":{},"sourceType":"module"}