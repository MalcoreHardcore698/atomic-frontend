{"ast":null,"code":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useState } from 'react';\nimport styled, { css } from 'styled-components';\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\nexport const Wrap = styled.figure.withConfig({\n  displayName: \"Image__Wrap\",\n  componentId: \"sc-36ozg1-0\"\n})([\"position:relative;width:100%;height:100%;border-radius:var(--surface-border-radius);cursor:crosshair;span,span > img{display:flex;justify-content:center;align-items:center;flex-grow:1;width:100%;height:100%;}\"]);\nexport const Magnify = styled.div.withConfig({\n  displayName: \"Image__Magnify\",\n  componentId: \"sc-36ozg1-1\"\n})([\"position:absolute !important;top:0;left:0;width:100%;height:100%;z-index:var(--z-12);border-radius:var(--surface-border-radius);background-repeat:no-repeat;opacity:1 !important;cursor:crosshair !important;\", \"\"], ({\n  portal,\n  scale,\n  bottomOffset\n}) => portal && css([\"top:calc(-\", \"% - 15px);border:var(--surface-border);box-shadow:var(--default-shadow);border-radius:2px;transform:scale(\", \");\"], bottomOffset || 100, scale));\nexport const Source = styled(LazyLoadImage).withConfig({\n  displayName: \"Image__Source\",\n  componentId: \"sc-36ozg1-2\"\n})([\"overflow:hidden;border-radius:var(--surface-border-radius);\", \"\"], ({\n  magnify\n}) => magnify && css([\"opacity:1 !important;cursor:crosshair !important;\"]));\nexport const Image = ({\n  src,\n  width,\n  height,\n  portal,\n  magnify,\n  scale,\n  multiply,\n  bottomOffset,\n  ...props\n}) => {\n  const [state, setState] = useState({\n    backgroundImage: `url(${src})`,\n    backgroundPosition: '0% 0%',\n    display: 'none'\n  });\n  const [opacity, setOpacity] = useState(1);\n\n  const handleMouseMove = e => {\n    const {\n      left,\n      top,\n      width,\n      height\n    } = e.target.getBoundingClientRect();\n    const x = (e.pageX - left) / width * 100;\n    const y = (e.pageY - top) / height * 100;\n    setOpacity(0);\n    setState(prev => ({ ...prev,\n      backgroundSize: `${100 * multiply}%`,\n      backgroundPosition: `${x}% ${y}%`,\n      display: 'flex'\n    }));\n  };\n\n  const handleMouseLeave = () => {\n    setOpacity(1);\n    setState(prev => ({ ...prev,\n      backgroundPosition: '0% 0%',\n      backgroundSize: '100%',\n      display: 'none'\n    }));\n  };\n\n  return magnify ? /*#__PURE__*/React.createElement(Wrap, {\n    style: {\n      width,\n      height\n    },\n    onMouseMove: !portal ? handleMouseMove : () => {},\n    onMouseLeave: !portal ? handleMouseLeave : () => {}\n  }, /*#__PURE__*/React.createElement(Magnify, _extends({}, props, {\n    style: { ...state,\n      width,\n      height\n    },\n    bottomOffset: bottomOffset,\n    portal: portal,\n    scale: scale\n  })), /*#__PURE__*/React.createElement(Source, _extends({}, props, {\n    src: src,\n    onMouseMove: portal && handleMouseMove,\n    onMouseLeave: portal && handleMouseLeave,\n    style: {\n      width,\n      height,\n      opacity\n    },\n    effect: 'opacity',\n    magnify: magnify\n  }))) : /*#__PURE__*/React.createElement(Source, _extends({}, props, {\n    src: src,\n    effect: 'opacity',\n    style: {\n      width,\n      height\n    }\n  }));\n};\nImage.defaultProps = {\n  bottomOffset: 125,\n  multiply: 3,\n  scale: 2\n};\nexport default Image;","map":null,"metadata":{},"sourceType":"module"}